!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("cui-light",[],e):"object"==typeof exports?exports["cui-light"]=e():t["cui-light"]=e()}(window,(function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);class s{constructor(){this.autoLightMode=!1,this.scrollThreshold=20,this.resizeThreshold=20,this.plugins={}}fromInit(t){return this.prefix=t.prefix,this.logLevel=t.logLevel,this.cacheSize=t.cacheSize,this.autoLightMode=t.autoLightMode,this.animationTime=t.animationTime,this.animationTimeShort=t.animationTimeShort,this.animationTimeLong=t.animationTimeLong,this.scrollThreshold=t.scrollThreshold,this.resizeThreshold=t.resizeThreshold,this}}class n{constructor(){this.prefix="cui",this.app="$cui",this.logLevel="warning",this.interaction="async",this.animationTime=300,this.animationTimeShort=150,this.animationTimeLong=500,this.cacheSize=500,this.autoLightMode=!1,this.scrollThreshold=20,this.resizeThreshold=20}}class r extends Error{constructor(t,e){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name=t}}class o extends r{constructor(t){super("ItemNotFoundError",t)}}class h extends r{constructor(t){super("ArgumentError",t)}}class a extends r{constructor(t){super("CuiInstanceInitError",t)}}class c extends r{constructor(t){super("CuiScrollSpyOutOfRangeError",t)}}const u="dark",l="animation-progress",d="print",p={close:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 1.9999999,1.9999999 18,18"></path><path d="M 18,1.9999999 1.9999999,18"></path></svg>',accordion:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 5.0000475,7.4490018 10.000024,12.551028 15,7.4490018"></path></svg>',special_menu:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path class="menu_handle_2" d="M 1,10 H 19"></path><path class="menu_handle_1" d="M 1,4.8571429 H 19"></path><path  class="menu_handle_3" d="M 1,15.142857 H 19"></path></svg>',special_fail:'<svg xmlns="http://www.w3.org/2000/svg" class="special-fail" viewBox="0 0 100 100" width="100" height="100"><path class="circle" d="M 50,7.000001 A 43,43 0 0 1 92.999999,50 43,43 0 0 1 50,92.999999 43,43 0 0 1 7.0000011,50 43,43 0 0 1 50,7.000001 Z"></path><path class="arm_1" d="M 28.536809,28.536809 71.342023,71.342023"></path><path class="arm_2" d="M 71.342023,28.536809 28.536809,71.342023"></path></svg>',special_success:'<svg xmlns="http://www.w3.org/2000/svg" class="special-success" viewBox="0 0 100 100" width="100" height="100"><path class="circle" d="M 50,7 A 43,43 0 0 1 93,50 43,43 0 0 1 50,93 43,43 0 0 1 7,50 43,43 0 0 1 50,7 Z"></path><path class="arm" d="M 22.988405,48.234784 36.946233,72.410453 75.516456,33.84023"></path></svg>'},f={light:{base:"--cui-color-light-base",muted:"--cui-color-light-muted",active:"--cui-color-light-active"},dark:{base:"--cui-color-dark-base",muted:"--cui-color-dark-muted",active:"--cui-color-dark-active"},accent:{base:"--cui-color-primary",muted:"--cui-color-primary-muted",active:"--cui-color-primary-active"},secondary:{base:"--cui-color-secondary",muted:"--cui-color-secondary-muted",active:"--cui-color-secondary-active"},success:{base:"--cui-color-success",muted:"--cui-color-success-muted",active:"--cui-color-success-active"},warning:{base:"--cui-color-warning",muted:"--cui-color-warning-muted",active:"--cui-color-warning-active"},error:{base:"--cui-color-error",muted:"--cui-color-error-muted",active:"--cui-color-error-active"}};class v{}v.logLevel="none",v.prefix="cui";const g="resize",w=function*(){let t=0;for(;;)((yield t++)||t>2e5)&&(t=0)}();function m(t,e=!0){return!(null==t||e&&function(t){return("string"==typeof t||!!Array.isArray(t))&&0===t.length}(t))}function y(t,e){if(!m(t)||!m(e))throw new h("Missing argument value");return`${t}-${e}`}function k(t){return new Promise(e=>setTimeout(()=>{e(!0)},t))}function b(t,e,i){return t<e?e:t>i?i:t}function M(t,e,i,s){return null==t||isNaN(t)?s:b(t,e,i)}function E(...t){if(!m(t))return!1;let e=t.length;for(let i=0;i<e;i++)if(!m(t[i]))return!1;return!0}function W(t){return t<=640?"small":t>640&&t<=960?"medium":t>960&&t<=1200?"large":"xlarge"}function T(t){let e=function(t){let e=null;if(m(t)&&t.startsWith("{")&&t.endsWith("}")){try{e=function(t){return t&&t.length>0?JSON.parse(t):{}}(t)}catch(t){console.error(("An exception occured",i="Functions",s="parseJsonString",`[${(new Date).toLocaleString()}][${i}][${s}][An exception occured]`),t)}return e}var i,s;return null}(t.trim());return m(e)||(t.includes(";")||t.includes(":")?(e={},t.split(";").forEach(t=>{let i=t.split(":");2===i.length&&(e[i[0].trim()]=i[1].trim())})):e=t),e}function L(t){if(!m(t))return-1;let e=t.offsetTop-parseInt(x(t,"margin-top"))-parseInt(x(t,"padding-top"))-parseInt(x(t,"border-top-width"));return e<0?t.offsetTop:e}function C(t,e){let i=parseInt(t);return isNaN(i)?e:i}function x(t,e){return m(t)&&m(e)?t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):null:null}function A(t,e,i){return m(t)&&t>=e&&t<=i}function S(t){return(null!=t?t:"")+"-active"}function I(t,e){return E(t,e)?T(t.getAttribute(e)):null}function P(t,e){return m(t)?t.toLowerCase():e}function $(t){return"string"==typeof t}function _(t){return`${m(t)?t:"cui-element"}-${w.next().value}}`}function D(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function O(t,e,i,s){let n=t;n.$handlers={};let r=function(t,e){return e.filter(e=>t.hasAttribute(e))}(t,i);m(r)&&(r.forEach(i=>{let r=e.find(t=>t.attribute===i);if(m(r)){s.styleAppender.append(r.getStyle());let e=r.get(t,s);n.$handlers[r.attribute]=e,n.$handlers[r.attribute].handle()}}),n.$cuid=_(t.tagName))}class z{constructor(t,e){this.level=e,this.component=t,this.id="-"}setLevel(t){this.level=t}setId(t){this.id=t}debug(t,e){"debug"===this.level&&console.log(this.prepString(t,e))}error(t,e){"error"!==this.level&&"debug"!==this.level&&"warning"!==this.level||console.error(this.prepString(t,e))}warning(t,e){"warning"!==this.level&&"debug"!==this.level||console.warn(this.prepString(t,e))}exception(t,e){console.error(this.prepString(`An exception occured: ${t.name}: ${t.message}`,e)),"debug"===this.level&&console.exception(t.stack)}performance(t,e){if("debug"!==this.level)return;let i=Date.now();t(),console.log(this.prepString(`Performance measure: ${Date.now()-i}ms`,e))}prepString(t,e){return`[${(new Date).toLocaleString()}][${this.component}][${null!=e?e:"-"}][${this.id}][${t}]`}}class q{static get(t,e){return new z(t,null!=e?e:v.logLevel)}}var N,B=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class H{constructor(t){N.set(this,void 0),function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");e.set(t,i)}(this,N,t)}performAction(t,e,i){return function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){return new Promise(s=>{B(this,N).mutate(()=>{e.add(t),t.classList.add(l),setTimeout(()=>{B(this,N).mutate(()=>{e.remove(t),t.classList.remove(l),s(!0)},null)},i)},null)})}))}}N=new WeakMap;var K,j,R=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},F=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class U{constructor(t){K.set(this,void 0),R(this,K,t)}add(t,e){E(t,F(this,K))&&!t.classList.contains(F(this,K))&&t.classList.add(F(this,K))}remove(t,e){E(t,F(this,K))&&t.classList.contains(F(this,K))&&t.classList.remove(F(this,K))}toggle(t,e){E(t,F(this,K))&&(t.classList.contains(F(this,K))?t.classList.add(F(this,K)):t.classList.remove(F(this,K)))}}K=new WeakMap;class V{constructor(t){j.set(this,void 0),R(this,j,t)}add(t,e){switch(F(this,j)){case"dark-mode":e.setLightMode("dark");break;case"light-mode":e.setLightMode("light")}}remove(t,e){switch(F(this,j)){case"dark-mode":e.setLightMode("light");break;case"light-mode":e.setLightMode("dark")}}toggle(t,e){switch(F(this,j)){case"dark-mode":case"light-mode":this.setDarkMode(e)}}setDarkMode(t){"dark"===t.getLightMode()?t.setLightMode("light"):t.setLightMode("dark")}}j=new WeakMap;class J{constructor(){}add(t,e){}remove(t,e){}toggle(t,e){}}class Z{static get(t){if(!m(t))return new J;switch(t[0]){case".":return new U(t.substring(1));case"~":return new V(t.substring(1));default:return new U(t)}}}var G,Q,X,Y,tt,et,it=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},st=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},nt=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class rt{constructor(t,e){G.set(this,void 0),Q.set(this,void 0),X.set(this,void 0),Y.set(this,void 0),tt.set(this,void 0),et.set(this,void 0),st(this,G,t),st(this,Q,!1),st(this,X,q.get("ElementManager")),st(this,tt,e),st(this,Y,Date.now()),st(this,et,new H(e.interactions))}toggleClass(t){return it(this,void 0,void 0,(function*(){return!!m(t)&&this.call(e=>{e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)},"toggleClass")}))}toggleClassAs(t){return it(this,void 0,void 0,(function*(){return!!m(t)&&this.call(e=>{let i=e.classList;nt(this,tt).interactions.fetch(()=>{i.contains(t)?nt(this,tt).interactions.mutate(i.remove,i,t):nt(this,tt).interactions.mutate(i.add,i,t)},this)},"toggleClassAs")}))}setClass(t){return it(this,void 0,void 0,(function*(){return!!m(t)&&this.call(e=>{e.classList.contains(t)||e.classList.add(t)},"setClass")}))}setClassAs(t){return it(this,void 0,void 0,(function*(){return!!m(t)&&this.call(e=>{let i=e.classList;nt(this,tt).interactions.fetch(()=>{i.contains(t)||nt(this,tt).interactions.mutate(i.add,i,t)},this)},"setClassAs")}))}removeClass(t){return it(this,void 0,void 0,(function*(){return!!m(t)&&this.call(e=>{e.classList.contains(t)&&e.classList.remove(t)},"removeClass")}))}removeClassAs(t){return it(this,void 0,void 0,(function*(){return!!m(t)&&this.call(e=>{let i=e.classList;nt(this,tt).interactions.fetch(()=>{i.contains(t)&&nt(this,tt).interactions.mutate(i.remove,i,t)},this)},"removeClass")}))}getAttribute(t){return m(t)?nt(this,G).reduce((e,i)=>(i.hasAttribute(t)?e.push(i.getAttribute(t)):e.push(null),e),[]):null}setAttribute(t,e){return it(this,void 0,void 0,(function*(){return!!m(t)&&this.call(i=>{i.setAttribute(t,null!=e?e:"")},"setAttribute")}))}setAttributeAs(t,e){return it(this,void 0,void 0,(function*(){return!!m(t)&&this.call(i=>{nt(this,tt).interactions.mutate(i.setAttribute,i,t,null!=e?e:"")},"setAttributeAs")}))}removeAttribute(t){return it(this,void 0,void 0,(function*(){return!!m(t)&&this.call(e=>{e.removeAttribute(t)},"removeAttribute")}))}removeAttributeAs(t){return it(this,void 0,void 0,(function*(){return!!m(t)&&this.call(e=>{nt(this,tt).interactions.mutate(e.removeAttribute,e,t)},"removeAttributeAs")}))}toggleAttribute(t,e){return it(this,void 0,void 0,(function*(){return!!m(t)&&this.call(i=>{i.hasAttribute(t)?i.removeAttribute(t):i.setAttribute(t,null!=e?e:"")},"toggleAttribute")}))}toggleAttributeAs(t,e){return it(this,void 0,void 0,(function*(){return!!m(t)&&this.call(i=>{nt(this,tt).interactions.fetch(()=>{i.hasAttribute(t)?nt(this,tt).interactions.mutate(i.removeAttribute,i,t):nt(this,tt).interactions.mutate(i.setAttribute,i,t,null!=e?e:"")},this)},"toggleAttributeAs")}))}click(t){return it(this,void 0,void 0,(function*(){return!!m(t)&&this.call(e=>{e.addEventListener("click",t)},"click")}))}event(t,e){return it(this,void 0,void 0,(function*(){return!(!m(t)||!m(e))&&this.call(i=>{i.addEventListener(t,e)},"event")}))}call(t,e){return it(this,void 0,void 0,(function*(){return nt(this,Q)&&nt(this,X).error("Element is locked",e),this.lock(),nt(this,G).forEach((e,i)=>{t(e,i)}),this.unlock(),!0}))}animate(t,e){return it(this,void 0,void 0,(function*(){if(!m(t))return!1;const i=null!=e?e:nt(this,tt).setup.animationTime;return this.call(e=>{this.change(()=>{e.classList.add(t),e.classList.add(l),setTimeout(()=>{this.change(()=>{e.classList.remove(t),e.classList.remove(l)})},i)})})}))}open(t,e,i){return it(this,void 0,void 0,(function*(){if(!E(t,e))return!1;const s=null!=i?i:nt(this,tt).setup.animationTime,n=new U(e);return this.call(e=>{nt(this,et).performAction(e,n,s).then(()=>{e.classList.add(t)})})}))}close(t,e,i){return it(this,void 0,void 0,(function*(){if(!E(t,e))return!1;const s=null!=i?i:nt(this,tt).setup.animationTime,n=new U(e);return this.call(e=>{nt(this,et).performAction(e,n,s).then(()=>{e.classList.remove(t)})})}))}read(t,...e){nt(this,tt).interactions.fetch(t,this,...e)}change(t,...e){nt(this,tt).interactions.mutate(t,this,...e)}elements(){return nt(this,G)}count(){return nt(this,G).length}lock(){st(this,Q,!0)}unlock(){st(this,Q,!1)}isLocked(){return nt(this,Q)}refresh(){return Date.now()-nt(this,Y)<36e4}}G=new WeakMap,Q=new WeakMap,X=new WeakMap,Y=new WeakMap,tt=new WeakMap,et=new WeakMap;var ot,ht,at,ct,ut,lt,dt,pt=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ft=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class vt{constructor(t,e){ot.set(this,void 0),ht.set(this,void 0),at.set(this,void 0),ct.set(this,void 0),ut.set(this,void 0),lt.set(this,void 0),dt.set(this,void 0),pt(this,ht,null),pt(this,ct,t),pt(this,ot,q.get("CuiMutationObserver")),this.plugins=null,pt(this,ut,[]),pt(this,lt,[]),pt(this,dt,e)}setPlugins(t){return this.plugins=t,this}setComponents(t){return pt(this,ut,t),this}setAttributes(t){return pt(this,at,{attributes:!0,subtree:!0,attributeFilter:t}),pt(this,lt,t),this}start(){return ft(this,ot).debug("Starting"),pt(this,ht,new MutationObserver(this.mutationCallback)),ft(this,ht).observe(ft(this,ct),ft(this,at)),ft(this,ot).debug("Started"),this}stop(){return ft(this,ot).debug("Stopping"),null!==ft(this,ht)&&ft(this,ot).debug("Observer available"),ft(this,ht).disconnect(),pt(this,ht,null),ft(this,ot).debug("Stopped"),this}mutationCallback(t,e){t.forEach(t=>{switch(t.type){case"attributes":const e=t.target;E(e.$handlers,e.$handlers[t.attributeName])&&e.$handlers[t.attributeName].refresh();break;case"childList":this.handleChildListMutation(t)}m(this.plugins)&&this.plugins.onMutation(t).then(()=>{ft(this,ot).debug("Mutation performed on plugins")})})}handleChildListMutation(t){const e=t.addedNodes.length,i=t.removedNodes.length;e>0?(ft(this,ot).debug("Registering added nodes: "+e),this.handleAddedNodes(t.addedNodes)):i>0&&(ft(this,ot).debug("REmoving nodes: "+i),this.handleRemovedNodes(t.removedNodes))}handleAddedNodes(t){t.forEach(t=>{O(t,ft(this,ut),ft(this,lt),ft(this,dt))})}handleRemovedNodes(t){t.forEach(t=>{ft(this,ot).debug("Removing")})}}ot=new WeakMap,ht=new WeakMap,at=new WeakMap,ct=new WeakMap,ut=new WeakMap,lt=new WeakMap,dt=new WeakMap;var gt,wt,mt,yt,kt,bt,Mt,Et,Wt=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Tt=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Lt{constructor(t,e,i){gt.set(this,void 0),wt.set(this,void 0),mt.set(this,void 0),yt.set(this,void 0),kt.set(this,void 0),bt.set(this,void 0),Mt.set(this,void 0),Et.set(this,void 0),Wt(this,gt,t),Wt(this,wt,`.${e}-toast`),Wt(this,mt,e+"-toast"),Wt(this,yt,e+"-active"),Wt(this,kt,i),Wt(this,bt,!1),Wt(this,Mt,e+"-toast-animation-in"),Wt(this,Et,e+"-toast-animation-out")}show(t){return function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(Tt(this,bt))return!1;Wt(this,bt,!0);let e=document.querySelector(Tt(this,wt));return m(e)||(e=document.createElement("div"),e.classList.add(Tt(this,mt)),document.body.appendChild(e)),Tt(this,gt).mutate(()=>{e.innerHTML=t,e.classList.add(l),e.classList.add(Tt(this,Mt))},this),yield k(Tt(this,kt)),Tt(this,gt).mutate(()=>{e.classList.remove(l),e.classList.remove(Tt(this,Mt)),e.classList.add(Tt(this,yt))},this),yield k(3e3),Tt(this,gt).mutate(()=>{e.classList.add(l),e.classList.add(Tt(this,Et))},this),setTimeout(()=>{Tt(this,gt).mutate(()=>{e.classList.remove(l),e.classList.remove(Tt(this,Et)),e.classList.remove(Tt(this,yt))},this),Wt(this,bt,!1)},Tt(this,kt)),!0}))}}gt=new WeakMap,wt=new WeakMap,mt=new WeakMap,yt=new WeakMap,kt=new WeakMap,bt=new WeakMap,Mt=new WeakMap,Et=new WeakMap;var Ct,xt,At,St,It,Pt=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},$t=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},_t=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Dt{constructor(t){Ct.set(this,void 0),xt.set(this,void 0),At.set(this,void 0),St.set(this,void 0),It.set(this,void 0),$t(this,It,t),$t(this,xt,q.get("CollectionManager"))}setElements(t){$t(this,Ct,t)}setToggle(t){$t(this,St,t)}addAnimationClass(t,e,i,s){e.classList.add(l),t.classList.add(s),e.classList.add(i)}setFinalClasses(t,e,i,s){e.classList.remove(l),t.classList.remove(s),e.classList.remove(i),t.classList.remove(_t(this,St)),e.classList.add(_t(this,St))}verifyIndex(t,e,i){return t>=0&&t!==e&&t<i}setCurrent(t,e){return Pt(this,void 0,void 0,(function*(){return this.lock(),_t(this,xt).debug(`Switching index from: ${e} to ${t}`),e>-1&&_t(this,Ct)[e].classList.remove(_t(this,St)),_t(this,Ct)[t].classList.add(_t(this,St)),this.unlock(),!0}))}setCurrentWithAnimation(t,e,i,s,n){return Pt(this,void 0,void 0,(function*(){this.lock(),_t(this,xt).debug(`Switching index from: ${n} to ${t}`);const r=_t(this,Ct)[n],o=_t(this,Ct)[t];return _t(this,It).mutate(this.addAnimationClass,this,r,o,e,i),setTimeout(()=>{_t(this,It).mutate(this.setFinalClasses,this,r,o,e,i),this.unlock()},s),!0}))}getCurrentIndex(){if(!m(_t(this,St)))return-1;let t=this.count();for(let e=0;e<t;e++)if(_t(this,Ct)[e].classList.contains(_t(this,St)))return e;return-1}elements(){return _t(this,Ct)}check(){return _t(this,At)?(_t(this,xt).warning("Object locked. Operation in progress","Check"),!1):m(_t(this,St))?!(this.count()<=0&&(_t(this,xt).warning("Elements list is empty","Check"),1)):(_t(this,xt).warning("Toggle is not set. Call setToggleClass","Check"),!1)}count(){return _t(this,Ct)?_t(this,Ct).length:-1}lock(){$t(this,At,!0)}unlock(){$t(this,At,!1)}}Ct=new WeakMap,xt=new WeakMap,At=new WeakMap,St=new WeakMap,It=new WeakMap;var Ot,zt,qt,Nt=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},Bt=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ht=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Kt{constructor(t,e){Ot.set(this,void 0),zt.set(this,void 0),qt.set(this,void 0),Bt(this,Ot,q.get("CollectionManager")),Bt(this,qt,new Dt(e)),Ht(this,qt).setElements(t),Bt(this,zt,Date.now())}setToggle(t){Ht(this,qt).setToggle(t)}setElements(t){Ht(this,qt).setElements(t)}click(t){Ht(this,qt).elements().forEach((e,i)=>{e.addEventListener("click",()=>{this.set(i).then(()=>{t&&t(e,i)})})})}next(){return Nt(this,void 0,void 0,(function*(){if(!Ht(this,qt).check())return!1;let t=Ht(this,qt).getCurrentIndex()+1;return this.set(t>=this.length()?0:t)}))}previous(){return Nt(this,void 0,void 0,(function*(){if(!Ht(this,qt).check())return!1;let t=Ht(this,qt).getCurrentIndex()-1;return this.set(t<0?this.length()-1:t)}))}set(t){return Nt(this,void 0,void 0,(function*(){let e=Ht(this,qt).getCurrentIndex();return!(!Ht(this,qt).check()||!Ht(this,qt).verifyIndex(t,e,this.length()))&&Ht(this,qt).setCurrent(t,e)}))}setWithAnimation(t,e,i,s){return Nt(this,void 0,void 0,(function*(){let n=Ht(this,qt).getCurrentIndex();return!(!Ht(this,qt).check()||!Ht(this,qt).verifyIndex(t,n,this.length()))&&Ht(this,qt).setCurrentWithAnimation(t,e,i,s,n)}))}getCurrentIndex(){return Ht(this,qt).getCurrentIndex()}length(){return Ht(this,qt).count()}refresh(){return this.length()>0&&Date.now()-Ht(this,zt)>36e4}}Ot=new WeakMap,zt=new WeakMap,qt=new WeakMap;var jt;class Rt{constructor(){this.isScheduled=!1,jt.set(this,void 0),this.raf=window.requestAnimationFrame.bind(window),this.writes=[],this.reads=[],function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");e.set(t,i)}(this,jt,5)}mutate(t,e,...i){this.reads.push(this.createTask(t,e,...i)),this.schedule()}fetch(t,e,...i){this.writes.push(this.createTask(t,e,...i)),this.schedule()}createTask(t,e,...i){return e||i?t.bind(e,...i):t}run(t){let e=null;for(;e=t.shift();)e()}schedule(t){if(!this.isScheduled){if(this.isScheduled=!0,t>=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(this,jt))throw new Error("Fast Dom limit reached");this.raf(this.flush.bind(this,t))}}flush(t){let e=null!=t?t:0,i=null,s=this.writes,n=this.reads;try{this.run(n),this.run(s)}catch(t){i=t,console.error(t)}this.isScheduled=!1,i&&this.schedule(e+1),(this.writes.length||this.reads.length)&&this.schedule(t+1)}}jt=new WeakMap;class Ft{constructor(){this.isRunning=!1,this.tasks=[],this.raf=window.requestAnimationFrame.bind(window)}mutate(t,e,...i){this.tasks.push(this.createTask(t,e,...i)),this.schedule()}fetch(t,e,...i){this.tasks.push(this.createTask(t,e,...i)),this.schedule()}schedule(){this.isRunning||(this.isRunning=!0,this.raf(this.flush.bind(this)))}flush(){let t=null;for(;t=this.tasks.shift();)try{t()}catch(t){}this.isRunning=!1}createTask(t,e,...i){return e||i?t.bind(e,...i):t}}var Ut,Vt,Jt=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Zt=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Gt{constructor(t){Ut.set(this,void 0),Vt.set(this,void 0),Jt(this,Ut,[]),Jt(this,Vt,[]),t&&t.forEach(t=>{if(!m(t.key))throw Jt(this,Ut,[]),Jt(this,Vt,[]),new h("Key is empty");this.add(t.key,t.value)})}add(t,e){if(this.throwOnEmptyKey(t),this.containsKey(t))throw new Error("Key already exists");Zt(this,Ut).push(t),Zt(this,Vt).push(e)}remove(t){if(!m(t))return;let e=Zt(this,Ut).indexOf(t);e>=0&&(Zt(this,Ut).splice(e,1),Zt(this,Vt).splice(e,1))}get(t){this.throwOnEmptyKey(t);let e=this.indexOf(t);if(!(e<0))return Zt(this,Vt)[e]}containsKey(t){return m(t)&&this.indexOf(t)>=0}keys(){return Zt(this,Ut)}values(){return Zt(this,Vt)}indexOf(t){return m(t)?Zt(this,Ut).indexOf(t):-1}update(t,e){this.throwOnEmptyKey(t);let i=this.indexOf(t);if(i<0)throw new o(`Item with key [${t}] not found`);Zt(this,Vt)[i]=e}clear(){Jt(this,Vt,[]),Jt(this,Ut,[])}throwOnEmptyKey(t){if(!m(t))throw new h("Key is empty")}}Ut=new WeakMap,Vt=new WeakMap;var Qt,Xt,Yt=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},te=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ee{constructor(t){Qt.set(this,void 0),Xt.set(this,void 0),Yt(this,Qt,new Gt),Yt(this,Xt,null!=t?t:500)}put(t,e){m(t)&&(this.has(t)?te(this,Qt).update(t,e):(this.clean(),te(this,Qt).add(t,e)))}get(t){if(!m(t))return null;if(this.has(t)){let e=te(this,Qt).get(t);if(e.refresh())return e;te(this,Qt).remove(t)}return null}has(t){return!!m(t)&&te(this,Qt).containsKey(t)}remove(t){return!!m(t)&&!!this.has(t)&&(te(this,Qt).remove(t),!0)}clear(){te(this,Qt).clear()}clean(){te(this,Qt).keys().length>=te(this,Xt)&&te(this,Qt).remove(te(this,Qt).keys()[0])}}Qt=new WeakMap,Xt=new WeakMap;var ie,se,ne,re=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},oe=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class he{constructor(t){ie.set(this,void 0),se.set(this,void 0),ne.set(this,void 0),re(this,ie,{}),re(this,ne,t),re(this,se,q.get("CuiEventBus"))}on(t,e,i,s){if(!E(t,e))throw new h("Missing argument");let n=this.prepareEventId(i);return oe(this,se).debug(`Attaching new event: [${t}] for: [${n}]`),oe(this,ie)[t]||(oe(this,ie)[t]={}),oe(this,ie)[t][n]={ctx:i,callback:e,$cuid:this.getCuid(s)},n}detach(t,e,i){if(!E(t,e))throw new h("Missing argument");let s=oe(this,ie)[t],n=e.getId();oe(this,se).debug(`Detaching item: [${n}] from [${t}]`),this.isAttached(s,n)&&delete s[n]}detachAll(t){m(t)&&oe(this,ie)[t]?delete oe(this,ie)[t]:oe(this,se).error("Event name is missing or incorrect","detachAll")}emit(t,e,...i){return function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(!m(t))throw new h("Event name is incorrect");return oe(this,se).debug(`Emit: [${t}]`),yield oe(this,ne).handle(oe(this,ie)[t],e,i),!0}))}isSubscribing(t,e,i){let s=oe(this,ie)[t];return this.isAttached(s,e.getId(),i)}isAttached(t,e,i){return m(i)?m(t)&&m(e)&&m(t[e])&&m(t[e].$cuid===i.$cuid):m(t)&&m(e)&&m(t[e])}getCuid(t){return m(t)?t.$cuid:null}prepareEventId(t){return E(t)?t.getId():function(){let t=D(1,1e3),e=D(1,100);return`${Math.floor(Math.random()*e)}-${Math.floor(t)}`}()}}ie=new WeakMap,se=new WeakMap,ne=new WeakMap;var ae,ce=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},ue=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};new WeakMap,new WeakMap;class le extends class{constructor(){this.queue=[],this.isBusy=!1}idMatches(t,e){return!m(t)||m(t)&&t===e}}{constructor(t){super(),ae.set(this,void 0),function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");e.set(t,i)}(this,ae,t)}handle(t,e,i){return ce(this,void 0,void 0,(function*(){m(t)&&(this.queue.push({events:t,cuid:e,args:i}),this.isBusy||(this.isBusy=!0,this.perform(),this.queue.length>0&&this.perform(),this.isBusy=!1))}))}perform(){return ce(this,void 0,void 0,(function*(){let t=this.queue.shift(),e=[];for(let i in t.events){let s=t.events[i];this.idMatches(t.cuid,s.$cuid)&&e.push(ue(this,ae).execute(s.callback,s.ctx,t.args))}return Promise.all(e)}))}}ae=new WeakMap;class de{execute(t,e,i){return function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){i=null!=i?i:[],m(e)?t.apply(e,i):t(...i)}))}}var pe;class fe{constructor(t){pe.set(this,void 0),function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");e.set(t,i)}(this,pe,t)}append(t){if(m(t)){const e=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style"),s=document.createTextNode(t);i.type="text/css",i.appendChild(s),e.appendChild(i)}return!0}}pe=new WeakMap;var ve,ge,we,me,ye=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ke=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class be{constructor(t){ve.set(this,void 0),ge.set(this,void 0),we.set(this,15),me.set(this,15),ye(this,ve,document.documentElement),ye(this,ge,t)}setAppBackground(t,e){this.setPropertyIn("--cui-color-light-app-background",t.toCssString()),this.setPropertyIn("--cui-color-dark-app-background",e.toCssString())}setComponentBackground(t,e){this.setPropertyIn("--cui-color-light-background",t.toCssString()),this.setPropertyIn("--cui-color-dark-background ",e.toCssString())}setBordersColors(t,e){this.setPropertyIn("--cui-color-light-border",t.toCssString()),this.setPropertyIn("--cui-color-dark-border",e.toCssString())}setColor(t,e){var i,s;const n=f[t],r=e.base;if(!m(n)||!m(r))return;const o=null!==(i=e.muted)&&void 0!==i?i:r.clone().lighten(ke(this,we)),h=null!==(s=e.active)&&void 0!==s?s:r.clone().darken(ke(this,me));ke(this,ge).mutate(()=>{this.setProperty(n.base,r.toCssString()),this.setProperty(n.active,h.toCssString()),this.setProperty(n.muted,o.toCssString())},this)}setLightenFactor(t){ye(this,we,b(t,0,100))}setDarkenFactor(t){ye(this,me,b(t,0,100))}setProperty(t,e){ke(this,ve).style.setProperty(t,e)}setPropertyIn(t,e){E(e,t)&&ke(this,ge).mutate(this.setProperty,this,t,e)}}ve=new WeakMap,ge=new WeakMap,we=new WeakMap,me=new WeakMap;var Me,Ee,We,Te,Le,Ce,xe,Ae=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Se=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ie{constructor(t,e){Me.set(this,void 0),Ee.set(this,void 0),We.set(this,void 0),Te.set(this,void 0),Le.set(this,void 0),Ce.set(this,void 0),xe.set(this,void 0),Ae(this,Me,[]),Ae(this,Ee,[]),Ae(this,We,window.innerWidth),Ae(this,Te,!1),Ae(this,Le,W(window.innerWidth)),Ae(this,Ce,null!=e?e:0),Ae(this,xe,t)}observe(t){Se(this,Me).findIndex(e=>e===t)<0&&Se(this,Me).push(t)}unobserve(t){let e=Se(this,Me).findIndex(e=>e===t);e>=0&&Se(this,Me).splice(e,1)}connect(){window.addEventListener("resize",this.listener.bind(this))}disconnect(){window.removeEventListener("resize",this.listener.bind(this))}listener(t){if(Se(this,Te))return;Ae(this,Te,!0);const e=window.innerWidth-Se(this,We);if(Math.abs(e)>=Se(this,Ce)){const t=W(window.innerWidth);if(t!==Se(this,Le)){const e={current:t,previous:Se(this,Le),width:window.innerWidth,height:window.innerHeight,timestamp:Date.now()};Se(this,xe).emit(g,null,e),Se(this,Me).length>0&&(Ae(this,Ee,[]),Se(this,Me).forEach(t=>{Se(this,Ee).push(t.resize(e))}),Promise.all(Se(this,Ee)),Ae(this,Ee,[])),Ae(this,Le,t)}}Ae(this,Te,!1)}}Me=new WeakMap,Ee=new WeakMap,We=new WeakMap,Te=new WeakMap,Le=new WeakMap,Ce=new WeakMap,xe=new WeakMap;var Pe;class $e{constructor(t){Pe.set(this,void 0),this.setup=(new s).fromInit(t),this.interactions=class{static get(t){switch(t){case"async":return new Rt;default:return new Ft}}}.get(t.interaction),this.cache=new ee(this.setup.cacheSize),this.bus=new he(new le(new de)),this.colors=new be(this.interactions),this.styleAppender=new fe(this.interactions),function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");e.set(t,i)}(this,Pe,new Ie(this.bus,this.setup.resizeThreshold)),function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(this,Pe).connect()}setLightMode(t){const e=y(this.setup.prefix,u),i=document.body.classList;"dark"!==t||i.contains(e)?"light"===t&&i.contains(e)&&this.interactions.mutate(()=>{i.remove(e)},this):this.interactions.mutate(()=>{i.add(e)},this)}getLightMode(){const t=y(this.setup.prefix,u);return document.body.classList.contains(t)?"dark":"light"}setPrintMode(t){const e=y(this.setup.prefix,d),i=document.body.classList;t&&!i.contains(e)?i.add(e):!t&&i.contains(e)&&i.remove(e)}isPrintMode(){const t=y(this.setup.prefix,d);return document.body.classList.contains(t)}setProperty(t,e){let i=function(t,e){return m(t)?t.replace("{prefix}",null!=e?e:""):t}(t,this.setup.prefix);document.documentElement.style.setProperty(i,e)}}Pe=new WeakMap;var _e,De,Oe,ze=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},qe=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ne{constructor(t){_e.set(this,void 0),De.set(this,void 0),Oe.set(this,void 0),ze(this,_e,null!=t?t:[]),ze(this,Oe,q.get("CuiPluginManager"))}init(t){qe(this,Oe).debug("Plugins initialization started: "+qe(this,_e).length),ze(this,De,qe(this,_e).filter(t=>m(t.mutation))),qe(this,_e).forEach(e=>{e.init(t),t.setup.plugins[e.description]=e.setup}),qe(this,Oe).debug("Plugins have been initialized")}get(t){if(m(t))return qe(this,_e).find(e=>e.name===t)}onMutation(t){return function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){let e=[];return qe(this,De).forEach(i=>{e.push(i.mutation(t))}),!(yield Promise.all(e)).find(t=>{})}))}}_e=new WeakMap,De=new WeakMap,Oe=new WeakMap;var Be,He,Ke,je,Re,Fe=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ue=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ve{constructor(t,e,i){Be.set(this,void 0),He.set(this,void 0),Ke.set(this,void 0),je.set(this,void 0),Re.set(this,void 0),v.prefix=t.prefix,v.logLevel=t.logLevel,this.plugins=new Ne(e),Fe(this,Re,null!=i?i:[]),Fe(this,je,new $e(t)),Fe(this,Be,q.get("CuiInstance"))}init(){if(!m(window.MutationObserver))throw new a("Mutation observer does not exists");Fe(this,Ke,new Lt(Ue(this,je).interactions,Ue(this,je).setup.prefix,Ue(this,je).setup.animationTimeLong));const t=Ue(this,Re).map(t=>t.attribute),e=m(t)?document.querySelectorAll(m(i=t)?`[${i.join("],[")}]`:""):null;var i;return m(e)&&(Ue(this,Be).debug(`Initiating ${e.length} elements`),e.forEach(e=>{O(e,Ue(this,Re),t,Ue(this,je))})),this.plugins.init(Ue(this,je)),E(Ue(this,Re),t)&&(Fe(this,He,new vt(document.body,Ue(this,je))),Ue(this,He).setComponents(Ue(this,Re)).setAttributes(t),Ue(this,He).setPlugins(this.plugins),Ue(this,He).start()),Ue(this,je).bus.emit("instance-initialized",null),this}finish(){Ue(this,He).stop(),Ue(this,je).bus.emit("instance-finished",null)}get(t){const e=Ue(this,je).cache.get(t);if(m(e))return e;const i=this.all(t);if(!i)return;const s=new rt(i,Ue(this,je));return Ue(this,je).cache.put(t,s),s}collection(t){const e=Ue(this,je).cache.get(t);if(m(e))return e;const i=this.all(t);if(!m(i))return;let s=new Kt(i,Ue(this,je).interactions);return Ue(this,je).cache.put(t,s),s}toast(t){return function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){return!!m(t)&&Ue(this,Ke).show(t)}))}select(t){return document.querySelector(t)}all(t){const e=document.querySelectorAll(t);if(m(e))return[...e]}getUtils(){return Ue(this,je)}on(t,e,i,s){E(t,e)||Ue(this,Be).error("Incorrect arguments","on"),Ue(this,je).bus.on(t,e,i,s)}}Be=new WeakMap,He=new WeakMap,Ke=new WeakMap,je=new WeakMap,Re=new WeakMap;var Je,Ze,Ge,Qe,Xe=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ye=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ti{constructor(t){Je.set(this,void 0),Ze.set(this,void 0),Ge.set(this,void 0),Qe.set(this,void 0),Xe(this,Je,t),Xe(this,Ge,!1)}setCallback(t){Xe(this,Ze,t)}isInProgress(){return Ye(this,Qe)}attach(){window.matchMedia&&!Ye(this,Ge)&&Ye(this,Je)&&(window.matchMedia(Ye(this,Je)).addEventListener("change",this.event.bind(this)),Xe(this,Ge,!0))}detach(){Ye(this,Ge)&&(window.matchMedia(Ye(this,Je)).removeEventListener("change",this.event.bind(this)),Xe(this,Ge,!1))}event(t){if(!Ye(this,Qe)){Xe(this,Qe,!0);try{Ye(this,Ze).call(this,t)}catch(t){console.error(t)}finally{Xe(this,Qe,!1)}}}}Je=new WeakMap,Ze=new WeakMap,Ge=new WeakMap,Qe=new WeakMap;var ei,ii,si=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ni=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ri{constructor(t){this.description="Dark vs Light mode auto switcher",this.name="auto-light",ei.set(this,void 0),ii.set(this,void 0),this.description="CuiAutoLightModePlugin",this.setup=t}init(t){si(this,ii,t),this.setup.autoLight&&"dark"==(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")&&ni(this,ii).setLightMode("dark"),si(this,ei,new ti("(prefers-color-scheme: dark)")),ni(this,ei).setCallback(this.onChange.bind(this)),ni(this,ei).attach()}destroy(){ni(this,ei).detach()}onChange(t){var e;let i=ni(this,ii).setup.plugins[this.description];null!==(e=null==i?void 0:i.autoLight)&&void 0!==e&&e&&(t.matches?ni(this,ii).setLightMode("dark"):ni(this,ii).setLightMode("light"))}}ei=new WeakMap,ii=new WeakMap;class oi{constructor(t,e,i){this._log=q.get(t),this.utils=i,this.element=e,this.cuid=e.$cuid}mutate(t,...e){this.utils.interactions.mutate(t,this,...e)}fetch(t,...e){this.utils.interactions.fetch(t,this,...e)}getEventName(t){return[t,this.cuid].join("-")}emitEvent(t,...e){this.utils.bus.emit(t,this.cuid,...e)}onEvent(t,e){this.utils.bus.on(t,e,this)}getId(){return this.cuid}}var hi,ai,ci,ui,li,di=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},pi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class fi{constructor(t){this.attribute=(null!=t?t:"cui")+"-icon"}getStyle(){return null}get(t,e){return new vi(t,e,this.attribute)}}class vi extends oi{constructor(t,e,i){super("CuiIconHandler",t,e),hi.set(this,void 0),ai.set(this,void 0),di(this,hi,null),di(this,ai,i)}handle(){const t=this.element.getAttribute(pi(this,ai));if(t===pi(this,hi))return;const e=t?p[t]:null;if(!e)return;const i=new gi(e).build(),s=this.element.querySelector("svg");m(s)&&s.remove(),this.element.childNodes.length>0?this.mutate(this.insertBefore,i):this.mutate(this.appendChild,i)}refresh(){}destroy(){}insertBefore(t){this.element.insertBefore(t,this.element.firstChild)}appendChild(t){this.element.appendChild(t)}}hi=new WeakMap,ai=new WeakMap;class gi{constructor(t){ci.set(this,void 0),ui.set(this,void 0),li.set(this,void 0),di(this,ci,t),di(this,ui,1)}setStyle(t){return di(this,li,t),this}setScale(t){return di(this,ui,t),this}build(){let t=function(t){if(!m(t))return null;let e=document.createElement("template");return e.innerHTML=t,e.content.children.length>0?e.content.children[0]:null}(pi(this,ci));return m(t)&&pi(this,ui)&&(new wi).append(t,pi(this,ui)),t}}ci=new WeakMap,ui=new WeakMap,li=new WeakMap;class wi{append(t,e){let i=t.hasAttribute("width")?parseInt(t.getAttribute("width")):20,s=t.hasAttribute("height")?parseInt(t.getAttribute("height")):20;t.setAttribute("width",(i*e).toString()),t.setAttribute("height",(s*e).toString())}}var mi,yi,ki,bi,Mi,Ei,Wi,Ti,Li=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ci=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class xi{constructor(){mi.set(this,void 0),this.attribute="circle-progress",p.special_circle_progress='<svg xmlns="http://www.w3.org/2000/svg"  class="circle-progress" viewBox="0 0 100 100" width="100" height="100"><path class="circle-progress-path" d="M 50,5.3660047 A 44.867708,44.633994 0 0 1 94.867709,49.999997 44.867708,44.633994 0 0 1 50,94.633995 44.867708,44.633994 0 0 1 5.1322908,50.000001 44.867708,44.633994 0 0 1 50,5.3660047"></path></svg>'}getStyle(){return null}get(t,e){return new Ai(t,e,this.attribute)}}mi=new WeakMap;class Ai extends oi{constructor(t,e,i){super("CuiCircleHandler",t,e),yi.set(this,void 0),ki.set(this,void 0),bi.set(this,void 0),Mi.set(this,void 0),Ei.set(this,void 0),Wi.set(this,void 0),Ti.set(this,void 0),Li(this,ki,Li(this,bi,0)),Li(this,Mi,null),Li(this,Ei,-1),Li(this,Ti,i)}observables(){return null}handle(){if(!m(Ci(this,yi))){const t=new gi(p.special_circle_progress).build(),e=this.element.querySelector("svg");m(e)&&e.remove(),this.element.appendChild(t),Li(this,Mi,this.element.querySelector(".circle-progress-path")),Li(this,bi,Ci(this,Mi).getTotalLength()),Li(this,ki,Ci(this,bi)/100),Li(this,yi,!0)}this.fetch(this.readStyle)}refresh(){this.fetch(this.readStyle)}destroy(){}updateStyle(t){Ci(this,Mi).style.strokeDashoffset=t}readStyle(){const t=this.element.hasAttribute(Ci(this,Ti))?parseInt(this.element.getAttribute(Ci(this,Ti))):0;if(t===Ci(this,Ei))return;Li(this,Ei,t);const e=b(t,0,100);this.mutate(this.updateStyle,Ci(this,bi)-Ci(this,ki)*e)}}yi=new WeakMap,ki=new WeakMap,bi=new WeakMap,Mi=new WeakMap,Ei=new WeakMap,Wi=new WeakMap,Ti=new WeakMap;var Si;class Ii{constructor(){this.attribute="data-spinner",p.special_circle_double='<svg xmlns="http://www.w3.org/2000/svg" class="circle-double" viewBox="0 0 100 100" width="100" height="100"><path class="circle-double-outer" d="M 50.000002,6.1070619 A 44.867709,44.126654 0 0 1 94.867708,50.233712 44.867709,44.126654 0 0 1 50.000002,94.36037 44.867709,44.126654 0 0 1 5.132292,50.233717 44.867709,44.126654 0 0 1 50.000002,6.1070619"></path><path class="circle-double-inner" d="M 50.000001,15.59972 A 35.383463,34.633995 0 0 1 85.383464,50.233711 35.383463,34.633995 0 0 1 50.000001,84.86771 35.383463,34.633995 0 0 1 14.616536,50.233716 35.383463,34.633995 0 0 1 50.000001,15.59972"></path></svg>'}getStyle(){return null}get(t,e){return new Pi(t,e,this.attribute)}}class Pi extends oi{constructor(t,e,i){super("CuiSpinnerHandler",t,e),Si.set(this,void 0),this.element=t,function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");e.set(t,i)}(this,Si,i)}handle(){const t=this.element.getAttribute(function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(this,Si)),e=m(t)?p["spinner_"+t]:null;if(!m(e))return;const i=new gi(e).build();this.element.innerHTML="",this.mutate(this.addSpinner,i,t)}refresh(){}destroy(){}addSpinner(t,e){this.element.appendChild(t),this.element.classList.add("animation-spinner-"+e)}}Si=new WeakMap;var $i;class _i{constructor(){this.attribute="cui-dummy"}getStyle(){return null}get(t,e){return new Di(t,e,this.attribute)}}class Di extends oi{constructor(t,e,i){super("CuiDummyHandler",t,e),$i.set(this,void 0),function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");e.set(t,i)}(this,$i,i)}handle(){}refresh(){}destroy(){}}$i=new WeakMap;var Oi,zi,qi,Ni,Bi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Hi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ki{constructor(t){this.attribute=m(t)?t+"scroll":"cui-scroll"}getStyle(){return null}get(t,e){return new ji(t,e,this.attribute)}}class ji extends oi{constructor(t,e,i){super("CuiScrollHandler",t,e),Oi.set(this,void 0),zi.set(this,void 0),qi.set(this,void 0),Ni.set(this,void 0),this.element=t,Bi(this,Oi,i),Bi(this,zi,null),Bi(this,qi,null),Bi(this,Ni,null)}handle(){this.parseArguments(),this.element.addEventListener("click",this.onClick.bind(this))}refresh(){this.parseArguments()}destroy(){this.element.removeEventListener("click",this.onClick.bind(this))}onClick(t){var e;if(!m(Hi(this,Ni)))return;let i=L(Hi(this,Ni))-Hi(this,qi).offsetTop,s=i-Hi(this,qi).scrollTop;Hi(this,qi).scrollBy({top:s,behavior:null!==(e=Hi(this,zi).behavior)&&void 0!==e?e:"auto"}),this.emitEvent("scroll",{to:i,by:s,target:Hi(this,Ni),parent:Hi(this,qi),timestamp:Date.now()}),t.preventDefault()}parseArguments(){Bi(this,zi,T(this.element.getAttribute(Hi(this,Oi)))),Bi(this,Ni,document.querySelector(Hi(this,zi).target)),m(Hi(this,Ni))&&Bi(this,qi,m(Hi(this,zi).parent)?document.querySelector(Hi(this,zi).parent):Hi(this,Ni).parentElement)}}Oi=new WeakMap,zi=new WeakMap,qi=new WeakMap,Ni=new WeakMap;var Ri,Fi,Ui,Vi,Ji,Zi,Gi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Qi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Xi{constructor(t,e){Ri.set(this,void 0),Fi.set(this,void 0),Ui.set(this,void 0),Vi.set(this,void 0),Ji.set(this,void 0),Zi.set(this,void 0),Gi(this,Ri,t),Gi(this,Fi,!1),Gi(this,Ui,M(e,0,100,0)),Gi(this,Vi,Gi(this,Ji,0))}setCallback(t){Gi(this,Zi,t)}attach(){Qi(this,Ri).addEventListener("scroll",this.listener.bind(this))}detach(){Qi(this,Ri).removeEventListener("scroll",this.listener.bind(this))}isInProgress(){return Qi(this,Fi)}listener(t){Gi(this,Vi,Qi(this,Vi)+Qi(this,Ri).scrollLeft),Gi(this,Ji,Qi(this,Ji)+Qi(this,Ri).scrollTop),!Qi(this,Fi)&&this.passedThreshold()&&(Gi(this,Fi,!0),requestAnimationFrame(()=>{Qi(this,Zi).call(this,{base:t,top:Qi(this,Ri).scrollTop,left:Qi(this,Ri).scrollLeft}),Gi(this,Fi,!1),Gi(this,Vi,0),Gi(this,Ji,0)}))}passedThreshold(){return Qi(this,Ui)<=0||Qi(this,Vi)>=Qi(this,Ui)||Qi(this,Ji)>=Qi(this,Ui)}}Ri=new WeakMap,Fi=new WeakMap,Ui=new WeakMap,Vi=new WeakMap,Ji=new WeakMap,Zi=new WeakMap;var Yi,ts,es,is,ss,ns,rs,os,hs,as,cs=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},us=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ls{constructor(){this.offset=0}parse(t){if(!t.selector)throw new Error("Incorrect arguments");this.selector=t.selector,this.action=Z.get(t.action),this.link=t.link,this.linkAction=Z.get(t.linkAction),this.offset=M(parseInt(t.offset),-1,1,0)}}class ds{constructor(t){this.attribute=(null!=t?t:"cui")+"-scrollspy"}getStyle(){return null}get(t,e){return new ps(t,e,this.attribute)}}class ps extends oi{constructor(t,e,i){super("CuiScrollspyHandler",t,e),Yi.set(this,void 0),ts.set(this,void 0),es.set(this,void 0),is.set(this,void 0),ss.set(this,void 0),ns.set(this,void 0),rs.set(this,void 0),os.set(this,void 0),hs.set(this,void 0),as.set(this,void 0),this.element=t,cs(this,Yi,i),cs(this,ts,new Xi(this.element,this.utils.setup.scrollThreshold)),cs(this,es,new ls),cs(this,is,[]),cs(this,ss,[]),cs(this,ns,cs(this,rs,us(this,os)-1))}handle(){this._log.debug("Handle","handle"),cs(this,hs,this.element.scrollTop),cs(this,as,this.element.scrollLeft),this.parseAttribute(),this.calculateCurrent(us(this,hs)),us(this,ts).setCallback(this.onScroll.bind(this)),us(this,ts).attach()}refresh(){this._log.debug("Refresh"),this.parseAttribute(),cs(this,hs,this.element.scrollTop),cs(this,as,this.element.scrollLeft),this.calculateCurrent(us(this,hs))}destroy(){us(this,ts).detach()}onScroll(t){let e=-1;if(e=Math.abs(t.left-us(this,as))>Math.abs(t.top-us(this,hs))?this.calculateCurrentLeft(t.left):this.calculateCurrent(t.top),e!==us(this,ns)){let i=this.setCurrent(e);this.emitEvent("targetchange",{top:t.top,left:t.left,target:i,timestamp:Date.now()})}cs(this,hs,this.element.scrollTop),cs(this,as,this.element.scrollLeft)}parseAttribute(){us(this,es).parse(T(this.element.getAttribute(us(this,Yi)))),cs(this,ss,[...this.element.querySelectorAll(us(this,es).selector)]),cs(this,is,us(this,es).link?[...document.querySelectorAll(us(this,es).link)]:[]),cs(this,rs,us(this,ss).length),cs(this,os,us(this,is).length)}calculateCurrent(t){return us(this,ss).findIndex(e=>{let i=L(e)-this.element.offsetTop,s=i*us(this,es).offset;return i+s<=t&&t<i+e.clientHeight+s})}calculateCurrentLeft(t){return us(this,ss).findIndex(e=>{let i=function(t){if(!m(t))return-1;let e=t.offsetLeft-parseInt(x(t,"margin-left"))-parseInt(x(t,"padding-left"))-parseInt(x(t,"border-left-width"));return e<0?t.offsetLeft:e}(e)-this.element.offsetLeft,s=i*us(this,es).offset;return i+s<=t&&t<i+e.clientWidth+s})}setCurrent(t){if(!A(t,0,us(this,rs)))throw new c("New index is out of targets length");let e=us(this,ss)[t];return us(this,es).action.add(e),us(this,es).action.remove(us(this,ss)[us(this,ns)]),us(this,os)>0&&(A(t,0,us(this,os))&&us(this,es).linkAction.add(us(this,is)[t]),A(us(this,ns),0,us(this,os))&&us(this,es).linkAction.remove(us(this,is)[us(this,ns)])),cs(this,ns,t),e}}Yi=new WeakMap,ts=new WeakMap,es=new WeakMap,is=new WeakMap,ss=new WeakMap,ns=new WeakMap,rs=new WeakMap,os=new WeakMap,hs=new WeakMap,as=new WeakMap;var fs,vs,gs=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ws=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ms{constructor(t){this.description="Auto print mode",this.name="auto-print",fs.set(this,void 0),vs.set(this,void 0),this.description="CuiAutoPrintModePlugin",this.setup=t}init(t){gs(this,vs,t),this.setup.autoPrint&&window.matchMedia&&window.matchMedia("print").matches&&ws(this,vs).setPrintMode(!0),gs(this,fs,new ti("print")),ws(this,fs).setCallback(this.onChange.bind(this)),ws(this,fs).attach()}destroy(){ws(this,fs).detach()}onChange(t){var e,i;this.setup=ws(this,vs).setup.plugins[this.description],null!==(i=null===(e=this.setup)||void 0===e?void 0:e.autoPrint)&&void 0!==i&&i&&(console.log(t.matches),t.matches?ws(this,vs).setPrintMode(!0):ws(this,vs).setPrintMode(!1))}}fs=new WeakMap,vs=new WeakMap;var ys,ks,bs,Ms=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Es=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ws{constructor(t,e){ys.set(this,void 0),ks.set(this,void 0),bs.set(this,void 0),Ms(this,ys,t),Ms(this,ks,null!=e?e:[0,.1,.25,.5,.75])}setCallback(t){Ms(this,bs,t)}connect(){this.observer=new IntersectionObserver(Es(this,bs),{root:Es(this,ys),rootMargin:"0px",threshold:Es(this,ks)})}observe(t){this.observer.observe(t)}unobserve(t){this.observer.unobserve(t)}disconnect(){this.observer.disconnect()}}ys=new WeakMap,ks=new WeakMap,bs=new WeakMap;var Ts,Ls,Cs,xs,As=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ss=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Is{constructor(){this.target="div",this.action=Z.get("dummy"),this.offset=0}parse(t){this.target=m(t.target)?t.target:"div",this.action=m(t.action)?Z.get(t.action):Z.get("dummy"),this.offset=M(parseInt(t.offset),0,1,0)}}class Ps{constructor(t){this.attribute=(null!=t?t:"cui")+"-intersection"}getStyle(){return null}get(t,e){return new $s(t,e,this.attribute)}}class $s extends oi{constructor(t,e,i){super("CuiIntersectionHandler",t,e),Ts.set(this,void 0),Ls.set(this,void 0),Cs.set(this,void 0),xs.set(this,void 0),As(this,Ts,i),As(this,Ls,new Ws(this.element)),As(this,Cs,new Is),As(this,xs,[])}handle(){this.parseArguments(null),Ss(this,Ls).setCallback(this.onIntersection.bind(this)),Ss(this,Ls).connect(),Ss(this,xs).forEach(t=>{Ss(this,Ls).observe(t)})}refresh(){let t=m(e=Ss(this,Cs))?Object.assign({},e):null;var e;this.parseArguments(t)}destroy(){Ss(this,Ls).disconnect()}parseArguments(t){Ss(this,Cs).parse(T(this.element.getAttribute(Ss(this,Ts)))),null!==t&&t.target===Ss(this,Cs).target||As(this,xs,[...document.querySelectorAll(Ss(this,Cs).target)])}onIntersection(t,e){if(!m(Ss(this,xs)))return;let i=null;t.forEach(t=>{i=this.getAction(t.target),t.isIntersecting&&t.intersectionRatio>Ss(this,Cs).offset?i.add(t.target):i.remove(t.target),this.emitIntersection(t)})}getAction(t){return t.hasAttribute("action")?Z.get(t.getAttribute("action")):Ss(this,Cs).action}emitIntersection(t){this.emitEvent("intersection",{entry:t,offset:Ss(this,Cs).offset,timestamp:Date.now()})}}Ts=new WeakMap,Ls=new WeakMap,Cs=new WeakMap,xs=new WeakMap;var _s,Ds,Os,zs,qs,Ns,Bs,Hs=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ks=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class js{constructor(){this.target="",this.action=null,this.timeout=0}parse(t){if(m(t)&&$(t))return this.target=t,this.action=null,void(this.timeout=-1);this.target=P(t.target,null),this.action=Z.get(t.action),this.timeout=C(t.timeout,-1)}isValid(){return m(this.target)}}class Rs{constructor(t){_s.set(this,void 0),Hs(this,_s,null!=t?t:"cui"),this.attribute=Ks(this,_s)+"-open"}getStyle(){return null}get(t,e){return new Fs(t,e,this.attribute,Ks(this,_s))}}_s=new WeakMap;class Fs extends oi{constructor(t,e,i,s){super("CuiOpenHandler",t,e),Ds.set(this,void 0),Os.set(this,void 0),zs.set(this,void 0),qs.set(this,void 0),Ns.set(this,void 0),Bs.set(this,void 0),Hs(this,Ns,new H(e.interactions)),Hs(this,Ds,i),Hs(this,Os,new js),Hs(this,zs,!1),Hs(this,qs,s),Hs(this,Bs,!1)}handle(){this._log.debug("Init","handle"),Ks(this,Os).parse(I(this.element,Ks(this,Ds))),Ks(this,Os).isValid()&&(this.element.addEventListener("click",this.onClick.bind(this)),Hs(this,zs,!0),this._log.debug("Initialized","handle"))}refresh(){this._log.debug("Refresh","refresh"),Ks(this,Os).parse(I(this.element,Ks(this,Ds))),Ks(this,Os).isValid()&&!Ks(this,zs)&&(this.element.addEventListener("click",this.onClick.bind(this)),Hs(this,zs,!0),this._log.debug("Initialized","refresh"))}destroy(){this._log.debug("Destroy","destroy"),Ks(this,zs)&&(this.element.removeEventListener("click",this.onClick.bind(this)),this._log.debug("Destoryed","destroy"))}onClick(t){if(Ks(this,Bs))return;const e=document.querySelector(Ks(this,Os).target);if(m(e)){if(Hs(this,Bs,!0),Ks(this,Os).action&&-1!==Ks(this,Os).timeout){let i=Ks(this,Os).timeout>0?Ks(this,Os).timeout:this.utils.setup.animationTime;Ks(this,Ns).performAction(e,Ks(this,Os).action,i).then(()=>{e.classList.add(S(Ks(this,qs))),this.emitOpen(t),Hs(this,Bs,!1)})}else e.classList.add(S(Ks(this,qs))),this.emitOpen(t),Hs(this,Bs,!1);t.preventDefault()}else this._log.warning(`Target ${Ks(this,Os).target} not found`,"onClick")}emitOpen(t){this.emitEvent("open",{event:t,timestamp:Date.now()})}}Ds=new WeakMap,Os=new WeakMap,zs=new WeakMap,qs=new WeakMap,Ns=new WeakMap,Bs=new WeakMap;var Us,Vs,Js,Zs,Gs,Qs,Xs,Ys=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},tn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class en{constructor(){this.target="",this.action=null,this.timeout=0}parse(t){if(m(t)&&$(t))return this.target=t,this.action=null,void(this.timeout=-1);this.target=P(t.target,null),this.action=Z.get(t.action),this.timeout=C(t.timeout,-1)}}class sn{constructor(t){Us.set(this,void 0),Ys(this,Us,null!=t?t:"cui"),this.attribute=tn(this,Us)+"-close"}getStyle(){return null}get(t,e){return new nn(t,e,this.attribute,tn(this,Us))}}Us=new WeakMap;class nn extends oi{constructor(t,e,i,s){super("CuiCloseHandler",t,e),Vs.set(this,void 0),Js.set(this,void 0),Zs.set(this,void 0),Gs.set(this,void 0),Qs.set(this,void 0),Xs.set(this,void 0),Ys(this,Xs,new H(e.interactions)),Ys(this,Vs,i),Ys(this,Js,new en),Ys(this,Zs,!1),Ys(this,Gs,s)}handle(){this._log.debug("Init","handle"),tn(this,Js).parse(I(this.element,tn(this,Vs))),this.element.addEventListener("click",this.onClick.bind(this)),Ys(this,Zs,!0),this._log.debug("Initialized","handle")}refresh(){this._log.debug("Refresh","refresh"),tn(this,Js).parse(I(this.element,tn(this,Vs))),tn(this,Zs)||(this.element.addEventListener("click",this.onClick.bind(this)),Ys(this,Zs,!0),this._log.debug("Initialized","refresh"))}destroy(){this._log.debug("Destroy","destroy"),tn(this,Zs)&&(this.element.removeEventListener("click",this.onClick.bind(this)),this._log.debug("Destoryed","destroy"))}onClick(t){if(tn(this,Qs))return;const e=this.getTarget();if(m(e)){if(Ys(this,Qs,!0),tn(this,Js).action&&-1!==tn(this,Js).timeout){let i=tn(this,Js).timeout>0?tn(this,Js).timeout:this.utils.setup.animationTime;tn(this,Xs).performAction(e,tn(this,Js).action,i).then(()=>{e.classList.remove(S(tn(this,Gs))),this.emitClose(t),Ys(this,Qs,!1)})}else e.classList.remove(S(tn(this,Gs))),this.emitClose(t),Ys(this,Qs,!1);t.preventDefault()}else this._log.warning(`Target ${tn(this,Js).target} not found`,"onClick")}getTarget(){return m(tn(this,Js).target)?document.querySelector(tn(this,Js).target):this.element.parentElement}emitClose(t){this.emitEvent("close",{timestamp:Date.now(),event:t})}}Vs=new WeakMap,Js=new WeakMap,Zs=new WeakMap,Gs=new WeakMap,Qs=new WeakMap,Xs=new WeakMap;var rn,on,hn,an,cn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},un=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ln{constructor(){this.action=null,this.target=null}parse(t){m(t)&&$(t)?this.action=Z.get(t):(this.target=P(t.target,null),this.action=Z.get(t.action))}}class dn{constructor(t){this.attribute=(null!=t?t:"cui")+"-toggle"}getStyle(){return null}get(t,e){return new pn(t,e,this.attribute)}}class pn extends oi{constructor(t,e,i){super("CuiToggleHandler",t,e),rn.set(this,void 0),on.set(this,void 0),hn.set(this,void 0),an.set(this,void 0),cn(this,rn,i),cn(this,on,new ln),cn(this,hn,this.element),cn(this,an,e)}handle(){un(this,on).parse(I(this.element,un(this,rn))),cn(this,hn,this.getTarget()),this.element.addEventListener("click",this.onClick.bind(this))}refresh(){un(this,on).parse(I(this.element,un(this,rn))),cn(this,hn,this.getTarget())}destroy(){this.element.removeEventListener("click",this.onClick.bind(this))}onClick(t){un(this,on).action.toggle(un(this,hn),un(this,an)),this.emitEvent("toggle",{action:un(this,on).action,target:un(this,hn),timestamp:Date.now()}),t.preventDefault()}getTarget(){return m(un(this,on).target)?document.querySelector(un(this,on).target):this.element}}rn=new WeakMap,on=new WeakMap,hn=new WeakMap,an=new WeakMap;var fn,vn,gn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},wn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class mn{constructor(){this.attribute="cui-resize"}getStyle(){return null}get(t,e){return new yn(t,e,this.attribute)}}class yn extends oi{constructor(t,e,i){super("CuiResizeHandler",t,e),fn.set(this,void 0),vn.set(this,void 0),gn(this,fn,i),gn(this,vn,e.bus)}handle(){wn(this,vn).on(g,this.resize,this)}refresh(){}destroy(){wn(this,vn).detach(g,this)}resize(t){console.log(t)}getId(){return _(wn(this,fn))}}fn=new WeakMap,vn=new WeakMap;var kn,bn,Mn,En,Wn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Tn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ln{constructor(t,e){kn.set(this,void 0),bn.set(this,void 0),Mn.set(this,void 0),En.set(this,void 0),Wn(this,bn,e),Wn(this,Mn,!1),Wn(this,En,!0)}setCallback(t){Wn(this,kn,t)}isInProgress(){return Tn(this,Mn)}attach(){document.addEventListener("keydown",this.onKeyDown.bind(this)),Tn(this,En)&&document.addEventListener("keyup",this.onKeyUp.bind(this))}detach(){document.removeEventListener("keydown",this.onKeyDown.bind(this)),Tn(this,En)&&document.addEventListener("keyup",this.onKeyUp.bind(this))}onKeyDown(t){if(!Tn(this,Mn)){Wn(this,Mn,!0);try{m(Tn(this,bn))&&!Tn(this,bn).includes(t.code)||Tn(this,kn).call(this,t)}catch(t){console.error(t)}finally{Tn(this,En)||Wn(this,Mn,!1)}}}onKeyUp(t){Wn(this,Mn,!1)}}kn=new WeakMap,bn=new WeakMap,Mn=new WeakMap,En=new WeakMap;var Cn,xn,An=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Sn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class In{constructor(t){Cn.set(this,void 0),xn.set(this,void 0),An(this,xn,t),An(this,Cn,new Ln(!0)),Sn(this,Cn).setCallback(this.onKeyDown.bind(this))}connect(){Sn(this,Cn).attach()}disconnect(){Sn(this,Cn).detach()}onKeyDown(t){Sn(this,xn).emit("keydown",null,{timestamp:Date.now(),event:t})}}Cn=new WeakMap,xn=new WeakMap;var Pn,$n=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class _n{constructor(t){this.name="keys-observer",Pn.set(this,void 0),this.description="CuiKeysObserverPlugin",this.setup=t}init(t){(function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");e.set(t,i)})(this,Pn,new In(t.bus)),$n(this,Pn).connect()}destroy(){$n(this,Pn).disconnect()}}Pn=new WeakMap;var Dn,On,zn=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},qn=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Nn=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Bn{constructor(){Dn.set(this,void 0),qn(this,Dn,window)}init(t){return zn(this,void 0,void 0,(function*(){let e=Object.assign(Object.assign({},new n),t.setup);const i=e.app,s={result:!1};if(m(Nn(this,Dn)[i]))return s.message="Instance is already initialized",s;if(m(t.icons))for(let e in t.icons)p[e]=t.icons[e];try{Nn(this,Dn)[i]=new Ve(e,t.plugins,t.components),Nn(this,Dn)[i].init()}catch(t){return console.error(t),s.message="An error occured during initialization",s}return s.result=!0,s}))}}Dn=new WeakMap,On=new WeakMap,window.cuiInit=new class{constructor(){On.set(this,void 0),qn(this,On,!1)}init(t){var e;return zn(this,void 0,void 0,(function*(){if(Nn(this,On))return console.log("Module is already initialized"),!1;const i=new Bn,s=[new ri({autoLight:!0}),new ms({autoPrint:!0}),new _n(null)],n=[new fi,new xi,new Ii,new _i,new Ki,new ds,new Ps,new Rs,new sn,new dn,new mn];let r=yield i.init({setup:t.setup,icons:t.icons,plugins:m(t.plugins)?[...s,...t.plugins]:s,components:m(t.components)?[...n,...t.components]:n});return r.result?(qn(this,On,!0),!0):(console.error(`A cUI instance failed to initialize: [${null!==(e=r.message)&&void 0!==e?e:"#"}]`),console.log("Cui Light failed to init"),!1)}))}}}])}));
//# sourceMappingURL=cui-light.index.js.map