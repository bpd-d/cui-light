{"version":3,"sources":["webpack://cui-light/webpack/universalModuleDefinition","webpack://cui-light/webpack/bootstrap","webpack://cui-light/./src/managers/element.ts","webpack://cui-light/./src/builders/dialog.ts","webpack://cui-light/./src/handlers/alert.ts","webpack://cui-light/./src/observers/move.ts","webpack://cui-light/./src/managers/toast.ts","webpack://cui-light/./src/helpers/collection.ts","webpack://cui-light/./src/managers/collection.ts","webpack://cui-light/./src/managers/plugins.ts","webpack://cui-light/./src/instance.ts","webpack://cui-light/./src/initializer.ts","webpack://cui-light/./src/index.ts","webpack://cui-light/./src/init.ts"],"names":["root","factory","exports","module","define","amd","window","webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","oldJsonpFunction","slice","elements","utils","this","Date","now","interactions","className","element","classList","contains","remove","add","classes","fetch","mutate","attributeName","reduce","val","current","attr","getAttribute","attributeValue","setAttribute","removeAttribute","hasAttribute","onClick","addEventListener","eventName","callback","functionName","error","lock","forEach","index","unlock","timeout","delay","setup","animationTime","change","animProgress","setTimeout","openClass","animationClass","action","performAction","then","closeClass","event","args","cuid","$cuid","debug","bus","emit","warning","ids","cuiElement","disposeId","on","id","detach","prefix","reverse","switches","undefined","title","headerBuilder","setClasses","build","titleElement","getPrefixedString","appendChild","appendChildrens","dialog","setId","setAttributes","container","parent","str","onYes","onNo","onCancel","onOk","content","message","closeStr","iconStr","document","getElementById","updateElement","createElement","onClose","querySelector","innerHTML","arg","state","super","dialogBuilder","createHeader","createBody","createFooter","setCallback","onMove","isAttached","attach","MOVE_LOCK","onMoveLock","type","GLOBAL_MOVE","flag","interaction","toastElement","body","textContent","currentElement","nextElement","animIn","animOut","count","newIndex","animClassIn","animClassOut","duration","addAnimationClass","setFinalClasses","len","setElements","setToggle","set","check","newIdx","getCurrentIndex","verifyIndex","setCurrent","setCurrentWithAnimation","plugins","filter","plugin","mutation","init","description","find","tasks","Promise","all","components","logLevel","MutationObserver","animationTimeLong","map","x","attribute","initElements","querySelectorAll","item","e","exception","setComponents","setPlugins","start","setProperty","animationTimeShort","INSTANCE_INITIALIZED","stop","INSTANCE_FINISHED","selector","show","nodes","detachAll","popup","includes","settings","appPrefix","app","icons","icon","swipeAnimations","animation","console","CUI_LIGHT_VERSION","CUI_LIGHT_CORE_VER","CUI_LIGHT_COMPONENTS_VER","CUI_LIGHT_PLUGINS_VER","cuiInit","log","initializer","pluginList","autoLight","autoPrint","componentList","appPlugins"],"mappings":"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","file":"index.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"cui-light\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cui-light\"] = factory();\n\telse\n\t\troot[\"cui-light\"] = factory();\n})(window, function() {\nreturn "," \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonpcui_light\"] = window[\"webpackJsonpcui_light\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([17,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { is, are } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { ICuiLogger, CuiCachable, CuiElement } from \"cui-light-core/dist/esm/models/interfaces\";\r\nimport { CuiLoggerFactory } from \"cui-light-core/dist/esm/factories/logger\";\r\nimport { CLASSES } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { CuiUtils } from \"cui-light-core/dist/esm/models/utils\";\r\nimport { CuiActionsHelper } from \"cui-light-core/dist/esm/helpers/helpers\";\r\nimport { CuiClassAction } from \"cui-light-core/dist/esm/utils/actions\";\r\n\r\nexport class ElementManager implements CuiCachable {\r\n    #elements: Element[];\r\n    #isLocked: boolean;\r\n    #logger: ICuiLogger;\r\n    #cDt: number;\r\n    #utils: CuiUtils;\r\n    #actionsHelper: CuiActionsHelper;\r\n    constructor(elements: Element[], utils: CuiUtils) {\r\n        this.#elements = elements;\r\n        this.#isLocked = false;\r\n        this.#logger = CuiLoggerFactory.get(\"ElementManager\");\r\n        this.#utils = utils;\r\n        this.#cDt = Date.now();\r\n        this.#actionsHelper = new CuiActionsHelper(utils.interactions);\r\n    }\r\n\r\n    async toggleClass(className: string): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            if (!element.classList.contains(className)) {\r\n                element.classList.add(className);\r\n            } else {\r\n                element.classList.remove(className);\r\n            }\r\n        }, 'toggleClass');\r\n    }\r\n\r\n    async toggleClassAs(className: string): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            let classes = element.classList;\r\n            this.#utils.interactions.fetch(() => {\r\n                if (!classes.contains(className)) {\r\n                    this.#utils.interactions.mutate(classes.add, classes, className);\r\n                } else {\r\n                    this.#utils.interactions.mutate(classes.remove, classes, className);\r\n                }\r\n            }, this)\r\n\r\n        }, 'toggleClassAs');\r\n    }\r\n\r\n    async setClass(className: string): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            if (!element.classList.contains(className)) {\r\n                element.classList.add(className)\r\n            }\r\n        }, 'setClass');\r\n    }\r\n\r\n    async setClassAs(className: string): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n\r\n        return this.call((element) => {\r\n            let classes = element.classList;\r\n            this.#utils.interactions.fetch(() => {\r\n                if (!classes.contains(className)) {\r\n                    this.#utils.interactions.mutate(classes.add, classes, className);\r\n                }\r\n            }, this)\r\n\r\n        }, 'setClassAs');\r\n    }\r\n\r\n    async removeClass(className: string): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            if (element.classList.contains(className)) {\r\n                element.classList.remove(className)\r\n            }\r\n        }, 'removeClass');\r\n    }\r\n\r\n    async removeClassAs(className: string): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            let classes = element.classList;\r\n            this.#utils.interactions.fetch(() => {\r\n                if (classes.contains(className)) {\r\n                    this.#utils.interactions.mutate(classes.remove, classes, className);\r\n                }\r\n            }, this)\r\n        }, 'removeClass');\r\n    }\r\n\r\n    getAttribute(attributeName: string): string[] {\r\n        if (!is(attributeName)) {\r\n            return [];\r\n        }\r\n        return this.#elements.reduce<string[]>((val: string[], current: Element) => {\r\n            let attr = current.getAttribute(attributeName);\r\n            if (attr != null) {\r\n                val.push(attr)\r\n            }\r\n            return val;\r\n        }, []);\r\n    }\r\n\r\n    async setAttribute(attributeName: string, attributeValue?: string): Promise<boolean> {\r\n        if (!is(attributeName)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            element.setAttribute(attributeName, attributeValue ?? \"\")\r\n        }, 'setAttribute');\r\n    }\r\n\r\n    async setAttributeAs(attributeName: string, attributeValue?: string): Promise<boolean> {\r\n        if (!is(attributeName)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            this.#utils.interactions.mutate(element.setAttribute, element, attributeName, attributeValue ?? \"\")\r\n        }, 'setAttributeAs');\r\n    }\r\n\r\n    async removeAttribute(attributeName: string): Promise<boolean> {\r\n        if (!is(attributeName)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            element.removeAttribute(attributeName)\r\n        }, 'removeAttribute');\r\n    }\r\n\r\n    async removeAttributeAs(attributeName: string): Promise<boolean> {\r\n        if (!is(attributeName)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            this.#utils.interactions.mutate(element.removeAttribute, element, attributeName);\r\n        }, 'removeAttributeAs');\r\n    }\r\n\r\n    async toggleAttribute(attributeName: string, attributeValue?: string): Promise<boolean> {\r\n        if (!is(attributeName)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            if (element.hasAttribute(attributeName)) {\r\n                element.removeAttribute(attributeName)\r\n            } else {\r\n                element.setAttribute(attributeName, attributeValue ?? \"\")\r\n            }\r\n        }, 'toggleAttribute');\r\n    }\r\n\r\n    async toggleAttributeAs(attributeName: string, attributeValue?: string): Promise<boolean> {\r\n        if (!is(attributeName)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            this.#utils.interactions.fetch(() => {\r\n                if (element.hasAttribute(attributeName)) {\r\n                    this.#utils.interactions.mutate(element.removeAttribute, element, attributeName);\r\n                } else {\r\n                    this.#utils.interactions.mutate(element.setAttribute, element, attributeName, attributeValue ?? \"\")\r\n                }\r\n            }, this)\r\n\r\n        }, 'toggleAttributeAs');\r\n    }\r\n\r\n    async click(onClick: (ev: MouseEvent) => void): Promise<boolean> {\r\n        if (!is(onClick)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            //@ts-ignore\r\n            element.addEventListener('click', onClick);\r\n        }, 'click');\r\n    }\r\n\r\n    async event(eventName: string, callback: any): Promise<boolean> {\r\n        if (!is(eventName) || !is(callback)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            element.addEventListener(eventName, callback);\r\n        }, 'event');\r\n    }\r\n\r\n    async call(callback: (element: Element, index: Number) => void, functionName?: string): Promise<boolean> {\r\n        if (this.#isLocked) {\r\n            this.#logger.error(\"Element is locked\", functionName)\r\n        }\r\n        this.lock();\r\n        this.#elements.forEach((element, index) => {\r\n            callback(element, index)\r\n        })\r\n        this.unlock();\r\n        return true;\r\n    }\r\n\r\n    async animate(className: string, timeout?: number): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n        const delay = timeout ?? this.#utils.setup.animationTime;\r\n        return this.call((element) => {\r\n            this.change(() => {\r\n                element.classList.add(className);\r\n                element.classList.add(CLASSES.animProgress);\r\n                setTimeout(() => {\r\n                    this.change(() => {\r\n                        element.classList.remove(className);\r\n                        element.classList.remove(CLASSES.animProgress);\r\n                    })\r\n                }, delay)\r\n            })\r\n        });\r\n    }\r\n\r\n    async open(openClass: string, animationClass: string, timeout?: number): Promise<boolean> {\r\n        if (!are(openClass, animationClass)) {\r\n            return false\r\n        }\r\n        const delay = timeout ?? this.#utils.setup.animationTime;\r\n        const action = new CuiClassAction(animationClass);\r\n        return this.call((element) => {\r\n            this.#actionsHelper.performAction(element, action, delay ?? 0).then(() => {\r\n                element.classList.add(openClass);\r\n            })\r\n        });\r\n    }\r\n\r\n    async close(closeClass: string, animationClass: string, timeout?: number): Promise<boolean> {\r\n        if (!are(closeClass, animationClass)) {\r\n            return false\r\n        }\r\n        const delay = timeout ?? this.#utils.setup.animationTime;\r\n        const action = new CuiClassAction(animationClass);\r\n        return this.call((element) => {\r\n            this.#actionsHelper.performAction(element, action, delay ?? 0).then(() => {\r\n                element.classList.remove(closeClass);\r\n            })\r\n        });\r\n    }\r\n\r\n    emit(event: string, ...args: any[]): void {\r\n        if (!is(event)) {\r\n            this.#logger.warning(\"Not enough data to emit event\", \"emit\")\r\n            return;\r\n        }\r\n        this.call((element: Element) => {\r\n            let cuid = (<CuiElement>(element as any)).$cuid;\r\n            if (is(cuid)) {\r\n                this.#logger.debug(`Emitting event ${event} to ${cuid}`)\r\n                this.#utils.bus.emit(event, cuid, ...args);\r\n            }\r\n        }, \"emit\")\r\n    }\r\n\r\n    on(event: string, callback: any): string[] {\r\n        let ids: string[] = []\r\n        if (!are(event, callback)) {\r\n            this.#logger.error(\"Incorrect arguments\", \"on\")\r\n            return ids;\r\n        }\r\n\r\n        this.call((element: Element) => {\r\n            let cuiElement = (<CuiElement>(element as any));\r\n            if (is(cuiElement)) {\r\n                let disposeId = this.#utils.bus.on(event, callback, cuiElement);\r\n                if (disposeId != null)\r\n                    ids.push(disposeId);\r\n            }\r\n        }, \"on\")\r\n        return ids;\r\n    }\r\n\r\n    detach(event: string, id: string): void {\r\n        if (!are(event, id)) {\r\n            this.#logger.error(\"Incorrect arguments\", \"detach\")\r\n        }\r\n        this.call((element: Element) => {\r\n            let cuiElement = (<CuiElement>(element as any));\r\n            if (is(cuiElement)) {\r\n                this.#utils.bus.detach(event, id, cuiElement);\r\n            }\r\n        }, \"detach\")\r\n    }\r\n\r\n    read(callback: any, ...args: any[]): void {\r\n        this.#utils.interactions.fetch(callback, this, ...args)\r\n    }\r\n\r\n    change(callback: any, ...args: any[]): void {\r\n        this.#utils.interactions.mutate(callback, this, ...args)\r\n    }\r\n\r\n    elements(): Element[] {\r\n        return this.#elements;\r\n    }\r\n\r\n    count() {\r\n        return this.#elements.length;\r\n    }\r\n\r\n    lock() {\r\n        this.#isLocked = true;\r\n    }\r\n\r\n    unlock() {\r\n        this.#isLocked = false;\r\n    }\r\n\r\n    isLocked(): boolean {\r\n        return this.#isLocked;\r\n    }\r\n\r\n    refresh(): boolean {\r\n        return (Date.now() - this.#cDt) < 360000;\r\n    }\r\n}","import { ElementBuilder } from \"cui-light-core/dist/esm/builders/element\";\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\n\r\nexport class DialogBuilder {\r\n    #header: Element | undefined;\r\n    #body: Element | undefined;\r\n    #footer: Element | undefined;\r\n    #prefix: string;\r\n    #switches: string;\r\n    #reverse: boolean;\r\n    constructor(prefix: string, reverse: boolean, switches?: string) {\r\n        this.#prefix = prefix;\r\n        this.#header = this.#footer = this.#body = undefined;\r\n        this.#switches = switches ?? \"\";\r\n        this.#reverse = reverse;\r\n    }\r\n\r\n    createHeader(title: string, classes: string[], elements?: Element[]) {\r\n        if (!is(classes)) {\r\n            classes = []\r\n        }\r\n        if (!is(elements)) {\r\n            elements = []\r\n        }\r\n        let headerBuilder = new ElementBuilder('div');\r\n        headerBuilder.setClasses(`${this.#prefix}-dialog-header`, ...classes)\r\n        this.#header = headerBuilder.build();\r\n\r\n        let titleElement = new ElementBuilder('span').setClasses(this.getPrefixedString(\"-dialog-title\")).build(title)\r\n\r\n        this.#header.appendChild(titleElement);\r\n        // @ts-ignore\r\n        this.appendChildrens(this.#header, ...elements);\r\n\r\n    }\r\n\r\n    createFooter(classes: string[], elements: Element[]) {\r\n        if (!is(classes)) {\r\n            classes = []\r\n        }\r\n        if (!is(elements)) {\r\n            elements = []\r\n        }\r\n        this.#footer = new ElementBuilder('div').setClasses(this.getPrefixedString(\"-dialog-footer\"), ...classes).build();\r\n        // @ts-ignore\r\n        this.appendChildrens(this.#footer, ...elements);\r\n    }\r\n\r\n    createBody(classes: string[], elements: Element[]) {\r\n        if (!is(classes)) {\r\n            classes = []\r\n        }\r\n        if (!is(elements)) {\r\n            elements = []\r\n        }\r\n        this.#body = new ElementBuilder('div').setClasses(this.getPrefixedString(\"-dialog-body\"), ...classes).build();\r\n        // @ts-ignore\r\n        this.appendChildrens(this.#body, ...elements);\r\n    }\r\n\r\n    build(id: string): HTMLElement {\r\n        let classes = [this.getPrefixedString(\"-dialog\")]\r\n        if (this.#reverse) {\r\n            classes.push(this.getPrefixedString('-reverse-auto'));\r\n        }\r\n        let dialog = new ElementBuilder('div').setId(id).setClasses(...classes).setAttributes({\r\n            [this.getPrefixedString('-dialog')]: this.#switches\r\n        }).build();\r\n        let container = new ElementBuilder('div').setClasses(this.getPrefixedString(\"-dialog-container\")).build();\r\n        if (this.#header)\r\n            container.appendChild(this.#header);\r\n        if (this.#body)\r\n            container.appendChild(this.#body);\r\n        if (this.#footer)\r\n            container.appendChild(this.#footer);\r\n        dialog.appendChild(container);\r\n        return dialog;\r\n    }\r\n\r\n    private appendChildrens(parent: Element, ...elements: Element[]) {\r\n        if (is(elements)) {\r\n            elements.forEach((element) => parent.appendChild(element));\r\n        }\r\n    }\r\n    private getPrefixedString(str: string) {\r\n        return this.#prefix + str\r\n    }\r\n}","import { ElementManager } from \"../managers/element\";\r\nimport { DialogBuilder } from \"../builders/dialog\";\r\nimport { ElementBuilder } from \"cui-light-core/dist/esm/builders/element\";\r\nimport { CuiAlertData, CuiContext } from \"cui-light-core/dist/esm/models/interfaces\";\r\nimport { CuiUtils } from \"cui-light-core/dist/esm/models/utils\";\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiAlertType } from \"cui-light-core/dist/esm/utils/types\";\r\n\r\nexport interface ICuiAlertHandler {\r\n    show(root: Element): void;\r\n}\r\n\r\ninterface AlertCallbacks {\r\n    [name: string]: (() => void) | undefined;\r\n}\r\n\r\nabstract class CuiAlertHandlerBase implements ICuiAlertHandler, CuiContext {\r\n    #callbacks: AlertCallbacks;\r\n    #utils: CuiUtils;\r\n    #id: string;\r\n    #manager: ElementManager | undefined;\r\n    closeStr: string;\r\n    iconStr: string;\r\n    content: string;\r\n    title: string;\r\n    prefix: string;\r\n    reverse: boolean;\r\n    #attid: string | null;\r\n    constructor(setup: CuiUtils, id: string, data: CuiAlertData) {\r\n        this.#callbacks = {\r\n            \"yes\": data.onYes,\r\n            \"no\": data.onNo,\r\n            \"cancel\": data.onCancel,\r\n            \"ok\": data.onOk\r\n        }\r\n        this.content = data.message;\r\n        this.title = data.title;\r\n        this.prefix = setup.setup.prefix;\r\n        this.#utils = setup;\r\n        this.#id = id;\r\n        this.reverse = false;\r\n        this.#attid = null;\r\n        this.closeStr = `${this.#utils.setup.prefix}-close`;\r\n        this.iconStr = `${this.#utils.setup.prefix}-icon`;\r\n        this.#manager = undefined;\r\n    }\r\n\r\n    getId(): string {\r\n        return this.#id;\r\n    }\r\n\r\n    show(root: Element): void {\r\n        let element = document.getElementById(this.#id);\r\n        if (!is(element)) {\r\n            element = this.createElement();\r\n            root.appendChild(element);\r\n        } else {\r\n            // @ts-ignore - already checked\r\n            this.updateElement(element);\r\n        }\r\n        setTimeout(() => {\r\n            // @ts-ignore - already checked\r\n            this.#manager = new ElementManager([element], this.#utils);\r\n            let ids = this.#manager.on('closed', this.onClose.bind(this));\r\n            this.#attid = ids.length > 0 ? ids[0] : null;\r\n            this.#manager.emit(\"open\");\r\n        }, 100);\r\n    }\r\n\r\n    updateElement(element: HTMLElement) {\r\n        let title = element.querySelector(`.${this.prefix}-dialog-title`);\r\n        let content = element.querySelector(`.${this.prefix}-dialog-body>p`);\r\n        this.#utils.interactions.mutate(() => {\r\n            if (title) {\r\n                title.innerHTML = this.title;\r\n            }\r\n            if (content) {\r\n                content.innerHTML = this.content;\r\n            }\r\n        }, null)\r\n    }\r\n\r\n    onClose(arg: any) {\r\n        try {\r\n            if (is(arg) && arg.state && this.#callbacks) {\r\n                if (is(this.#callbacks[arg.state])) {\r\n                    let callback = this.#callbacks[arg.state];\r\n                    if (callback) {\r\n                        callback();\r\n                    }\r\n                }\r\n            }\r\n        } finally {\r\n            if (this.#attid != null) {\r\n                if (this.#manager)\r\n                    this.#manager.detach('closed', this.#attid);\r\n                this.#attid = null;\r\n            }\r\n\r\n            this.#manager = undefined;\r\n        }\r\n    }\r\n\r\n    abstract createElement(): HTMLElement;\r\n\r\n\r\n}\r\n\r\nexport class CuiAlertHandler extends CuiAlertHandlerBase {\r\n    #id: string;\r\n    constructor(setup: CuiUtils, id: string, data: CuiAlertData) {\r\n        super(setup, id, data);\r\n        this.#id = id;\r\n        this.reverse = data.reverse ?? false;\r\n    }\r\n\r\n    createElement() {\r\n        let dialogBuilder = new DialogBuilder(this.prefix, this.reverse);\r\n\r\n        dialogBuilder.createHeader(this.title, [], [\r\n            new ElementBuilder('a').setClasses(`${this.prefix}-icon`).setAttributes({\r\n                [this.closeStr]: \"state: cancel\",\r\n                [this.iconStr]: \"close\"\r\n            }).build()\r\n        ]);\r\n        dialogBuilder.createBody([], [\r\n            new ElementBuilder('p').build(this.content)\r\n        ]);\r\n        dialogBuilder.createFooter([`${this.prefix}-flex`, `${this.prefix}-right`], [\r\n            new ElementBuilder('button').setClasses(`${this.prefix}-button`, `${this.prefix}-margin-small-right`).setAttributes({ [this.closeStr]: \"state: cancel\" }).build(\"Cancel\"),\r\n            new ElementBuilder('button').setClasses(`${this.prefix}-button`, `${this.prefix}-accent`).setAttributes({ [this.closeStr]: \"state: ok\" }).build(\"Ok\")\r\n        ])\r\n        return dialogBuilder.build(this.#id);\r\n    }\r\n}\r\n\r\nexport class CuiInfoAlertUpHandler extends CuiAlertHandlerBase {\r\n    #id: string;\r\n    constructor(setup: CuiUtils, id: string, data: CuiAlertData) {\r\n        super(setup, id, data);\r\n        this.#id = id;\r\n        this.content = data.message;;\r\n        this.title = data.title;\r\n        this.prefix = setup.setup.prefix;\r\n        this.reverse = data.reverse ?? false;\r\n\r\n    }\r\n\r\n    createElement() {\r\n        let dialogBuilder = new DialogBuilder(this.prefix, this.reverse);\r\n        dialogBuilder.createHeader(this.title, []);\r\n        dialogBuilder.createBody([], [\r\n            new ElementBuilder('p').build(this.content)\r\n        ]);\r\n        dialogBuilder.createFooter([`${this.prefix}-flex`, `${this.prefix}-right`], [\r\n            new ElementBuilder('button').setClasses(`${this.prefix}-button`, `${this.prefix}-accent`).setAttributes({ [this.closeStr]: \"state: ok\" }).build(\"Ok\")\r\n        ])\r\n\r\n        return dialogBuilder.build(this.#id);\r\n    }\r\n}\r\n\r\nexport class CuiYesNoPopUpHandler extends CuiAlertHandlerBase {\r\n    #id: string;\r\n    constructor(setup: CuiUtils, id: string, data: CuiAlertData) {\r\n        super(setup, id, data);\r\n        this.#id = id;\r\n        this.content = data.message;\r\n        this.title = data.title;\r\n        this.prefix = setup.setup.prefix;\r\n        this.reverse = data.reverse ?? false;\r\n    }\r\n\r\n    createElement() {\r\n        let dialogBuilder = new DialogBuilder(this.prefix, this.reverse);\r\n\r\n        dialogBuilder.createHeader(this.title, [], [\r\n            new ElementBuilder('a').setClasses(`${this.prefix}-icon`).setAttributes({\r\n                [this.closeStr]: \"state: cancel\",\r\n                [this.iconStr]: \"close\"\r\n            }).build()\r\n        ]);\r\n        dialogBuilder.createBody([], [\r\n            new ElementBuilder('p').build(this.content)\r\n        ]);\r\n        dialogBuilder.createFooter([`${this.prefix}-flex`, `${this.prefix}-right`], [\r\n            new ElementBuilder('button').setClasses(`${this.prefix}-button`, `${this.prefix}-margin-small-right`).setAttributes({ [this.closeStr]: \"state: no\" }).build(\"No\"),\r\n            new ElementBuilder('button').setClasses(`${this.prefix}-button`, `${this.prefix}-accent`).setAttributes({ [this.closeStr]: \"state: yes\" }).build(\"Yes\")\r\n        ])\r\n        return dialogBuilder.build(this.#id);\r\n    }\r\n}\r\n\r\nexport class CuiAlertFactory {\r\n    static get(id: string, type: CuiAlertType, data: CuiAlertData, utils: CuiUtils): ICuiAlertHandler | undefined {\r\n        if (type === \"Info\") {\r\n            return new CuiInfoAlertUpHandler(utils, id, data);\r\n        } else if (type === 'YesNoCancel') {\r\n            return new CuiYesNoPopUpHandler(utils, id, data);\r\n        } else if (type === 'OkCancel') {\r\n            return new CuiAlertHandler(utils, id, data);\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\n\r\n\r\n","import { CuiMoveEventListener, ICuiMoveEvent } from \"cui-light-core/dist/esm/listeners/move\";\r\nimport { ICuiEventBus } from \"cui-light-core/dist/esm/models/interfaces\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\n\r\nexport class CuiMoveObserver {\r\n    #bus: ICuiEventBus;\r\n    #moveListener: CuiMoveEventListener;\r\n    #isLocked: boolean;\r\n    #eventId: string | null;\r\n    #firstEvent: ICuiMoveEvent | undefined;\r\n    constructor(bus: ICuiEventBus) {\r\n        this.#bus = bus;\r\n        this.#moveListener = new CuiMoveEventListener();\r\n        this.#moveListener.setCallback(this.onMove.bind(this));\r\n        this.#firstEvent = undefined;\r\n        this.#isLocked = false;\r\n        this.#eventId = null\r\n    }\r\n\r\n    attach() {\r\n        if (!this.#moveListener.isAttached()) {\r\n            this.#moveListener.attach();\r\n            this.#eventId = this.#bus.on(EVENTS.MOVE_LOCK, this.onMoveLock.bind(this))\r\n        }\r\n    }\r\n\r\n    detach() {\r\n        if (this.#moveListener.isAttached()) {\r\n            this.#moveListener.detach();\r\n            this.#eventId != null && this.#bus.detach(EVENTS.MOVE_LOCK, this.#eventId);\r\n        }\r\n\r\n    }\r\n\r\n    isAttached() {\r\n        return this.#moveListener.isAttached();\r\n    }\r\n\r\n    private onMove(data: ICuiMoveEvent) {\r\n        if (this.#isLocked) {\r\n            return;\r\n        }\r\n        switch (data.type) {\r\n            case \"down\":\r\n                this.#firstEvent = data;\r\n                break;\r\n            case \"move\":\r\n                if (this.#firstEvent) {\r\n                    this.#bus.emit(EVENTS.GLOBAL_MOVE, null, this.#firstEvent);\r\n                    this.#firstEvent = undefined;\r\n                }\r\n                this.#bus.emit(EVENTS.GLOBAL_MOVE, null, data);\r\n                break;\r\n            case \"up\":\r\n                if (this.#firstEvent) {\r\n                    this.#firstEvent = undefined;\r\n                    return;\r\n                }\r\n\r\n                this.#bus.emit(EVENTS.GLOBAL_MOVE, null, data);\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n    private onMoveLock(flag: boolean) {\r\n        this.#isLocked = flag;\r\n    }\r\n}","import { IUIInteractionProvider } from \"cui-light-core/dist/esm/models/interfaces\";\r\nimport { is, sleep } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CLASSES } from \"cui-light-core/dist/esm/utils/statics\";\r\n\r\nexport class CuiToastHandler {\r\n    #interactions: IUIInteractionProvider;\r\n    #selector: string;\r\n    #className: string;\r\n    #activeCls: string;\r\n    #animationTime: number;\r\n    #lock: boolean;\r\n    #animClsIn: string;\r\n    #animClsOut: string;\r\n    constructor(interaction: IUIInteractionProvider, prefix: string, animationTime: number) {\r\n        this.#interactions = interaction;\r\n        this.#selector = `.${prefix}-toast`;\r\n        this.#className = `${prefix}-toast`;\r\n        this.#activeCls = `${prefix}-active`;\r\n        this.#animationTime = animationTime;\r\n        this.#lock = false;\r\n        this.#animClsIn = `${prefix}-toast-animation-in`;\r\n        this.#animClsOut = `${prefix}-toast-animation-out`\r\n    }\r\n\r\n    async show(message: string): Promise<boolean> {\r\n        if (this.#lock) {\r\n            return false;\r\n        }\r\n        this.#lock = true;\r\n        let toastElement = document.querySelector(this.#selector);\r\n        if (!is(toastElement)) {\r\n            toastElement = document.createElement('div');\r\n            toastElement.classList.add(this.#className);\r\n            document.body.appendChild(toastElement);\r\n            await sleep(10);\r\n        }\r\n\r\n        this.#interactions.mutate(() => {\r\n            //@ts-ignore\r\n            toastElement.textContent = message;\r\n            //@ts-ignore\r\n            toastElement.classList.add(CLASSES.animProgress);\r\n            //@ts-ignore\r\n            toastElement.classList.add(this.#animClsIn);\r\n        }, this);\r\n\r\n        await sleep(this.#animationTime);\r\n        this.#interactions.mutate(() => {\r\n            //@ts-ignore\r\n            toastElement.classList.remove(CLASSES.animProgress);\r\n            //@ts-ignore\r\n            toastElement.classList.remove(this.#animClsIn);\r\n            //@ts-ignore\r\n            toastElement.classList.add(this.#activeCls);\r\n        }, this)\r\n        await sleep(3000);\r\n        this.#interactions.mutate(() => {\r\n            //@ts-ignore\r\n            toastElement.classList.add(CLASSES.animProgress);\r\n            //@ts-ignore\r\n            toastElement.classList.add(this.#animClsOut);\r\n        }, this)\r\n\r\n        setTimeout(() => {\r\n            this.#interactions.mutate(() => {\r\n                //@ts-ignore\r\n                toastElement.classList.remove(CLASSES.animProgress);\r\n                //@ts-ignore\r\n                toastElement.classList.remove(this.#animClsOut);\r\n                //@ts-ignore\r\n                toastElement.classList.remove(this.#activeCls);\r\n            }, this)\r\n            this.#lock = false;\r\n        }, this.#animationTime);\r\n        return true;\r\n    }\r\n}","import { CLASSES } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { ICuiLogger, IUIInteractionProvider } from \"cui-light-core/dist/esm/models/interfaces\";\r\nimport { CuiLoggerFactory } from \"cui-light-core/dist/esm/factories/logger\";\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\n\r\nexport class CollectionManagerHelper {\r\n    #elements: Element[];\r\n    #log: ICuiLogger;\r\n    #isLocked: boolean;\r\n    #toggleClass: string;\r\n    #interactions: IUIInteractionProvider;\r\n    constructor(interactions: IUIInteractionProvider) {\r\n        this.#interactions = interactions;\r\n        this.#log = CuiLoggerFactory.get('CollectionManager');\r\n        this.#elements = [];\r\n        this.#isLocked = false;\r\n        this.#toggleClass = \"\";\r\n    }\r\n\r\n    setElements(elements: Element[]) {\r\n        this.#elements = elements;\r\n    }\r\n\r\n    setToggle(className: string) {\r\n        this.#toggleClass = className;\r\n    }\r\n\r\n    addAnimationClass(currentElement: Element, nextElement: Element, animIn: string, animOut: string,): void {\r\n        nextElement.classList.add(CLASSES.animProgress);\r\n        currentElement.classList.add(animOut);\r\n        nextElement.classList.add(animIn);\r\n    }\r\n\r\n    setFinalClasses(currentElement: Element, nextElement: Element, animIn: string, animOut: string): void {\r\n        nextElement.classList.remove(CLASSES.animProgress);\r\n        currentElement.classList.remove(animOut);\r\n        nextElement.classList.remove(animIn);\r\n        currentElement.classList.remove(this.#toggleClass);\r\n        nextElement.classList.add(this.#toggleClass);\r\n    }\r\n\r\n    verifyIndex(index: number, current: number, count: number): boolean {\r\n        return index >= 0 && index !== current && index < count\r\n    }\r\n\r\n    async setCurrent(newIndex: number, current: number): Promise<boolean> {\r\n        this.lock();\r\n        this.#log.debug(`Switching index from: ${current} to ${newIndex}`)\r\n        if (current > -1)\r\n            this.#elements[current].classList.remove(this.#toggleClass);\r\n        this.#elements[newIndex].classList.add(this.#toggleClass);\r\n        this.unlock();\r\n        return true;\r\n    }\r\n\r\n    async setCurrentWithAnimation(newIndex: number, animClassIn: string, animClassOut: string, duration: number, current: number): Promise<boolean> {\r\n        this.lock()\r\n        this.#log.debug(`Switching index from: ${current} to ${newIndex}`)\r\n\r\n        const currentElement = this.#elements[current];\r\n        const nextElement = this.#elements[newIndex];\r\n        this.#interactions.mutate(this.addAnimationClass, this, currentElement, nextElement, animClassIn, animClassOut);\r\n        setTimeout(() => {\r\n            this.#interactions.mutate(this.setFinalClasses, this, currentElement, nextElement, animClassIn, animClassOut)\r\n            this.unlock();\r\n        }, duration)\r\n        return true;\r\n    }\r\n\r\n    getCurrentIndex(): number {\r\n        if (!is(this.#toggleClass)) {\r\n            return -1;\r\n        }\r\n        let len = this.count();\r\n        for (let i = 0; i < len; i++) {\r\n            if (this.#elements[i].classList.contains(this.#toggleClass)) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    elements(): Element[] {\r\n        return this.#elements;\r\n    }\r\n\r\n    check(): boolean {\r\n        if (this.#isLocked) {\r\n            this.#log.warning(\"Object locked. Operation in progress\", \"Check\");\r\n            return false;\r\n        } else if (!is(this.#toggleClass)) {\r\n            this.#log.warning(\"Toggle is not set. Call setToggleClass\", \"Check\");\r\n            return false;\r\n        } else if (this.count() <= 0) {\r\n            this.#log.warning(\"Elements list is empty\", \"Check\");\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    count(): number {\r\n        return this.#elements ? this.#elements.length : -1;\r\n    }\r\n\r\n    lock() {\r\n        this.#isLocked = true;\r\n    }\r\n\r\n    unlock() {\r\n        this.#isLocked = false\r\n    }\r\n\r\n\r\n}","import { IUIInteractionProvider, ICuiLogger, CuiCachable } from \"cui-light-core/dist/esm/models/interfaces\";\r\nimport { CuiLoggerFactory } from \"cui-light-core/dist/esm/factories/logger\";\r\nimport { CollectionManagerHelper } from \"../helpers/collection\";\r\n\r\nexport class CollectionManager implements CuiCachable {\r\n    #log: ICuiLogger;\r\n    #cDt: number;\r\n    #helper: CollectionManagerHelper;\r\n\r\n    constructor(elements: Element[], interactions: IUIInteractionProvider) {\r\n        this.#log = CuiLoggerFactory.get('CollectionManager');\r\n        this.#helper = new CollectionManagerHelper(interactions);\r\n        this.#helper.setElements(elements);\r\n        this.#cDt = Date.now();\r\n    }\r\n\r\n    setToggle(className: string) {\r\n        this.#helper.setToggle(className)\r\n    }\r\n\r\n    setElements(elements: Element[]) {\r\n        this.#helper.setElements(elements);\r\n    }\r\n\r\n    click(callback: (element: Element, index: number) => void): void {\r\n        this.#helper.elements().forEach((element, index) => {\r\n            element.addEventListener('click', () => {\r\n                this.set(index).then(() => {\r\n                    if (callback) {\r\n                        callback(element, index)\r\n                    }\r\n                })\r\n            })\r\n        })\r\n    }\r\n\r\n    async next(): Promise<boolean> {\r\n        if (!this.#helper.check()) {\r\n            return false;\r\n        }\r\n        let newIdx = this.#helper.getCurrentIndex() + 1;\r\n        return this.set(newIdx >= this.length() ? 0 : newIdx);\r\n    }\r\n\r\n    async previous(): Promise<boolean> {\r\n        if (!this.#helper.check()) {\r\n            return false;\r\n        }\r\n        let newIdx = this.#helper.getCurrentIndex() - 1;\r\n        return this.set(newIdx < 0 ? this.length() - 1 : newIdx)\r\n    }\r\n\r\n    async set(index: number): Promise<boolean> {\r\n        let current = this.#helper.getCurrentIndex();\r\n        if (!this.#helper.check() || !this.#helper.verifyIndex(index, current, this.length())) {\r\n            return false;\r\n        }\r\n        return this.#helper.setCurrent(index, current)\r\n    }\r\n\r\n    async setWithAnimation(index: number, animClassIn: string, animClassOut: string, duration: number): Promise<boolean> {\r\n        let current = this.#helper.getCurrentIndex();\r\n        if (!this.#helper.check() || !this.#helper.verifyIndex(index, current, this.length())) {\r\n            return false;\r\n        }\r\n        return this.#helper.setCurrentWithAnimation(index, animClassIn, animClassOut, duration, current)\r\n    }\r\n\r\n    getCurrentIndex(): number {\r\n        return this.#helper.getCurrentIndex();\r\n    }\r\n\r\n    length() {\r\n        return this.#helper.count();\r\n    }\r\n\r\n    refresh(): boolean {\r\n        return this.length() > 0 && Date.now() - this.#cDt > 360000;\r\n    }\r\n}","import { ICuiPlugin, ICuiLogger, ICuiMutiationPlugin, ICuiPluginManager } from \"cui-light-core/dist/esm/models/interfaces\";\r\nimport { CuiUtils } from \"cui-light-core/dist/esm/models/utils\";\r\nimport { CuiLoggerFactory } from \"cui-light-core/dist/esm/factories/logger\";\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\n\r\n\r\n\r\nexport class CuiPluginManager implements ICuiPluginManager {\r\n    #plugins: ICuiPlugin[];\r\n    #mutated: ICuiMutiationPlugin[];\r\n    #log: ICuiLogger;\r\n    constructor(plugins: ICuiPlugin[]) {\r\n        this.#plugins = plugins ?? [];\r\n        this.#log = CuiLoggerFactory.get(\"CuiPluginManager\")\r\n        this.#mutated = [];\r\n    }\r\n\r\n    init(utils: CuiUtils): void {\r\n        this.#log.debug(\"Plugins initialization started: \" + this.#plugins.length)\r\n        this.#mutated = this.#plugins.filter((plugin: any) => {\r\n            return is(plugin.mutation);\r\n        }) as any;\r\n        this.#plugins.forEach(plugin => {\r\n            plugin.init(utils);\r\n            utils.setup.plugins[plugin.description] = plugin.setup;\r\n        })\r\n        this.#log.debug(\"Plugins have been initialized\");\r\n    }\r\n\r\n    get(name: string): ICuiPlugin | undefined {\r\n        if (!is(name)) {\r\n            return undefined;\r\n        }\r\n        return this.#plugins.find(p => p.name === name);\r\n    }\r\n\r\n    async onMutation(mutation: MutationRecord): Promise<boolean> {\r\n        let tasks: Promise<boolean>[] = [];\r\n        this.#mutated.forEach((plugin: any) => {\r\n            tasks.push(plugin.mutation(mutation))\r\n        })\r\n        let result: boolean[] = await Promise.all(tasks);\r\n        return result.find(val => {\r\n            val === false\r\n        }) ? false : true;\r\n    }\r\n\r\n}","import { CuiSetupInit } from \"cui-light-core/dist/esm/models/setup\";\r\nimport { is, joinAttributesForQuery, are, registerCuiElement, addCuiArgument } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { STATICS, EVENTS, CSS_VARIABLES } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { ICuiLogger, ICuiPlugin, ICuiComponent, ICuiPluginManager, CuiElement, CuiAlertData } from \"cui-light-core/dist/esm/models/interfaces\";\r\nimport { ICuiMutionObserver, CuiMutationObserver } from \"cui-light-core/dist/esm/observers/mutations\";\r\nimport { CuiLoggerFactory } from \"cui-light-core/dist/esm/factories/logger\";\r\nimport { CuiUtils } from \"cui-light-core/dist/esm/models/utils\";\r\nimport { CuiInstanceInitError } from \"cui-light-core/dist/esm/models/errors\";\r\nimport { CuiAlertFactory } from \"./handlers/alert\";\r\nimport { CuiMoveObserver } from \"./observers/move\";\r\nimport { ElementManager } from \"./managers/element\";\r\nimport { CuiToastHandler } from \"./managers/toast\";\r\nimport { CollectionManager } from \"./managers/collection\";\r\nimport { CuiPluginManager } from \"./managers/plugins\";\r\nimport { CuiAlertType } from \"cui-light-core/dist/esm/utils/types\";\r\n\r\n\r\nexport class CuiInstance {\r\n    #log: ICuiLogger;\r\n    #mutationObserver: ICuiMutionObserver | undefined;\r\n    #toastManager: CuiToastHandler | undefined;\r\n    #utils: CuiUtils;\r\n    #plugins: ICuiPluginManager;\r\n    #components: ICuiComponent[];\r\n    #rootElement: HTMLElement;\r\n    #moveObserver: CuiMoveObserver;\r\n    #mutatedAttributes: string[];\r\n    constructor(setup: CuiSetupInit, plugins: ICuiPlugin[], components: ICuiComponent[]) {\r\n        STATICS.prefix = setup.prefix;\r\n        STATICS.logLevel = setup.logLevel;\r\n        this.#plugins = new CuiPluginManager(plugins);\r\n        this.#components = components ?? [];\r\n        this.#utils = new CuiUtils(setup);\r\n        this.#log = CuiLoggerFactory.get('CuiInstance')\r\n        this.#rootElement = setup.root;\r\n        this.#moveObserver = new CuiMoveObserver(this.#utils.bus);\r\n        this.#mutationObserver = undefined;\r\n        this.#toastManager = undefined;\r\n        this.#mutatedAttributes = [];\r\n    }\r\n\r\n    init(): CuiInstance {\r\n        this.#log.debug(\"Instance started\", \"init\")\r\n        // Init elements\r\n        if (!is(window.MutationObserver)) {\r\n            throw new CuiInstanceInitError(\"Mutation observer does not exists\");\r\n        }\r\n        this.#toastManager = new CuiToastHandler(this.#utils.interactions, this.#utils.setup.prefix, this.#utils.setup.animationTimeLong ?? 0);\r\n        this.#mutatedAttributes = this.#components.map(x => { return x.attribute }); // MUTATED_ATTRIBUTES; \r\n        const initElements = is(this.#mutatedAttributes) ? this.#rootElement.querySelectorAll(joinAttributesForQuery(this.#mutatedAttributes)) : null\r\n        if (is(initElements)) {\r\n            //@ts-ignore initElements already checked\r\n            this.#log.debug(`Initiating ${initElements.length} elements`)\r\n            try {\r\n                //@ts-ignore initElements already checked\r\n                initElements.forEach((item: any) => {\r\n                    registerCuiElement(item, this.#components, this.#mutatedAttributes, this.#utils);\r\n                })\r\n            } catch (e) {\r\n                this.#log.exception(e);\r\n            }\r\n        }\r\n        this.#log.debug(\"Init plugins\", \"init\")\r\n        // Init plugins\r\n        this.#plugins.init(this.#utils);\r\n\r\n        if (are(this.#components, this.#mutatedAttributes)) {\r\n            this.#log.debug(\"Init mutation observer\", \"init\")\r\n            this.#mutationObserver = new CuiMutationObserver(this.#rootElement, this.#utils)\r\n            this.#mutationObserver.setComponents(this.#components).setAttributes(this.#mutatedAttributes)\r\n            this.#mutationObserver.setPlugins(this.#plugins);\r\n            this.#mutationObserver.start();\r\n        }\r\n\r\n        this.#log.debug(\"Setting CSS globals\", 'init')\r\n        this.#utils.interactions.mutate(() => {\r\n            this.#utils.setProperty(CSS_VARIABLES.animationTimeLong, `${this.#utils.setup.animationTimeLong}ms`)\r\n            this.#utils.setProperty(CSS_VARIABLES.animationTime, `${this.#utils.setup.animationTime}ms`);\r\n            this.#utils.setProperty(CSS_VARIABLES.animationTimeShort, `${this.#utils.setup.animationTimeShort}ms`);\r\n        }, null)\r\n        this.#moveObserver.attach();\r\n\r\n        this.#utils.bus.emit(EVENTS.INSTANCE_INITIALIZED, null)\r\n        return this;\r\n    }\r\n\r\n    finish(): void {\r\n        if (this.#mutationObserver)\r\n            this.#mutationObserver.stop();\r\n        this.#moveObserver.detach();\r\n        this.#utils.bus.emit(EVENTS.INSTANCE_FINISHED, null)\r\n    }\r\n\r\n    get(selector: string): ElementManager | undefined {\r\n        const elements = this.all(selector);\r\n        if (!elements) {\r\n            return undefined;\r\n        }\r\n        const newElement = new ElementManager(elements, this.#utils);\r\n        return newElement\r\n    }\r\n\r\n    collection(selector: string): CollectionManager | undefined {\r\n        const elements = this.all(selector);\r\n        if (!is(elements)) {\r\n            return undefined;\r\n        }\r\n        // @ts-ignore already checked\r\n        let manager = new CollectionManager(elements, this.#utils.interactions);\r\n        return manager;\r\n    }\r\n\r\n\r\n    async toast(message: string): Promise<boolean> {\r\n        if (!are(message, this.#toastManager)) {\r\n            return false;\r\n        }\r\n        //@ts-ignore toast manager exists\r\n        return this.#toastManager.show(message)\r\n    }\r\n\r\n    select(selector: string): Element | null {\r\n        return document.querySelector(selector)\r\n    }\r\n\r\n    all(selector: string): Element[] | undefined {\r\n        const nodes: NodeListOf<Element> = document.querySelectorAll(selector);\r\n        if (!is(nodes)) {\r\n            return undefined;\r\n        }\r\n        return [...nodes];\r\n    }\r\n\r\n    getUtils(): CuiUtils {\r\n        return this.#utils;\r\n    }\r\n\r\n    on(event: string, callback: any, element?: CuiElement): void {\r\n        if (!are(event, callback)) {\r\n            this.#log.error(\"Incorrect arguments\", \"on\")\r\n        }\r\n        this.#utils.bus.on(event, callback, element);\r\n    }\r\n\r\n    detach(event: string, id: string): void {\r\n        if (!are(event, id)) {\r\n            this.#log.error(\"Incorrect arguments\", \"detach\")\r\n        }\r\n        this.#utils.bus.detach(event, id);\r\n    }\r\n\r\n    detachAll(event: string): void {\r\n        if (!is(event)) {\r\n            this.#log.error(\"Incorrect arguments\", \"detachAll\")\r\n        }\r\n        this.#utils.bus.detachAll(event);\r\n    }\r\n\r\n    emit(event: string, element: Element | string, ...args: any[]): void {\r\n        if (!are(event, element)) {\r\n            this.#log.warning(\"Not enough data to emit event\", \"emit\")\r\n            return;\r\n        }\r\n        let el = typeof element === 'string' ? document.querySelector(element) : element;\r\n        let cuid = (<CuiElement>(el as any)).$cuid;\r\n        if (!is(cuid)) {\r\n            this.#log.warning(\"Element is not a cUI element\", \"emit\")\r\n            return\r\n        }\r\n        this.#utils.bus.emit(event, cuid, ...args);\r\n    }\r\n\r\n    alert(id: string, type: CuiAlertType, data: CuiAlertData): void {\r\n        let popup = CuiAlertFactory.get(id, type, data, this.#utils);\r\n        if (!popup) {\r\n            this.#log.error(\"Possibly incorrect alert type\");\r\n            return;\r\n        }\r\n        popup.show(this.#rootElement);\r\n    }\r\n\r\n    getPlugin(name: string): ICuiPlugin | undefined {\r\n        return this.#plugins.get(name);\r\n    }\r\n\r\n    createCuiElement<T extends object>(element: HTMLElement, arg: string, data: T): boolean {\r\n        if (!is(arg) || !this.#mutatedAttributes.includes(arg)) {\r\n            this.#log.error(\"Element cannot be created: Unknown attribute\")\r\n            return false;\r\n        }\r\n        if (!addCuiArgument(element, arg, data)) {\r\n            this.#log.error(\"Element cannot be created: Missing data\")\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n}","import { CuiSetupInit } from \"cui-light-core/dist/esm/models/setup\";\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiInstance } from \"./instance\";\r\nimport { ICONS } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { ICuiComponent, ICuiPlugin } from \"cui-light-core/dist/esm/models/interfaces\";\r\nimport { CuiAnimationsDefinition, SWIPE_ANIMATIONS_DEFINITIONS } from \"cui-light-core/dist/esm/animation/definitions\";\r\n\r\nexport interface CuiInitData {\r\n    plugins?: ICuiPlugin[];\r\n    components?: ICuiComponent[];\r\n    setup?: CuiSetupInit;\r\n    icons?: any;\r\n    swipeAnimations?: CuiAnimationsDefinition;\r\n}\r\n\r\nexport interface CuiInitResult {\r\n    result: boolean;\r\n    message?: string;\r\n}\r\n\r\nexport class CuiInitializer {\r\n    #window: any;\r\n    constructor() {\r\n        this.#window = window;\r\n    }\r\n\r\n    async init(setup: CuiInitData): Promise<CuiInitResult> {\r\n        let settings: CuiSetupInit = { ... new CuiSetupInit(), ...setup.setup }\r\n        const appPrefix: string = settings.app;\r\n        const result: CuiInitResult = {\r\n            result: false\r\n        }\r\n        if (is(this.#window[appPrefix])) {\r\n            result.message = \"Instance is already initialized\";\r\n            return result;\r\n        }\r\n        if (is(setup.icons)) {\r\n            for (let icon in setup.icons) {\r\n                ICONS[icon] = setup.icons[icon];\r\n            }\r\n        }\r\n        if (is(setup.swipeAnimations)) {\r\n            for (let animation in setup.swipeAnimations) {\r\n                SWIPE_ANIMATIONS_DEFINITIONS[animation] = setup.swipeAnimations[animation];\r\n            }\r\n\r\n        }\r\n        try {\r\n            this.#window[appPrefix] = new CuiInstance(settings, setup.plugins ?? [], setup.components ?? [])\r\n            this.#window[appPrefix].init();\r\n        } catch (e) {\r\n            console.error(e);\r\n            result.message = \"An error occured during initialization\";\r\n            return result;\r\n        }\r\n        result.result = true;\r\n        return result;\r\n    }\r\n}","import { CuiInit } from './init';\r\nimport { CUI_LIGHT_COMPONENTS_VERSION } from \"cui-light-components/dist/esm/index\";\r\nimport { CUI_LIGHT_PLUGINS_VERSION } from \"cui-light-plugins/dist/esm/index\";\r\nimport { CUI_CORE_VERSION } from \"cui-light-core/dist/esm/index\";\r\n\r\nexport const CUI_LIGHT_VERSION = \"0.2.2\";\r\nexport const CUI_LIGHT_CORE_VER = CUI_CORE_VERSION;\r\nexport const CUI_LIGHT_COMPONENTS_VER = CUI_LIGHT_COMPONENTS_VERSION;\r\nexport const CUI_LIGHT_PLUGINS_VER = CUI_LIGHT_PLUGINS_VERSION;\r\n\r\ndeclare global {\r\n    interface Window {\r\n        cuiInit: CuiInit;\r\n    }\r\n}\r\n\r\nexport { CuiInstance } from './instance';\r\nwindow.cuiInit = new CuiInit();","import { ICuiPlugin, ICuiComponent } from \"cui-light-core/dist/esm/models/interfaces\";\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiInitData, CuiInitializer } from \"./initializer\";\r\nimport { GetComponents } from \"cui-light-components/dist/esm/module\";\r\nimport { GetPlugins } from \"cui-light-plugins/dist/esm/module\"\r\n\r\n\r\nexport class CuiInit {\r\n    #isInitialized: boolean;\r\n    constructor() {\r\n        this.#isInitialized = false;\r\n    }\r\n\r\n    async init(data: CuiInitData): Promise<boolean> {\r\n        if (this.#isInitialized) {\r\n            console.log(\"Module is already initialized\")\r\n            return false;\r\n        }\r\n        const initializer = new CuiInitializer();\r\n        const pluginList: ICuiPlugin[] = GetPlugins({\r\n            autoLight: true,\r\n            autoPrint: true\r\n        });\r\n\r\n        const componentList: ICuiComponent[] = GetComponents({\r\n            prefix: data.setup?.prefix\r\n        })\r\n        let appPlugins = pluginList;\r\n        if (data.plugins) {\r\n            appPlugins = { ...pluginList, ...data.plugins }\r\n        }\r\n\r\n        let result = await initializer.init({\r\n            setup: data.setup,\r\n            icons: data.icons,\r\n            plugins: appPlugins,\r\n            // @ts-ignore already checked\r\n            components: is(data.components) ? [...componentList, ...data.components] : componentList,\r\n            swipeAnimations: data.swipeAnimations\r\n        })\r\n        if (result.result) {\r\n            this.#isInitialized = true;\r\n            return true;\r\n        } else {\r\n            console.error(`A cUI instance failed to initialize: [${result.message ?? \"#\"}]`);\r\n        }\r\n        console.log(\"Cui Light failed to init\")\r\n        return false;\r\n\r\n    }\r\n}"],"sourceRoot":""}