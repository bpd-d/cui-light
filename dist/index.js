!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("cui-light",[],e):"object"==typeof exports?exports["cui-light"]=e():t["cui-light"]=e()}(window,(function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=9)}([function(t,e,i){"use strict";i.d(e,"r",(function(){return r})),i.d(e,"j",(function(){return o})),i.d(e,"y",(function(){return a})),i.d(e,"e",(function(){return h})),i.d(e,"m",(function(){return c})),i.d(e,"n",(function(){return u})),i.d(e,"c",(function(){return l})),i.d(e,"u",(function(){return d})),i.d(e,"p",(function(){return p})),i.d(e,"q",(function(){return f})),i.d(e,"a",(function(){return g})),i.d(e,"b",(function(){return v})),i.d(e,"l",(function(){return m})),i.d(e,"k",(function(){return w})),i.d(e,"i",(function(){return b})),i.d(e,"s",(function(){return k})),i.d(e,"h",(function(){return M})),i.d(e,"v",(function(){return O})),i.d(e,"o",(function(){return E})),i.d(e,"t",(function(){return j})),i.d(e,"x",(function(){return x})),i.d(e,"f",(function(){return T})),i.d(e,"g",(function(){return W})),i.d(e,"w",(function(){return C})),i.d(e,"d",(function(){return S}));var s=i(3),n=i(1);function r(t,e=!0){return!(null==t||e&&function(t){return"string"==typeof t?0===t.length:"boolean"==typeof t?t:!!Array.isArray(t)&&0===t.length}(t))}function o(t,e){if(!r(t)||!r(e))throw new s.a("Missing argument value");return`${t}-${e}`}function a(t){return new Promise(e=>setTimeout(()=>{e(!0)},t))}function h(t){if(!r(t))return null;let e=document.createElement("template");return e.innerHTML=t,e.content.children.length>0?e.content.children[0]:null}function c(t,e,i){return t<e?e:t>i?i:t}function u(t,e,i,s){return null==t||isNaN(t)?s:c(t,e,i)}function l(t){return r(t)?Object.assign({},t):null}function d(t){return r(t)?`[${t.join("],[")}]`:""}function p(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function f(){return window.matchMedia&&window.matchMedia("print").matches}function g(...t){if(!r(t))return!1;let e=t.length;for(let i=0;i<e;i++)if(!r(t[i]))return!1;return!0}function v(t){return t<=640?"small":t>640&&t<=960?"medium":t>960&&t<=1200?"large":"xlarge"}function m(t){if(!r(t))return-1;let e=t.offsetTop-parseInt(y(t,"margin-top"))-parseInt(y(t,"padding-top"))-parseInt(y(t,"border-top-width"));return e<0?t.offsetTop:e}function w(t){if(!r(t))return-1;let e=t.offsetLeft-parseInt(y(t,"margin-left"))-parseInt(y(t,"padding-left"))-parseInt(y(t,"border-left-width"));return e<0?t.offsetLeft:e}function b(t,e){let i=parseInt(t);return isNaN(i)?e:i}function y(t,e){return r(t)&&r(e)?t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):null:null}function k(t,e,i){return r(t)&&t>=e&&t<=i}function M(t){return(null!=t?t:"")+"-active"}function O(t,e){return g(t,e)?function(t){let e=function(t){let e=null;if(r(t)&&t.startsWith("{")&&t.endsWith("}")){try{e=function(t){return t&&t.length>0?JSON.parse(t):{}}(t)}catch(t){console.error(("An exception occured",i="Functions",s="parseJsonString",`[${(new Date).toLocaleString()}][${i}][${s}][An exception occured]`),t)}return e}var i,s;return null}(t.trim());return r(e)||(t.includes(";")||t.includes(":")?(e={},t.split(";").forEach(t=>{let i=t.split(":");2===i.length&&(e[i[0].trim()]=i[1].trim())})):e=t),e}(t.getAttribute(e)):null}function E(t,e){return r(t)?t.toLowerCase():e}function j(t){return"string"==typeof t}function x(t,e){return r(t)?t.replace("{prefix}",null!=e?e:""):t}function T(t){return`${r(t)?t:"cui-element"}-${n.b.next().value}}`}function W(){let t=L(1,1e3),e=L(1,100);return`${Math.floor(Math.random()*e)}-${Math.floor(t)}`}function L(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function C(t,e,i,n){let o=t;o.$handlers={};let a=function(t,e){return t&&r(t.hasAttribute)?e.filter(e=>t.hasAttribute(e)):null}(t,i);r(a)&&(a.forEach(i=>{let a=e.find(t=>t.attribute===i);if(r(a))try{n.styleAppender.append(a.getStyle());let e=a.get(t,n);o.$handlers[a.attribute]=e,o.$handlers[a.attribute].handle(O(t,a.attribute))}catch(t){throw new s.e(t.message)}}),o.$cuid=T(t.tagName))}function*S(){let t=0;for(;;)((yield t++)||t>2e5)&&(t=0)}},function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"i",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"d",(function(){return a})),i.d(e,"e",(function(){return h})),i.d(e,"f",(function(){return c})),i.d(e,"g",(function(){return u})),i.d(e,"j",(function(){return l})),i.d(e,"h",(function(){return d})),i.d(e,"b",(function(){return p}));var s=i(0);const n={dark:"dark",animProgress:"animation-progress",print:"print",active:"active"},r={close:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 1.9999999,1.9999999 18,18"></path><path d="M 18,1.9999999 1.9999999,18"></path></svg>',accordion:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M 5.0000475,7.4490018 10.000024,12.551028 15,7.4490018"></path></svg>',special_menu:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path class="menu_handle_2" d="M 1,10 H 19"></path><path class="menu_handle_1" d="M 1,4.8571429 H 19"></path><path  class="menu_handle_3" d="M 1,15.142857 H 19"></path></svg>',special_fail:'<svg xmlns="http://www.w3.org/2000/svg" class="special-fail" viewBox="0 0 100 100" width="100" height="100"><path class="circle" d="M 50,7.000001 A 43,43 0 0 1 92.999999,50 43,43 0 0 1 50,92.999999 43,43 0 0 1 7.0000011,50 43,43 0 0 1 50,7.000001 Z"></path><path class="arm_1" d="M 28.536809,28.536809 71.342023,71.342023"></path><path class="arm_2" d="M 71.342023,28.536809 28.536809,71.342023"></path></svg>',special_success:'<svg xmlns="http://www.w3.org/2000/svg" class="special-success" viewBox="0 0 100 100" width="100" height="100"><path class="circle" d="M 50,7 A 43,43 0 0 1 93,50 43,43 0 0 1 50,93 43,43 0 0 1 7,50 43,43 0 0 1 50,7 Z"></path><path class="arm" d="M 22.988405,48.234784 36.946233,72.410453 75.516456,33.84023"></path></svg>'},o={light:"--cui-color-light-app-background",dark:"--cui-color-dark-app-background"},a={light:"--cui-color-light-background",dark:"--cui-color-dark-background "},h={light:"--cui-color-light-border",dark:"--cui-color-dark-border"},c={light:{base:"--cui-color-light-base",muted:"--cui-color-light-muted",active:"--cui-color-light-active"},dark:{base:"--cui-color-dark-base",muted:"--cui-color-dark-muted",active:"--cui-color-dark-active"},accent:{base:"--cui-color-primary",muted:"--cui-color-primary-muted",active:"--cui-color-primary-active"},secondary:{base:"--cui-color-secondary",muted:"--cui-color-secondary-muted",active:"--cui-color-secondary-active"},success:{base:"--cui-color-success",muted:"--cui-color-success-muted",active:"--cui-color-success-active"},warning:{base:"--cui-color-warning",muted:"--cui-color-warning-muted",active:"--cui-color-warning-active"},error:{base:"--cui-color-error",muted:"--cui-color-error-muted",active:"--cui-color-error-active"}},u={fontSize:"--{prefix}-font-size",lineHeight:"--{prefix}-line-height",animationTime:"--{prefix}-animation-time",animationTimeLong:"--{prefix}-animation-time-long",animationTimeShort:"--{prefix}-animation-time-short",colorLightAppBackground:"--{prefix}-color-light-app-background",colorLightBackground:"--{prefix}-color-light-background",colorLightBorder:"--{prefix}-color-light-border",colorLightBase:"--{prefix}-color-light-base",colorLightActive:"--{prefix}-color-light-active",colorLightMuted:"--{prefix}-color-light-muted",colorDarkAppBackground:"--{prefix}-color-dark-app-background",colorDarkBackground:"--{prefix}-color-dark-background",colorDarkBorder:"--{prefix}-color-dark-border",colorDarkBase:"--{prefix}-color-dark-base",colorDarkActive:"--{prefix}-color-dark-active",colorDarkMuted:"--{prefix}-color-dark-muted",colorAccent:"--{prefix}-color-primary",colorAccentActive:"--{prefix}-color-primary-active",colorAccentMuted:"--{prefix}-color-primary-muted",colorAccentShade:"--{prefix}-color-primary-shade",colorAccentShadeDark:"--{prefix}-color-primary-shade-dark",colorSecondary:"--{prefix}-color-secondary",colorSecondaryActive:"--{prefix}-color-secondary-active",colorSecondaryMuted:"--{prefix}-color-secondary-muted",colorSecondaryShade:"--{prefix}-color-secondary-shade",colorSecondaryShadeDark:"--{prefix}-color-secondary-shade-dark",colorWarning:"--{prefix}-color-warning",colorWarningActive:"--{prefix}-color-warning-active",colorWarningMuted:"--{prefix}-color-warning-muted",colorWarningShade:"--{prefix}-color-warning-shade",colorWarningShadeDark:"--{prefix}-color-warning-shade-dark",colorSuccess:"--{prefix}-color-success",colorSuccessActive:"--{prefix}-color-success-active",colorSuccessMuted:"--{prefix}-color-success-muted",colorSuccessShade:"--{prefix}-color-success-shade",colorSuccessShadeDark:"--{prefix}-color-success-shade-dark",colorError:"--{prefix}-color-error",colorErrorActive:"--{prefix}-color-error-active",colorErrorMuted:"--{prefix}-color-error-muted",colorErrorShade:"--{prefix}-color-error-shade",colorErrorShadeDark:"--{prefix}-color-error-shade-dark",inputBackground:"--{prefix}-input-background-color",colorShade:"--{prefix}-color-shade",colorShadeDarker:"--{prefix}-color-shade-darker",colorShadeLight:"--{prefix}-color-shade-light",colorShadeLighter:"--{prefix}-color-shade-light-lighter",outline:"--{prefix}-outline",borderRadius:"--{prefix}-border-radius",padding:"--{prefix}-padding",margin:"--{prefix}-margin",scrollbarWidth:"--{prefix}-scrollbar-width",componentSpace:"--{prefix}-component-space"};class l{}l.logLevel="none",l.prefix="cui";const d={INSTANCE_INITIALIZED:"instance-initialized",INSTANCE_FINISHED:"instance-finished",ON_RESIZE:"resize",ON_OPEN:"open",ON_CLOSE:"close",ON_TOGGLE:"toggle",ON_SCROLL:"scroll",ON_TARGET_CHANGE:"targetchange",ON_INTERSECTION:"intersection",ON_KEYDOWN:"keydown",ON_SCROLLBY:"scrollby"},p=Object(s.d)()},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));class s{constructor(t,e){this.level=e,this.component=t,this.id="-"}setLevel(t){this.level=t}setId(t){this.id=t}debug(t,e){"debug"===this.level&&console.log(this.prepString(t,e))}error(t,e){"error"!==this.level&&"debug"!==this.level&&"warning"!==this.level||console.error(this.prepString(t,e))}warning(t,e){"warning"!==this.level&&"debug"!==this.level||console.warn(this.prepString(t,e))}exception(t,e){console.error(this.prepString(`An exception occured: ${t.name}: ${t.message}`,e)),"debug"===this.level&&console.exception(t.stack)}performance(t,e){if("debug"!==this.level)return;let i=Date.now();t(),console.log(this.prepString(`Performance measure: ${Date.now()-i}ms`,e))}prepString(t,e){return`[${(new Date).toLocaleString()}][${this.component}][${null!=e?e:"-"}][${this.id}][${t}]`}}var n=i(1);class r{static get(t,e){return new s(t,null!=e?e:n.j.logLevel)}}},function(t,e,i){"use strict";i.d(e,"d",(function(){return n})),i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"e",(function(){return h}));class s extends Error{constructor(t,e){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name=t}}class n extends s{constructor(t){super("ItemNotFoundError",t)}}class r extends s{constructor(t){super("ArgumentError",t)}}class o extends s{constructor(t){super("CuiInstanceInitError",t)}}class a extends s{constructor(t){super("CuiScrollSpyOutOfRangeError",t)}}class h extends s{constructor(t){super("RegisterElementError",t)}}},function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return n}));class s{constructor(){this.autoLightMode=!1,this.scrollThreshold=20,this.resizeThreshold=20,this.plugins={}}fromInit(t){return this.prefix=t.prefix,this.logLevel=t.logLevel,this.cacheSize=t.cacheSize,this.autoLightMode=t.autoLightMode,this.animationTime=t.animationTime,this.animationTimeShort=t.animationTimeShort,this.animationTimeLong=t.animationTimeLong,this.scrollThreshold=t.scrollThreshold,this.resizeThreshold=t.resizeThreshold,this}}class n{constructor(){this.prefix="cui",this.app="$cui",this.logLevel="warning",this.interaction="async",this.animationTime=300,this.animationTimeShort=150,this.animationTimeLong=500,this.cacheSize=500,this.autoLightMode=!1,this.scrollThreshold=20,this.resizeThreshold=20,this.root=document.body}}},function(t,e,i){"use strict";i.d(e,"b",(function(){return ks})),i.d(e,"a",(function(){return Ms}));var s,n=i(4),r=i(0),o=i(2),a=i(1),h=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class c{constructor(t){s.set(this,void 0),function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");e.set(t,i)}(this,s,t)}performAction(t,e,i){return function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){return new Promise(n=>{h(this,s).mutate(()=>{e.add(t),t.classList.add(a.a.animProgress),setTimeout(()=>{h(this,s).mutate(()=>{e.remove(t),t.classList.remove(a.a.animProgress),n(!0)},null)},i)},null)})}))}}s=new WeakMap;var u,l,d=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},p=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class f{constructor(t){u.set(this,void 0),d(this,u,t)}add(t,e){Object(r.a)(t,p(this,u))&&!t.classList.contains(p(this,u))&&t.classList.add(p(this,u))}remove(t,e){Object(r.a)(t,p(this,u))&&t.classList.contains(p(this,u))&&t.classList.remove(p(this,u))}toggle(t,e){Object(r.a)(t,p(this,u))&&(t.classList.contains(p(this,u))?t.classList.add(p(this,u)):t.classList.remove(p(this,u)))}}u=new WeakMap;class g{constructor(t){l.set(this,void 0),d(this,l,t)}add(t,e){switch(p(this,l)){case"dark-mode":e.setLightMode("dark");break;case"light-mode":e.setLightMode("light")}}remove(t,e){switch(p(this,l)){case"dark-mode":e.setLightMode("light");break;case"light-mode":e.setLightMode("dark")}}toggle(t,e){switch(p(this,l)){case"dark-mode":case"light-mode":this.setDarkMode(e)}}setDarkMode(t){"dark"===t.getLightMode()?t.setLightMode("light"):t.setLightMode("dark")}}l=new WeakMap;class v{constructor(){}add(t,e){}remove(t,e){}toggle(t,e){}}class m{static get(t){if(!Object(r.r)(t))return new v;switch(t[0]){case".":return new f(t.substring(1));case"~":return new g(t.substring(1));default:return new f(t)}}}var w,b,y,k,M,O,E=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))},j=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},x=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class T{constructor(t,e){w.set(this,void 0),b.set(this,void 0),y.set(this,void 0),k.set(this,void 0),M.set(this,void 0),O.set(this,void 0),j(this,w,t),j(this,b,!1),j(this,y,o.a.get("ElementManager")),j(this,M,e),j(this,k,Date.now()),j(this,O,new c(e.interactions))}toggleClass(t){return E(this,void 0,void 0,(function*(){return!!Object(r.r)(t)&&this.call(e=>{e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)},"toggleClass")}))}toggleClassAs(t){return E(this,void 0,void 0,(function*(){return!!Object(r.r)(t)&&this.call(e=>{let i=e.classList;x(this,M).interactions.fetch(()=>{i.contains(t)?x(this,M).interactions.mutate(i.remove,i,t):x(this,M).interactions.mutate(i.add,i,t)},this)},"toggleClassAs")}))}setClass(t){return E(this,void 0,void 0,(function*(){return!!Object(r.r)(t)&&this.call(e=>{e.classList.contains(t)||e.classList.add(t)},"setClass")}))}setClassAs(t){return E(this,void 0,void 0,(function*(){return!!Object(r.r)(t)&&this.call(e=>{let i=e.classList;x(this,M).interactions.fetch(()=>{i.contains(t)||x(this,M).interactions.mutate(i.add,i,t)},this)},"setClassAs")}))}removeClass(t){return E(this,void 0,void 0,(function*(){return!!Object(r.r)(t)&&this.call(e=>{e.classList.contains(t)&&e.classList.remove(t)},"removeClass")}))}removeClassAs(t){return E(this,void 0,void 0,(function*(){return!!Object(r.r)(t)&&this.call(e=>{let i=e.classList;x(this,M).interactions.fetch(()=>{i.contains(t)&&x(this,M).interactions.mutate(i.remove,i,t)},this)},"removeClass")}))}getAttribute(t){return Object(r.r)(t)?x(this,w).reduce((e,i)=>(i.hasAttribute(t)?e.push(i.getAttribute(t)):e.push(null),e),[]):null}setAttribute(t,e){return E(this,void 0,void 0,(function*(){return!!Object(r.r)(t)&&this.call(i=>{i.setAttribute(t,null!=e?e:"")},"setAttribute")}))}setAttributeAs(t,e){return E(this,void 0,void 0,(function*(){return!!Object(r.r)(t)&&this.call(i=>{x(this,M).interactions.mutate(i.setAttribute,i,t,null!=e?e:"")},"setAttributeAs")}))}removeAttribute(t){return E(this,void 0,void 0,(function*(){return!!Object(r.r)(t)&&this.call(e=>{e.removeAttribute(t)},"removeAttribute")}))}removeAttributeAs(t){return E(this,void 0,void 0,(function*(){return!!Object(r.r)(t)&&this.call(e=>{x(this,M).interactions.mutate(e.removeAttribute,e,t)},"removeAttributeAs")}))}toggleAttribute(t,e){return E(this,void 0,void 0,(function*(){return!!Object(r.r)(t)&&this.call(i=>{i.hasAttribute(t)?i.removeAttribute(t):i.setAttribute(t,null!=e?e:"")},"toggleAttribute")}))}toggleAttributeAs(t,e){return E(this,void 0,void 0,(function*(){return!!Object(r.r)(t)&&this.call(i=>{x(this,M).interactions.fetch(()=>{i.hasAttribute(t)?x(this,M).interactions.mutate(i.removeAttribute,i,t):x(this,M).interactions.mutate(i.setAttribute,i,t,null!=e?e:"")},this)},"toggleAttributeAs")}))}click(t){return E(this,void 0,void 0,(function*(){return!!Object(r.r)(t)&&this.call(e=>{e.addEventListener("click",t)},"click")}))}event(t,e){return E(this,void 0,void 0,(function*(){return!(!Object(r.r)(t)||!Object(r.r)(e))&&this.call(i=>{i.addEventListener(t,e)},"event")}))}call(t,e){return E(this,void 0,void 0,(function*(){return x(this,b)&&x(this,y).error("Element is locked",e),this.lock(),x(this,w).forEach((e,i)=>{t(e,i)}),this.unlock(),!0}))}animate(t,e){return E(this,void 0,void 0,(function*(){if(!Object(r.r)(t))return!1;const i=null!=e?e:x(this,M).setup.animationTime;return this.call(e=>{this.change(()=>{e.classList.add(t),e.classList.add(a.a.animProgress),setTimeout(()=>{this.change(()=>{e.classList.remove(t),e.classList.remove(a.a.animProgress)})},i)})})}))}open(t,e,i){return E(this,void 0,void 0,(function*(){if(!Object(r.a)(t,e))return!1;const s=null!=i?i:x(this,M).setup.animationTime,n=new f(e);return this.call(e=>{x(this,O).performAction(e,n,s).then(()=>{e.classList.add(t)})})}))}close(t,e,i){return E(this,void 0,void 0,(function*(){if(!Object(r.a)(t,e))return!1;const s=null!=i?i:x(this,M).setup.animationTime,n=new f(e);return this.call(e=>{x(this,O).performAction(e,n,s).then(()=>{e.classList.remove(t)})})}))}read(t,...e){x(this,M).interactions.fetch(t,this,...e)}change(t,...e){x(this,M).interactions.mutate(t,this,...e)}elements(){return x(this,w)}count(){return x(this,w).length}lock(){j(this,b,!0)}unlock(){j(this,b,!1)}isLocked(){return x(this,b)}refresh(){return Date.now()-x(this,k)<36e4}}w=new WeakMap,b=new WeakMap,y=new WeakMap,k=new WeakMap,M=new WeakMap,O=new WeakMap;var W,L,C,S,A,I,_,P=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},N=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class D{constructor(t,e){W.set(this,void 0),L.set(this,void 0),C.set(this,void 0),S.set(this,void 0),A.set(this,void 0),I.set(this,void 0),_.set(this,void 0),P(this,W,null),P(this,C,t),this._log=o.a.get("CuiMutationObserver"),this.plugins=null,P(this,S,[]),P(this,A,[]),P(this,I,e),P(this,_,"")}setPlugins(t){return this.plugins=t,this}setComponents(t){return P(this,S,t),this}setAttributes(t){return P(this,L,{attributes:!0,subtree:!0,childList:!0,attributeFilter:t}),P(this,A,t),P(this,_,Object(r.u)(t)),this}start(){return this._log.debug("Starting"),P(this,W,new MutationObserver(this.mutationCallback.bind(this))),N(this,W).observe(N(this,C),N(this,L)),this._log.debug("Started"),this}stop(){return this._log.debug("Stopping"),null!==N(this,W)&&this._log.debug("Observer available"),N(this,W).disconnect(),P(this,W,null),this._log.debug("Stopped"),this}mutationCallback(t,e){t.forEach(t=>{switch(t.type){case"attributes":const e=t.target;Object(r.a)(e.$handlers,e.$handlers[t.attributeName])&&e.$handlers[t.attributeName].refresh(Object(r.v)(e,t.attributeName));break;case"childList":this.handleChildListMutation(t)}Object(r.r)(this.plugins)&&this.plugins.onMutation(t).then(()=>{})})}handleChildListMutation(t){const e=t.addedNodes.length,i=t.removedNodes.length;e>0?(this._log.debug("Registering added nodes: "+e),this.handleAddedNodes(t.addedNodes)):i>0&&(this._log.debug("Removing nodes: "+i),this.handleRemovedNodes(t.removedNodes))}handleAddedNodes(t){t.forEach(t=>{try{Object(r.w)(t,N(this,S),N(this,A),N(this,I));let e=t.hasChildNodes()?t.querySelectorAll(N(this,_)):null;Object(r.r)(e)&&e.forEach(t=>{Object(r.w)(t,N(this,S),N(this,A),N(this,I))})}catch(t){this._log.exception(t)}})}handleRemovedNodes(t){t.forEach(t=>{this.destroySingleElement(t);let e=t.hasChildNodes()?t.querySelectorAll(N(this,_)):null;Object(r.r)(e)&&e.forEach(t=>{this.destroySingleElement(t)})})}destroySingleElement(t){let e=t;if(e.$handlers)for(let t in e.$handlers)if(e.$handlers.hasOwnProperty(t))try{e.$handlers[t].destroy()}catch(e){this._log.exception(e,"remove - "+t)}}}W=new WeakMap,L=new WeakMap,C=new WeakMap,S=new WeakMap,A=new WeakMap,I=new WeakMap,_=new WeakMap;var $,z,B,q,R,H,K,F,G=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Z=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class U{constructor(t,e,i){$.set(this,void 0),z.set(this,void 0),B.set(this,void 0),q.set(this,void 0),R.set(this,void 0),H.set(this,void 0),K.set(this,void 0),F.set(this,void 0),G(this,$,t),G(this,z,`.${e}-toast`),G(this,B,e+"-toast"),G(this,q,e+"-active"),G(this,R,i),G(this,H,!1),G(this,K,e+"-toast-animation-in"),G(this,F,e+"-toast-animation-out")}show(t){return function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(Z(this,H))return!1;G(this,H,!0);let e=document.querySelector(Z(this,z));return Object(r.r)(e)||(e=document.createElement("div"),e.classList.add(Z(this,B)),document.body.appendChild(e)),Z(this,$).mutate(()=>{e.innerHTML=t,e.classList.add(a.a.animProgress),e.classList.add(Z(this,K))},this),yield Object(r.y)(Z(this,R)),Z(this,$).mutate(()=>{e.classList.remove(a.a.animProgress),e.classList.remove(Z(this,K)),e.classList.add(Z(this,q))},this),yield Object(r.y)(3e3),Z(this,$).mutate(()=>{e.classList.add(a.a.animProgress),e.classList.add(Z(this,F))},this),setTimeout(()=>{Z(this,$).mutate(()=>{e.classList.remove(a.a.animProgress),e.classList.remove(Z(this,F)),e.classList.remove(Z(this,q))},this),G(this,H,!1)},Z(this,R)),!0}))}}$=new WeakMap,z=new WeakMap,B=new WeakMap,q=new WeakMap,R=new WeakMap,H=new WeakMap,K=new WeakMap,F=new WeakMap;var V,Y,J,Q,X,tt=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))},et=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},it=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class st{constructor(t){V.set(this,void 0),Y.set(this,void 0),J.set(this,void 0),Q.set(this,void 0),X.set(this,void 0),et(this,X,t),et(this,Y,o.a.get("CollectionManager"))}setElements(t){et(this,V,t)}setToggle(t){et(this,Q,t)}addAnimationClass(t,e,i,s){e.classList.add(a.a.animProgress),t.classList.add(s),e.classList.add(i)}setFinalClasses(t,e,i,s){e.classList.remove(a.a.animProgress),t.classList.remove(s),e.classList.remove(i),t.classList.remove(it(this,Q)),e.classList.add(it(this,Q))}verifyIndex(t,e,i){return t>=0&&t!==e&&t<i}setCurrent(t,e){return tt(this,void 0,void 0,(function*(){return this.lock(),it(this,Y).debug(`Switching index from: ${e} to ${t}`),e>-1&&it(this,V)[e].classList.remove(it(this,Q)),it(this,V)[t].classList.add(it(this,Q)),this.unlock(),!0}))}setCurrentWithAnimation(t,e,i,s,n){return tt(this,void 0,void 0,(function*(){this.lock(),it(this,Y).debug(`Switching index from: ${n} to ${t}`);const r=it(this,V)[n],o=it(this,V)[t];return it(this,X).mutate(this.addAnimationClass,this,r,o,e,i),setTimeout(()=>{it(this,X).mutate(this.setFinalClasses,this,r,o,e,i),this.unlock()},s),!0}))}getCurrentIndex(){if(!Object(r.r)(it(this,Q)))return-1;let t=this.count();for(let e=0;e<t;e++)if(it(this,V)[e].classList.contains(it(this,Q)))return e;return-1}elements(){return it(this,V)}check(){return it(this,J)?(it(this,Y).warning("Object locked. Operation in progress","Check"),!1):Object(r.r)(it(this,Q))?!(this.count()<=0&&(it(this,Y).warning("Elements list is empty","Check"),1)):(it(this,Y).warning("Toggle is not set. Call setToggleClass","Check"),!1)}count(){return it(this,V)?it(this,V).length:-1}lock(){et(this,J,!0)}unlock(){et(this,J,!1)}}V=new WeakMap,Y=new WeakMap,J=new WeakMap,Q=new WeakMap,X=new WeakMap;var nt,rt,ot,at=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))},ht=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ct=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ut{constructor(t,e){nt.set(this,void 0),rt.set(this,void 0),ot.set(this,void 0),ht(this,nt,o.a.get("CollectionManager")),ht(this,ot,new st(e)),ct(this,ot).setElements(t),ht(this,rt,Date.now())}setToggle(t){ct(this,ot).setToggle(t)}setElements(t){ct(this,ot).setElements(t)}click(t){ct(this,ot).elements().forEach((e,i)=>{e.addEventListener("click",()=>{this.set(i).then(()=>{t&&t(e,i)})})})}next(){return at(this,void 0,void 0,(function*(){if(!ct(this,ot).check())return!1;let t=ct(this,ot).getCurrentIndex()+1;return this.set(t>=this.length()?0:t)}))}previous(){return at(this,void 0,void 0,(function*(){if(!ct(this,ot).check())return!1;let t=ct(this,ot).getCurrentIndex()-1;return this.set(t<0?this.length()-1:t)}))}set(t){return at(this,void 0,void 0,(function*(){let e=ct(this,ot).getCurrentIndex();return!(!ct(this,ot).check()||!ct(this,ot).verifyIndex(t,e,this.length()))&&ct(this,ot).setCurrent(t,e)}))}setWithAnimation(t,e,i,s){return at(this,void 0,void 0,(function*(){let n=ct(this,ot).getCurrentIndex();return!(!ct(this,ot).check()||!ct(this,ot).verifyIndex(t,n,this.length()))&&ct(this,ot).setCurrentWithAnimation(t,e,i,s,n)}))}getCurrentIndex(){return ct(this,ot).getCurrentIndex()}length(){return ct(this,ot).count()}refresh(){return this.length()>0&&Date.now()-ct(this,rt)>36e4}}nt=new WeakMap,rt=new WeakMap,ot=new WeakMap;var lt,dt,pt,ft=i(6),gt=i(3),vt=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},mt=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class wt{constructor(t){lt.set(this,void 0),dt.set(this,void 0),pt.set(this,void 0),vt(this,lt,null!=t?t:[]),vt(this,pt,o.a.get("CuiPluginManager"))}init(t){mt(this,pt).debug("Plugins initialization started: "+mt(this,lt).length),vt(this,dt,mt(this,lt).filter(t=>Object(r.r)(t.mutation))),mt(this,lt).forEach(e=>{e.init(t),t.setup.plugins[e.description]=e.setup}),mt(this,pt).debug("Plugins have been initialized")}get(t){if(Object(r.r)(t))return mt(this,lt).find(e=>e.name===t)}onMutation(t){return function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){let e=[];return mt(this,dt).forEach(i=>{e.push(i.mutation(t))}),!(yield Promise.all(e)).find(t=>{})}))}}lt=new WeakMap,dt=new WeakMap,pt=new WeakMap;var bt,yt,kt,Mt,Ot,Et,jt=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},xt=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Tt{constructor(t,e,i){bt.set(this,void 0),yt.set(this,void 0),kt.set(this,void 0),Mt.set(this,void 0),Ot.set(this,void 0),Et.set(this,void 0),a.j.prefix=t.prefix,a.j.logLevel=t.logLevel,this.plugins=new wt(e),jt(this,Ot,null!=i?i:[]),jt(this,Mt,new ft.a(t)),jt(this,bt,o.a.get("CuiInstance")),jt(this,Et,t.root)}init(){if(xt(this,bt).debug("Instance started","init"),!Object(r.r)(window.MutationObserver))throw new gt.b("Mutation observer does not exists");jt(this,kt,new U(xt(this,Mt).interactions,xt(this,Mt).setup.prefix,xt(this,Mt).setup.animationTimeLong));const t=xt(this,Ot).map(t=>t.attribute),e=Object(r.r)(t)?xt(this,Et).querySelectorAll(Object(r.u)(t)):null;if(Object(r.r)(e)){xt(this,bt).debug(`Initiating ${e.length} elements`);try{e.forEach(e=>{Object(r.w)(e,xt(this,Ot),t,xt(this,Mt))})}catch(t){xt(this,bt).exception(t)}}return xt(this,bt).debug("Init plugins","init"),this.plugins.init(xt(this,Mt)),Object(r.a)(xt(this,Ot),t)&&(xt(this,bt).debug("Init mutation observer","init"),jt(this,yt,new D(xt(this,Et),xt(this,Mt))),xt(this,yt).setComponents(xt(this,Ot)).setAttributes(t),xt(this,yt).setPlugins(this.plugins),xt(this,yt).start()),xt(this,bt).debug("Setting CSS globals","init"),xt(this,Mt).interactions.mutate(()=>{xt(this,Mt).setProperty(a.g.animationTimeLong,xt(this,Mt).setup.animationTimeLong+"ms"),xt(this,Mt).setProperty(a.g.animationTime,xt(this,Mt).setup.animationTime+"ms"),xt(this,Mt).setProperty(a.g.animationTimeShort,xt(this,Mt).setup.animationTimeShort+"ms")},null),xt(this,Mt).bus.emit(a.h.INSTANCE_INITIALIZED,null),this}finish(){xt(this,yt).stop(),xt(this,Mt).bus.emit(a.h.INSTANCE_FINISHED,null)}get(t){const e=xt(this,Mt).cache.get(t);if(Object(r.r)(e))return e;const i=this.all(t);if(!i)return;const s=new T(i,xt(this,Mt));return xt(this,Mt).cache.put(t,s),s}collection(t){const e=xt(this,Mt).cache.get(t);if(Object(r.r)(e))return e;const i=this.all(t);if(!Object(r.r)(i))return;let s=new ut(i,xt(this,Mt).interactions);return xt(this,Mt).cache.put(t,s),s}toast(t){return function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){return!!Object(r.r)(t)&&xt(this,kt).show(t)}))}select(t){return document.querySelector(t)}all(t){const e=document.querySelectorAll(t);if(Object(r.r)(e))return[...e]}getUtils(){return xt(this,Mt)}on(t,e,i,s){Object(r.a)(t,e)||xt(this,bt).error("Incorrect arguments","on"),xt(this,Mt).bus.on(t,e,i,s)}}bt=new WeakMap,yt=new WeakMap,kt=new WeakMap,Mt=new WeakMap,Ot=new WeakMap,Et=new WeakMap;var Wt,Lt,Ct,St,At=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},It=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class _t{constructor(t){Wt.set(this,void 0),Lt.set(this,void 0),Ct.set(this,void 0),St.set(this,void 0),At(this,Wt,t),At(this,Ct,!1)}setCallback(t){At(this,Lt,t)}isInProgress(){return It(this,St)}attach(){window.matchMedia&&!It(this,Ct)&&It(this,Wt)&&(window.matchMedia(It(this,Wt)).addEventListener("change",this.event.bind(this)),At(this,Ct,!0))}detach(){It(this,Ct)&&(window.matchMedia(It(this,Wt)).removeEventListener("change",this.event.bind(this)),At(this,Ct,!1))}event(t){if(!It(this,St)){At(this,St,!0);try{It(this,Lt).call(this,t)}catch(t){console.error(t)}finally{At(this,St,!1)}}}}Wt=new WeakMap,Lt=new WeakMap,Ct=new WeakMap,St=new WeakMap;var Pt,Nt,Dt=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},$t=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class zt{constructor(t){this.description="Dark vs Light mode auto switcher",this.name="auto-light",Pt.set(this,void 0),Nt.set(this,void 0),this.description="CuiAutoLightModePlugin",this.setup=t}init(t){Dt(this,Nt,t),this.setup.autoLight&&"dark"===Object(r.p)()&&$t(this,Nt).setLightMode("dark"),Dt(this,Pt,new _t("(prefers-color-scheme: dark)")),$t(this,Pt).setCallback(this.onChange.bind(this)),$t(this,Pt).attach()}destroy(){$t(this,Pt).detach()}onChange(t){var e;let i=$t(this,Nt).setup.plugins[this.description];null!==(e=null==i?void 0:i.autoLight)&&void 0!==e&&e&&(t.matches?$t(this,Nt).setLightMode("dark"):$t(this,Nt).setLightMode("light"))}}Pt=new WeakMap,Nt=new WeakMap;class Bt{constructor(t,e,i){this._log=o.a.get(t),this.utils=i,this.element=e,this.cuid=e.$cuid}mutate(t,...e){this.utils.interactions.mutate(t,this,...e)}fetch(t,...e){this.utils.interactions.fetch(t,this,...e)}getEventName(t){return[t,this.cuid].join("-")}emitEvent(t,...e){this.utils.bus.emit(t,this.cuid,...e)}onEvent(t,e){this.utils.bus.on(t,e,this)}getId(){return this.cuid}}var qt,Rt,Ht,Kt,Ft,Gt,Zt=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ut=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Vt{parse(t){Object(r.r)(t)||(this.icon=null),Object(r.t)(t)?this.icon=t:this.icon=Object(r.o)(t.icon,"")}}class Yt{constructor(t){this.attribute=(null!=t?t:"cui")+"-icon"}getStyle(){return null}get(t,e){return new Jt(t,e,this.attribute)}}class Jt extends Bt{constructor(t,e,i){super("CuiIconHandler",t,e),qt.set(this,void 0),Rt.set(this,void 0),Ht.set(this,void 0),Zt(this,qt,null),Zt(this,Rt,i),Zt(this,Ht,new Vt)}handle(t){this._log.debug("Icon handle","handle"),Ut(this,Ht).parse(t),null===Ut(this,qt)?(this.addIcon(Ut(this,Ht).icon),Zt(this,qt,Ut(this,Ht).icon)):this._log.debug("Icon already initialized")}refresh(t){this._log.debug("Icon refresh","refresh"),Ut(this,Ht).parse(t),Ut(this,Ht).icon!==Ut(this,qt)&&(this.addIcon(Ut(this,Ht).icon),Zt(this,qt,Ut(this,Ht).icon))}destroy(){this._log.debug("Icon delete","destroy");const t=this.element.querySelector("svg");Object(r.r)(t)&&t.remove(),Zt(this,qt,null)}addIcon(t){const e=t?a.i[t]:null;if(!e)return;const i=new Qt(e).build(),s=this.element.querySelector("svg");Object(r.r)(s)&&s.remove(),this.element.childNodes.length>0?this.mutate(this.insertBefore,i):this.mutate(this.appendChild,i)}insertBefore(t){this.element.insertBefore(t,this.element.firstChild)}appendChild(t){this.element.appendChild(t)}}qt=new WeakMap,Rt=new WeakMap,Ht=new WeakMap;class Qt{constructor(t){Kt.set(this,void 0),Ft.set(this,void 0),Gt.set(this,void 0),Zt(this,Kt,t),Zt(this,Ft,1)}setStyle(t){return Zt(this,Gt,t),this}setScale(t){return Zt(this,Ft,t),this}build(){let t=Object(r.e)(Ut(this,Kt));return Object(r.r)(t)&&Ut(this,Ft)&&(new Xt).append(t,Ut(this,Ft)),t}}Kt=new WeakMap,Ft=new WeakMap,Gt=new WeakMap;class Xt{append(t,e){let i=t.hasAttribute("width")?parseInt(t.getAttribute("width")):20,s=t.hasAttribute("height")?parseInt(t.getAttribute("height")):20;t.setAttribute("width",(i*e).toString()),t.setAttribute("height",(s*e).toString())}}var te,ee,ie,se,ne,re,oe,ae=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},he=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ce{constructor(){te.set(this,void 0),this.attribute="circle-progress",a.i.special_circle_progress='<svg xmlns="http://www.w3.org/2000/svg"  class="circle-progress" viewBox="0 0 100 100" width="100" height="100"><path class="circle-progress-path" d="M 50,5.3660047 A 44.867708,44.633994 0 0 1 94.867709,49.999997 44.867708,44.633994 0 0 1 50,94.633995 44.867708,44.633994 0 0 1 5.1322908,50.000001 44.867708,44.633994 0 0 1 50,5.3660047"></path></svg>'}getStyle(){return null}get(t,e){return new ue(t,e,this.attribute)}}te=new WeakMap;class ue extends Bt{constructor(t,e,i){super("CuiCircleHandler",t,e),ee.set(this,void 0),ie.set(this,void 0),se.set(this,void 0),ne.set(this,void 0),re.set(this,void 0),oe.set(this,void 0),ae(this,ie,ae(this,se,0)),ae(this,ne,null),ae(this,re,-1),ae(this,oe,i)}handle(t){if(Object(r.r)(he(this,ee)))return;const e=new Qt(a.i.special_circle_progress).build(),i=this.element.querySelector("svg");Object(r.r)(i)&&i.remove(),this.element.appendChild(e),ae(this,ne,this.element.querySelector(".circle-progress-path")),ae(this,se,he(this,ne).getTotalLength()),ae(this,ie,he(this,se)/100),ae(this,ee,!0),this.fetch(this.readStyle)}refresh(t){this.fetch(this.readStyle)}destroy(){ae(this,ee,!1)}updateStyle(t){he(this,ne).style.strokeDashoffset=t}readStyle(){const t=this.element.hasAttribute(he(this,oe))?parseInt(this.element.getAttribute(he(this,oe))):0;if(t===he(this,re))return;ae(this,re,t);const e=Object(r.m)(t,0,100);this.mutate(this.updateStyle,he(this,se)-he(this,ie)*e)}}ee=new WeakMap,ie=new WeakMap,se=new WeakMap,ne=new WeakMap,re=new WeakMap,oe=new WeakMap;var le,de,pe=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},fe=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ge{constructor(){this.attribute="data-spinner",a.i.special_circle_double='<svg xmlns="http://www.w3.org/2000/svg" class="circle-double" viewBox="0 0 100 100" width="100" height="100"><path class="circle-double-outer" d="M 50.000002,6.1070619 A 44.867709,44.126654 0 0 1 94.867708,50.233712 44.867709,44.126654 0 0 1 50.000002,94.36037 44.867709,44.126654 0 0 1 5.132292,50.233717 44.867709,44.126654 0 0 1 50.000002,6.1070619"></path><path class="circle-double-inner" d="M 50.000001,15.59972 A 35.383463,34.633995 0 0 1 85.383464,50.233711 35.383463,34.633995 0 0 1 50.000001,84.86771 35.383463,34.633995 0 0 1 14.616536,50.233716 35.383463,34.633995 0 0 1 50.000001,15.59972"></path></svg>'}getStyle(){return null}get(t,e){return new ve(t,e,this.attribute)}}class ve extends Bt{constructor(t,e,i){super("CuiSpinnerHandler",t,e),le.set(this,void 0),de.set(this,void 0),this.element=t,pe(this,le,i),pe(this,de,!1)}handle(t){if(fe(this,de))return;const e=this.element.getAttribute(fe(this,le)),i=Object(r.r)(e)?a.i["spinner_"+e]:null;if(!Object(r.r)(i))return;const s=new Qt(i).build();this.element.innerHTML="",pe(this,de,!0),this.mutate(this.addSpinner,s,e)}refresh(t){fe(this,de)}destroy(){pe(this,de,!1),this.element.innerHTML=""}addSpinner(t,e){this.element.appendChild(t),this.element.classList.add("animation-spinner-"+e)}}le=new WeakMap,de=new WeakMap;var me;class we{constructor(){this.attribute="cui-dummy"}getStyle(){return null}get(t,e){return new be(t,e,this.attribute)}}class be extends Bt{constructor(t,e,i){super("CuiDummyHandler",t,e),me.set(this,void 0),function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");e.set(t,i)}(this,me,i)}handle(t){}refresh(t){}destroy(){}}me=new WeakMap;var ye,ke,Me,Oe,Ee=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},je=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class xe{constructor(t){this.attribute=Object(r.r)(t)?t+"scroll":"cui-scroll"}getStyle(){return null}get(t,e){return new Te(t,e,this.attribute)}}class Te extends Bt{constructor(t,e,i){super("CuiScrollHandler",t,e),ye.set(this,void 0),ke.set(this,void 0),Me.set(this,void 0),Oe.set(this,void 0),this.element=t,Ee(this,ye,i),Ee(this,ke,null),Ee(this,Me,null),Ee(this,Oe,null)}handle(t){this.parseArguments(t),this.element.addEventListener("click",this.onClick.bind(this))}refresh(t){this.parseArguments(t)}destroy(){this.element.removeEventListener("click",this.onClick.bind(this))}onClick(t){var e;if(!Object(r.r)(je(this,Oe)))return;let i=Object(r.l)(je(this,Oe))-je(this,Me).offsetTop,s=i-je(this,Me).scrollTop;je(this,Me).scrollBy({top:s,behavior:null!==(e=je(this,ke).behavior)&&void 0!==e?e:"auto"}),this.emitEvent(a.h.ON_SCROLL,{to:i,by:s,target:je(this,Oe),parent:je(this,Me),timestamp:Date.now()}),t.preventDefault()}parseArguments(t){Ee(this,ke,t),Ee(this,Oe,document.querySelector(je(this,ke).target)),Object(r.r)(je(this,Oe))&&Ee(this,Me,Object(r.r)(je(this,ke).parent)?document.querySelector(je(this,ke).parent):je(this,Oe).parentElement)}}ye=new WeakMap,ke=new WeakMap,Me=new WeakMap,Oe=new WeakMap;var We,Le,Ce,Se,Ae,Ie,_e=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Pe=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ne{constructor(t,e){We.set(this,void 0),Le.set(this,void 0),Ce.set(this,void 0),Se.set(this,void 0),Ae.set(this,void 0),Ie.set(this,void 0),_e(this,We,t),_e(this,Le,!1),_e(this,Ce,Object(r.n)(e,0,100,0)),_e(this,Se,_e(this,Ae,0))}setCallback(t){_e(this,Ie,t)}attach(){Pe(this,We).addEventListener("scroll",this.listener.bind(this))}detach(){Pe(this,We).removeEventListener("scroll",this.listener.bind(this))}isInProgress(){return Pe(this,Le)}listener(t){_e(this,Se,Pe(this,Se)+Pe(this,We).scrollLeft),_e(this,Ae,Pe(this,Ae)+Pe(this,We).scrollTop),!Pe(this,Le)&&this.passedThreshold()&&(_e(this,Le,!0),requestAnimationFrame(()=>{Pe(this,Ie).call(this,{base:t,top:Pe(this,We).scrollTop,left:Pe(this,We).scrollLeft}),_e(this,Le,!1),_e(this,Se,0),_e(this,Ae,0)}))}passedThreshold(){return Pe(this,Ce)<=0||Pe(this,Se)>=Pe(this,Ce)||Pe(this,Ae)>=Pe(this,Ce)}}We=new WeakMap,Le=new WeakMap,Ce=new WeakMap,Se=new WeakMap,Ae=new WeakMap,Ie=new WeakMap;var De,$e,ze,Be,qe,Re,He,Ke,Fe,Ge,Ze=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ue=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Ve{constructor(){this.offset=0}parse(t){if(!t.selector)throw new Error("Incorrect arguments");this.selector=t.selector,this.action=m.get(t.action),this.link=t.link,this.linkAction=m.get(t.linkAction),this.offset=Object(r.n)(parseInt(t.offset),-1,1,0)}}class Ye{constructor(t){this.attribute=(null!=t?t:"cui")+"-scrollspy"}getStyle(){return null}get(t,e){return new Je(t,e,this.attribute)}}class Je extends Bt{constructor(t,e,i){super("CuiScrollspyHandler",t,e),De.set(this,void 0),$e.set(this,void 0),ze.set(this,void 0),Be.set(this,void 0),qe.set(this,void 0),Re.set(this,void 0),He.set(this,void 0),Ke.set(this,void 0),Fe.set(this,void 0),Ge.set(this,void 0),this.element=t,Ze(this,De,i),Ze(this,$e,new Ne(this.element,this.utils.setup.scrollThreshold)),Ze(this,ze,new Ve),Ze(this,Be,[]),Ze(this,qe,[]),Ze(this,Re,Ze(this,He,Ue(this,Ke)-1))}handle(t){this._log.debug("Handle","handle"),Ze(this,Fe,this.element.scrollTop),Ze(this,Ge,this.element.scrollLeft),this.parseAttribute(t),this.calculateCurrent(Ue(this,Fe)),Ue(this,$e).setCallback(this.onScroll.bind(this)),Ue(this,$e).attach()}refresh(t){this._log.debug("Refresh"),this.parseAttribute(t),Ze(this,Fe,this.element.scrollTop),Ze(this,Ge,this.element.scrollLeft),this.calculateCurrent(Ue(this,Fe))}destroy(){Ue(this,$e).detach()}onScroll(t){let e=-1;if(e=Math.abs(t.left-Ue(this,Ge))>Math.abs(t.top-Ue(this,Fe))?this.calculateCurrentLeft(t.left):this.calculateCurrent(t.top),e!==Ue(this,Re)){let i=this.setCurrent(e);this.emitEvent(a.h.ON_TARGET_CHANGE,{top:t.top,left:t.left,target:i,timestamp:Date.now()})}Ze(this,Fe,this.element.scrollTop),Ze(this,Ge,this.element.scrollLeft)}parseAttribute(t){Ue(this,ze).parse(t),Ze(this,qe,[...this.element.querySelectorAll(Ue(this,ze).selector)]),Ze(this,Be,Ue(this,ze).link?[...document.querySelectorAll(Ue(this,ze).link)]:[]),Ze(this,He,Ue(this,qe).length),Ze(this,Ke,Ue(this,Be).length)}calculateCurrent(t){return Ue(this,qe).findIndex(e=>{let i=Object(r.l)(e)-this.element.offsetTop,s=i*Ue(this,ze).offset;return i+s<=t&&t<i+e.clientHeight+s})}calculateCurrentLeft(t){return Ue(this,qe).findIndex(e=>{let i=Object(r.k)(e)-this.element.offsetLeft,s=i*Ue(this,ze).offset;return i+s<=t&&t<i+e.clientWidth+s})}setCurrent(t){if(!Object(r.s)(t,0,Ue(this,He)))throw new gt.c("New index is out of targets length");let e=Ue(this,qe)[t];return Ue(this,ze).action.add(e),Ue(this,ze).action.remove(Ue(this,qe)[Ue(this,Re)]),Ue(this,Ke)>0&&(Object(r.s)(t,0,Ue(this,Ke))&&Ue(this,ze).linkAction.add(Ue(this,Be)[t]),Object(r.s)(Ue(this,Re),0,Ue(this,Ke))&&Ue(this,ze).linkAction.remove(Ue(this,Be)[Ue(this,Re)])),Ze(this,Re,t),e}}De=new WeakMap,$e=new WeakMap,ze=new WeakMap,Be=new WeakMap,qe=new WeakMap,Re=new WeakMap,He=new WeakMap,Ke=new WeakMap,Fe=new WeakMap,Ge=new WeakMap;var Qe,Xe,ti=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ei=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ii{constructor(t){this.description="Auto print mode",this.name="auto-print",Qe.set(this,void 0),Xe.set(this,void 0),this.description="CuiAutoPrintModePlugin",this.setup=t}init(t){ti(this,Xe,t),this.setup.autoPrint&&Object(r.q)()&&ei(this,Xe).setPrintMode(!0),ti(this,Qe,new _t("print")),ei(this,Qe).setCallback(this.onChange.bind(this)),ei(this,Qe).attach()}destroy(){ei(this,Qe).detach()}onChange(t){var e,i;this.setup=ei(this,Xe).setup.plugins[this.description],null!==(i=null===(e=this.setup)||void 0===e?void 0:e.autoPrint)&&void 0!==i&&i&&(console.log(t.matches),t.matches?ei(this,Xe).setPrintMode(!0):ei(this,Xe).setPrintMode(!1))}}Qe=new WeakMap,Xe=new WeakMap;var si,ni,ri,oi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ai=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class hi{constructor(t,e){si.set(this,void 0),ni.set(this,void 0),ri.set(this,void 0),oi(this,si,t),oi(this,ni,null!=e?e:[0,.1,.25,.5,.75])}setCallback(t){oi(this,ri,t)}connect(){this.observer=new IntersectionObserver(ai(this,ri),{root:ai(this,si),rootMargin:"0px",threshold:ai(this,ni)})}observe(t){this.observer.observe(t)}unobserve(t){this.observer.unobserve(t)}disconnect(){this.observer.disconnect()}}si=new WeakMap,ni=new WeakMap,ri=new WeakMap;var ci,ui,li,di,pi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},fi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class gi{constructor(){this.target="div",this.action=m.get("dummy"),this.offset=0}parse(t){this.target=Object(r.r)(t.target)?t.target:"div",this.action=Object(r.r)(t.action)?m.get(t.action):m.get("dummy"),this.offset=Object(r.n)(parseInt(t.offset),0,1,0)}}class vi{constructor(t){this.attribute=(null!=t?t:"cui")+"-intersection"}getStyle(){return null}get(t,e){return new mi(t,e,this.attribute)}}class mi extends Bt{constructor(t,e,i){super("CuiIntersectionHandler",t,e),ci.set(this,void 0),ui.set(this,void 0),li.set(this,void 0),di.set(this,void 0),pi(this,ci,i),pi(this,ui,new hi(this.element)),pi(this,li,new gi),pi(this,di,[])}handle(t){this.parseArguments(null,t),fi(this,ui).setCallback(this.onIntersection.bind(this)),fi(this,ui).connect(),fi(this,di).forEach(t=>{fi(this,ui).observe(t)})}refresh(t){let e=Object(r.c)(fi(this,li));this.parseArguments(e,t)}destroy(){fi(this,ui).disconnect()}parseArguments(t,e){fi(this,li).parse(e),null!==t&&t.target===fi(this,li).target||pi(this,di,[...document.querySelectorAll(fi(this,li).target)])}onIntersection(t,e){if(!Object(r.r)(fi(this,di)))return;let i=null;t.forEach(t=>{i=this.getAction(t.target),t.isIntersecting&&t.intersectionRatio>fi(this,li).offset?i.add(t.target):i.remove(t.target),this.emitIntersection(t)})}getAction(t){return t.hasAttribute("action")?m.get(t.getAttribute("action")):fi(this,li).action}emitIntersection(t){this.emitEvent(a.h.ON_INTERSECTION,{entry:t,offset:fi(this,li).offset,timestamp:Date.now()})}}ci=new WeakMap,ui=new WeakMap,li=new WeakMap,di=new WeakMap;var wi,bi,yi,ki,Mi,Oi,Ei=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ji=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class xi{constructor(){this.target="",this.action=null,this.timeout=0}parse(t){if(Object(r.r)(t)&&Object(r.t)(t))return this.target=t,this.action=null,void(this.timeout=-1);this.target=Object(r.o)(t.target,null),this.action=m.get(t.action),this.timeout=Object(r.i)(t.timeout,-1)}isValid(){return Object(r.r)(this.target)}}class Ti{constructor(t){wi.set(this,void 0),Ei(this,wi,null!=t?t:"cui"),this.attribute=ji(this,wi)+"-open"}getStyle(){return null}get(t,e){return new Wi(t,e,this.attribute,ji(this,wi))}}wi=new WeakMap;class Wi extends Bt{constructor(t,e,i,s){super("CuiOpenHandler",t,e),bi.set(this,void 0),yi.set(this,void 0),ki.set(this,void 0),Mi.set(this,void 0),Oi.set(this,void 0),Ei(this,Mi,new c(e.interactions)),Ei(this,bi,new xi),Ei(this,yi,!1),Ei(this,ki,s),Ei(this,Oi,!1)}handle(t){this._log.debug("Init","handle"),ji(this,bi).parse(t),ji(this,bi).isValid()&&(this.element.addEventListener("click",this.onClick.bind(this)),Ei(this,yi,!0),this._log.debug("Initialized","handle"))}refresh(t){this._log.debug("Refresh","refresh"),ji(this,bi).parse(t),ji(this,bi).isValid()&&!ji(this,yi)&&(this.element.addEventListener("click",this.onClick.bind(this)),Ei(this,yi,!0),this._log.debug("Initialized","refresh"))}destroy(){this._log.debug("Destroy","destroy"),ji(this,yi)&&(this.element.removeEventListener("click",this.onClick.bind(this)),this._log.debug("Destoryed","destroy"))}onClick(t){if(ji(this,Oi))return;const e=document.querySelector(ji(this,bi).target);if(Object(r.r)(e)){if(Ei(this,Oi,!0),ji(this,bi).action&&-1!==ji(this,bi).timeout){let i=ji(this,bi).timeout>0?ji(this,bi).timeout:this.utils.setup.animationTime;ji(this,Mi).performAction(e,ji(this,bi).action,i).then(()=>{e.classList.add(Object(r.h)(ji(this,ki))),this.emitOpen(t),Ei(this,Oi,!1)})}else e.classList.add(Object(r.h)(ji(this,ki))),this.emitOpen(t),Ei(this,Oi,!1);t.preventDefault()}else this._log.warning(`Target ${ji(this,bi).target} not found`,"onClick")}emitOpen(t){this.emitEvent(a.h.ON_OPEN,{event:t,timestamp:Date.now()})}}bi=new WeakMap,yi=new WeakMap,ki=new WeakMap,Mi=new WeakMap,Oi=new WeakMap;var Li,Ci,Si,Ai,Ii,_i,Pi=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Ni=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Di{constructor(){this.target="",this.action=null,this.timeout=0}parse(t){if(Object(r.r)(t)&&Object(r.t)(t))return this.target=t,this.action=null,void(this.timeout=-1);this.target=Object(r.o)(t.target,null),this.action=m.get(t.action),this.timeout=Object(r.i)(t.timeout,-1)}}class $i{constructor(t){Li.set(this,void 0),Pi(this,Li,null!=t?t:"cui"),this.attribute=Ni(this,Li)+"-close"}getStyle(){return null}get(t,e){return new zi(t,e,this.attribute,Ni(this,Li))}}Li=new WeakMap;class zi extends Bt{constructor(t,e,i,s){super("CuiCloseHandler",t,e),Ci.set(this,void 0),Si.set(this,void 0),Ai.set(this,void 0),Ii.set(this,void 0),_i.set(this,void 0),Pi(this,_i,new c(e.interactions)),Pi(this,Ci,new Di),Pi(this,Si,!1),Pi(this,Ai,s)}handle(t){this._log.debug("Init","handle"),Ni(this,Ci).parse(t),this.element.addEventListener("click",this.onClick.bind(this)),Pi(this,Si,!0),this._log.debug("Initialized","handle")}refresh(t){this._log.debug("Refresh","refresh"),Ni(this,Ci).parse(t),Ni(this,Si)||(this.element.addEventListener("click",this.onClick.bind(this)),Pi(this,Si,!0),this._log.debug("Initialized","refresh"))}destroy(){this._log.debug("Destroy","destroy"),Ni(this,Si)&&(this.element.removeEventListener("click",this.onClick.bind(this)),this._log.debug("Destoryed","destroy"))}onClick(t){if(Ni(this,Ii))return;const e=this.getTarget();if(Object(r.r)(e)){if(Pi(this,Ii,!0),Ni(this,Ci).action&&-1!==Ni(this,Ci).timeout){let i=Ni(this,Ci).timeout>0?Ni(this,Ci).timeout:this.utils.setup.animationTime;Ni(this,_i).performAction(e,Ni(this,Ci).action,i).then(()=>{e.classList.remove(Object(r.h)(Ni(this,Ai))),this.emitClose(t),Pi(this,Ii,!1)})}else e.classList.remove(Object(r.h)(Ni(this,Ai))),this.emitClose(t),Pi(this,Ii,!1);t.preventDefault()}else this._log.warning(`Target ${Ni(this,Ci).target} not found`,"onClick")}getTarget(){return Object(r.r)(Ni(this,Ci).target)?document.querySelector(Ni(this,Ci).target):this.element.parentElement}emitClose(t){this.emitEvent(a.h.ON_CLOSE,{timestamp:Date.now(),event:t})}}Ci=new WeakMap,Si=new WeakMap,Ai=new WeakMap,Ii=new WeakMap,_i=new WeakMap;var Bi,qi,Ri,Hi,Ki=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Fi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Gi{constructor(){this.action=null,this.target=null}parse(t){Object(r.r)(t)&&Object(r.t)(t)?this.action=m.get(t):(this.target=Object(r.o)(t.target,null),this.action=m.get(t.action))}}class Zi{constructor(t){this.attribute=(null!=t?t:"cui")+"-toggle"}getStyle(){return null}get(t,e){return new Ui(t,e,this.attribute)}}class Ui extends Bt{constructor(t,e,i){super("CuiToggleHandler",t,e),Bi.set(this,void 0),qi.set(this,void 0),Ri.set(this,void 0),Hi.set(this,void 0),Ki(this,Bi,i),Ki(this,qi,new Gi),Ki(this,Ri,this.element),Ki(this,Hi,e)}handle(t){Fi(this,qi).parse(t),Ki(this,Ri,this.getTarget()),this.element.addEventListener("click",this.onClick.bind(this))}refresh(t){Fi(this,qi).parse(t),Ki(this,Ri,this.getTarget())}destroy(){this.element.removeEventListener("click",this.onClick.bind(this))}onClick(t){Fi(this,qi).action.toggle(Fi(this,Ri),Fi(this,Hi)),this.emitEvent(a.h.ON_TOGGLE,{action:Fi(this,qi).action,target:Fi(this,Ri),timestamp:Date.now()}),t.preventDefault()}getTarget(){return Object(r.r)(Fi(this,qi).target)?document.querySelector(Fi(this,qi).target):this.element}}Bi=new WeakMap,qi=new WeakMap,Ri=new WeakMap,Hi=new WeakMap;var Vi,Yi,Ji=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},Qi=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Xi{constructor(){this.attribute="cui-resize"}getStyle(){return null}get(t,e){return new ts(t,e,this.attribute)}}class ts extends Bt{constructor(t,e,i){super("CuiResizeHandler",t,e),Vi.set(this,void 0),Yi.set(this,void 0),Ji(this,Vi,i),Ji(this,Yi,e.bus)}handle(t){Qi(this,Yi).on(a.h.ON_RESIZE,this.resize,this)}refresh(t){}destroy(){Qi(this,Yi).detach(a.h.ON_RESIZE,this)}resize(t){console.log(t)}getId(){return Object(r.f)(Qi(this,Vi))}}Vi=new WeakMap,Yi=new WeakMap;var es,is,ss,ns,rs=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},os=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class as{constructor(t,e){es.set(this,void 0),is.set(this,void 0),ss.set(this,void 0),ns.set(this,void 0),rs(this,is,e),rs(this,ss,!1),rs(this,ns,!0)}setCallback(t){rs(this,es,t)}isInProgress(){return os(this,ss)}attach(){document.addEventListener("keydown",this.onKeyDown.bind(this)),os(this,ns)&&document.addEventListener("keyup",this.onKeyUp.bind(this))}detach(){document.removeEventListener("keydown",this.onKeyDown.bind(this)),os(this,ns)&&document.addEventListener("keyup",this.onKeyUp.bind(this))}onKeyDown(t){if(!os(this,ss)){rs(this,ss,!0);try{Object(r.r)(os(this,is))&&!os(this,is).includes(t.code)||os(this,es).call(this,t)}catch(t){console.error(t)}finally{os(this,ns)||rs(this,ss,!1)}}}onKeyUp(t){rs(this,ss,!1)}}es=new WeakMap,is=new WeakMap,ss=new WeakMap,ns=new WeakMap;var hs,cs,us=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ls=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ds{constructor(t){hs.set(this,void 0),cs.set(this,void 0),us(this,cs,t),us(this,hs,new as(!0)),ls(this,hs).setCallback(this.onKeyDown.bind(this))}connect(){ls(this,hs).attach()}disconnect(){ls(this,hs).detach()}onKeyDown(t){ls(this,cs).emit(a.h.ON_KEYDOWN,null,{timestamp:Date.now(),event:t})}}hs=new WeakMap,cs=new WeakMap;var ps,fs=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class gs{constructor(t){this.name="keys-observer",ps.set(this,void 0),this.description="CuiKeysObserverPlugin",this.setup=t}init(t){(function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");e.set(t,i)})(this,ps,new ds(t.bus)),fs(this,ps).connect()}destroy(){fs(this,ps).disconnect()}}ps=new WeakMap;var vs,ms,ws=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))},bs=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},ys=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ks{constructor(){vs.set(this,void 0),bs(this,vs,window)}init(t){return ws(this,void 0,void 0,(function*(){let e=Object.assign(Object.assign({},new n.b),t.setup);const i=e.app,s={result:!1};if(Object(r.r)(ys(this,vs)[i]))return s.message="Instance is already initialized",s;if(Object(r.r)(t.icons))for(let e in t.icons)a.i[e]=t.icons[e];try{ys(this,vs)[i]=new Tt(e,t.plugins,t.components),ys(this,vs)[i].init()}catch(t){return console.error(t),s.message="An error occured during initialization",s}return s.result=!0,s}))}}vs=new WeakMap;class Ms{constructor(){ms.set(this,void 0),bs(this,ms,!1)}init(t){var e;return ws(this,void 0,void 0,(function*(){if(ys(this,ms))return console.log("Module is already initialized"),!1;const i=new ks,s=[new zt({autoLight:!0}),new ii({autoPrint:!0}),new gs(null)],n=[new Yt,new ce,new ge,new we,new xe,new Ye,new vi,new Ti,new $i,new Zi,new Xi];let o=yield i.init({setup:t.setup,icons:t.icons,plugins:Object(r.r)(t.plugins)?[...s,...t.plugins]:s,components:Object(r.r)(t.components)?[...n,...t.components]:n});return o.result?(bs(this,ms,!0),!0):(console.error(`A cUI instance failed to initialize: [${null!==(e=o.message)&&void 0!==e?e:"#"}]`),console.log("Cui Light failed to init"),!1)}))}}ms=new WeakMap},function(t,e,i){"use strict";i.d(e,"a",(function(){return Q}));var s,n=i(4);class r{constructor(){this.isScheduled=!1,s.set(this,void 0),this.raf=window.requestAnimationFrame.bind(window),this.writes=[],this.reads=[],function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");e.set(t,i)}(this,s,5)}mutate(t,e,...i){this.reads.push(this.createTask(t,e,...i)),this.schedule()}fetch(t,e,...i){this.writes.push(this.createTask(t,e,...i)),this.schedule()}createTask(t,e,...i){return e||i?t.bind(e,...i):t}run(t){let e=null;for(;e=t.shift();)e()}schedule(t){if(!this.isScheduled){if(this.isScheduled=!0,t>=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(this,s))throw new Error("Fast Dom limit reached");this.raf(this.flush.bind(this,t))}}flush(t){let e=null!=t?t:0,i=null,s=this.writes,n=this.reads;try{this.run(n),this.run(s)}catch(t){i=t,console.error(t)}this.isScheduled=!1,i&&this.schedule(e+1),(this.writes.length||this.reads.length)&&this.schedule(t+1)}}s=new WeakMap;class o{constructor(){this.isRunning=!1,this.tasks=[],this.raf=window.requestAnimationFrame.bind(window)}mutate(t,e,...i){this.tasks.push(this.createTask(t,e,...i)),this.schedule()}fetch(t,e,...i){this.tasks.push(this.createTask(t,e,...i)),this.schedule()}schedule(){this.isRunning||(this.isRunning=!0,this.raf(this.flush.bind(this)))}flush(){let t=null;for(;t=this.tasks.shift();)try{t()}catch(t){}this.isRunning=!1}createTask(t,e,...i){return e||i?t.bind(e,...i):t}}var a,h,c=i(3),u=i(0),l=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},d=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class p{constructor(t){a.set(this,void 0),h.set(this,void 0),l(this,a,[]),l(this,h,[]),t&&t.forEach(t=>{if(!Object(u.r)(t.key))throw l(this,a,[]),l(this,h,[]),new c.a("Key is empty");this.add(t.key,t.value)})}add(t,e){if(this.throwOnEmptyKey(t),this.containsKey(t))throw new Error("Key already exists");d(this,a).push(t),d(this,h).push(e)}remove(t){if(!Object(u.r)(t))return;let e=d(this,a).indexOf(t);e>=0&&(d(this,a).splice(e,1),d(this,h).splice(e,1))}get(t){this.throwOnEmptyKey(t);let e=this.indexOf(t);if(!(e<0))return d(this,h)[e]}containsKey(t){return Object(u.r)(t)&&this.indexOf(t)>=0}keys(){return d(this,a)}values(){return d(this,h)}indexOf(t){return Object(u.r)(t)?d(this,a).indexOf(t):-1}update(t,e){this.throwOnEmptyKey(t);let i=this.indexOf(t);if(i<0)throw new c.d(`Item with key [${t}] not found`);d(this,h)[i]=e}clear(){l(this,h,[]),l(this,a,[])}throwOnEmptyKey(t){if(!Object(u.r)(t))throw new c.a("Key is empty")}}a=new WeakMap,h=new WeakMap;var f,g,v=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},m=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class w{constructor(t){f.set(this,void 0),g.set(this,void 0),v(this,f,new p),v(this,g,null!=t?t:500)}put(t,e){Object(u.r)(t)&&(this.has(t)?m(this,f).update(t,e):(this.clean(),m(this,f).add(t,e)))}get(t){if(!Object(u.r)(t))return null;if(this.has(t)){let e=m(this,f).get(t);if(e.refresh())return e;m(this,f).remove(t)}return null}has(t){return!!Object(u.r)(t)&&m(this,f).containsKey(t)}remove(t){return!!Object(u.r)(t)&&!!this.has(t)&&(m(this,f).remove(t),!0)}clear(){m(this,f).clear()}clean(){m(this,f).keys().length>=m(this,g)&&m(this,f).remove(m(this,f).keys()[0])}}f=new WeakMap,g=new WeakMap;var b,y,k,M=i(2),O=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},E=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class j{constructor(t){b.set(this,void 0),y.set(this,void 0),k.set(this,void 0),O(this,b,{}),O(this,k,t),O(this,y,M.a.get("CuiEventBus"))}on(t,e,i,s){if(!Object(u.a)(t,e))throw new c.a("Missing argument");let n=this.prepareEventId(i);return E(this,y).debug(`Attaching new event: [${t}] for: [${n}]`),E(this,b)[t]||(E(this,b)[t]={}),E(this,b)[t][n]={ctx:i,callback:e,$cuid:this.getCuid(s)},n}detach(t,e,i){if(!Object(u.a)(t,e))throw new c.a("Missing argument");let s=E(this,b)[t],n=e.getId();E(this,y).debug(`Detaching item: [${n}] from [${t}]`),this.isAttached(s,n)&&delete s[n]}detachAll(t){Object(u.r)(t)&&E(this,b)[t]?delete E(this,b)[t]:E(this,y).error("Event name is missing or incorrect","detachAll")}emit(t,e,...i){return function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){if(!Object(u.r)(t))throw new c.a("Event name is incorrect");return E(this,y).debug(`Emit: [${t}]`),yield E(this,k).handle(E(this,b)[t],e,i),!0}))}isSubscribing(t,e,i){let s=E(this,b)[t];return this.isAttached(s,e.getId(),i)}isAttached(t,e,i){return Object(u.r)(i)?Object(u.r)(t)&&Object(u.r)(e)&&Object(u.r)(t[e])&&Object(u.r)(t[e].$cuid===i.$cuid):Object(u.r)(t)&&Object(u.r)(e)&&Object(u.r)(t[e])}getCuid(t){return Object(u.r)(t)?t.$cuid:null}prepareEventId(t){return Object(u.a)(t)?t.getId():Object(u.g)()}}b=new WeakMap,y=new WeakMap,k=new WeakMap;var x,T=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))},W=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};new WeakMap,new WeakMap;class L extends class{constructor(){this.queue=[],this.isBusy=!1}idMatches(t,e){return!Object(u.r)(t)||Object(u.r)(t)&&t===e}}{constructor(t){super(),x.set(this,void 0),function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");e.set(t,i)}(this,x,t)}handle(t,e,i){return T(this,void 0,void 0,(function*(){Object(u.r)(t)&&(this.queue.push({events:t,cuid:e,args:i}),this.isBusy||(this.isBusy=!0,this.perform(),this.queue.length>0&&this.perform(),this.isBusy=!1))}))}perform(){return T(this,void 0,void 0,(function*(){let t=this.queue.shift(),e=[];for(let i in t.events){let s=t.events[i];this.idMatches(t.cuid,s.$cuid)&&e.push(W(this,x).execute(s.callback,s.ctx,t.args))}return Promise.all(e)}))}}x=new WeakMap;class C{execute(t,e,i){return function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){i=null!=i?i:[],Object(u.r)(e)?t.apply(e,i):t(...i)}))}}var S,A=i(1);class I{constructor(t){S.set(this,void 0),function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");e.set(t,i)}(this,S,t)}append(t){if(Object(u.r)(t)){const e=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style"),s=document.createTextNode(t);i.type="text/css",i.appendChild(s),e.appendChild(i)}return!0}}S=new WeakMap;var _,P,N,D,$=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},z=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class B{constructor(t){_.set(this,void 0),P.set(this,void 0),N.set(this,15),D.set(this,15),$(this,_,document.documentElement),$(this,P,t)}setAppBackground(t,e){this.setPropertyIn(A.c.light,t.toCssString()),this.setPropertyIn(A.c.dark,e.toCssString())}setComponentBackground(t,e){this.setPropertyIn(A.d.light,t.toCssString()),this.setPropertyIn(A.d.dark,e.toCssString())}setBordersColors(t,e){this.setPropertyIn(A.e.light,t.toCssString()),this.setPropertyIn(A.e.dark,e.toCssString())}setColor(t,e){var i,s;const n=A.f[t],r=e.base;if(!Object(u.r)(n)||!Object(u.r)(r))return;const o=null!==(i=e.muted)&&void 0!==i?i:r.clone().lighten(z(this,N)),a=null!==(s=e.active)&&void 0!==s?s:r.clone().darken(z(this,D));z(this,P).mutate(()=>{this.setProperty(n.base,r.toCssString()),this.setProperty(n.active,a.toCssString()),this.setProperty(n.muted,o.toCssString())},this)}setLightenFactor(t){$(this,N,Object(u.m)(t,0,100))}setDarkenFactor(t){$(this,D,Object(u.m)(t,0,100))}setProperty(t,e){z(this,_).style.setProperty(t,e)}setPropertyIn(t,e){Object(u.a)(e,t)&&z(this,P).mutate(this.setProperty,this,t,e)}}_=new WeakMap,P=new WeakMap,N=new WeakMap,D=new WeakMap;var q,R,H,K,F,G,Z,U=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},V=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Y{constructor(t,e){q.set(this,void 0),R.set(this,void 0),H.set(this,void 0),K.set(this,void 0),F.set(this,void 0),G.set(this,void 0),Z.set(this,void 0),U(this,q,[]),U(this,R,[]),U(this,H,window.innerWidth),U(this,K,!1),U(this,F,Object(u.b)(window.innerWidth)),U(this,G,null!=e?e:0),U(this,Z,t)}observe(t){V(this,q).findIndex(e=>e===t)<0&&V(this,q).push(t)}unobserve(t){let e=V(this,q).findIndex(e=>e===t);e>=0&&V(this,q).splice(e,1)}connect(){window.addEventListener("resize",this.listener.bind(this))}disconnect(){window.removeEventListener("resize",this.listener.bind(this))}listener(t){if(V(this,K))return;U(this,K,!0);const e=window.innerWidth-V(this,H);if(Math.abs(e)>=V(this,G)){const t=Object(u.b)(window.innerWidth);if(t!==V(this,F)){const e={current:t,previous:V(this,F),width:window.innerWidth,height:window.innerHeight,timestamp:Date.now()};V(this,Z).emit(A.h.ON_RESIZE,null,e),V(this,q).length>0&&(U(this,R,[]),V(this,q).forEach(t=>{V(this,R).push(t.resize(e))}),Promise.all(V(this,R)),U(this,R,[])),U(this,F,t)}}U(this,K,!1)}}q=new WeakMap,R=new WeakMap,H=new WeakMap,K=new WeakMap,F=new WeakMap,G=new WeakMap,Z=new WeakMap;var J;class Q{constructor(t){J.set(this,void 0),this.setup=(new n.a).fromInit(t),this.interactions=class{static get(t){switch(t){case"async":return new r;default:return new o}}}.get(t.interaction),this.cache=new w(this.setup.cacheSize),this.bus=new j(new L(new C)),this.colors=new B(this.interactions),this.styleAppender=new I(this.interactions),function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");e.set(t,i)}(this,J,new Y(this.bus,this.setup.resizeThreshold)),function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(this,J).connect()}setLightMode(t){const e=Object(u.j)(this.setup.prefix,A.a.dark),i=document.body.classList;"dark"!==t||i.contains(e)?"light"===t&&i.contains(e)&&this.interactions.mutate(()=>{i.remove(e)},this):this.interactions.mutate(()=>{i.add(e)},this)}getLightMode(){const t=Object(u.j)(this.setup.prefix,A.a.dark);return document.body.classList.contains(t)?"dark":"light"}setPrintMode(t){const e=Object(u.j)(this.setup.prefix,A.a.print),i=document.body.classList;t&&!i.contains(e)?i.add(e):!t&&i.contains(e)&&i.remove(e)}isPrintMode(){const t=Object(u.j)(this.setup.prefix,A.a.print);return document.body.classList.contains(t)}setProperty(t,e){let i=Object(u.x)(t,this.setup.prefix);document.documentElement.style.setProperty(i,e)}}J=new WeakMap},function(t,e){},function(t,e){},function(t,e,i){"use strict";i.r(e);var s=i(5),n=i(7);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);var o=i(8);for(var r in o)"default"!==r&&function(t){i.d(e,t,(function(){return o[t]}))}(r);var a=i(4);i.d(e,"CuiSetup",(function(){return a.a})),i.d(e,"CuiSetupInit",(function(){return a.b}));var h=i(6);i.d(e,"CuiUtils",(function(){return h.a})),i.d(e,"CuiInitializer",(function(){return s.b})),i.d(e,"CuiInit",(function(){return s.a})),window.cuiInit=new s.a}])}));
//# sourceMappingURL=index.js.map