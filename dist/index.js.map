{"version":3,"sources":["webpack://cui-light/webpack/universalModuleDefinition","webpack://cui-light/webpack/bootstrap","webpack://cui-light/./src/core/utils/functions.ts","webpack://cui-light/./src/core/utils/statics.ts","webpack://cui-light/./src/core/index.ts","webpack://cui-light/./src/core/utils/actions.ts","webpack://cui-light/./src/core/factories/logger.ts","webpack://cui-light/./src/core/models/errors.ts","webpack://cui-light/./src/core/models/setup.ts","webpack://cui-light/./src/core/helpers/helpers.ts","webpack://cui-light/./src/app/managers/cache.ts","webpack://cui-light/./src/app/handlers/colors.ts","webpack://cui-light/./src/app/observers/resize.ts","webpack://cui-light/./src/core/models/utils.ts","webpack://cui-light/./src/core/listeners/media.ts","webpack://cui-light/./src/core/listeners/scroll.ts","webpack://cui-light/./src/core/utils/interactions.ts","webpack://cui-light/./src/core/utils/logger.ts","webpack://cui-light/./src/core/factories/interactions.ts","webpack://cui-light/./src/core/utils/dictionary.ts","webpack://cui-light/./src/core/bus/bus.ts","webpack://cui-light/./src/core/bus/handlers.ts","webpack://cui-light/./src/core/bus/executors.ts","webpack://cui-light/./src/core/styles/appender.ts","webpack://cui-light/./src/core/listeners/keys.ts","webpack://cui-light/./src/app/managers/element.ts","webpack://cui-light/./src/app/observers/mutations.ts","webpack://cui-light/./src/app/managers/toast.ts","webpack://cui-light/./src/app/helpers/collection.ts","webpack://cui-light/./src/app/managers/collection.ts","webpack://cui-light/./src/app/managers/plugins.ts","webpack://cui-light/./src/app/instance.ts","webpack://cui-light/./src/plugins/light/light.ts","webpack://cui-light/./src/app/handlers/base.ts","webpack://cui-light/./src/components/icon/icon.ts","webpack://cui-light/./src/components/circle/circle.ts","webpack://cui-light/./src/components/spinner/spinner.ts","webpack://cui-light/./src/components/dummy/dummy.ts","webpack://cui-light/./src/components/scroll/scroll.ts","webpack://cui-light/./src/components/scrollspy/scrollspy.ts","webpack://cui-light/./src/plugins/print/print.ts","webpack://cui-light/./src/app/observers/intersection.ts","webpack://cui-light/./src/components/intersection/intersection.ts","webpack://cui-light/./src/components/open/open.ts","webpack://cui-light/./src/components/close/close.ts","webpack://cui-light/./src/components/toggle/toggle.ts","webpack://cui-light/./src/components/resize/resize.ts","webpack://cui-light/./src/plugins/keys/observer.ts","webpack://cui-light/./src/plugins/keys/keys.ts","webpack://cui-light/./src/core/utils/aria.ts","webpack://cui-light/./src/components/dialog/dialog.ts","webpack://cui-light/./src/components/offcanvas/offcanvas.ts","webpack://cui-light/./src/components/accordion/accordion.ts","webpack://cui-light/./src/core/listeners/hover.ts","webpack://cui-light/./src/components/drop/drop.ts","webpack://cui-light/./src/plugins/click/click.ts","webpack://cui-light/./src/components/offset/offset.ts","webpack://cui-light/./src/core/utils/task.ts","webpack://cui-light/./src/components/switch/switch.ts","webpack://cui-light/./src/components/switch/switcher.ts","webpack://cui-light/./src/app/initializer.ts","webpack://cui-light/./src/index.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","is","val","typecheck","length","Array","isArray","isEmpty","getName","prefix","sleep","timeout","Promise","resolve","setTimeout","createElementFromString","htmlString","template","document","createElement","innerHTML","content","children","getRangeValue","min","max","getRangeValueOrDefault","def","isNaN","increaseValue","amount","decreaseValue","joinAttributesForQuery","attributes","join","getSystemLightMode","matchMedia","matches","getSystemPrintMode","are","calcWindowSize","width","parseAttributeString","attribute","ret","out","startsWith","endsWith","JSON","parse","jsonify","e","console","error","message","component","functionName","Date","toLocaleString","parseJsonString","trim","includes","split","forEach","sp","getOffsetTop","element","offsetTop","parseInt","getStyleValue","getOffsetLeft","offsetLeft","getIntOrDefault","integer","target","currentStyle","getComputedStyle","getPropertyValue","isInRange","getActiveClass","parseAttribute","getAttribute","isStringTrue","toLowerCase","getStringOrDefault","isString","replacePrefix","replace","generateCUID","next","generateRandomString","rand","getRandomInt","rand2","Math","floor","random","ceil","registerCuiElement","node","components","utils","$handlers","matching","hasAttribute","filter","a","getMatchingAttributes","$cuid","tagName","match","find","styleAppender","append","getStyle","handler","handle","counter","idx","getHandlerExtendingOrNull","fName","h","hasFunction","obj","CLASSES","dark","animProgress","print","active","ICONS","close","accordion","special_menu","special_fail","special_success","CSS_APP_BACKGROUND_COLORS","light","CSS_COMPONENT_BACKGROUND_COLORS","CSS_COMPONENT_BORDER_COLORS","CSS_THEMES","base","muted","accent","secondary","success","warning","SCOPE_SELECTOR","CSS_VARIABLES","fontSize","lineHeight","animationTime","animationTimeLong","animationTimeShort","colorLightAppBackground","colorLightBackground","colorLightBorder","colorLightBase","colorLightActive","colorLightMuted","colorDarkAppBackground","colorDarkBackground","colorDarkBorder","colorDarkBase","colorDarkActive","colorDarkMuted","colorAccent","colorAccentActive","colorAccentMuted","colorAccentShade","colorAccentShadeDark","colorSecondary","colorSecondaryActive","colorSecondaryMuted","colorSecondaryShade","colorSecondaryShadeDark","colorWarning","colorWarningActive","colorWarningMuted","colorWarningShade","colorWarningShadeDark","colorSuccess","colorSuccessActive","colorSuccessMuted","colorSuccessShade","colorSuccessShadeDark","colorError","colorErrorActive","colorErrorMuted","colorErrorShade","colorErrorShadeDark","inputBackground","colorShade","colorShadeDarker","colorShadeLight","colorShadeLighter","outline","borderRadius","padding","margin","scrollbarWidth","componentSpace","STATICS","logLevel","EVENTS","INSTANCE_INITIALIZED","INSTANCE_FINISHED","ON_RESIZE","ON_OPEN","ON_CLOSE","ON_TOGGLE","ON_SCROLL","ON_TARGET_CHANGE","ON_INTERSECTION","ON_KEYDOWN","ON_SCROLLBY","ON_WINDOW_CLICK","COMPONENTS_COUNTER","CuiClassAction","className","this","classList","contains","add","remove","CuiInboundAction","setLightMode","setDarkMode","getLightMode","DummyAction","CuiActionsFatory","substring","CuiActionsListFactory","map","single","CuiLoggerFactory","ErrorBase","Error","super","setPrototypeOf","ItemNotFoundError","ArgumentError","CuiInstanceInitError","CuiScrollSpyOutOfRangeError","RegisterElementError","CuiSetup","autoLightMode","scrollThreshold","resizeThreshold","plugins","init","cacheSize","CuiSetupInit","app","interaction","body","CuiActionsHelper","interactions","action","mutate","inTarget","outTarget","inAction","outAction","onFinish","maxSize","has","update","clean","item","refresh","containsKey","clear","keys","documentElement","setPropertyIn","toCssString","type","set","colors","baseColor","mutedColor","clone","lighten","activeColor","darken","setProperty","factor","propertyName","style","bus","threshold","innerWidth","findIndex","x","push","splice","addEventListener","listener","removeEventListener","ev","diff","abs","currentSize","resizeData","current","previous","height","innerHeight","timestamp","now","emit","resize","all","initialSetup","setup","fromInit","cache","connect","classes","flag","prop","CuiMediaQueryListener","mediaQuery","callback","event","CuiScrollListener","scrollLeft","scrollTop","passedThreshold","requestAnimationFrame","top","left","FastDom","isScheduled","raf","writes","reads","ctx","args","createTask","schedule","tasks","task","shift","recursion","flush","rec","run","SyncInteractions","isRunning","CuiLogger","level","id","log","prepString","warn","stack","start","CuiInteractionsFactory","CuiDictionary","throwOnEmptyKey","index","indexOf","CuiEventBus","emitHandler","cui","prepareEventId","debug","getCuid","getId","isAttached","cuid","EmitHandlerBase","queue","isBusy","emitId","handleId","TaskedEventEmitHandler","executor","events","perform","promises","idMatches","execute","CuiCallbackExecutor","apply","CuiDocumentStyleAppender","head","getElementsByTagName","text","createTextNode","appendChild","CuiKeyPressListener","singleEmit","onKeyDown","onKeyUp","code","elements","fetch","attributeName","reduce","attributeValue","setAttribute","removeAttribute","onClick","eventName","lock","unlock","delay","change","openClass","animationClass","performAction","then","closeClass","_log","subtree","childList","attributeFilter","MutationObserver","mutationCallback","observe","disconnect","mutations","observer","mutation","handleChildListMutation","onMutation","addedLen","addedNodes","removedLen","removedNodes","handleAddedNodes","handleRemovedNodes","nodes","childrens","hasChildNodes","querySelectorAll","child","exception","destroySingleElement","destroy","toastElement","querySelector","currentElement","nextElement","animIn","animOut","count","newIndex","animClassIn","animClassOut","duration","addAnimationClass","setFinalClasses","len","setElements","setToggle","check","newIdx","getCurrentIndex","verifyIndex","setCurrent","setCurrentWithAnimation","plugin","description","mutatedAttributes","initElements","setComponents","setAttributes","setPlugins","stop","selector","existing","newElement","put","manager","show","context","on","autoLightInit","autoLight","setCallback","onChange","attach","detach","autoLightSetup","componentName","isLocked","data","activeClassName","actionsHelper","prevArgs","isInitialized","onInit","onUpdate","onDestroy","icon","CuiIconComponent","addIcon","svg","iconStr","iconSvg","build","childNodes","insertBefore","iconElement","firstChild","svgString","scale","created","IconScaleAppender","toString","getTotalLength","readStyle","strokeDashoffset","progress","updateStyle","spinnerName","svgIcon","addSpinner","CuiDummyComponent","parseArguments","to","by","scrollBy","behavior","emitEvent","parent","preventDefault","parentElement","offset","link","linkAction","CuiScrollspyComponent","calculateCurrent","onScroll","calculateCurrentLeft","newTarget","scroll","ratio","clientHeight","clientWidth","autoPrintInit","autoPrint","setPrintMode","CuiIntersectionObserver","IntersectionObserver","rootMargin","unobserve","CuiIntersectionComponent","onIntersection","entries","entry","getAction","isIntersecting","intersectionRatio","emitIntersection","prevent","CuiOpenComponent","isValid","result","activateTarget","catch","openable","open","canPerformAction","activeCls","emitOpen","CuiCloseComponent","getTarget","onActionFinish","finally","closable","emitClose","CuiToggleComponent","toggle","CuiResizeComponent","keySetup","AriaAttributes","label","attr","escClose","outClose","CuiDialogComponent","setAria","checkLockAndWarn","isAnyActive","isActive","onOpen","onClose","detachEvent","onEvent","onEscClose","onWindowClick","container","position","getDefaultOpenClass","getDefaultCloseClass","openCls","closeCls","CuiOffCanvasComponent","setPositionLeft","cls","items","animation","CuiAccordionComponent","queryItems","setListener","removeListener","closeAllExcept","currentTarget","switch","onMouseOver","onMouseMove","onMouseOut","mouseEvent","force","invoke","isHovering","trigger","autoClose","closeOut","CuiDropComponenet","onTargetHover","setTriggerEvent","onTriggerClick","findAndCloseOpenedDrop","runAutoCloseTask","clearTimeout","opened","onHoverEvent","offsetX","offsetY","CuiOffsetComponent","checkAndPerformActions","matchesOffset","callEvent","autoRenew","canRun","targets","in","links","auto","autoTimeout","CuiSwitchComponent","onPushSwitch","getTargets","getLinks","getActiveIndex","getSwitches","setSwitchesActive","setLinkActive","startTask","nextIdx","getNextIndex","performSwitchAction","sw","setLinkSwitch","CuiSwitcherComponent","setEvents","removeEvents","el","onListItemClick","onClickEvent","settings","appPrefix","icons","initializer","pluginList","componentList","cuiInit"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"cui-light\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cui-light\"] = factory();\n\telse\n\t\troot[\"cui-light\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 25);\n","import { CuiLightMode, CuiWindowSize } from \"./types\";\r\nimport { ArgumentError, RegisterElementError } from \"../models/errors\";\r\nimport { ICuiComponent, CuiElement } from \"../models/interfaces\";\r\nimport { CuiUtils } from \"../models/utils\";\r\nimport { COMPONENTS_COUNTER } from \"./statics\";\r\n\r\n/**\r\n * Checks if value is defined an is not null\r\n * Additionally with type check it can check value if it is not empty string or collection or object\r\n * \r\n * @param val - value\r\n * @param typecheck - default true - additional check whether value is not empty (string, collection, object)\r\n * @returns whether value passed all conditions\r\n */\r\nexport function is(val: any, typecheck: boolean = true): boolean {\r\n    if (typeof val !== 'undefined' && val !== null) {\r\n        if (!typecheck) {\r\n            return true;\r\n        } else {\r\n            return !isEmpty(val)\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * Checks if value is empty string, array or object\r\n *\r\n *\r\n * @param val - value\r\n * @returns whether value passed all conditions\r\n */\r\nexport function isEmpty(val: any): boolean {\r\n    if (typeof val === \"string\") {\r\n        return val.length === 0\r\n    }\r\n    if (typeof val === \"boolean\") {\r\n        return val;\r\n    }\r\n    else if (Array.isArray(val)) {\r\n        return val.length === 0\r\n    }\r\n    return false\r\n}\r\n\r\nexport function getName(prefix: string, name: string) {\r\n    if (!is(prefix) || !is(name)) {\r\n        throw new ArgumentError(\"Missing argument value\")\r\n    }\r\n    return `${prefix}-${name}`\r\n}\r\n\r\nexport function sleep(timeout: number): Promise<boolean> {\r\n    return new Promise(resolve => setTimeout(() => {\r\n        resolve(true)\r\n    }, timeout));\r\n}\r\n\r\n/**\r\n * Creates proper html element from given string\r\n * @param htmlString - string containing html\r\n */\r\nexport function createElementFromString(htmlString: string): Element {\r\n    if (!is(htmlString)) {\r\n        return null;\r\n    }\r\n    let template = document.createElement('template')\r\n    template.innerHTML = htmlString\r\n    return template.content.children.length > 0 ? template.content.children[0] : null;\r\n}\r\n\r\nexport function getMatchingAttribute(element: any, attributes: string[]): string {\r\n    let attr = null;\r\n    let len = attributes.length;\r\n    for (let i = 0; i < len; i++) {\r\n        let attribute = attributes[i];\r\n        if (element.hasAttribute(attribute)) {\r\n            attr = attribute\r\n            break;\r\n        }\r\n    }\r\n    return attr;\r\n}\r\n\r\nexport function getMatchingAttributes(element: any, attributes: string[]): string[] {\r\n    if (!element || !is(element.hasAttribute)) {\r\n        return null;\r\n    }\r\n    return attributes.filter(a => {\r\n        return element.hasAttribute(a);\r\n    });\r\n}\r\n\r\nexport function getRangeValue(value: number, min: number, max: number) {\r\n    if (value < min) {\r\n        return min;\r\n    } else if (value > max) {\r\n        return max;\r\n    }\r\n    return value;\r\n}\r\n\r\nexport function getRangeValueOrDefault(value: number, min: number, max: number, def: number) {\r\n    if (value === null || typeof value === 'undefined' || isNaN(value)) {\r\n        return def;\r\n    }\r\n    return getRangeValue(value, min, max)\r\n}\r\n\r\nexport function increaseValue(value: number, amount: number): number {\r\n    return amount < 0 || amount > 1 ? 0 : value + (value * amount);\r\n}\r\n\r\nexport function decreaseValue(value: number, amount: number): number {\r\n    return amount < 0 || amount > 1 ? 0 : value - (value * amount);\r\n}\r\n\r\nexport function clone(object: any): any {\r\n    if (!is(object)) {\r\n        return null;\r\n    }\r\n    return Object.assign({}, object);\r\n}\r\n\r\nexport function getSingleColorRatio(first: number, second: number, max: number): number {\r\n    return Math.abs(((first - second) / max) * 100)\r\n}\r\n\r\n/**\r\n * Creates string containg css selector for array of attributes\r\n * @param attributes - attributes values\r\n */\r\nexport function joinAttributesForQuery(attributes: string[]): string {\r\n    if (!is(attributes)) {\r\n        return \"\"\r\n    }\r\n    return `[${attributes.join('],[')}]`\r\n}\r\n\r\n/**\r\n * Checks light system light mode\r\n * @returns Light Mode - dark/light\r\n */\r\nexport function getSystemLightMode(): CuiLightMode {\r\n    return window.matchMedia &&\r\n        window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\r\n}\r\n\r\n/**\r\n * Check print mode in the browser window\r\n * @returns true if window is displayed in print mode\r\n */\r\nexport function getSystemPrintMode(): boolean {\r\n    return window.matchMedia &&\r\n        window.matchMedia('print').matches;\r\n}\r\n\r\n/**\r\n * Verifies whether attributes exist and have some values\r\n * @param attributes attributes list\r\n */\r\nexport function are(...attributes: any[]): boolean {\r\n    if (!is(attributes)) {\r\n        return false\r\n    }\r\n    let c = attributes.length;\r\n    for (let i = 0; i < c; i++) {\r\n        if (!is(attributes[i])) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\nexport function calcWindowSize(width: number): CuiWindowSize {\r\n    if (width <= 640) {\r\n        return 'small';\r\n    } else if (width > 640 && width <= 960) {\r\n        return \"medium\"\r\n    } else if (width > 960 && width <= 1200) {\r\n        return \"large\"\r\n    }\r\n    return 'xlarge';\r\n}\r\n\r\n/**\r\n * Creates object from string.\r\n * Supported syntaxes are:\r\n * - JSON\r\n * - single value\r\n * - key:value,value;key=value\r\n * \r\n * @param attribute - attribute value\r\n */\r\nexport function parseAttributeString(attribute: string): any {\r\n    let ret: any = parseJsonString(attribute.trim())\r\n\r\n    if (!is(ret)) {\r\n        if (!attribute.includes(';') && !attribute.includes(':')) {\r\n            ret = attribute;\r\n        } else {\r\n            ret = {}\r\n            attribute.split(';').forEach(val => {\r\n                let sp = val.split(':')\r\n                if (sp.length === 2) {\r\n                    ret[sp[0].trim()] = sp[1].trim()\r\n                }\r\n            })\r\n        }\r\n    }\r\n    return ret\r\n}\r\n\r\n/**\r\n * Creates object from JSON string\r\n* String must start with { and end with }\r\n *\r\n * @param attribute - attribute value\r\n * @returns object if string passes test, null otherwise\r\n */\r\n\r\nexport function parseJsonString(attribute: string): any | null {\r\n    let out = null;\r\n    if (is(attribute) && attribute.startsWith('{') && attribute.endsWith('}')) {\r\n        try {\r\n            out = jsonify(attribute);\r\n        } catch (e) {\r\n            console.error(prepLogString(\"An exception occured\", 'Functions', 'parseJsonString'), e)\r\n        }\r\n        return out;\r\n    }\r\n    return null;\r\n}\r\n\r\n/**\r\n * Creates object from JSON string\r\n * @param attribute - JSON string\r\n */\r\nexport function jsonify(attribute: string): any {\r\n    return attribute && attribute.length > 0 ? JSON.parse(attribute) : {}\r\n}\r\n\r\nexport function getOffsetTop(element: HTMLElement) {\r\n    if (!is(element)) {\r\n        return -1;\r\n    }\r\n    let val = element.offsetTop - parseInt(getStyleValue(element, 'margin-top')) - parseInt(getStyleValue(element, 'padding-top')) - parseInt(getStyleValue(element, 'border-top-width'))\r\n    return val < 0 ? element.offsetTop : val;\r\n\r\n}\r\n\r\nexport function getOffsetLeft(element: HTMLElement) {\r\n    if (!is(element)) {\r\n        return -1;\r\n    }\r\n    let val = element.offsetLeft - parseInt(getStyleValue(element, 'margin-left')) - parseInt(getStyleValue(element, 'padding-left')) - parseInt(getStyleValue(element, 'border-left-width'))\r\n    return val < 0 ? element.offsetLeft : val;\r\n}\r\n\r\nexport function getIntOrDefault(value: any, def: number): number {\r\n    let integer = parseInt(value);\r\n    return isNaN(integer) ? def : integer;\r\n}\r\n\r\nexport function getStyleValue(target: any, property: string): any {\r\n    if (!is(target) || !is(property)) {\r\n        return null;\r\n    }\r\n    if (target.currentStyle) {\r\n        return target.currentStyle[property];\r\n    } else if (window.getComputedStyle) {\r\n        return window.getComputedStyle(target, null).getPropertyValue(property)\r\n    }\r\n    return null;\r\n}\r\n\r\nexport function prepLogString(message: string, component: string, functionName?: string) {\r\n    return `[${new Date().toLocaleString()}][${component ?? \"-\"}][${functionName ?? '-'}][${message}]`\r\n}\r\n\r\nexport function isInRange(value: number, min: number, max: number): boolean {\r\n    return is(value) && value >= min && value <= max;\r\n}\r\n\r\nexport function getActiveClass(prefix: string) {\r\n    return `${prefix ?? \"\"}-active`;\r\n}\r\n\r\nexport function parseAttribute(element: Element, attribute: string): any {\r\n    return are(element, attribute) ? parseAttributeString(element.getAttribute(attribute)) : null;\r\n}\r\n\r\n\r\n/**\r\n *  Checks whether string value contains synonym of true\r\n * @param value - string to check\r\n */\r\nexport function isStringTrue(value: string): boolean {\r\n    return is(value) ? ['y', 't', 'true', 'yes'].includes(value.toLowerCase()) : false\r\n}\r\n\r\nexport function boolStringOrDefault(prop: any, def: boolean): boolean {\r\n    return is(prop) ? isStringTrue(prop) : def;\r\n}\r\n\r\nexport function getStringOrDefault(value: any, def: string) {\r\n    return is(value) ? value.toLowerCase() : def;\r\n}\r\n\r\n/**\r\n * Checks whether device supports touch\r\n */\r\nexport function isTouchSupported(): boolean {\r\n    return ('ontouchstart' in window) ||\r\n        (navigator.maxTouchPoints > 0) ||\r\n        (navigator.msMaxTouchPoints > 0);\r\n}\r\n\r\n/**\r\n * Checks whether value is type of string\r\n * @param {any} value - value to be checked\r\n */\r\nexport function isString(value: any): boolean {\r\n    return typeof value === 'string';\r\n}\r\n\r\n\r\n/**\r\n * Replaces mask {prefix} with actual value in the string\r\n * @param {string} value - text containg a mask\r\n * @param {string} prefix - value to be put in place of mask\r\n */\r\nexport function replacePrefix(value: string, prefix: string): string {\r\n    return !is(value) ? value : value.replace(\"{prefix}\", prefix ?? \"\");\r\n}\r\n\r\n/**\r\n * Generates identifier for Cui element\r\n * \r\n * @param element - Cui element selector\r\n * @returns generated identifier\r\n */\r\nexport function generateCUID(element?: string) {\r\n    let starter = is(element) ? element : \"cui-element\"\r\n    return `${starter}-${COMPONENTS_COUNTER.next().value}`;\r\n}\r\n\r\n/**\r\n * Generates random string\r\n */\r\nexport function generateRandomString(): string {\r\n    let rand = getRandomInt(1, 1000)\r\n    let rand2 = getRandomInt(1, 100)\r\n    return `${Math.floor(Math.random() * rand2)}-${Math.floor(rand)}`;\r\n}\r\n/**\r\n * Generates random integer\r\n * @param min - min number\r\n * @param max - max number\r\n * @returns random integer\r\n */\r\nexport function getRandomInt(min: number, max: number): number {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\n/**\r\n * Registers Element as Cui element, initializes handlers, sets component style to document header and sets $cuid\r\n * @param {any} node - document node\r\n * @param {ICuiComponent[]} components -supported components array\r\n * @param {string[]} attributes - supported attributes array\r\n * @param {CuiUtils} utils - Cui Utils instance\r\n */\r\nexport function registerCuiElement(node: any, components: ICuiComponent[], attributes: string[], utils: CuiUtils) {\r\n    let element = node as CuiElement;\r\n    element.$handlers = {};\r\n    let matching: string[] = getMatchingAttributes(node, attributes)\r\n    if (is(matching)) {\r\n        element.$cuid = generateCUID(node.tagName)\r\n        matching.forEach(match => {\r\n            let component = components.find(c => { return c.attribute === match });\r\n            if (is(component)) {\r\n                try {\r\n                    utils.styleAppender.append(component.getStyle());\r\n                    let handler = component.get(node, utils);\r\n                    element.$handlers[component.attribute] = handler;\r\n                    element.$handlers[component.attribute].handle(parseAttribute(node, component.attribute));\r\n                } catch (e) {\r\n                    throw new RegisterElementError(e.message);\r\n                }\r\n            }\r\n        })\r\n\r\n    }\r\n}\r\n\r\nexport function* counter() {\r\n    let idx = 0;\r\n    while (true) {\r\n        let reset = yield idx++;\r\n        if (reset || idx > 200000) {\r\n            idx = 0\r\n        }\r\n    }\r\n}\r\n\r\nexport function getHandlerExtendingOrNull<T>(target: CuiElement, fName: string): T {\r\n    if (!is(target.$handlers)) {\r\n        return null;\r\n    }\r\n\r\n    for (let handler in target.$handlers) {\r\n\r\n        if (target.$handlers.hasOwnProperty(handler)) {\r\n            let h: any = target.$handlers[handler];\r\n            if (hasFunction(h, fName))\r\n                return h;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\nexport function hasFunction(obj: any, fName: string) {\r\n    return is(obj[fName]) && typeof obj[fName] === 'function'\r\n}","import { CuiLogLevel } from \"./types\";\r\nimport { CuiColorPair } from \"../models/colors\";\r\nimport { counter } from \"./functions\";\r\n\r\nexport const CLASSES = {\r\n    dark: 'dark',\r\n    animProgress: 'animation-progress',\r\n    print: 'print',\r\n    active: 'active'\r\n}\r\n\r\nexport const ICONS: any = {\r\n    close: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M 1.9999999,1.9999999 18,18\\\"></path><path d=\\\"M 18,1.9999999 1.9999999,18\\\"></path></svg>\",\r\n    accordion: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M 5.0000475,7.4490018 10.000024,12.551028 15,7.4490018\\\"></path></svg>\",\r\n    special_menu: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path class=\\\"menu_handle_2\\\" d=\\\"M 1,10 H 19\\\"></path><path class=\\\"menu_handle_1\\\" d=\\\"M 1,4.8571429 H 19\\\"></path><path  class=\\\"menu_handle_3\\\" d=\\\"M 1,15.142857 H 19\\\"></path></svg>\",\r\n    special_fail: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"special-fail\\\" viewBox=\\\"0 0 100 100\\\" width=\\\"100\\\" height=\\\"100\\\"><path class=\\\"circle\\\" d=\\\"M 50,7.000001 A 43,43 0 0 1 92.999999,50 43,43 0 0 1 50,92.999999 43,43 0 0 1 7.0000011,50 43,43 0 0 1 50,7.000001 Z\\\"></path><path class=\\\"arm_1\\\" d=\\\"M 28.536809,28.536809 71.342023,71.342023\\\"></path><path class=\\\"arm_2\\\" d=\\\"M 71.342023,28.536809 28.536809,71.342023\\\"></path></svg>\",\r\n    special_success: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"special-success\\\" viewBox=\\\"0 0 100 100\\\" width=\\\"100\\\" height=\\\"100\\\"><path class=\\\"circle\\\" d=\\\"M 50,7 A 43,43 0 0 1 93,50 43,43 0 0 1 50,93 43,43 0 0 1 7,50 43,43 0 0 1 50,7 Z\\\"></path><path class=\\\"arm\\\" d=\\\"M 22.988405,48.234784 36.946233,72.410453 75.516456,33.84023\\\"></path></svg>\",\r\n};\r\n\r\nexport const COLORS = ['red', 'green', 'blue', 'alpha']\r\n\r\nexport const CSS_APP_BACKGROUND_COLORS: CuiColorPair = {\r\n    light: '--cui-color-light-app-background',\r\n    dark: '--cui-color-dark-app-background'\r\n}\r\n\r\nexport const CSS_COMPONENT_BACKGROUND_COLORS: CuiColorPair = {\r\n    light: '--cui-color-light-background',\r\n    dark: '--cui-color-dark-background '\r\n}\r\n\r\nexport const CSS_COMPONENT_BORDER_COLORS: CuiColorPair = {\r\n    light: '--cui-color-light-border',\r\n    dark: '--cui-color-dark-border'\r\n}\r\n\r\nexport const CSS_THEMES = {\r\n    light: {\r\n        base: '--cui-color-light-base',\r\n        muted: '--cui-color-light-muted',\r\n        active: '--cui-color-light-active'\r\n    },\r\n    dark: {\r\n        base: '--cui-color-dark-base',\r\n        muted: '--cui-color-dark-muted',\r\n        active: '--cui-color-dark-active'\r\n    },\r\n    accent: {\r\n        base: '--cui-color-primary',\r\n        muted: '--cui-color-primary-muted',\r\n        active: '--cui-color-primary-active'\r\n    },\r\n    secondary: {\r\n        base: '--cui-color-secondary',\r\n        muted: '--cui-color-secondary-muted',\r\n        active: '--cui-color-secondary-active'\r\n    },\r\n    success: {\r\n        base: '--cui-color-success',\r\n        muted: '--cui-color-success-muted',\r\n        active: '--cui-color-success-active'\r\n    },\r\n    warning: {\r\n        base: '--cui-color-warning',\r\n        muted: '--cui-color-warning-muted',\r\n        active: '--cui-color-warning-active'\r\n    },\r\n    error: {\r\n        base: '--cui-color-error',\r\n        muted: '--cui-color-error-muted',\r\n        active: '--cui-color-error-active'\r\n    }\r\n}\r\n\r\nexport const SCOPE_SELECTOR = \":scope \";\r\n\r\nexport const CSS_VARIABLES: any = {\r\n    fontSize: \"--{prefix}-font-size\",\r\n    lineHeight: \"--{prefix}-line-height\",\r\n    animationTime: \"--{prefix}-animation-time\",\r\n    animationTimeLong: \"--{prefix}-animation-time-long\",\r\n    animationTimeShort: \"--{prefix}-animation-time-short\",\r\n    colorLightAppBackground: \"--{prefix}-color-light-app-background\",\r\n    colorLightBackground: \"--{prefix}-color-light-background\",\r\n    colorLightBorder: \"--{prefix}-color-light-border\",\r\n    colorLightBase: \"--{prefix}-color-light-base\",\r\n    colorLightActive: \"--{prefix}-color-light-active\",\r\n    colorLightMuted: \"--{prefix}-color-light-muted\",\r\n    colorDarkAppBackground: \"--{prefix}-color-dark-app-background\",\r\n    colorDarkBackground: \"--{prefix}-color-dark-background\",\r\n    colorDarkBorder: \"--{prefix}-color-dark-border\",\r\n    colorDarkBase: \"--{prefix}-color-dark-base\",\r\n    colorDarkActive: \"--{prefix}-color-dark-active\",\r\n    colorDarkMuted: \"--{prefix}-color-dark-muted\",\r\n    colorAccent: \"--{prefix}-color-primary\",\r\n    colorAccentActive: \"--{prefix}-color-primary-active\",\r\n    colorAccentMuted: \"--{prefix}-color-primary-muted\",\r\n    colorAccentShade: \"--{prefix}-color-primary-shade\",\r\n    colorAccentShadeDark: \"--{prefix}-color-primary-shade-dark\",\r\n    colorSecondary: \"--{prefix}-color-secondary\",\r\n    colorSecondaryActive: \"--{prefix}-color-secondary-active\",\r\n    colorSecondaryMuted: \"--{prefix}-color-secondary-muted\",\r\n    colorSecondaryShade: \"--{prefix}-color-secondary-shade\",\r\n    colorSecondaryShadeDark: \"--{prefix}-color-secondary-shade-dark\",\r\n    colorWarning: \"--{prefix}-color-warning\",\r\n    colorWarningActive: \"--{prefix}-color-warning-active\",\r\n    colorWarningMuted: \"--{prefix}-color-warning-muted\",\r\n    colorWarningShade: \"--{prefix}-color-warning-shade\",\r\n    colorWarningShadeDark: \"--{prefix}-color-warning-shade-dark\",\r\n    colorSuccess: \"--{prefix}-color-success\",\r\n    colorSuccessActive: \"--{prefix}-color-success-active\",\r\n    colorSuccessMuted: \"--{prefix}-color-success-muted\",\r\n    colorSuccessShade: \"--{prefix}-color-success-shade\",\r\n    colorSuccessShadeDark: \"--{prefix}-color-success-shade-dark\",\r\n    colorError: \"--{prefix}-color-error\",\r\n    colorErrorActive: \"--{prefix}-color-error-active\",\r\n    colorErrorMuted: \"--{prefix}-color-error-muted\",\r\n    colorErrorShade: \"--{prefix}-color-error-shade\",\r\n    colorErrorShadeDark: \"--{prefix}-color-error-shade-dark\",\r\n    inputBackground: \"--{prefix}-input-background-color\",\r\n    colorShade: \"--{prefix}-color-shade\",\r\n    colorShadeDarker: \"--{prefix}-color-shade-darker\",\r\n    colorShadeLight: \"--{prefix}-color-shade-light\",\r\n    colorShadeLighter: \"--{prefix}-color-shade-light-lighter\",\r\n    outline: \"--{prefix}-outline\",\r\n    borderRadius: \"--{prefix}-border-radius\",\r\n    padding: \"--{prefix}-padding\",\r\n    margin: \"--{prefix}-margin\",\r\n    scrollbarWidth: \"--{prefix}-scrollbar-width\",\r\n    componentSpace: \"--{prefix}-component-space\"\r\n}\r\n\r\n\r\nexport class STATICS {\r\n    static logLevel: CuiLogLevel = 'none';\r\n    static prefix: string = 'cui';\r\n}\r\n\r\nexport const EVENTS = {\r\n    INSTANCE_INITIALIZED: 'instance-initialized',\r\n    INSTANCE_FINISHED: 'instance-finished',\r\n    ON_RESIZE: \"resize\",\r\n    ON_OPEN: \"open\",\r\n    ON_CLOSE: \"close\",\r\n    ON_TOGGLE: \"toggle\",\r\n    ON_SCROLL: \"scroll\",\r\n    ON_TARGET_CHANGE: 'targetchange',\r\n    ON_INTERSECTION: 'intersection',\r\n    ON_KEYDOWN: 'keydown',\r\n    ON_SCROLLBY: 'scrollby',\r\n    ON_WINDOW_CLICK: 'windowclick'\r\n}\r\n\r\nexport const OBSERVABLE_SCROLL = \"SCROLL\";\r\nexport const OBSERVABLE_INTERSECTION = \"INTERSECTION\";\r\nexport const COMPONENTS_COUNTER = counter();","export * from \"./models/colors\";\r\nexport * from \"./models/errors\";\r\nexport * from \"./models/events\";\r\nexport * from \"./models/interfaces\";\r\nexport * from \"./models/setup\";\r\nexport * from \"./models/utils\";\r\n// Utils\r\nexport * from \"./utils/actions\";\r\nexport * from \"./utils/dictionary\";\r\nexport * from \"./utils/functions\";\r\nexport * from \"./utils/interactions\";\r\nexport * from \"./utils/logger\";\r\nexport * from \"./utils/types\";\r\nexport * from \"./utils/statics\";\r\n\r\nexport * from \"./styles/appender\";\r\n// Factories\r\nexport * from \"./factories/logger\";\r\nexport * from \"./factories/interactions\";\r\n//Helpers\r\nexport * from \"./helpers/helpers\";\r\n// BUS\r\nexport * from \"./bus/executors\";\r\nexport * from \"./bus/handlers\";\r\nexport * from \"./bus/bus\";\r\n// Listeners\r\nexport * from \"./listeners/keys\";\r\nexport * from \"./listeners/media\";\r\nexport * from \"./listeners/scroll\";\r\n","import { is, are } from \"./functions\";\r\nimport { CuiUtils } from \"../models/utils\";\r\n\r\nexport interface ICuiComponentAction {\r\n    add(element: Element, utils?: CuiUtils): void;\r\n    remove(element: Element, utils?: CuiUtils): void;\r\n    toggle(element: Element, utils?: CuiUtils): void;\r\n}\r\n\r\nexport class CuiClassAction implements ICuiComponentAction {\r\n    #class: string;\r\n\r\n    constructor(className: string) {\r\n        this.#class = className;\r\n    }\r\n\r\n    add(element: Element, utils?: CuiUtils): void {\r\n        if (are(element, this.#class) && !element.classList.contains(this.#class)) {\r\n            element.classList.add(this.#class);\r\n        }\r\n    }\r\n\r\n    remove(element: Element, utils?: CuiUtils): void {\r\n        if (are(element, this.#class) && element.classList.contains(this.#class)) {\r\n            element.classList.remove(this.#class);\r\n        }\r\n    }\r\n\r\n    toggle(element: Element, utils?: CuiUtils): void {\r\n        if (are(element, this.#class)) {\r\n            if (!element.classList.contains(this.#class)) {\r\n                element.classList.remove(this.#class);\r\n            } else {\r\n                element.classList.add(this.#class);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport class CuiInboundAction implements ICuiComponentAction {\r\n    #name: string;\r\n\r\n    constructor(name: string) {\r\n        this.#name = name;\r\n    }\r\n    add(element: Element, utils?: CuiUtils): void {\r\n        switch (this.#name) {\r\n            case 'dark-mode':\r\n                utils.setLightMode('dark')\r\n                break;\r\n            case 'light-mode':\r\n                utils.setLightMode('light')\r\n                break;\r\n        }\r\n    }\r\n\r\n    remove(element: Element, utils?: CuiUtils): void {\r\n        switch (this.#name) {\r\n            case 'dark-mode':\r\n                utils.setLightMode('light')\r\n                break;\r\n            case 'light-mode':\r\n                utils.setLightMode('dark')\r\n                break;\r\n        }\r\n    }\r\n\r\n    toggle(element: Element, utils?: CuiUtils): void {\r\n        switch (this.#name) {\r\n            case 'dark-mode':\r\n                this.setDarkMode(utils)\r\n                break;\r\n            case 'light-mode':\r\n                this.setDarkMode(utils)\r\n                break;\r\n        }\r\n    }\r\n\r\n    private setDarkMode(utils: CuiUtils) {\r\n        if (utils.getLightMode() === 'dark') {\r\n            utils.setLightMode('light')\r\n        } else {\r\n            utils.setLightMode('dark')\r\n        }\r\n    }\r\n}\r\n\r\nexport class DummyAction implements ICuiComponentAction {\r\n    constructor() {\r\n    }\r\n\r\n    add(element: Element, utils?: CuiUtils): void {\r\n\r\n    }\r\n\r\n    remove(element: Element, utils?: CuiUtils): void {\r\n    }\r\n\r\n    toggle(element: Element, utils?: CuiUtils): void {\r\n    }\r\n}\r\n\r\nexport class CuiActionsFatory {\r\n    public static get(value: string): ICuiComponentAction {\r\n        if (!is(value)) {\r\n            return new DummyAction();\r\n        }\r\n        let indicator = value[0];\r\n        switch (indicator) {\r\n            case '.':\r\n                return new CuiClassAction(value.substring(1));\r\n            case '~':\r\n                return new CuiInboundAction(value.substring(1))\r\n            default:\r\n                return new CuiClassAction(value);\r\n        }\r\n    }\r\n}\r\n\r\nexport class CuiActionsListFactory {\r\n    public static get(value: string): ICuiComponentAction[] {\r\n        if (!is(value)) {\r\n            return [];\r\n        }\r\n        const split = value.split(',');\r\n        return split.map(single => {\r\n            return CuiActionsFatory.get(single.trim());\r\n        })\r\n    }\r\n}","import { CuiLogger } from \"../utils/logger\";\r\nimport { CuiLogLevel } from \"../utils/types\";\r\nimport { ICuiLogger } from \"../models/interfaces\";\r\nimport { STATICS } from \"../utils/statics\";\r\n\r\n/**\r\n * \r\n */\r\nexport class CuiLoggerFactory {\r\n    /**\r\n     * Gets new instance of component focused logger\r\n     * @param name - component name\r\n     */\r\n    public static get(name: string, logLevel?: CuiLogLevel): ICuiLogger {\r\n        return new CuiLogger(name, logLevel ?? STATICS.logLevel)\r\n    }\r\n}","export class ErrorBase extends Error {\r\n    constructor(name: string, message?: string,) {\r\n        super(message);\r\n        Object.setPrototypeOf(this, new.target.prototype);\r\n        this.name = name;\r\n    }\r\n}\r\n\r\nexport class ItemNotFoundError extends ErrorBase {\r\n    constructor(message?: string) {\r\n        super(\"ItemNotFoundError\", message);\r\n    }\r\n}\r\n\r\nexport class ArgumentError extends ErrorBase {\r\n    constructor(message?: string) {\r\n        super(\"ArgumentError\", message);\r\n    }\r\n}\r\n\r\nexport class CuiBusError extends ErrorBase {\r\n    constructor(message?: string) {\r\n        super(\"ArgumentError\", message);\r\n    }\r\n}\r\n\r\nexport class CuiInstanceInitError extends ErrorBase {\r\n    constructor(message?: string) {\r\n        super(\"CuiInstanceInitError\", message);\r\n    }\r\n}\r\n\r\nexport class CuiScrollSpyOutOfRangeError extends ErrorBase {\r\n    constructor(message?: string) {\r\n        super(\"CuiScrollSpyOutOfRangeError\", message);\r\n    }\r\n}\r\n\r\n\r\nexport class RegisterElementError extends ErrorBase {\r\n    constructor(message?: string) {\r\n        super(\"RegisterElementError\", message);\r\n    }\r\n}\r\n","import { CuiLogLevel, CuiInteractionsType } from \"../utils/types\";\r\nimport { CuiColorSet } from \"./colors\";\r\n\r\ninterface CuiSetupCommon {\r\n    prefix?: string;\r\n    logLevel?: CuiLogLevel;\r\n    cacheSize?: number;\r\n    autoLightMode?: boolean;\r\n    animationTime?: number;\r\n    animationTimeShort?: number;\r\n    animationTimeLong?: number;\r\n    scrollThreshold?: number;\r\n    resizeThreshold?: number;\r\n}\r\n\r\nexport class CuiSetup implements CuiSetupCommon {\r\n    prefix?: string;\r\n    logLevel?: CuiLogLevel;\r\n    cacheSize?: number;\r\n    autoLightMode?: boolean;\r\n    animationTime?: number;\r\n    animationTimeShort?: number;\r\n    animationTimeLong?: number;\r\n    scrollThreshold: number;\r\n    resizeThreshold: number;\r\n    plugins: any;\r\n\r\n    constructor() {\r\n        this.autoLightMode = false;\r\n        this.scrollThreshold = 20;\r\n        this.resizeThreshold = 20;\r\n        this.plugins = {};\r\n    }\r\n\r\n    fromInit(init: CuiSetupInit): CuiSetup {\r\n        this.prefix = init.prefix;\r\n        this.logLevel = init.logLevel;\r\n        this.cacheSize = init.cacheSize;\r\n        this.autoLightMode = init.autoLightMode;\r\n        this.animationTime = init.animationTime;\r\n        this.animationTimeShort = init.animationTimeShort;\r\n        this.animationTimeLong = init.animationTimeLong;\r\n        this.scrollThreshold = init.scrollThreshold;\r\n        this.resizeThreshold = init.resizeThreshold;\r\n\r\n        return this;\r\n    }\r\n}\r\n\r\n\r\nexport class CuiSetupInit implements CuiSetupCommon {\r\n    prefix?: string;\r\n    app?: string;\r\n    interaction?: CuiInteractionsType;\r\n    logLevel?: CuiLogLevel;\r\n    cacheSize?: number;\r\n    autoLightMode?: boolean;\r\n    animationTime?: number;\r\n    animationTimeShort?: number;\r\n    animationTimeLong?: number;\r\n    scrollThreshold?: number;\r\n    resizeThreshold?: number;\r\n    root: HTMLElement;\r\n\r\n    constructor() {\r\n        this.prefix = 'cui';\r\n        this.app = '$cui';\r\n        this.logLevel = 'warning';\r\n        this.interaction = 'async';\r\n        this.animationTime = 300;\r\n        this.animationTimeShort = 150;\r\n        this.animationTimeLong = 500;\r\n        this.cacheSize = 500;\r\n        this.autoLightMode = false;\r\n        this.scrollThreshold = 20;\r\n        this.resizeThreshold = 20;\r\n        this.root = document.body;\r\n    }\r\n}","import { IUIInteractionProvider } from \"../models/interfaces\";\r\nimport { ICuiComponentAction } from \"../utils/actions\";\r\nimport { CLASSES } from \"../utils/statics\";\r\nimport { is } from \"../utils/functions\";\r\n\r\nexport class CuiActionsHelper {\r\n    #interactions: IUIInteractionProvider;\r\n    constructor(interactions: IUIInteractionProvider) {\r\n        this.#interactions = interactions;\r\n    }\r\n\r\n    async performAction(target: Element, action: ICuiComponentAction, timeout: number): Promise<boolean> {\r\n        return new Promise((resolve) => {\r\n            this.#interactions.mutate(() => {\r\n                action.add(target);\r\n                target.classList.add(CLASSES.animProgress);\r\n                setTimeout(() => {\r\n                    this.#interactions.mutate(() => {\r\n                        action.remove(target);\r\n                        target.classList.remove(CLASSES.animProgress);\r\n                        resolve(true)\r\n                    }, null)\r\n                }, timeout)\r\n            }, null)\r\n        })\r\n    }\r\n\r\n    async performSwitchAction(inTarget: Element, outTarget: Element, inAction: ICuiComponentAction, outAction: ICuiComponentAction, onFinish: () => void, timeout: number): Promise<boolean> {\r\n        return new Promise((resolve) => {\r\n            this.#interactions.mutate(() => {\r\n                inAction.add(inTarget);\r\n                inTarget.classList.add(CLASSES.animProgress);\r\n                if (is(outTarget)) {\r\n                    outAction.add(outTarget);\r\n                    outTarget.classList.add(CLASSES.animProgress);\r\n                }\r\n                setTimeout(() => {\r\n                    this.#interactions.mutate(() => {\r\n                        inAction.remove(inTarget);\r\n                        outAction.remove(outTarget);\r\n                        inTarget.classList.remove(CLASSES.animProgress);\r\n                        outTarget.classList.remove(CLASSES.animProgress);\r\n                        onFinish();\r\n                        resolve(true)\r\n                    }, null)\r\n                }, timeout)\r\n            }, null)\r\n        })\r\n    }\r\n}","import { ICuiDictionary, CuiCachable, ICuiManager } from \"../../core/models/interfaces\";\r\nimport { CuiDictionary } from \"../../core/utils/dictionary\";\r\nimport { is } from \"../../core/utils/functions\";\r\n\r\nexport class CuiCacheManager implements ICuiManager<CuiCachable> {\r\n    #cache: ICuiDictionary<CuiCachable>;\r\n    #maxSize: number;\r\n    constructor(maxSize?: number) {\r\n        this.#cache = new CuiDictionary<CuiCachable>();\r\n        this.#maxSize = maxSize ?? 500;\r\n    }\r\n    put(key: string, element: CuiCachable): void {\r\n        if (!is(key)) return;\r\n        if (this.has(key)) {\r\n            this.#cache.update(key, element);\r\n            return;\r\n        }\r\n        this.clean();\r\n        this.#cache.add(key, element);\r\n    }\r\n\r\n    get(key: string): CuiCachable {\r\n        if (!is(key)) return null;\r\n        if (this.has(key)) {\r\n            let item = this.#cache.get(key);\r\n            if (item.refresh()) {\r\n                return item;\r\n            }\r\n            this.#cache.remove(key);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    has(key: string): boolean {\r\n        return is(key) ? this.#cache.containsKey(key) : false;\r\n    }\r\n\r\n    remove(key: string): boolean {\r\n        if (!is(key)) return false;\r\n        if (this.has(key)) {\r\n            this.#cache.remove(key);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    clear(): void {\r\n        this.#cache.clear();\r\n    }\r\n\r\n    private clean() {\r\n        if (this.#cache.keys().length >= this.#maxSize) {\r\n            this.#cache.remove(this.#cache.keys()[0]);\r\n        }\r\n    }\r\n}\r\n\r\n","import { CuiColorSetType } from \"../../core/utils/types\";\r\nimport { is, getRangeValue, are } from \"../../core/utils/functions\";\r\nimport { IUIInteractionProvider } from \"../../core/models/interfaces\";\r\nimport { CuiColor, CuiColorSet } from \"../../core/models/colors\";\r\nimport { CSS_APP_BACKGROUND_COLORS, CSS_COMPONENT_BACKGROUND_COLORS, CSS_COMPONENT_BORDER_COLORS, CSS_THEMES } from \"../../core/utils/statics\";\r\n\r\nexport class CuiInstanceColorHandler {\r\n    #root: HTMLElement;\r\n    #interactions: IUIInteractionProvider;\r\n    #LIGHTEN_FACTOR: number = 15;\r\n    #DARKEN_FACTOR: number = 15;\r\n\r\n    constructor(interactions: IUIInteractionProvider) {\r\n        this.#root = document.documentElement;\r\n        this.#interactions = interactions;\r\n    }\r\n\r\n    setAppBackground(light: CuiColor, dark: CuiColor) {\r\n        this.setPropertyIn(CSS_APP_BACKGROUND_COLORS.light, light.toCssString());\r\n        this.setPropertyIn(CSS_APP_BACKGROUND_COLORS.dark, dark.toCssString());\r\n    }\r\n\r\n    setComponentBackground(light: CuiColor, dark: CuiColor) {\r\n        this.setPropertyIn(CSS_COMPONENT_BACKGROUND_COLORS.light, light.toCssString());\r\n        this.setPropertyIn(CSS_COMPONENT_BACKGROUND_COLORS.dark, dark.toCssString());\r\n    }\r\n\r\n    setBordersColors(light: CuiColor, dark: CuiColor) {\r\n        this.setPropertyIn(CSS_COMPONENT_BORDER_COLORS.light, light.toCssString());\r\n        this.setPropertyIn(CSS_COMPONENT_BORDER_COLORS.dark, dark.toCssString());\r\n    }\r\n\r\n    setColor(type: CuiColorSetType, set: CuiColorSet) {\r\n        const colors = CSS_THEMES[type];\r\n        const baseColor = set.base;\r\n        if (!is(colors) || !is(baseColor)) {\r\n            return\r\n        }\r\n        const mutedColor = set.muted ?? baseColor.clone().lighten(this.#LIGHTEN_FACTOR);\r\n        const activeColor = set.active ?? baseColor.clone().darken(this.#DARKEN_FACTOR);\r\n\r\n        this.#interactions.mutate(() => {\r\n            this.setProperty(colors.base, baseColor.toCssString());\r\n            this.setProperty(colors.active, activeColor.toCssString());\r\n            this.setProperty(colors.muted, mutedColor.toCssString());\r\n        }, this)\r\n\r\n    }\r\n\r\n    setLightenFactor(factor: number) {\r\n        this.#LIGHTEN_FACTOR = getRangeValue(factor, 0, 100);\r\n    }\r\n\r\n    setDarkenFactor(factor: number) {\r\n        this.#DARKEN_FACTOR = getRangeValue(factor, 0, 100);\r\n    }\r\n\r\n    setProperty(propertyName: string, value: string) {\r\n        this.#root.style.setProperty(propertyName, value);\r\n    }\r\n\r\n    setPropertyIn(propertyName: string, value: string) {\r\n        if (!are(value, propertyName)) {\r\n            return;\r\n        }\r\n        this.#interactions.mutate(this.setProperty, this, propertyName, value)\r\n    }\r\n}","import { CuiWindowSize } from \"../../core/utils/types\";\r\nimport { calcWindowSize } from \"../../core/utils/functions\";\r\nimport { ICuiEventBus } from \"../../core/models/interfaces\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\n\r\nexport interface ICuiResizable {\r\n    resize(data: CuiResizeData): Promise<boolean>;\r\n}\r\n\r\nexport interface ICuiResizableObserver {\r\n    observe(target: ICuiResizable): void;\r\n    unobserve(target: ICuiResizable): void;\r\n    connect(): void;\r\n    disconnect(): void;\r\n}\r\n\r\nexport interface CuiResizeData {\r\n    current: CuiWindowSize;\r\n    previous: CuiWindowSize;\r\n    width: number;\r\n    height: number;\r\n    timestamp: number;\r\n}\r\n\r\nexport class CuiResizeObserver implements ICuiResizableObserver {\r\n\r\n    #items: ICuiResizable[];\r\n    #promises: Promise<boolean>[];\r\n    #prevYValue: number;\r\n    #inProgress: boolean;\r\n    #previousSize: CuiWindowSize;\r\n    #threshold: number;\r\n    #bus: ICuiEventBus\r\n    constructor(bus: ICuiEventBus, threshold?: number) {\r\n        this.#items = [];\r\n        this.#promises = [];\r\n        this.#prevYValue = window.innerWidth;\r\n        this.#inProgress = false;\r\n        this.#previousSize = calcWindowSize(window.innerWidth)\r\n        this.#threshold = threshold ?? 0;\r\n        this.#bus = bus;\r\n    }\r\n\r\n    observe(target: ICuiResizable): void {\r\n        let idx = this.#items.findIndex(x => x === target)\r\n        if (idx < 0) {\r\n            this.#items.push(target);\r\n        }\r\n    }\r\n\r\n    unobserve(target: ICuiResizable): void {\r\n        let idx = this.#items.findIndex(x => x === target)\r\n        if (idx >= 0) {\r\n            this.#items.splice(idx, 1)\r\n        }\r\n    }\r\n    connect(): void {\r\n        window.addEventListener('resize', this.listener.bind(this))\r\n    }\r\n\r\n    disconnect(): void {\r\n        window.removeEventListener('resize', this.listener.bind(this))\r\n    }\r\n\r\n    private listener(ev: UIEvent) {\r\n        if (this.#inProgress) {\r\n            return;\r\n        }\r\n        this.#inProgress = true\r\n        const diff = window.innerWidth - this.#prevYValue;\r\n\r\n        if (Math.abs(diff) >= this.#threshold) {\r\n            const currentSize = calcWindowSize(window.innerWidth);\r\n            if (currentSize !== this.#previousSize) {\r\n                const resizeData: CuiResizeData = {\r\n                    current: currentSize,\r\n                    previous: this.#previousSize,\r\n                    width: window.innerWidth,\r\n                    height: window.innerHeight,\r\n                    timestamp: Date.now()\r\n                };\r\n                this.#bus.emit(EVENTS.ON_RESIZE, null, resizeData)\r\n                if (this.#items.length > 0) {\r\n                    this.#promises = [];\r\n                    this.#items.forEach(x => {\r\n                        this.#promises.push(x.resize(resizeData))\r\n                    })\r\n                    Promise.all(this.#promises)\r\n                    this.#promises = [];\r\n                }\r\n\r\n                this.#previousSize = currentSize;\r\n            }\r\n        }\r\n        this.#inProgress = false\r\n    }\r\n\r\n\r\n}","import { IUIInteractionProvider, ICuiEventBus, ICuiManager, CuiCachable } from \"./interfaces\";\r\nimport { CuiSetup, CuiSetupInit } from \"./setup\";\r\nimport { CuiLightMode } from \"../utils/types\";\r\nimport { CuiInteractionsFactory } from \"../factories/interactions\";\r\nimport { CuiCacheManager } from \"../../app/managers/cache\";\r\nimport { CuiEventBus } from \"../bus/bus\";\r\nimport { TaskedEventEmitHandler } from \"../bus/handlers\";\r\nimport { CuiCallbackExecutor } from \"../bus/executors\";\r\nimport { getName, replacePrefix } from \"../utils/functions\";\r\nimport { CLASSES } from \"../utils/statics\";\r\nimport { ICuiDocumentStyleAppender, CuiDocumentStyleAppender } from \"../styles/appender\";\r\nimport { CuiInstanceColorHandler } from \"../../app/handlers/colors\";\r\nimport { ICuiResizableObserver, CuiResizeObserver } from \"../../app/observers/resize\";\r\n\r\nexport class CuiUtils {\r\n    interactions: IUIInteractionProvider;\r\n    bus: ICuiEventBus;\r\n    setup: CuiSetup;\r\n    cache: ICuiManager<CuiCachable>;\r\n    colors: CuiInstanceColorHandler;\r\n    styleAppender: ICuiDocumentStyleAppender;\r\n    #resizeObserver: ICuiResizableObserver;\r\n    constructor(initialSetup: CuiSetupInit) {\r\n        this.setup = new CuiSetup().fromInit(initialSetup);\r\n        this.interactions = CuiInteractionsFactory.get(initialSetup.interaction)\r\n        this.cache = new CuiCacheManager(this.setup.cacheSize);\r\n        this.bus = new CuiEventBus(new TaskedEventEmitHandler(new CuiCallbackExecutor()));\r\n        this.colors = new CuiInstanceColorHandler(this.interactions);\r\n        this.styleAppender = new CuiDocumentStyleAppender(this.interactions);\r\n        this.#resizeObserver = new CuiResizeObserver(this.bus, this.setup.resizeThreshold);\r\n        this.#resizeObserver.connect();\r\n    }\r\n\r\n    setLightMode(mode: CuiLightMode) {\r\n        const name: string = getName(this.setup.prefix, CLASSES.dark);\r\n        const classes = document.body.classList;\r\n        if (mode === 'dark' && !classes.contains(name)) {\r\n            this.interactions.mutate(() => {\r\n                classes.add(name);\r\n            }, this)\r\n\r\n        } else if (mode === 'light' && classes.contains(name)) {\r\n            this.interactions.mutate(() => {\r\n                classes.remove(name);\r\n            }, this)\r\n        }\r\n    }\r\n\r\n    getLightMode(): CuiLightMode {\r\n        const name: string = getName(this.setup.prefix, CLASSES.dark);\r\n        return document.body.classList.contains(name) ? 'dark' : 'light';\r\n    }\r\n\r\n    setPrintMode(flag: boolean) {\r\n        const name: string = getName(this.setup.prefix, CLASSES.print);\r\n        const classes = document.body.classList;\r\n        if (flag && !classes.contains(name)) {\r\n            classes.add(name);\r\n\r\n        } else if (!flag && classes.contains(name)) {\r\n            classes.remove(name);\r\n        }\r\n    }\r\n\r\n    isPrintMode(): boolean {\r\n        const name: string = getName(this.setup.prefix, CLASSES.print);\r\n        return document.body.classList.contains(name);\r\n    }\r\n\r\n    setProperty(name: string, value: string) {\r\n        let prop = replacePrefix(name, this.setup.prefix);\r\n        document.documentElement.style.setProperty(prop, value);\r\n    }\r\n}","import { ICuiEventListener } from \"../models/interfaces\";\r\n\r\nexport class CuiMediaQueryListener implements ICuiEventListener<MediaQueryListEvent> {\r\n\r\n    #mediaQuery: string;\r\n    #callback: (t: MediaQueryListEvent) => void;\r\n    #isInitialized: boolean;\r\n    #inProgress: boolean;\r\n    constructor(mediaQuery: string) {\r\n        this.#mediaQuery = mediaQuery;\r\n        this.#isInitialized = false;\r\n    }\r\n    setCallback(callback: (t: MediaQueryListEvent) => void): void {\r\n        this.#callback = callback;\r\n    }\r\n\r\n    isInProgress(): boolean {\r\n        return this.#inProgress;\r\n    }\r\n    attach(): void {\r\n        if (!window.matchMedia || this.#isInitialized || !this.#mediaQuery) {\r\n            return;\r\n        }\r\n        window.matchMedia(this.#mediaQuery)\r\n            .addEventListener('change', this.event.bind(this))\r\n        this.#isInitialized = true\r\n    }\r\n\r\n    detach(): void {\r\n        if (this.#isInitialized) {\r\n            window.matchMedia(this.#mediaQuery).removeEventListener('change', this.event.bind(this));\r\n            this.#isInitialized = false\r\n        }\r\n    }\r\n\r\n    isAttached(): boolean {\r\n        return this.#isInitialized;\r\n    }\r\n\r\n    private event(ev: MediaQueryListEvent): void {\r\n        if (this.#inProgress) {\r\n            return\r\n        }\r\n        this.#inProgress = true;\r\n        try {\r\n            this.#callback(ev);\r\n        } catch (e) {\r\n            console.error(e)\r\n        } finally {\r\n            this.#inProgress = false;\r\n        }\r\n    }\r\n}","import { ICuiEventListener } from \"../models/interfaces\";\r\nimport { getRangeValueOrDefault } from \"../utils/functions\";\r\n\r\nexport interface CuiScrollEvent {\r\n    base: Event;\r\n    top: number;\r\n    left: number;\r\n}\r\n\r\nexport class CuiScrollListener implements ICuiEventListener<CuiScrollEvent> {\r\n    #target: Element;\r\n    #inProgress: boolean;\r\n    #threshold: number;\r\n    #prevX: number;\r\n    #prevY: number;\r\n    #callback: (ev: CuiScrollEvent) => void;\r\n    #isAttached: boolean;\r\n    constructor(target: Element, threshold?: number) {\r\n        this.#target = target;\r\n        this.#inProgress = false;\r\n        this.#threshold = getRangeValueOrDefault(threshold, 0, 100, 0);\r\n        this.#prevX = this.#prevY = 0;\r\n        this.#isAttached = false;\r\n    }\r\n\r\n    setCallback(callback: (ev: CuiScrollEvent) => void) {\r\n        this.#callback = callback;\r\n    }\r\n\r\n    attach() {\r\n        this.#target.addEventListener('scroll', this.listener.bind(this))\r\n        this.#isAttached = true;\r\n    }\r\n\r\n    detach() {\r\n        this.#target.removeEventListener('scroll', this.listener.bind(this))\r\n        this.#isAttached = false;\r\n    }\r\n\r\n    isInProgress(): boolean {\r\n        return this.#inProgress;\r\n    }\r\n\r\n    isAttached(): boolean {\r\n        return this.#isAttached;\r\n    }\r\n\r\n    private listener(ev: Event) {\r\n        this.#prevX += this.#target.scrollLeft;\r\n        this.#prevY += this.#target.scrollTop;\r\n        if (this.#inProgress || !this.passedThreshold()) {\r\n            return;\r\n        }\r\n        this.#inProgress = true;\r\n\r\n        requestAnimationFrame(() => {\r\n            this.#callback({\r\n                base: ev,\r\n                top: this.#target.scrollTop,\r\n                left: this.#target.scrollLeft\r\n            })\r\n            this.#inProgress = false\r\n            this.#prevX = 0;\r\n            this.#prevY = 0;\r\n        })\r\n    }\r\n\r\n    private passedThreshold() {\r\n        return this.#threshold <= 0 || (this.#prevX >= this.#threshold || this.#prevY >= this.#threshold);\r\n    }\r\n}","import { IUIInteractionProvider } from \"../models/interfaces\";\r\n\r\nexport class FastDom implements IUIInteractionProvider {\r\n    private writes: any[];\r\n    private reads: any[];\r\n    private raf: any;\r\n    private isScheduled: boolean = false;\r\n    #limit: number;\r\n\r\n    constructor() {\r\n        this.raf = window.requestAnimationFrame.bind(window)\r\n        this.writes = []\r\n        this.reads = []\r\n        this.#limit = 5;\r\n    }\r\n    mutate(callback: any, ctx: any, ...args: any[]): void {\r\n        this.reads.push(this.createTask(callback, ctx, ...args))\r\n        this.schedule()\r\n    }\r\n\r\n    fetch(callback: any, ctx: any, ...args: any[]): void {\r\n        this.writes.push(this.createTask(callback, ctx, ...args))\r\n        this.schedule()\r\n    }\r\n\r\n    private createTask(callback: any, ctx: any, ...args: any[]): any {\r\n        return ctx || args ? callback.bind(ctx, ...args) : callback;\r\n    }\r\n\r\n    private run(tasks: any[]) {\r\n        let task = null\r\n        while (task = tasks.shift()) {\r\n            task()\r\n        }\r\n    }\r\n\r\n    private schedule(recursion?: number) {\r\n        if (!this.isScheduled) {\r\n            this.isScheduled = true;\r\n            if (recursion >= this.#limit) {\r\n                throw new Error(\"Fast Dom limit reached\")\r\n            } else {\r\n                this.raf(this.flush.bind(this, recursion));\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    private flush(recursion?: number) {\r\n        let rec: number = recursion ?? 0;\r\n        let error = null;\r\n        let writes = this.writes;\r\n        let reads = this.reads;\r\n\r\n        try {\r\n            this.run(reads);\r\n            this.run(writes);\r\n        } catch (e) {\r\n            error = e\r\n            console.error(e)\r\n        }\r\n        this.isScheduled = false;\r\n\r\n        if (error) {\r\n            this.schedule(rec + 1)\r\n        }\r\n        if (this.writes.length || this.reads.length) {\r\n            this.schedule(recursion + 1);\r\n        }\r\n    }\r\n}\r\n\r\nexport class SyncInteractions implements IUIInteractionProvider {\r\n    tasks: any[];\r\n    raf: any;\r\n    isRunning: boolean = false;\r\n    constructor() {\r\n        this.tasks = [];\r\n        this.raf = window.requestAnimationFrame.bind(window)\r\n    }\r\n\r\n    mutate(callback: any, ctx: any, ...args: any[]): void {\r\n        this.tasks.push(this.createTask(callback, ctx, ...args))\r\n        this.schedule()\r\n    }\r\n\r\n    fetch(callback: any, ctx: any, ...args: any[]): void {\r\n        this.tasks.push(this.createTask(callback, ctx, ...args))\r\n        this.schedule()\r\n    }\r\n\r\n    private schedule() {\r\n        if (!this.isRunning) {\r\n            this.isRunning = true;\r\n            this.raf(this.flush.bind(this))\r\n        }\r\n    }\r\n\r\n    private flush() {\r\n        let task = null\r\n        while (task = this.tasks.shift()) {\r\n            try {\r\n                task()\r\n            }\r\n            catch (e) {\r\n            }\r\n        }\r\n        this.isRunning = false\r\n    }\r\n\r\n    private createTask(callback: any, ctx: any, ...args: any[]): any {\r\n        return ctx || args ? callback.bind(ctx, ...args) : callback;\r\n    }\r\n\r\n}","import { CuiLogLevel } from \"./types\";\r\nimport { ICuiLogger } from \"../models/interfaces\";\r\n\r\nexport class CuiLogger implements ICuiLogger {\r\n    level: CuiLogLevel\r\n    component: string;\r\n    id: string;\r\n    constructor(name: string, level: CuiLogLevel) {\r\n        this.level = level\r\n        this.component = name\r\n        this.id = \"-\";\r\n    }\r\n\r\n    setLevel(level: CuiLogLevel) {\r\n        this.level = level\r\n    }\r\n\r\n    setId(id: string) {\r\n        this.id = id\r\n    }\r\n    debug(message: string, functionName?: string): void {\r\n        if (this.level === 'debug') {\r\n            console.log(this.prepString(message, functionName))\r\n        }\r\n    }\r\n    error(message: string, functionName?: string): void {\r\n        if (this.level === 'error' || this.level === 'debug' || this.level === 'warning')\r\n            console.error(this.prepString(message, functionName))\r\n    }\r\n\r\n    warning(message: string, functionName?: string): void {\r\n        if (this.level === 'warning' || this.level === 'debug')\r\n            console.warn(this.prepString(message, functionName))\r\n    }\r\n\r\n    exception(e: Error, functionName?: string): void {\r\n        console.error(this.prepString(`An exception occured: ${e.name}: ${e.message}`, functionName))\r\n        if (this.level === 'debug')\r\n            console.error(e.stack)\r\n    }\r\n\r\n    performance(callback: () => void, functionName?: string): void {\r\n        if (this.level !== 'debug') {\r\n            return;\r\n        }\r\n        let start = Date.now();\r\n        callback();\r\n        console.log(this.prepString(`Performance measure: ${Date.now() - start}ms`, functionName))\r\n    }\r\n\r\n    private prepString(message: string, functionName?: string) {\r\n        return `[${new Date().toLocaleString()}][${this.component}][${functionName ?? '-'}][${this.id}][${message}]`\r\n    }\r\n}","import { IUIInteractionProvider } from \"../models/interfaces\";\r\nimport { CuiInteractionsType } from \"../utils/types\";\r\nimport { FastDom, SyncInteractions } from \"../utils/interactions\";\r\n\r\nexport class CuiInteractionsFactory {\r\n    /**\r\n     * Gets new instance of component focused logger\r\n     * @param type - Interactions type\r\n     */\r\n    public static get(type: CuiInteractionsType): IUIInteractionProvider {\r\n        const interactionType = type;\r\n        switch (interactionType) {\r\n            case 'async':\r\n                return new FastDom();\r\n            default:\r\n                return new SyncInteractions();\r\n        }\r\n    }\r\n}","import { ICuiDictionary, ICuiDictionaryItem } from \"../models/interfaces\";\r\nimport { ItemNotFoundError, ArgumentError } from \"../models/errors\";\r\nimport { is } from \"./functions\";\r\n\r\nexport class CuiDictionary<T> implements ICuiDictionary<T> {\r\n\r\n    #keys: string[];\r\n    #values: T[];\r\n\r\n    constructor(init?: ICuiDictionaryItem<T>[]) {\r\n        this.#keys = []\r\n        this.#values = []\r\n\r\n        if (init) {\r\n            init.forEach(x => {\r\n                if (!is(x.key)) {\r\n                    this.#keys = []\r\n                    this.#values = []\r\n                    throw new ArgumentError(\"Key is empty\");\r\n                }\r\n                this.add(x.key, x.value)\r\n            })\r\n        }\r\n    }\r\n\r\n    add(key: string, value: T): void {\r\n        this.throwOnEmptyKey(key)\r\n        if (this.containsKey(key))\r\n            throw new Error(\"Key already exists\");\r\n        this.#keys.push(key)\r\n        this.#values.push(value)\r\n    }\r\n\r\n    remove(key: string): void {\r\n        if (!is(key)) {\r\n            return\r\n        }\r\n        let index = this.#keys.indexOf(key);\r\n        if (index >= 0) {\r\n            this.#keys.splice(index, 1)\r\n            this.#values.splice(index, 1)\r\n        }\r\n    }\r\n    get(key: string): T {\r\n        this.throwOnEmptyKey(key)\r\n        let index = this.indexOf(key)\r\n        if (index < 0) {\r\n            return undefined;\r\n        }\r\n        return this.#values[index];\r\n    }\r\n    containsKey(key: string): boolean {\r\n        return is(key) && this.indexOf(key) >= 0\r\n    }\r\n    keys(): string[] {\r\n        return this.#keys\r\n    }\r\n    values(): T[] {\r\n        return this.#values;\r\n    }\r\n\r\n    indexOf(key: string): number {\r\n        return is(key) ? this.#keys.indexOf(key) : -1;\r\n    }\r\n\r\n    update(key: string, value: T): void {\r\n        this.throwOnEmptyKey(key)\r\n        let index = this.indexOf(key)\r\n        if (index < 0) {\r\n            throw new ItemNotFoundError(`Item with key [${key}] not found`)\r\n        }\r\n        this.#values[index] = value\r\n    }\r\n\r\n    clear() {\r\n        this.#values = [];\r\n        this.#keys = [];\r\n    }\r\n\r\n    private throwOnEmptyKey(key: string) {\r\n        if (!is(key)) {\r\n            throw new ArgumentError(\"Key is empty\");\r\n        }\r\n    }\r\n}","import { ICuiEventBus, CuiEventReceiver, ICuiLogger, ICuiEventEmitHandler, CuiContext, CuiElement } from \"../models/interfaces\";\r\nimport { is, are, generateRandomString } from \"../utils/functions\";\r\nimport { ArgumentError } from \"../models/errors\";\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\n\r\nexport class CuiEventBus implements ICuiEventBus {\r\n    #events: { [event: string]: CuiEventReceiver }\r\n    #log: ICuiLogger;\r\n    #eventHandler: ICuiEventEmitHandler;\r\n\r\n    constructor(emitHandler: ICuiEventEmitHandler) {\r\n        this.#events = {};\r\n        this.#eventHandler = emitHandler;\r\n        this.#log = CuiLoggerFactory.get(\"CuiEventBus\");\r\n    }\r\n\r\n    /**\r\n     * Attaches event to event bus\r\n     * \r\n     * @param {string} name - Event name\r\n     * @param {any} callback - callback function\r\n     * @param {CuiContext} ctx - callback context with id\r\n     * @param {CuiElement} cui - optional - cui element which event shall be attached to \r\n     */\r\n    on(name: string, callback: any, ctx: CuiContext, cui?: CuiElement): string {\r\n        if (!are(name, callback)) {\r\n            throw new ArgumentError(\"Missing argument\")\r\n        }\r\n        // When context is not provided (e.g. anonymous function) then generate random\r\n        let id = this.prepareEventId(ctx);\r\n        this.#log.debug(`Attaching new event: [${name}] for: [${id}]`)\r\n        if (!this.#events[name]) {\r\n            this.#events[name] = {}\r\n        }\r\n\r\n        this.#events[name][id] = { ctx: ctx, callback: callback, $cuid: this.getCuid(cui) }\r\n        return id;\r\n    }\r\n\r\n    /**\r\n    * Detaches specific event from event bus\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {CuiContext} ctx - callback context with id\r\n    * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n    */\r\n    detach(name: string, ctx: CuiContext, cui?: CuiElement): void {\r\n        if (!are(name, ctx)) {\r\n            throw new ArgumentError(\"Missing argument\")\r\n        }\r\n        let ev = this.#events[name]\r\n        let id = ctx.getId();\r\n        this.#log.debug(`Detaching item: [${id}] from [${name}]`)\r\n        if (this.isAttached(ev, id)) {\r\n            delete ev[id];\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Detaches all callbacks from event\r\n    *\r\n    * @param {string} name - Event name\r\n    */\r\n    detachAll(name: string): void {\r\n        if (is(name) && this.#events[name]) {\r\n            delete this.#events[name]\r\n        } else {\r\n            this.#log.error(`Event name is missing or incorrect`, \"detachAll\")\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Emits event call to event bus\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {string} cuid - id of component which emits the event\r\n    * @param {any[]} args  - event arguments\r\n    */\r\n    async emit(event: string, cuid: string, ...args: any[]): Promise<boolean> {\r\n        if (!is(event)) {\r\n            throw new ArgumentError(\"Event name is incorrect\");\r\n        }\r\n        this.#log.debug(`Emit: [${event}]`)\r\n        await this.#eventHandler.handle(this.#events[event], cuid, args)\r\n        return true;\r\n    }\r\n\r\n    /**\r\n    * Checks whether given context is already attached to specific event\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {CuiContext} ctx - callback context with id\r\n    * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n    */\r\n    isSubscribing(name: string, ctx: CuiContext, cui?: CuiElement) {\r\n        let ev = this.#events[name]\r\n        return this.isAttached(ev, ctx.getId(), cui)\r\n    }\r\n\r\n    private isAttached(ev: CuiEventReceiver, id: string, cui?: CuiElement): boolean {\r\n        if (is(cui)) {\r\n            return is(ev) && is(id) && is(ev[id]) && is(ev[id].$cuid === cui.$cuid);\r\n        }\r\n        return is(ev) && is(id) && is(ev[id]);\r\n    }\r\n\r\n    private getCuid(cui: CuiElement) {\r\n        return is(cui) ? cui.$cuid : null;\r\n    }\r\n\r\n    private prepareEventId(ctx: CuiContext) {\r\n        return are(ctx) ? ctx.getId() : generateRandomString();\r\n    }\r\n}   ","import { ICuiEventEmitHandler, ICuiLogger, ICuiCallbackExecutor, CuiEventReceiver } from \"../models/interfaces\";\r\nimport { is } from \"../utils/functions\";\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\n\r\ninterface EmitHandlerData {\r\n    events: CuiEventReceiver;\r\n    cuid: string;\r\n    args: any[];\r\n}\r\n\r\nclass EmitHandlerBase {\r\n    isBusy: boolean;\r\n    queue: EmitHandlerData[];\r\n    constructor() {\r\n        this.queue = [];\r\n        this.isBusy = false;\r\n    }\r\n    idMatches(emitId: string, handleId: string) {\r\n        return !is(emitId) || (is(emitId) && emitId == handleId);\r\n    }\r\n}\r\n\r\nexport class SimpleEventEmitHandler extends EmitHandlerBase implements ICuiEventEmitHandler {\r\n    #log: ICuiLogger;\r\n    #executor: ICuiCallbackExecutor;\r\n    constructor(executor: ICuiCallbackExecutor) {\r\n        super();\r\n        this.#executor = executor;\r\n        this.#log = CuiLoggerFactory.get(\"SimpleEventEmitHandler\");\r\n    }\r\n\r\n    async handle(events: CuiEventReceiver, cuid: string, args: any[]): Promise<void> {\r\n        if (!is(events)) {\r\n            this.#log.warning(\"No events provided\")\r\n            return\r\n        }\r\n        this.queue.push({\r\n            events: events,\r\n            cuid: cuid,\r\n            args: args\r\n        })\r\n        if (!this.isBusy) {\r\n            if (!this.isBusy) {\r\n                this.isBusy = true;\r\n                this.perform();\r\n                if (this.queue.length > 0) {\r\n                    await this.perform();\r\n                }\r\n                this.isBusy = false;\r\n            }\r\n        }\r\n        return;\r\n    }\r\n\r\n    private async perform() {\r\n        let task = this.queue.shift();\r\n        for (let id in task.events) {\r\n            let event = task.events[id]\r\n            try {\r\n                if (this.idMatches(task.cuid, event.$cuid))\r\n                    await this.#executor.execute(event.callback, event.ctx, task.args)\r\n            }\r\n            catch (e) {\r\n                this.#log.error(e)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport class TaskedEventEmitHandler extends EmitHandlerBase implements ICuiEventEmitHandler {\r\n    #executor: ICuiCallbackExecutor;\r\n    constructor(executor: ICuiCallbackExecutor) {\r\n        super();\r\n        this.#executor = executor;\r\n    }\r\n\r\n    async handle(events: CuiEventReceiver, cuid: string, args: any[]): Promise<void> {\r\n        if (!is(events)) {\r\n            return\r\n        }\r\n        this.queue.push({\r\n            events: events,\r\n            cuid: cuid,\r\n            args: args\r\n        })\r\n        if (!this.isBusy) {\r\n            this.isBusy = true;\r\n            this.perform();\r\n            if (this.queue.length > 0) {\r\n                this.perform();\r\n            }\r\n            this.isBusy = false;\r\n        }\r\n        return;\r\n    }\r\n\r\n    private async perform(): Promise<void[]> {\r\n        let task = this.queue.shift();\r\n        let promises: Promise<void>[] = []\r\n        for (let id in task.events) {\r\n            let event = task.events[id]\r\n            if (this.idMatches(task.cuid, event.$cuid))\r\n                promises.push(this.#executor.execute(event.callback, event.ctx, task.args))\r\n        }\r\n        return Promise.all(promises)\r\n    }\r\n}\r\n","import { ICuiCallbackExecutor } from \"../models/interfaces\"\r\nimport { is } from \"../utils/functions\"\r\n\r\nexport class CuiCallbackExecutor implements ICuiCallbackExecutor {\r\n    async execute(callback: any, ctx: any, args: any[]): Promise<void> {\r\n        args = args ?? []\r\n        if (is(ctx)) {\r\n            callback.apply(ctx, args)\r\n        } else {\r\n            callback(...args)\r\n        }\r\n        return\r\n    }\r\n}","import { is } from \"../utils/functions\";\r\nimport { CuiUtils } from \"../models/utils\";\r\nimport { IUIInteractionProvider } from \"../models/interfaces\";\r\n\r\nexport interface ICuiDocumentStyleAppender {\r\n    append(style: string): boolean;\r\n}\r\n\r\nexport class CuiDocumentStyleAppender implements ICuiDocumentStyleAppender {\r\n    #interactions: IUIInteractionProvider;\r\n    constructor(interactions: IUIInteractionProvider) {\r\n        this.#interactions = interactions;\r\n    }\r\n\r\n    append(style: string): boolean {\r\n        if (is(style)) {\r\n            const head = document.head || document.getElementsByTagName('head')[0]\r\n            const node = document.createElement('style');\r\n            const text = document.createTextNode(style);\r\n            node.type = 'text/css';\r\n            node.appendChild(text);\r\n            head.appendChild(node);\r\n        }\r\n        return true;\r\n    }\r\n\r\n}","import { ICuiEventListener } from \"../models/interfaces\";\r\nimport { is } from \"../utils/functions\";\r\n\r\nexport class CuiKeyPressListener implements ICuiEventListener<KeyboardEvent> {\r\n    #callback: (t: KeyboardEvent) => void;\r\n    #keys: string[];\r\n    #inProgress: boolean;\r\n    #singleEmit: boolean;\r\n    #isAttached: boolean;\r\n    constructor(singleEmit: boolean, keys?: string[]) {\r\n        this.#keys = keys;\r\n        this.#inProgress = false;\r\n        this.#singleEmit = true;\r\n    }\r\n\r\n    setCallback(callback: (t: KeyboardEvent) => void): void {\r\n        this.#callback = callback;\r\n    }\r\n\r\n    isInProgress(): boolean {\r\n        return this.#inProgress;\r\n    }\r\n\r\n    attach(): void {\r\n        document.addEventListener('keydown', this.onKeyDown.bind(this))\r\n        if (this.#singleEmit) {\r\n            document.addEventListener('keyup', this.onKeyUp.bind(this))\r\n        }\r\n        this.#isAttached = true;\r\n    }\r\n\r\n    detach(): void {\r\n        document.removeEventListener('keydown', this.onKeyDown.bind(this))\r\n        if (this.#singleEmit) {\r\n            document.addEventListener('keyup', this.onKeyUp.bind(this))\r\n        }\r\n        this.#isAttached = false;\r\n    }\r\n\r\n    isAttached(): boolean {\r\n        return this.#isAttached;\r\n    }\r\n\r\n    onKeyDown(ev: KeyboardEvent) {\r\n        if (this.#inProgress) {\r\n            return;\r\n        }\r\n        this.#inProgress = true;\r\n        try {\r\n            if (!is(this.#keys) || this.#keys.includes(ev.code)) {\r\n                this.#callback(ev);\r\n            }\r\n\r\n        } catch (e) {\r\n            console.error(e)\r\n        } finally {\r\n            if (!this.#singleEmit)\r\n                this.#inProgress = false;\r\n        }\r\n    }\r\n\r\n    onKeyUp(ev: KeyboardEvent) {\r\n        this.#inProgress = false;\r\n    }\r\n}","import { is, are } from \"../../core/utils/functions\";\r\nimport { ICuiLogger, IUIInteractionProvider, CuiCachable } from \"../../core/models/interfaces\";\r\nimport { CuiLoggerFactory } from \"../../core/factories/logger\";\r\nimport { CLASSES } from \"../../core/utils/statics\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiActionsHelper } from \"../../core/helpers/helpers\";\r\nimport { CuiClassAction } from \"../../core/utils/actions\";\r\n\r\nexport class ElementManager implements CuiCachable {\r\n    #elements: Element[];\r\n    #isLocked: boolean;\r\n    #logger: ICuiLogger;\r\n    #cDt: number;\r\n    #utils: CuiUtils;\r\n    #actionsHelper: CuiActionsHelper;\r\n    constructor(elements: Element[], utils: CuiUtils) {\r\n        this.#elements = elements;\r\n        this.#isLocked = false;\r\n        this.#logger = CuiLoggerFactory.get(\"ElementManager\");\r\n        this.#utils = utils;\r\n        this.#cDt = Date.now();\r\n        this.#actionsHelper = new CuiActionsHelper(utils.interactions);\r\n    }\r\n\r\n    async toggleClass(className: string): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            if (!element.classList.contains(className)) {\r\n                element.classList.add(className);\r\n            } else {\r\n                element.classList.remove(className);\r\n            }\r\n        }, 'toggleClass');\r\n    }\r\n\r\n    async toggleClassAs(className: string): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            let classes = element.classList;\r\n            this.#utils.interactions.fetch(() => {\r\n                if (!classes.contains(className)) {\r\n                    this.#utils.interactions.mutate(classes.add, classes, className);\r\n                } else {\r\n                    this.#utils.interactions.mutate(classes.remove, classes, className);\r\n                }\r\n            }, this)\r\n\r\n        }, 'toggleClassAs');\r\n    }\r\n\r\n    async setClass(className: string): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            if (!element.classList.contains(className)) {\r\n                element.classList.add(className)\r\n            }\r\n        }, 'setClass');\r\n    }\r\n\r\n    async setClassAs(className: string): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n\r\n        return this.call((element) => {\r\n            let classes = element.classList;\r\n            this.#utils.interactions.fetch(() => {\r\n                if (!classes.contains(className)) {\r\n                    this.#utils.interactions.mutate(classes.add, classes, className);\r\n                }\r\n            }, this)\r\n\r\n        }, 'setClassAs');\r\n    }\r\n\r\n    async removeClass(className: string): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            if (element.classList.contains(className)) {\r\n                element.classList.remove(className)\r\n            }\r\n        }, 'removeClass');\r\n    }\r\n\r\n    async removeClassAs(className: string): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            let classes = element.classList;\r\n            this.#utils.interactions.fetch(() => {\r\n                if (classes.contains(className)) {\r\n                    this.#utils.interactions.mutate(classes.remove, classes, className);\r\n                }\r\n            }, this)\r\n        }, 'removeClass');\r\n    }\r\n\r\n    getAttribute(attributeName: string): string[] {\r\n        if (!is(attributeName)) {\r\n            return null;\r\n        }\r\n        return this.#elements.reduce<string[]>((val: string[], current: Element) => {\r\n            if (current.hasAttribute(attributeName)) {\r\n                val.push(current.getAttribute(attributeName))\r\n            } else {\r\n                val.push(null);\r\n            }\r\n            return val;\r\n        }, []);\r\n    }\r\n\r\n    async setAttribute(attributeName: string, attributeValue?: string): Promise<boolean> {\r\n        if (!is(attributeName)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            element.setAttribute(attributeName, attributeValue ?? \"\")\r\n        }, 'setAttribute');\r\n    }\r\n\r\n    async setAttributeAs(attributeName: string, attributeValue?: string): Promise<boolean> {\r\n        if (!is(attributeName)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            this.#utils.interactions.mutate(element.setAttribute, element, attributeName, attributeValue ?? \"\")\r\n        }, 'setAttributeAs');\r\n    }\r\n\r\n    async removeAttribute(attributeName: string): Promise<boolean> {\r\n        if (!is(attributeName)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            element.removeAttribute(attributeName)\r\n        }, 'removeAttribute');\r\n    }\r\n\r\n    async removeAttributeAs(attributeName: string): Promise<boolean> {\r\n        if (!is(attributeName)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            this.#utils.interactions.mutate(element.removeAttribute, element, attributeName);\r\n        }, 'removeAttributeAs');\r\n    }\r\n\r\n    async toggleAttribute(attributeName: string, attributeValue?: string): Promise<boolean> {\r\n        if (!is(attributeName)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            if (element.hasAttribute(attributeName)) {\r\n                element.removeAttribute(attributeName)\r\n            } else {\r\n                element.setAttribute(attributeName, attributeValue ?? \"\")\r\n            }\r\n        }, 'toggleAttribute');\r\n    }\r\n\r\n    async toggleAttributeAs(attributeName: string, attributeValue?: string): Promise<boolean> {\r\n        if (!is(attributeName)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            this.#utils.interactions.fetch(() => {\r\n                if (element.hasAttribute(attributeName)) {\r\n                    this.#utils.interactions.mutate(element.removeAttribute, element, attributeName);\r\n                } else {\r\n                    this.#utils.interactions.mutate(element.setAttribute, element, attributeName, attributeValue ?? \"\")\r\n                }\r\n            }, this)\r\n\r\n        }, 'toggleAttributeAs');\r\n    }\r\n\r\n    async click(onClick: (ev: MouseEvent) => void): Promise<boolean> {\r\n        if (!is(onClick)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            element.addEventListener('click', onClick);\r\n        }, 'click');\r\n    }\r\n\r\n    async event(eventName: string, callback: any): Promise<boolean> {\r\n        if (!is(eventName) || !is(callback)) {\r\n            return false;\r\n        }\r\n        return this.call((element) => {\r\n            element.addEventListener(eventName, callback);\r\n        }, 'event');\r\n    }\r\n\r\n    async call(callback: (element: Element, index: Number) => void, functionName?: string): Promise<boolean> {\r\n        if (this.#isLocked) {\r\n            this.#logger.error(\"Element is locked\", functionName)\r\n        }\r\n        this.lock();\r\n        this.#elements.forEach((element, index) => {\r\n            callback(element, index)\r\n        })\r\n        this.unlock();\r\n        return true;\r\n    }\r\n\r\n    async animate(className: string, timeout?: number): Promise<boolean> {\r\n        if (!is(className)) {\r\n            return false;\r\n        }\r\n        const delay = timeout ?? this.#utils.setup.animationTime;\r\n        return this.call((element) => {\r\n            this.change(() => {\r\n                element.classList.add(className);\r\n                element.classList.add(CLASSES.animProgress);\r\n                setTimeout(() => {\r\n                    this.change(() => {\r\n                        element.classList.remove(className);\r\n                        element.classList.remove(CLASSES.animProgress);\r\n                    })\r\n                }, delay)\r\n            })\r\n        });\r\n    }\r\n\r\n    async open(openClass: string, animationClass: string, timeout?: number): Promise<boolean> {\r\n        if (!are(openClass, animationClass)) {\r\n            return false\r\n        }\r\n        const delay = timeout ?? this.#utils.setup.animationTime;\r\n        const action = new CuiClassAction(animationClass);\r\n        return this.call((element) => {\r\n            this.#actionsHelper.performAction(element, action, delay).then(() => {\r\n                element.classList.add(openClass);\r\n            })\r\n        });\r\n    }\r\n\r\n    async close(closeClass: string, animationClass: string, timeout?: number): Promise<boolean> {\r\n        if (!are(closeClass, animationClass)) {\r\n            return false\r\n        }\r\n        const delay = timeout ?? this.#utils.setup.animationTime;\r\n        const action = new CuiClassAction(animationClass);\r\n        return this.call((element) => {\r\n            this.#actionsHelper.performAction(element, action, delay).then(() => {\r\n                element.classList.remove(closeClass);\r\n            })\r\n        });\r\n    }\r\n\r\n    read(callback: any, ...args: any[]): void {\r\n        this.#utils.interactions.fetch(callback, this, ...args)\r\n    }\r\n\r\n    change(callback: any, ...args: any[]): void {\r\n        this.#utils.interactions.mutate(callback, this, ...args)\r\n    }\r\n\r\n    elements(): Element[] {\r\n        return this.#elements;\r\n    }\r\n\r\n    count() {\r\n        return this.#elements.length;\r\n    }\r\n\r\n    lock() {\r\n        this.#isLocked = true;\r\n    }\r\n\r\n    unlock() {\r\n        this.#isLocked = false;\r\n    }\r\n\r\n    isLocked(): boolean {\r\n        return this.#isLocked;\r\n    }\r\n\r\n    refresh(): boolean {\r\n        return (Date.now() - this.#cDt) < 360000;\r\n    }\r\n}","import { ICuiLogger, IUIInteractionProvider, ICuiMutiationPlugin, ICuiComponent, ICuiPluginManager, CuiElement } from \"../../core/models/interfaces\";\r\nimport { CuiLoggerFactory } from \"../../core/factories/logger\";\r\nimport { is, getMatchingAttribute, are, getMatchingAttributes, generateCUID, registerCuiElement, joinAttributesForQuery, parseAttribute } from \"../../core/utils/functions\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\n\r\nexport interface ICuiMutionObserver {\r\n    // setOptions(options: MutationObserverInit): ICuiMutionObserver;\r\n    setPlugins(plugins: ICuiPluginManager): ICuiMutionObserver;\r\n    setComponents(components: ICuiComponent[]): ICuiMutionObserver;\r\n    setAttributes(attributes: string[]): ICuiMutionObserver;\r\n    start(): ICuiMutionObserver;\r\n    stop(): ICuiMutionObserver;\r\n}\r\n\r\n\r\nexport class CuiMutationObserver implements ICuiMutionObserver {\r\n    _log: ICuiLogger;\r\n    #observer: MutationObserver;\r\n    #options: MutationObserverInit;\r\n    #element: HTMLElement;\r\n    plugins: ICuiPluginManager;\r\n    #components: ICuiComponent[];\r\n    #attributes: string[];\r\n    #utils: CuiUtils;\r\n    #queryString: string;\r\n    constructor(element: HTMLElement, utils: CuiUtils) {\r\n        this.#observer = null\r\n        this.#element = element\r\n        this._log = CuiLoggerFactory.get('CuiMutationObserver')\r\n        this.plugins = null;\r\n        this.#components = [];\r\n        this.#attributes = [];\r\n        this.#utils = utils;\r\n        this.#queryString = \"\";\r\n\r\n    }\r\n\r\n    setPlugins(plugins: ICuiPluginManager) {\r\n        this.plugins = plugins;\r\n        return this;\r\n    }\r\n\r\n    setComponents(components: ICuiComponent[]) {\r\n        this.#components = components;\r\n        return this;\r\n    }\r\n\r\n    setAttributes(attributes: string[]) {\r\n        this.#options = {\r\n            attributes: true,\r\n            subtree: true,\r\n            childList: true,\r\n            attributeFilter: attributes\r\n        }\r\n        this.#attributes = attributes;\r\n        this.#queryString = joinAttributesForQuery(attributes);\r\n        return this;\r\n    }\r\n\r\n    start() {\r\n        this._log.debug(\"Starting\")\r\n        this.#observer = new MutationObserver(this.mutationCallback.bind(this));\r\n        this.#observer.observe(this.#element, this.#options)\r\n        this._log.debug(\"Started\")\r\n        return this;\r\n    }\r\n\r\n    stop() {\r\n        this._log.debug(\"Stopping\")\r\n        if (this.#observer !== null)\r\n            this._log.debug(\"Observer available\")\r\n        this.#observer.disconnect()\r\n        this.#observer = null;\r\n        this._log.debug(\"Stopped\")\r\n        return this\r\n    }\r\n\r\n    private mutationCallback(mutations: MutationRecord[], observer: MutationObserver) {\r\n        mutations.forEach((mutation: MutationRecord) => {\r\n            switch (mutation.type) {\r\n                case 'attributes':\r\n                    const item = mutation.target as any;\r\n                    if (are(item.$handlers, item.$handlers[mutation.attributeName])) {\r\n                        item.$handlers[mutation.attributeName].refresh(parseAttribute(item, mutation.attributeName));\r\n                    }\r\n                    break;\r\n\r\n                case 'childList':\r\n                    this.handleChildListMutation(mutation);\r\n                    break;\r\n            }\r\n            if (is(this.plugins)) {\r\n                this.plugins.onMutation(mutation).then(() => {\r\n                    //\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    private handleChildListMutation(mutation: MutationRecord) {\r\n        const addedLen = mutation.addedNodes.length;\r\n        const removedLen = mutation.removedNodes.length;\r\n        if (addedLen > 0) {\r\n            this._log.debug(\"Registering added nodes: \" + addedLen)\r\n            this.handleAddedNodes(mutation.addedNodes);\r\n        } else if (removedLen > 0) {\r\n            this._log.debug(\"Removing nodes: \" + removedLen);\r\n            this.handleRemovedNodes(mutation.removedNodes);\r\n        }\r\n    }\r\n\r\n    private handleAddedNodes(nodes: NodeList) {\r\n        nodes.forEach((node: any) => {\r\n            try {\r\n                registerCuiElement(node, this.#components, this.#attributes, this.#utils);\r\n                let childrens = node.hasChildNodes() ? node.querySelectorAll(this.#queryString) : null;\r\n                if (is(childrens)) {\r\n                    childrens.forEach((child: any) => {\r\n                        registerCuiElement(child, this.#components, this.#attributes, this.#utils);\r\n                    })\r\n                }\r\n            } catch (e) {\r\n                this._log.exception(e);\r\n            }\r\n        })\r\n    }\r\n\r\n    private handleRemovedNodes(nodes: NodeList) {\r\n        nodes.forEach((node: any) => {\r\n            this.destroySingleElement(node);\r\n            let childrens = node.hasChildNodes() ? node.querySelectorAll(this.#queryString) : null;\r\n            if (is(childrens)) {\r\n                childrens.forEach((child: any) => {\r\n                    this.destroySingleElement(child);\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    private destroySingleElement(node: any) {\r\n        let element = node as CuiElement;\r\n        if (element.$handlers) {\r\n            for (let name in element.$handlers) {\r\n                if (element.$handlers.hasOwnProperty(name)) {\r\n                    try {\r\n                        element.$handlers[name].destroy();\r\n                    } catch (e) {\r\n                        this._log.exception(e, 'remove - ' + name)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","import { IUIInteractionProvider } from \"../../core/models/interfaces\";\r\nimport { is, sleep } from \"../../core/utils/functions\";\r\nimport { CLASSES } from \"../../core/utils/statics\";\r\n\r\nexport class CuiToastHandler {\r\n    #interactions: IUIInteractionProvider;\r\n    #selector: string;\r\n    #className: string;\r\n    #activeCls: string;\r\n    #animationTime: number;\r\n    #lock: boolean;\r\n    #animClsIn: string;\r\n    #animClsOut: string;\r\n    constructor(interaction: IUIInteractionProvider, prefix: string, animationTime: number) {\r\n        this.#interactions = interaction;\r\n        this.#selector = `.${prefix}-toast`;\r\n        this.#className = `${prefix}-toast`;\r\n        this.#activeCls = `${prefix}-active`;\r\n        this.#animationTime = animationTime;\r\n        this.#lock = false;\r\n        this.#animClsIn = `${prefix}-toast-animation-in`;\r\n        this.#animClsOut = `${prefix}-toast-animation-out`\r\n    }\r\n\r\n    async show(message: string): Promise<boolean> {\r\n        if (this.#lock) {\r\n            return false;\r\n        }\r\n        this.#lock = true;\r\n        let toastElement = document.querySelector(this.#selector);\r\n        if (!is(toastElement)) {\r\n            toastElement = document.createElement('div');\r\n            toastElement.classList.add(this.#className);\r\n            document.body.appendChild(toastElement);\r\n        }\r\n\r\n        this.#interactions.mutate(() => {\r\n            toastElement.innerHTML = message;\r\n            toastElement.classList.add(CLASSES.animProgress);\r\n            toastElement.classList.add(this.#animClsIn);\r\n        }, this);\r\n\r\n        await sleep(this.#animationTime);\r\n        this.#interactions.mutate(() => {\r\n            toastElement.classList.remove(CLASSES.animProgress);\r\n            toastElement.classList.remove(this.#animClsIn);\r\n            toastElement.classList.add(this.#activeCls);\r\n        }, this)\r\n        await sleep(3000);\r\n        this.#interactions.mutate(() => {\r\n            toastElement.classList.add(CLASSES.animProgress);\r\n            toastElement.classList.add(this.#animClsOut);\r\n        }, this)\r\n\r\n        setTimeout(() => {\r\n            this.#interactions.mutate(() => {\r\n                toastElement.classList.remove(CLASSES.animProgress);\r\n                toastElement.classList.remove(this.#animClsOut);\r\n                toastElement.classList.remove(this.#activeCls);\r\n            }, this)\r\n            this.#lock = false;\r\n        }, this.#animationTime);\r\n        return true;\r\n    }\r\n}","import { CLASSES } from \"../../core/utils/statics\";\r\nimport { ICuiLogger, IUIInteractionProvider } from \"../../core/models/interfaces\";\r\nimport { CuiLoggerFactory } from \"../../core/factories/logger\";\r\nimport { is } from \"../../core/utils/functions\";\r\n\r\nexport class CollectionManagerHelper {\r\n    #elements: Element[];\r\n    #log: ICuiLogger;\r\n    #isLocked: boolean;\r\n    #toggleClass: string;\r\n    #interactions: IUIInteractionProvider;\r\n    constructor(interactions: IUIInteractionProvider) {\r\n        this.#interactions = interactions;\r\n        this.#log = CuiLoggerFactory.get('CollectionManager');\r\n    }\r\n\r\n    setElements(elements: Element[]) {\r\n        this.#elements = elements;\r\n    }\r\n\r\n    setToggle(className: string) {\r\n        this.#toggleClass = className;\r\n    }\r\n\r\n    addAnimationClass(currentElement: Element, nextElement: Element, animIn: string, animOut: string,): void {\r\n        nextElement.classList.add(CLASSES.animProgress);\r\n        currentElement.classList.add(animOut);\r\n        nextElement.classList.add(animIn);\r\n    }\r\n\r\n    setFinalClasses(currentElement: Element, nextElement: Element, animIn: string, animOut: string): void {\r\n        nextElement.classList.remove(CLASSES.animProgress);\r\n        currentElement.classList.remove(animOut);\r\n        nextElement.classList.remove(animIn);\r\n        currentElement.classList.remove(this.#toggleClass);\r\n        nextElement.classList.add(this.#toggleClass);\r\n    }\r\n\r\n    verifyIndex(index: number, current: number, count: number): boolean {\r\n        return index >= 0 && index !== current && index < count\r\n    }\r\n\r\n    async setCurrent(newIndex: number, current: number): Promise<boolean> {\r\n        this.lock();\r\n        this.#log.debug(`Switching index from: ${current} to ${newIndex}`)\r\n        if (current > -1)\r\n            this.#elements[current].classList.remove(this.#toggleClass);\r\n        this.#elements[newIndex].classList.add(this.#toggleClass);\r\n        this.unlock();\r\n        return true;\r\n    }\r\n\r\n    async setCurrentWithAnimation(newIndex: number, animClassIn: string, animClassOut: string, duration: number, current: number): Promise<boolean> {\r\n        this.lock()\r\n        this.#log.debug(`Switching index from: ${current} to ${newIndex}`)\r\n\r\n        const currentElement = this.#elements[current];\r\n        const nextElement = this.#elements[newIndex];\r\n        this.#interactions.mutate(this.addAnimationClass, this, currentElement, nextElement, animClassIn, animClassOut);\r\n        setTimeout(() => {\r\n            this.#interactions.mutate(this.setFinalClasses, this, currentElement, nextElement, animClassIn, animClassOut)\r\n            this.unlock();\r\n        }, duration)\r\n        return true;\r\n    }\r\n\r\n    getCurrentIndex(): number {\r\n        if (!is(this.#toggleClass)) {\r\n            return -1;\r\n        }\r\n        let len = this.count();\r\n        for (let i = 0; i < len; i++) {\r\n            if (this.#elements[i].classList.contains(this.#toggleClass)) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    elements(): Element[] {\r\n        return this.#elements;\r\n    }\r\n\r\n    check(): boolean {\r\n        if (this.#isLocked) {\r\n            this.#log.warning(\"Object locked. Operation in progress\", \"Check\");\r\n            return false;\r\n        } else if (!is(this.#toggleClass)) {\r\n            this.#log.warning(\"Toggle is not set. Call setToggleClass\", \"Check\");\r\n            return false;\r\n        } else if (this.count() <= 0) {\r\n            this.#log.warning(\"Elements list is empty\", \"Check\");\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    count(): number {\r\n        return this.#elements ? this.#elements.length : -1;\r\n    }\r\n\r\n    lock() {\r\n        this.#isLocked = true;\r\n    }\r\n\r\n    unlock() {\r\n        this.#isLocked = false\r\n    }\r\n\r\n\r\n}","import { IUIInteractionProvider, ICuiLogger, CuiCachable } from \"../../core/models/interfaces\";\r\nimport { CuiLoggerFactory } from \"../../core/factories/logger\";\r\nimport { CollectionManagerHelper } from \"../helpers/collection\";\r\n\r\nexport class CollectionManager implements CuiCachable {\r\n    #log: ICuiLogger;\r\n\r\n    #cDt: number;\r\n    #helper: CollectionManagerHelper;\r\n\r\n    constructor(elements: Element[], interactions: IUIInteractionProvider) {\r\n        this.#log = CuiLoggerFactory.get('CollectionManager');\r\n        this.#helper = new CollectionManagerHelper(interactions);\r\n        this.#helper.setElements(elements);\r\n        this.#cDt = Date.now();\r\n    }\r\n\r\n    setToggle(className: string) {\r\n        this.#helper.setToggle(className)\r\n    }\r\n\r\n    setElements(elements: Element[]) {\r\n        this.#helper.setElements(elements);\r\n    }\r\n\r\n    click(callback: (element: Element, index: number) => void): void {\r\n        this.#helper.elements().forEach((element, index) => {\r\n            element.addEventListener('click', () => {\r\n                this.set(index).then(() => {\r\n                    if (callback) {\r\n                        callback(element, index)\r\n                    }\r\n                })\r\n            })\r\n        })\r\n    }\r\n\r\n    async next(): Promise<boolean> {\r\n        if (!this.#helper.check()) {\r\n            return false;\r\n        }\r\n        let newIdx = this.#helper.getCurrentIndex() + 1;\r\n        return this.set(newIdx >= this.length() ? 0 : newIdx);\r\n    }\r\n\r\n    async previous(): Promise<boolean> {\r\n        if (!this.#helper.check()) {\r\n            return false;\r\n        }\r\n        let newIdx = this.#helper.getCurrentIndex() - 1;\r\n        return this.set(newIdx < 0 ? this.length() - 1 : newIdx)\r\n    }\r\n\r\n    async set(index: number): Promise<boolean> {\r\n        let current = this.#helper.getCurrentIndex();\r\n        if (!this.#helper.check() || !this.#helper.verifyIndex(index, current, this.length())) {\r\n            return false;\r\n        }\r\n        return this.#helper.setCurrent(index, current)\r\n    }\r\n\r\n    async setWithAnimation(index: number, animClassIn: string, animClassOut: string, duration: number): Promise<boolean> {\r\n        let current = this.#helper.getCurrentIndex();\r\n        if (!this.#helper.check() || !this.#helper.verifyIndex(index, current, this.length())) {\r\n            return false;\r\n        }\r\n        return this.#helper.setCurrentWithAnimation(index, animClassIn, animClassOut, duration, current)\r\n    }\r\n\r\n    getCurrentIndex(): number {\r\n        return this.#helper.getCurrentIndex();\r\n    }\r\n\r\n    length() {\r\n        return this.#helper.count();\r\n    }\r\n\r\n    refresh(): boolean {\r\n        return this.length() > 0 && Date.now() - this.#cDt > 360000;\r\n    }\r\n}","import { ICuiPluginManager, ICuiPlugin, ICuiLogger, ICuiMutiationPlugin } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiLoggerFactory } from \"../../core/factories/logger\";\r\nimport { is } from \"../../core/utils/functions\";\r\n\r\nexport class CuiPluginManager implements ICuiPluginManager {\r\n    #plugins: ICuiPlugin[];\r\n    #mutated: ICuiMutiationPlugin[];\r\n    #log: ICuiLogger;\r\n    constructor(plugins: ICuiPlugin[]) {\r\n        this.#plugins = plugins ?? [];\r\n        this.#log = CuiLoggerFactory.get(\"CuiPluginManager\")\r\n    }\r\n\r\n    init(utils: CuiUtils): void {\r\n        this.#log.debug(\"Plugins initialization started: \" + this.#plugins.length)\r\n        this.#mutated = this.#plugins.filter((plugin: any) => {\r\n            return is(plugin.mutation);\r\n        }) as any;\r\n        this.#plugins.forEach(plugin => {\r\n            plugin.init(utils);\r\n            utils.setup.plugins[plugin.description] = plugin.setup;\r\n        })\r\n        this.#log.debug(\"Plugins have been initialized\");\r\n    }\r\n\r\n    get(name: string): ICuiPlugin {\r\n        if (!is(name)) {\r\n            return undefined;\r\n        }\r\n        return this.#plugins.find(p => p.name === name);\r\n    }\r\n\r\n    async onMutation(mutation: MutationRecord): Promise<boolean> {\r\n        let tasks: Promise<boolean>[] = [];\r\n        this.#mutated.forEach((plugin: any) => {\r\n            tasks.push(plugin.mutation(mutation))\r\n        })\r\n        let result: boolean[] = await Promise.all(tasks);\r\n        return result.find(val => {\r\n            val === false\r\n        }) ? false : true;\r\n    }\r\n\r\n}","import { CuiSetupInit } from \"../core/models/setup\";\r\nimport { is, joinAttributesForQuery, are, registerCuiElement } from \"../core/utils/functions\";\r\nimport { ElementManager } from \"./managers/element\";\r\nimport { STATICS, EVENTS, CSS_VARIABLES } from \"../core/utils/statics\";\r\nimport { ICuiLogger, ICuiPlugin, ICuiComponent, ICuiPluginManager, CuiContext, CuiElement } from \"../core/models/interfaces\";\r\nimport { ICuiMutionObserver, CuiMutationObserver } from \"./observers/mutations\";\r\nimport { CuiLoggerFactory } from \"../core/factories/logger\";\r\nimport { CuiToastHandler } from \"./managers/toast\";\r\nimport { CollectionManager } from \"./managers/collection\";\r\nimport { CuiUtils } from \"../core/models/utils\";\r\nimport { CuiInstanceInitError } from \"../core/models/errors\";\r\nimport { CuiPluginManager } from \"./managers/plugins\";\r\n\r\n\r\nexport class CuiInstance {\r\n    #log: ICuiLogger;\r\n    #mutationObserver: ICuiMutionObserver;\r\n    #toastManager: CuiToastHandler;\r\n    #utils: CuiUtils;\r\n    plugins: ICuiPluginManager;\r\n    #components: ICuiComponent[];\r\n    #rootElement: HTMLElement;\r\n    constructor(setup: CuiSetupInit, plugins: ICuiPlugin[], components: ICuiComponent[]) {\r\n        STATICS.prefix = setup.prefix;\r\n        STATICS.logLevel = setup.logLevel;\r\n        this.plugins = new CuiPluginManager(plugins);\r\n        this.#components = components ?? [];\r\n        this.#utils = new CuiUtils(setup);\r\n        this.#log = CuiLoggerFactory.get('CuiInstance')\r\n        this.#rootElement = setup.root;\r\n    }\r\n\r\n    init(): CuiInstance {\r\n        this.#log.debug(\"Instance started\", \"init\")\r\n        // Init elements\r\n        if (!is(window.MutationObserver)) {\r\n            throw new CuiInstanceInitError(\"Mutation observer does not exists\");\r\n        }\r\n        this.#toastManager = new CuiToastHandler(this.#utils.interactions, this.#utils.setup.prefix, this.#utils.setup.animationTimeLong);\r\n        const mutatedAttributes: string[] = this.#components.map(x => { return x.attribute }); // MUTATED_ATTRIBUTES; \r\n        const initElements = is(mutatedAttributes) ? this.#rootElement.querySelectorAll(joinAttributesForQuery(mutatedAttributes)) : null\r\n        if (is(initElements)) {\r\n            this.#log.debug(`Initiating ${initElements.length} elements`)\r\n            try {\r\n                initElements.forEach((item: any) => {\r\n                    registerCuiElement(item, this.#components, mutatedAttributes, this.#utils);\r\n                })\r\n            } catch (e) {\r\n                this.#log.exception(e);\r\n            }\r\n        }\r\n        this.#log.debug(\"Init plugins\", \"init\")\r\n        // Init plugins\r\n        this.plugins.init(this.#utils);\r\n\r\n        if (are(this.#components, mutatedAttributes)) {\r\n            this.#log.debug(\"Init mutation observer\", \"init\")\r\n            this.#mutationObserver = new CuiMutationObserver(this.#rootElement, this.#utils)\r\n            this.#mutationObserver.setComponents(this.#components).setAttributes(mutatedAttributes)\r\n            this.#mutationObserver.setPlugins(this.plugins);\r\n            this.#mutationObserver.start();\r\n        }\r\n\r\n        this.#log.debug(\"Setting CSS globals\", 'init')\r\n        this.#utils.interactions.mutate(() => {\r\n            this.#utils.setProperty(CSS_VARIABLES.animationTimeLong, `${this.#utils.setup.animationTimeLong}ms`)\r\n            this.#utils.setProperty(CSS_VARIABLES.animationTime, `${this.#utils.setup.animationTime}ms`);\r\n            this.#utils.setProperty(CSS_VARIABLES.animationTimeShort, `${this.#utils.setup.animationTimeShort}ms`);\r\n        }, null)\r\n\r\n\r\n        this.#utils.bus.emit(EVENTS.INSTANCE_INITIALIZED, null)\r\n        return this;\r\n    }\r\n\r\n    finish(): void {\r\n        this.#mutationObserver.stop();\r\n        this.#utils.bus.emit(EVENTS.INSTANCE_FINISHED, null)\r\n    }\r\n\r\n    get(selector: string): ElementManager {\r\n        const existing = this.#utils.cache.get(selector);\r\n        if (is(existing)) {\r\n            return existing as ElementManager;\r\n        }\r\n        const elements = this.all(selector);\r\n        if (!elements) {\r\n            return undefined\r\n        }\r\n        const newElement = new ElementManager(elements, this.#utils);\r\n        this.#utils.cache.put(selector, newElement)\r\n        return newElement\r\n    }\r\n\r\n    collection(selector: string): CollectionManager {\r\n        const existing = this.#utils.cache.get(selector);\r\n        if (is(existing)) {\r\n            return existing as CollectionManager;\r\n        }\r\n        const elements = this.all(selector);\r\n        if (!is(elements)) {\r\n            return undefined;\r\n        }\r\n        let manager = new CollectionManager(elements, this.#utils.interactions);\r\n        this.#utils.cache.put(selector, manager)\r\n        return manager;\r\n    }\r\n\r\n\r\n    async toast(message: string): Promise<boolean> {\r\n        if (!is(message)) {\r\n            return false;\r\n        }\r\n        return this.#toastManager.show(message)\r\n    }\r\n\r\n    select(selector: string): Element {\r\n        return document.querySelector(selector)\r\n    }\r\n\r\n    all(selector: string): Element[] {\r\n        const nodes: NodeListOf<Element> = document.querySelectorAll(selector);\r\n        if (!is(nodes)) {\r\n            return undefined;\r\n        }\r\n        return [...nodes];\r\n    }\r\n\r\n    getUtils(): CuiUtils {\r\n        return this.#utils;\r\n    }\r\n\r\n    on(event: string, callback: any, context: CuiContext, element?: CuiElement): void {\r\n        if (!are(event, callback)) {\r\n            this.#log.error(\"Incorrect arguments\", \"on\")\r\n        }\r\n        this.#utils.bus.on(event, callback, context, element);\r\n    }\r\n}","import { ICuiPlugin } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { getSystemLightMode } from \"../../core/utils/functions\";\r\nimport { CuiMediaQueryListener } from \"../../core/listeners/media\";\r\n\r\nexport interface AutoLightPluginSetup {\r\n    autoLight: boolean;\r\n}\r\n\r\nexport class CuiAutoLightModePlugin implements ICuiPlugin {\r\n    description: string = 'Dark vs Light mode auto switcher';\r\n    name: string = 'auto-light';\r\n    setup: AutoLightPluginSetup;\r\n    #listener: CuiMediaQueryListener;\r\n    #utils: CuiUtils;\r\n    constructor(autoLightInit: AutoLightPluginSetup) {\r\n        this.description = \"CuiAutoLightModePlugin\";\r\n        this.setup = autoLightInit;\r\n    }\r\n\r\n    init(utils: CuiUtils): void {\r\n        this.#utils = utils\r\n        if (this.setup.autoLight && getSystemLightMode() === 'dark') {\r\n            this.#utils.setLightMode('dark')\r\n        }\r\n        this.#listener = new CuiMediaQueryListener('(prefers-color-scheme: dark)')\r\n        this.#listener.setCallback(this.onChange.bind(this))\r\n        this.#listener.attach();\r\n    }\r\n\r\n    destroy(): void {\r\n        this.#listener.detach();\r\n    }\r\n\r\n    onChange(ev: MediaQueryListEvent) {\r\n        let autoLightSetup = this.#utils.setup.plugins[this.description] as AutoLightPluginSetup;\r\n        let autoLight = autoLightSetup?.autoLight ?? false;\r\n        if (autoLight) {\r\n            if (ev.matches) {\r\n                this.#utils.setLightMode('dark')\r\n            } else {\r\n                this.#utils.setLightMode('light')\r\n            }\r\n        }\r\n    }\r\n\r\n}","import { ICuiLogger, IUIInteractionProvider, CuiElement, CuiContext, ICuiComponentHandler, ICuiParsable } from \"../../core/models/interfaces\";\r\nimport { CuiLoggerFactory } from \"../../core/factories/logger\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { getActiveClass, CuiActionsHelper, ICuiComponentAction } from \"../../core/index\";\r\n\r\nexport class CuiHandlerBase implements CuiContext {\r\n    _log: ICuiLogger;\r\n    utils: CuiUtils;\r\n    element: Element;\r\n    cuid: string;\r\n    isLocked: boolean;\r\n    constructor(componentName: string, element: Element, utils: CuiUtils) {\r\n        this._log = CuiLoggerFactory.get(componentName);\r\n        this.utils = utils;\r\n        this.element = element;\r\n        this.cuid = (<any>element).$cuid;\r\n        this.isLocked = false;\r\n    }\r\n\r\n\r\n    mutate(callback: any, ...args: any[]): void {\r\n        this.utils.interactions.mutate(callback, this, ...args)\r\n    }\r\n\r\n    fetch(callback: any, ...args: any[]): void {\r\n        this.utils.interactions.fetch(callback, this, ...args)\r\n    }\r\n\r\n    getEventName(name: string) {\r\n        return [name, this.cuid].join('-');\r\n    }\r\n\r\n    emitEvent(event: string, ...data: any[]) {\r\n        this.utils.bus.emit(event, this.cuid, ...data)\r\n    }\r\n\r\n    onEvent(event: string, callback: any) {\r\n        this.utils.bus.on(event, callback, this, this.element as any)\r\n    }\r\n\r\n    detachEvent(event: string) {\r\n        this.utils.bus.detach(event, this)\r\n    }\r\n\r\n    getId(): string {\r\n        return this.cuid;\r\n    }\r\n\r\n    checkLockAndWarn(fName?: string): boolean {\r\n        if (this.isLocked) {\r\n            this._log.warning(\"Component is locked\", fName)\r\n            return true\r\n        }\r\n        return false;\r\n    }\r\n}\r\n\r\nexport abstract class CuiHandler<T extends ICuiParsable> extends CuiHandlerBase implements ICuiComponentHandler {\r\n    args: T;\r\n    prevArgs: T;\r\n    isInitialized: boolean;\r\n    activeClassName: string;\r\n    actionsHelper: CuiActionsHelper;\r\n    constructor(componentName: string, element: Element, args: T, utils: CuiUtils) {\r\n        super(componentName, element, utils);\r\n        this.args = args;\r\n        this.activeClassName = getActiveClass(utils.setup.prefix);\r\n        this.actionsHelper = new CuiActionsHelper(utils.interactions)\r\n        this.prevArgs = null;\r\n        this.isInitialized = false;\r\n    }\r\n\r\n    isActive(): boolean {\r\n        return this.element.classList.contains(this.activeClassName);\r\n    }\r\n\r\n\r\n    async performAction(action: ICuiComponentAction, timeout: number, onFinish: () => void): Promise<boolean> {\r\n        if (await this.actionsHelper.performAction(this.element, action, timeout)) {\r\n            onFinish();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    handle(args: any): void {\r\n        this._log.debug(\"Init\", 'handle');\r\n        if (this.isInitialized) {\r\n            this._log.warning(\"Trying to initialize component again\", 'handle');\r\n            return;\r\n        }\r\n        this.args.parse(args);\r\n        this.onInit();\r\n        this.isInitialized = true;\r\n    }\r\n\r\n    refresh(args: any): void {\r\n        this._log.debug(\"Update\", 'refresh')\r\n        if (!this.isInitialized) {\r\n            this._log.error(\"Cannot update not initialized componentn\", 'refresh');\r\n            return;\r\n        }\r\n        this.prevArgs = { ...this.args };\r\n        this.args.parse(args);\r\n        this.onUpdate();\r\n    }\r\n\r\n    destroy(): void {\r\n        this._log.debug(\"Destroy\", \"destroy\");\r\n        this.onDestroy();\r\n        this.isInitialized = false;\r\n    }\r\n\r\n    abstract onInit(): void;\r\n    abstract onUpdate(): void;\r\n    abstract onDestroy(): void;\r\n\r\n}","import { ICuiComponent, ICuiComponentHandler, ICuiParsable } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandlerBase, CuiHandler } from \"../../app/handlers/base\";\r\nimport { ICONS } from \"../../core/utils/statics\";\r\nimport { is, createElementFromString, isString, getStringOrDefault } from \"../../core/utils/functions\";\r\n\r\nexport class CuiIconArgs implements ICuiParsable {\r\n    icon: string;\r\n\r\n    parse(val: any) {\r\n        if (!is(val)) {\r\n            this.icon = null;\r\n        }\r\n        if (isString(val)) {\r\n            this.icon = val\r\n            return;\r\n        }\r\n        this.icon = getStringOrDefault(val.icon, \"\");\r\n    }\r\n}\r\n\r\nexport class CuiIconComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor(prefix?: string) {\r\n        this.attribute = `${prefix ?? 'cui'}-icon`;\r\n    }\r\n\r\n    getStyle(): string {\r\n        return null;\r\n    }\r\n\r\n    get(element: Element, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiIconHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\n\r\n\r\nexport class CuiIconHandler extends CuiHandler<CuiIconArgs> {\r\n\r\n    #currentIcon: string;\r\n    constructor(element: Element, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiIconHandler\", element, new CuiIconArgs(), utils);\r\n        this.#currentIcon = null;\r\n\r\n    }\r\n\r\n    onInit(): void {\r\n        if (this.#currentIcon !== null) {\r\n            this._log.debug(\"Icon already initialized\")\r\n            return;\r\n        }\r\n        this.addIcon(this.args.icon)\r\n        this.#currentIcon = this.args.icon;\r\n    }\r\n\r\n    onUpdate(): void {\r\n        if (this.args.icon === this.#currentIcon) {\r\n            return;\r\n        }\r\n        this.addIcon(this.args.icon);\r\n        this.#currentIcon = this.args.icon;\r\n    }\r\n\r\n    onDestroy(): void {\r\n        const svg = this.element.querySelector('svg')\r\n        if (is(svg)) {\r\n            svg.remove();\r\n        }\r\n        this.#currentIcon = null;\r\n    }\r\n\r\n    private addIcon(icon: string) {\r\n        const iconStr = icon ? ICONS[icon] : null;\r\n        if (!iconStr) {\r\n            return;\r\n        }\r\n        const iconSvg = new IconBuilder(iconStr).build();\r\n        const svg = this.element.querySelector('svg')\r\n        if (is(svg)) {\r\n            svg.remove();\r\n        }\r\n\r\n        if (this.element.childNodes.length > 0) {\r\n            this.mutate(this.insertBefore, iconSvg)\r\n        } else {\r\n            this.mutate(this.appendChild, iconSvg)\r\n        }\r\n    }\r\n\r\n    private insertBefore(iconElement: Element) {\r\n        this.element.insertBefore(iconElement, this.element.firstChild);\r\n    }\r\n\r\n    private appendChild(iconElement: Element) {\r\n        this.element.appendChild(iconElement);\r\n    }\r\n}\r\n\r\nexport class IconBuilder {\r\n    #element: string;\r\n    #scale: number;\r\n    #style: string;\r\n\r\n    constructor(svgString: string) {\r\n        this.#element = svgString;\r\n        this.#scale = 1;\r\n    }\r\n\r\n    setStyle(style: string): IconBuilder {\r\n        this.#style = style;\r\n        return this\r\n    }\r\n\r\n    setScale(scale: number): IconBuilder {\r\n        this.#scale = scale\r\n        return this\r\n    }\r\n\r\n    build(): Element {\r\n        let created = createElementFromString(this.#element)\r\n        if (is(created) && this.#scale) {\r\n            let appender = new IconScaleAppender();\r\n            appender.append(created, this.#scale)\r\n        }\r\n        return created\r\n    }\r\n}\r\n\r\nexport class IconScaleAppender {\r\n    append(element: Element, value: number): void {\r\n        let width = element.hasAttribute(\"width\") ? parseInt(element.getAttribute(\"width\")) : 20;\r\n        let height = element.hasAttribute(\"height\") ? parseInt(element.getAttribute(\"height\")) : 20;\r\n        element.setAttribute(\"width\", (width * value).toString())\r\n        element.setAttribute(\"height\", (height * value).toString())\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler, CuiObservables, CuiContext } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandlerBase } from \"../../app/handlers/base\";\r\nimport { is, getRangeValue } from \"../../core/utils/functions\";\r\nimport { IconBuilder } from \"../icon/icon\";\r\nimport { ICONS } from \"../../core/utils/statics\";\r\n\r\nexport class CuiCircleComponent implements ICuiComponent {\r\n    attribute: string;\r\n    #iconStr: string;\r\n    constructor() {\r\n        this.attribute = 'circle-progress';\r\n        ICONS['special_circle_progress'] = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"  class=\\\"circle-progress\\\" viewBox=\\\"0 0 100 100\\\" width=\\\"100\\\" height=\\\"100\\\"><path class=\\\"circle-progress-path\\\" d=\\\"M 50,5.3660047 A 44.867708,44.633994 0 0 1 94.867709,49.999997 44.867708,44.633994 0 0 1 50,94.633995 44.867708,44.633994 0 0 1 5.1322908,50.000001 44.867708,44.633994 0 0 1 50,5.3660047\\\"></path></svg>\";\r\n    }\r\n\r\n    getStyle(): string {\r\n        return null;\r\n    }\r\n\r\n    get(element: Element, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiCircleHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport class CuiCircleHandler extends CuiHandlerBase implements ICuiComponentHandler {\r\n    #isInitialized: boolean;\r\n    #factor: number;\r\n    #full: number;\r\n    #path: any;\r\n    #prevValue: number;\r\n    #attribute: string;\r\n    constructor(element: Element, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiCircleHandler\", element, utils);\r\n        this.#factor = this.#full = 0;\r\n        this.#path = null\r\n        this.#prevValue = -1;\r\n        this.#attribute = attribute;\r\n    }\r\n\r\n    handle(args: any): void {\r\n        if (is(this.#isInitialized)) {\r\n            return;\r\n        }\r\n        const iconSvg = new IconBuilder(ICONS['special_circle_progress']).build();\r\n        const svg = this.element.querySelector('svg')\r\n        if (is(svg)) {\r\n            svg.remove();\r\n        }\r\n        this.element.appendChild(iconSvg);\r\n        this.#path = this.element.querySelector('.circle-progress-path');\r\n        this.#full = this.#path.getTotalLength();\r\n        this.#factor = this.#full / 100;\r\n        this.#isInitialized = true;\r\n        this.fetch(this.readStyle)\r\n    }\r\n\r\n    refresh(args: any): void {\r\n        this.fetch(this.readStyle)\r\n    }\r\n\r\n    destroy(): void {\r\n        this.#isInitialized = false\r\n    }\r\n\r\n    private updateStyle(value: number) {\r\n        this.#path.style.strokeDashoffset = value;\r\n    }\r\n\r\n    private readStyle(): void {\r\n        const value = this.element.hasAttribute(this.#attribute) ? parseInt(this.element.getAttribute(this.#attribute)) : 0;\r\n        if (value === this.#prevValue) {\r\n            return;\r\n        }\r\n        this.#prevValue = value;\r\n        const progress = getRangeValue(value, 0, 100);\r\n\r\n        this.mutate(this.updateStyle, this.#full - this.#factor * progress);\r\n    }\r\n\r\n}","import { ICuiComponent, ICuiComponentHandler, CuiObservables } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { IconBuilder } from \"../icon/icon\";\r\nimport { CuiHandlerBase } from \"../../app/handlers/base\";\r\nimport { ICONS } from \"../../core/utils/statics\";\r\nimport { is } from \"../../core/utils/functions\";\r\n\r\nexport class CuiSpinnerComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor() {\r\n        this.attribute = 'data-spinner';\r\n        ICONS['special_circle_double'] = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"circle-double\\\" viewBox=\\\"0 0 100 100\\\" width=\\\"100\\\" height=\\\"100\\\"><path class=\\\"circle-double-outer\\\" d=\\\"M 50.000002,6.1070619 A 44.867709,44.126654 0 0 1 94.867708,50.233712 44.867709,44.126654 0 0 1 50.000002,94.36037 44.867709,44.126654 0 0 1 5.132292,50.233717 44.867709,44.126654 0 0 1 50.000002,6.1070619\\\"></path><path class=\\\"circle-double-inner\\\" d=\\\"M 50.000001,15.59972 A 35.383463,34.633995 0 0 1 85.383464,50.233711 35.383463,34.633995 0 0 1 50.000001,84.86771 35.383463,34.633995 0 0 1 14.616536,50.233716 35.383463,34.633995 0 0 1 50.000001,15.59972\\\"></path></svg>\"\r\n    }\r\n\r\n    getStyle(): string {\r\n        return null;\r\n    }\r\n\r\n    get(element: Element, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiSpinnerHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport class CuiSpinnerHandler extends CuiHandlerBase implements ICuiComponentHandler {\r\n    #attribute: string;\r\n    #isInitialized: boolean;\r\n    constructor(element: Element, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiSpinnerHandler\", element, utils);\r\n        this.element = element;\r\n        this.#attribute = attribute\r\n        this.#isInitialized = false;\r\n    }\r\n\r\n    handle(args: any): void {\r\n        if (this.#isInitialized) {\r\n            return\r\n        }\r\n        const spinnerName = this.element.getAttribute(this.#attribute);\r\n        const svgIcon = is(spinnerName) ? ICONS[`spinner_${spinnerName}`] : null;\r\n        if (!is(svgIcon)) {\r\n            return;\r\n        }\r\n        const iconElement = new IconBuilder(svgIcon).build();\r\n        this.element.innerHTML = \"\";\r\n        this.#isInitialized = true\r\n        this.mutate(this.addSpinner, iconElement, spinnerName);\r\n    }\r\n\r\n    refresh(args: any): void {\r\n        if (this.#isInitialized) {\r\n            return\r\n        }\r\n    }\r\n\r\n    destroy(): void {\r\n        this.#isInitialized = false;\r\n        this.element.innerHTML = \"\";\r\n    }\r\n\r\n    private addSpinner(iconElement: Element, name: string) {\r\n        this.element.appendChild(iconElement);\r\n        this.element.classList.add(`animation-spinner-${name}`);\r\n    }\r\n\r\n}","import { ICuiComponent, ICuiComponentHandler } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandlerBase } from \"../../app/handlers/base\";\r\n\r\nexport class CuiDummyComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor() {\r\n        this.attribute = 'cui-dummy';\r\n    }\r\n\r\n    getStyle(): string {\r\n        return null;\r\n    }\r\n\r\n    get(element: Element, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiDummyHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport class CuiDummyHandler extends CuiHandlerBase implements ICuiComponentHandler {\r\n\r\n    #attribute: string;\r\n    constructor(element: Element, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiDummyHandler\", element, utils);\r\n\r\n        this.#attribute = attribute\r\n    }\r\n\r\n    handle(args: any): void {\r\n\r\n    }\r\n\r\n    refresh(args: any): void {\r\n\r\n    }\r\n\r\n    destroy(): void {\r\n\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler, CuiObservables } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { IconBuilder } from \"../icon/icon\";\r\nimport { CuiHandlerBase } from \"../../app/handlers/base\";\r\nimport { ICONS, EVENTS } from \"../../core/utils/statics\";\r\nimport { is, parseAttributeString, getOffsetTop } from \"../../core/utils/functions\";\r\n\r\nexport class CuiScrollComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor(prefix?: string) {\r\n        this.attribute = is(prefix) ? prefix + 'scroll' : 'cui-scroll';\r\n    }\r\n\r\n    getStyle(): string {\r\n        return null;\r\n    }\r\n\r\n    get(element: HTMLElement, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiScrollHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport interface CuiScrollAttribute {\r\n    target?: string;\r\n    parent?: string;\r\n    behavior?: 'auto' | 'smooth';\r\n}\r\n\r\nexport class CuiScrollHandler extends CuiHandlerBase implements ICuiComponentHandler {\r\n    #attribute: string;\r\n    #args: CuiScrollAttribute;\r\n    #parent: HTMLElement;\r\n    #target: HTMLElement;\r\n    constructor(element: HTMLElement, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiScrollHandler\", element, utils);\r\n        this.element = element;\r\n        this.#attribute = attribute\r\n        this.#args = null;\r\n        this.#parent = null;\r\n        this.#target = null;\r\n    }\r\n\r\n    handle(args: any): void {\r\n        this.parseArguments(args);\r\n        this.element.addEventListener('click', this.onClick.bind(this));\r\n    }\r\n\r\n    refresh(args: any): void {\r\n        this.parseArguments(args);\r\n    }\r\n\r\n    destroy(): void {\r\n        this.element.removeEventListener('click', this.onClick.bind(this));\r\n    }\r\n\r\n    onClick(ev: MouseEvent) {\r\n        if (!is(this.#target)) {\r\n            return;\r\n        }\r\n        let to = getOffsetTop(this.#target) - this.#parent.offsetTop;\r\n        let from = this.#parent.scrollTop;\r\n        let by = to - from;\r\n        this.#parent.scrollBy({\r\n            top: by,\r\n            behavior: this.#args.behavior ?? 'auto'\r\n        });\r\n        this.emitEvent(EVENTS.ON_SCROLL, {\r\n            to: to,\r\n            by: by,\r\n            target: this.#target,\r\n            parent: this.#parent,\r\n            timestamp: Date.now(),\r\n        })\r\n        ev.preventDefault();\r\n    }\r\n\r\n    private parseArguments(args: any): void {\r\n        this.#args = args;\r\n        this.#target = document.querySelector(this.#args.target) as HTMLElement;\r\n        if (is(this.#target)) {\r\n            this.#parent = is(this.#args.parent) ? document.querySelector(this.#args.parent) : this.#target.parentElement;\r\n        }\r\n    }\r\n}\r\n\r\n","import { ICuiComponent, ICuiComponentHandler, CuiObservables } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandlerBase } from \"../../app/handlers/base\";\r\nimport { CuiScrollListener, CuiScrollEvent } from \"../../core/listeners/scroll\";\r\nimport { ICuiComponentAction, CuiActionsFatory } from \"../../core/utils/actions\";\r\nimport { parseAttributeString, getRangeValue, is, getOffsetTop, getRangeValueOrDefault, isInRange, getOffsetLeft } from \"../../core/utils/functions\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\nimport { CuiScrollSpyOutOfRangeError } from \"../../core/models/errors\";\r\n\r\nexport interface CuiScrollSpyAttribute {\r\n    selector?: string;\r\n    action?: string;\r\n    link?: string;\r\n    linkAction: string;\r\n    offset: number;\r\n}\r\n\r\n\r\nexport class CuiScrollSpyArgs {\r\n    selector: string;\r\n    action: ICuiComponentAction;\r\n    link?: string;\r\n    linkAction?: ICuiComponentAction;\r\n    offset?: number;\r\n\r\n    constructor() {\r\n        this.offset = 0;\r\n    }\r\n    parse(args: any) {\r\n        if (!args.selector) {\r\n            throw new Error(\"Incorrect arguments\");\r\n        }\r\n        this.selector = args.selector;\r\n        this.action = CuiActionsFatory.get(args.action);\r\n        this.link = args.link;\r\n        this.linkAction = CuiActionsFatory.get(args.linkAction);\r\n        this.offset = getRangeValueOrDefault(parseInt(args.offset), -1, 1, 0);\r\n    }\r\n}\r\nexport class CuiScrollspyComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor(prefix?: string) {\r\n        this.attribute = `${prefix ?? 'cui'}-scrollspy`;\r\n    }\r\n\r\n    getStyle(): string {\r\n        return null;\r\n    }\r\n\r\n    get(element: Element, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiScrollspyHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport class CuiScrollspyHandler extends CuiHandlerBase implements ICuiComponentHandler {\r\n    #listener: CuiScrollListener;\r\n    #args: CuiScrollSpyArgs;\r\n    #links: Element[];\r\n    #targets: Element[];\r\n    #currentIdx: number;\r\n    #targetsLength: number;\r\n    #linksLength: number;\r\n    #prevScrollTop: number;\r\n    #prevScrollLeft: number;\r\n    constructor(element: Element, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiScrollspyHandler\", element, utils);\r\n        this.element = element as HTMLElement;\r\n        this.#listener = new CuiScrollListener(this.element, this.utils.setup.scrollThreshold);\r\n        this.#args = new CuiScrollSpyArgs();\r\n        this.#links = [];\r\n        this.#targets = [];\r\n        this.#currentIdx = this.#targetsLength = this.#linksLength - 1;\r\n    }\r\n\r\n    handle(args: any): void {\r\n        this._log.debug(\"Handle\", \"handle\");\r\n        this.#prevScrollTop = this.element.scrollTop;\r\n        this.#prevScrollLeft = this.element.scrollLeft;\r\n        this.parseAttribute(args);\r\n        this.calculateCurrent(this.#prevScrollTop);\r\n        this.#listener.setCallback(this.onScroll.bind(this));\r\n        this.#listener.attach();\r\n    }\r\n\r\n    refresh(args: any): void {\r\n        this._log.debug(\"Refresh\")\r\n        this.parseAttribute(args);\r\n        this.#prevScrollTop = this.element.scrollTop;\r\n        this.#prevScrollLeft = this.element.scrollLeft;\r\n        this.calculateCurrent(this.#prevScrollTop);\r\n    }\r\n\r\n    destroy() {\r\n        this.#listener.detach();\r\n    }\r\n\r\n    private onScroll(ev: CuiScrollEvent): void {\r\n        let idx = -1;\r\n        if (Math.abs(ev.left - this.#prevScrollLeft) > Math.abs(ev.top - this.#prevScrollTop)) {\r\n            idx = this.calculateCurrentLeft(ev.left);\r\n        } else {\r\n            idx = this.calculateCurrent(ev.top);\r\n        }\r\n        if (idx !== this.#currentIdx) {\r\n            let newTarget = this.setCurrent(idx)\r\n            this.emitEvent(EVENTS.ON_TARGET_CHANGE, {\r\n                top: ev.top,\r\n                left: ev.left,\r\n                target: newTarget,\r\n                timestamp: Date.now()\r\n            })\r\n        }\r\n\r\n        this.#prevScrollTop = this.element.scrollTop;\r\n        this.#prevScrollLeft = this.element.scrollLeft;\r\n    }\r\n\r\n    private parseAttribute(args: any) {\r\n        this.#args.parse(args);\r\n        this.#targets = [...this.element.querySelectorAll(this.#args.selector)];\r\n        this.#links = this.#args.link ? [...document.querySelectorAll(this.#args.link)] : [];\r\n        this.#targetsLength = this.#targets.length;\r\n        this.#linksLength = this.#links.length;\r\n    }\r\n\r\n    private calculateCurrent(scroll: number): number {\r\n        return this.#targets.findIndex((target: HTMLElement) => {\r\n            let offset = getOffsetTop(target) - (<any>this.element).offsetTop;\r\n            let ratio = offset * this.#args.offset\r\n            return offset + ratio <= scroll && scroll < offset + target.clientHeight + ratio;\r\n        })\r\n    }\r\n\r\n    private calculateCurrentLeft(scroll: number): number {\r\n        return this.#targets.findIndex((target: HTMLElement) => {\r\n            let offset = getOffsetLeft(target) - (<any>this.element).offsetLeft;\r\n            let ratio = offset * this.#args.offset\r\n            return offset + ratio <= scroll && scroll < offset + target.clientWidth + ratio;\r\n        })\r\n    }\r\n    /**\r\n     * Performs action on current, new target and on links if there are any.\r\n     * Returns new target element or null if index is out of range\r\n     * \r\n     * @param idx - new target index\r\n     * @returns New target item\r\n     */\r\n    private setCurrent(idx: number): Element {\r\n        if (!isInRange(idx, 0, this.#targetsLength)) {\r\n            throw new CuiScrollSpyOutOfRangeError(\"New index is out of targets length\")\r\n        }\r\n        let ret = this.#targets[idx]\r\n        this.#args.action.add(ret)\r\n        this.#args.action.remove(this.#targets[this.#currentIdx]);\r\n        if (this.#linksLength > 0) {\r\n            if (isInRange(idx, 0, this.#linksLength)) {\r\n                this.#args.linkAction.add(this.#links[idx]);\r\n            }\r\n            if (isInRange(this.#currentIdx, 0, this.#linksLength)) {\r\n                this.#args.linkAction.remove(this.#links[this.#currentIdx]);\r\n            }\r\n        }\r\n        this.#currentIdx = idx;\r\n        return ret;\r\n    }\r\n}","import { ICuiPlugin } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { getSystemPrintMode } from \"../../core/utils/functions\";\r\nimport { CuiMediaQueryListener } from \"../../core/listeners/media\";\r\n\r\nexport interface AutoPrintPluginSetup {\r\n    autoPrint: boolean;\r\n}\r\n\r\nexport class CuiAutoPrintModePlugin implements ICuiPlugin {\r\n    description: string = 'Auto print mode';\r\n    name: string = 'auto-print';\r\n    setup: AutoPrintPluginSetup;\r\n    #listener: CuiMediaQueryListener;\r\n    #utils: CuiUtils;\r\n    constructor(autoPrintInit: AutoPrintPluginSetup) {\r\n        this.description = \"CuiAutoPrintModePlugin\";\r\n        this.setup = autoPrintInit;\r\n    }\r\n\r\n    init(utils: CuiUtils): void {\r\n        this.#utils = utils\r\n        if (this.setup.autoPrint && getSystemPrintMode()) {\r\n            this.#utils.setPrintMode(true)\r\n        }\r\n        this.#listener = new CuiMediaQueryListener('print')\r\n        this.#listener.setCallback(this.onChange.bind(this))\r\n        this.#listener.attach();\r\n    }\r\n\r\n    destroy(): void {\r\n        this.#listener.detach();\r\n    }\r\n\r\n    onChange(ev: MediaQueryListEvent) {\r\n        this.setup = this.#utils.setup.plugins[this.description] as AutoPrintPluginSetup;\r\n        let autoPrint = this.setup?.autoPrint ?? false;\r\n        if (autoPrint) {\r\n            console.log(ev.matches)\r\n            if (ev.matches) {\r\n                this.#utils.setPrintMode(true)\r\n            } else {\r\n                this.#utils.setPrintMode(false)\r\n            }\r\n        }\r\n    }\r\n\r\n}","import { is } from \"../../core/utils/functions\";\r\nimport { ICuiObserver, CuiElement } from \"../../core/models/interfaces\";\r\nimport { OBSERVABLE_INTERSECTION } from \"../../core/utils/statics\";\r\n\r\nexport interface ICuiIntersectionObserver {\r\n    observe(target: Element): void;\r\n    unobserve(target: Element): void;\r\n    disconnect(): void;\r\n}\r\n\r\nexport class CuiIntersectionEntry {\r\n    isInView: boolean;\r\n    ratio: number;\r\n}\r\n\r\nexport interface ICuiIntersectionHandler {\r\n    onIntersection(entry: CuiIntersectionEntry): Promise<boolean>;\r\n}\r\n\r\n// export interface ICuiObserverHandler {\r\n//     callback(entries: IntersectionObserverEntry[], observer: IntersectionObserver): void;\r\n// }\r\n\r\n// export class CuiObserverHandler implements ICuiObserverHandler {\r\n//     callback(entries: IntersectionObserverEntry[], observer: IntersectionObserver): void {\r\n//         entries.forEach((entry: any) => {\r\n//             Object.values(entry.target.$handlers).forEach((handler: any) => {\r\n//                 if (is(handler['onIntersection'])) {\r\n//                     handler.onIntersection({\r\n//                         isInView: entry.isIntersecting,\r\n//                         ratio: entry.intersectionRatio\r\n//                     });\r\n//                 }\r\n//             })\r\n//         })\r\n//     }\r\n// }\r\n\r\nexport class CuiIntersectionObserver implements ICuiObserver {\r\n    private observer: IntersectionObserver\r\n    // #handler: ICuiObserverHandler;\r\n    #root: Element;\r\n    #threshold: number[];\r\n    #callback: IntersectionObserverCallback;\r\n    constructor(root: Element, threshold?: number[]) {\r\n        this.#root = root;\r\n        this.#threshold = threshold ?? [0, 0.1, 0.25, 0.5, 0.75];\r\n        //this.#handler = observerHandler;\r\n    }\r\n\r\n    setCallback(callback: IntersectionObserverCallback) {\r\n        this.#callback = callback;\r\n    }\r\n\r\n    connect(): void {\r\n        this.observer = new IntersectionObserver(this.#callback, {\r\n            root: this.#root,\r\n            rootMargin: '0px',\r\n            threshold: this.#threshold\r\n        })\r\n    }\r\n\r\n    observe(target: Element): void {\r\n        this.observer.observe(target)\r\n    }\r\n\r\n    unobserve(target: Element): void {\r\n        this.observer.unobserve(target)\r\n    }\r\n\r\n    disconnect() {\r\n        this.observer.disconnect()\r\n    }\r\n\r\n}","import { ICuiComponent, ICuiComponentHandler } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandlerBase, CuiHandler } from \"../../app/handlers/base\";\r\nimport { CuiIntersectionObserver } from \"../../app/observers/intersection\";\r\nimport { CuiActionsFatory, ICuiComponentAction } from \"../../core/utils/actions\";\r\nimport { is, parseAttributeString, getRangeValueOrDefault, clone } from \"../../core/utils/functions\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\n\r\nexport class CuiIntersectionAttributes {\r\n    target: string;\r\n    action: ICuiComponentAction;\r\n    offset: number\r\n    constructor() {\r\n        this.target = \"div\";\r\n        this.action = CuiActionsFatory.get('dummy');\r\n        this.offset = 0;\r\n    }\r\n\r\n    parse(args: any) {\r\n        this.target = is(args.target) ? args.target : 'div';\r\n        this.action = is(args.action) ? CuiActionsFatory.get(args.action) : CuiActionsFatory.get('dummy');\r\n        this.offset = getRangeValueOrDefault(parseInt(args.offset), 0, 1, 0);\r\n    }\r\n}\r\n\r\nexport class CuiIntersectionComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor(prefix?: string) {\r\n        this.attribute = `${prefix ?? 'cui'}-intersection`;\r\n    }\r\n\r\n    getStyle(): string {\r\n        return null;\r\n    }\r\n\r\n    get(element: Element, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiIntersectionHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport class CuiIntersectionHandler extends CuiHandler<CuiIntersectionAttributes> implements ICuiComponentHandler {\r\n\r\n    #observer: CuiIntersectionObserver;\r\n    #targets: Element[];\r\n    constructor(element: Element, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiIntersectionHandler\", element, new CuiIntersectionAttributes(), utils);\r\n        this.#observer = new CuiIntersectionObserver(this.element);\r\n        this.#targets = []\r\n    }\r\n\r\n    onInit(): void {\r\n        this.parseArguments();\r\n        this.#observer.setCallback(this.onIntersection.bind(this))\r\n        this.#observer.connect();\r\n        this.#targets.forEach(target => {\r\n            this.#observer.observe(target);\r\n        })\r\n    }\r\n\r\n    onUpdate(): void {\r\n        this.parseArguments();\r\n    }\r\n\r\n    onDestroy(): void {\r\n        this.#observer.disconnect();\r\n    }\r\n\r\n    refresh(args: any): void {\r\n        this.parseArguments();\r\n    }\r\n\r\n    parseArguments() {\r\n        if (this.prevArgs === null || this.prevArgs.target !== this.args.target) {\r\n            this.#targets = [...document.querySelectorAll(this.args.target)];\r\n        }\r\n    }\r\n\r\n    onIntersection(entries: IntersectionObserverEntry[], observer: IntersectionObserver): void {\r\n        if (!is(this.#targets)) {\r\n            return;\r\n        }\r\n        let action = null;\r\n        entries.forEach(entry => {\r\n            action = this.getAction(entry.target);\r\n            if (entry.isIntersecting && entry.intersectionRatio > this.args.offset) {\r\n                action.add(entry.target)\r\n            } else {\r\n                action.remove(entry.target)\r\n            }\r\n            this.emitIntersection(entry)\r\n        })\r\n    }\r\n\r\n    getAction(element: Element) {\r\n        return element.hasAttribute('action') ? CuiActionsFatory.get(element.getAttribute('action')) : this.args.action;\r\n    }\r\n\r\n    emitIntersection(entry: IntersectionObserverEntry) {\r\n        this.emitEvent(EVENTS.ON_INTERSECTION, {\r\n            entry: entry,\r\n            offset: this.args.offset,\r\n            timestamp: Date.now()\r\n        })\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler, CuiElement, ICuiOpenable } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandlerBase } from \"../../app/handlers/base\";\r\nimport { getStringOrDefault, getIntOrDefault, parseAttribute, is, getActiveClass, isString, getHandlerExtendingOrNull, isStringTrue } from \"../../core/utils/functions\";\r\nimport { ICuiComponentAction, CuiActionsFatory } from \"../../core/utils/actions\";\r\nimport { CuiActionsHelper } from \"../../core/helpers/helpers\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\n\r\nexport class CuiOpenArgs {\r\n    target: string;\r\n    action: ICuiComponentAction;\r\n    timeout: number;\r\n    prevent: boolean;\r\n    constructor() {\r\n        this.target = \"\";\r\n        this.action = null;\r\n        this.timeout = 0;\r\n        this.prevent = false;\r\n    }\r\n\r\n    parse(args: any) {\r\n        if (is(args) && isString(args)) {\r\n            this.target = args;\r\n            this.action = null;\r\n            this.timeout = -1\r\n            this.prevent = false;\r\n            return;\r\n        }\r\n        this.target = getStringOrDefault(args.target, null);\r\n        this.action = CuiActionsFatory.get(args.action)\r\n        this.timeout = getIntOrDefault(args.timeout, -1);\r\n        this.prevent = args.prevent && isStringTrue(args.prevent)\r\n    }\r\n\r\n    isValid(): boolean {\r\n        return is(this.target);\r\n    }\r\n}\r\n\r\nexport class CuiOpenComponent implements ICuiComponent {\r\n    attribute: string;\r\n    #prefix: string;\r\n    constructor(prefix?: string) {\r\n        this.#prefix = prefix ?? 'cui';\r\n        this.attribute = `${this.#prefix}-open`;\r\n    }\r\n\r\n    getStyle(): string {\r\n        return null;\r\n    }\r\n\r\n    get(element: Element, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiOpenHandler(element, utils, this.attribute, this.#prefix);\r\n    }\r\n}\r\n\r\nexport class CuiOpenHandler extends CuiHandlerBase implements ICuiComponentHandler {\r\n    #args: CuiOpenArgs;\r\n    #isInitialized: boolean;\r\n    #prefix: string;\r\n    #actionsHelper: CuiActionsHelper;\r\n    #inProgress: boolean;\r\n    constructor(element: Element, utils: CuiUtils, attribute: string, prefix: string) {\r\n        super(\"CuiOpenHandler\", element, utils);\r\n        this.#actionsHelper = new CuiActionsHelper(utils.interactions);\r\n        this.#args = new CuiOpenArgs();\r\n        this.#isInitialized = false;\r\n        this.#prefix = prefix;\r\n        this.#inProgress = false;\r\n\r\n    }\r\n\r\n    handle(args: any): void {\r\n        this._log.debug(\"Init\", \"handle\")\r\n        this.#args.parse(args);\r\n        if (this.#args.isValid()) {\r\n            this.element.addEventListener('click', this.onClick.bind(this))\r\n            this.#isInitialized = true;\r\n            this._log.debug(\"Initialized\", \"handle\")\r\n        }\r\n\r\n    }\r\n\r\n    refresh(args: any): void {\r\n        this._log.debug(\"Refresh\", \"refresh\")\r\n        this.#args.parse(args);\r\n        if (this.#args.isValid() && !this.#isInitialized) {\r\n            this.element.addEventListener('click', this.onClick.bind(this))\r\n            this.#isInitialized = true;\r\n            this._log.debug(\"Initialized\", \"refresh\")\r\n        }\r\n    }\r\n\r\n    destroy(): void {\r\n        this._log.debug(\"Destroy\", \"destroy\")\r\n        if (this.#isInitialized) {\r\n            this.element.removeEventListener('click', this.onClick.bind(this))\r\n            this._log.debug(\"Destoryed\", \"destroy\")\r\n        }\r\n\r\n    }\r\n\r\n    onClick(ev: MouseEvent) {\r\n        if (this.#inProgress) {\r\n            return;\r\n        }\r\n        const target = document.querySelector(this.#args.target);\r\n        if (!is(target)) {\r\n            this._log.warning(`Target ${this.#args.target} not found`, 'onClick')\r\n            return;\r\n        }\r\n        this.#inProgress = true;\r\n        this.run(target).then((result) => {\r\n            this.activateTarget(ev, target);\r\n            this.#inProgress = false;\r\n        }).catch((e) => {\r\n            this._log.exception(e);\r\n            this.#inProgress = false;\r\n        })\r\n        if (this.#args.prevent) {\r\n            ev.preventDefault();\r\n        }\r\n\r\n    }\r\n\r\n    private canPerformAction(): boolean {\r\n        return this.#args.action && this.#args.timeout !== -1;\r\n    }\r\n\r\n    private async run(target: Element): Promise<boolean> {\r\n        let openable = getHandlerExtendingOrNull<ICuiOpenable>(target as any, 'open');\r\n        if (is(openable)) {\r\n            console.log(\"openable\");\r\n            return openable.open();\r\n        } else if (this.canPerformAction()) {\r\n            let delay = this.#args.timeout > 0 ? this.#args.timeout : this.utils.setup.animationTime;\r\n            return this.#actionsHelper.performAction(target, this.#args.action, delay);\r\n        }\r\n        return true;\r\n    }\r\n\r\n    private activateTarget(ev: MouseEvent, target: Element): void {\r\n        let activeCls = getActiveClass(this.#prefix);\r\n        if (is(target) && !target.classList.contains(activeCls)) {\r\n            target.classList.add(activeCls);\r\n        }\r\n        this.emitOpen(ev);\r\n    }\r\n\r\n    emitOpen(ev: MouseEvent) {\r\n        this.emitEvent(EVENTS.ON_OPEN, {\r\n            event: ev,\r\n            timestamp: Date.now()\r\n        })\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler, ICuiClosable } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandlerBase } from \"../../app/handlers/base\";\r\nimport { getStringOrDefault, getIntOrDefault, parseAttribute, is, getActiveClass, isString, isStringTrue, getHandlerExtendingOrNull } from \"../../core/utils/functions\";\r\nimport { ICuiComponentAction, CuiActionsFatory } from \"../../core/utils/actions\";\r\nimport { CLASSES, EVENTS } from \"../../core/utils/statics\";\r\nimport { CuiActionsHelper } from \"../../core/helpers/helpers\";\r\n\r\nexport class CuiCloseArgs {\r\n    target: string;\r\n    action: ICuiComponentAction;\r\n    timeout: number;\r\n    prevent: boolean;\r\n    constructor() {\r\n        this.target = \"\";\r\n        this.action = null;\r\n        this.timeout = 0;\r\n        this.prevent = false;\r\n    }\r\n\r\n    parse(args: any) {\r\n        if (is(args) && isString(args)) {\r\n            this.target = args\r\n            this.action = null\r\n            this.timeout = -1\r\n            this.prevent = false\r\n            return;\r\n        }\r\n        this.target = getStringOrDefault(args.target, null);\r\n        this.action = CuiActionsFatory.get(args.action)\r\n        this.timeout = getIntOrDefault(args.timeout, -1);\r\n        this.prevent = args.prevent && isStringTrue(args.prevent)\r\n    }\r\n}\r\n\r\nexport class CuiCloseComponent implements ICuiComponent {\r\n    attribute: string;\r\n    #prefix: string;\r\n    constructor(prefix?: string) {\r\n        this.#prefix = prefix ?? 'cui';\r\n        this.attribute = `${this.#prefix}-close`;\r\n    }\r\n\r\n    getStyle(): string {\r\n        return null;\r\n    }\r\n\r\n    get(element: Element, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiCloseHandler(element, utils, this.attribute, this.#prefix);\r\n    }\r\n}\r\n\r\nexport class CuiCloseHandler extends CuiHandlerBase implements ICuiComponentHandler {\r\n    #args: CuiCloseArgs;\r\n    #isInitialized: boolean;\r\n    #prefix: string;\r\n    #inProgress: boolean;\r\n    #actionHelper: CuiActionsHelper;\r\n    constructor(element: Element, utils: CuiUtils, attribute: string, prefix: string) {\r\n        super(\"CuiCloseHandler\", element, utils);\r\n        this.#actionHelper = new CuiActionsHelper(utils.interactions);\r\n        this.#args = new CuiCloseArgs();\r\n        this.#isInitialized = false;\r\n        this.#prefix = prefix;\r\n    }\r\n\r\n    handle(args: any): void {\r\n        this._log.debug(\"Init\", \"handle\")\r\n        this.#args.parse(args);\r\n        this.element.addEventListener('click', this.onClick.bind(this))\r\n        this.#isInitialized = true;\r\n        this._log.debug(\"Initialized\", \"handle\")\r\n    }\r\n\r\n    refresh(args: any): void {\r\n        this._log.debug(\"Refresh\", \"refresh\")\r\n        this.#args.parse(args);\r\n        if (!this.#isInitialized) {\r\n            this.element.addEventListener('click', this.onClick.bind(this))\r\n            this.#isInitialized = true;\r\n            this._log.debug(\"Initialized\", \"refresh\")\r\n        }\r\n    }\r\n\r\n    destroy(): void {\r\n        this._log.debug(\"Destroy\", \"destroy\")\r\n        if (this.#isInitialized) {\r\n            this.element.removeEventListener('click', this.onClick.bind(this))\r\n            this._log.debug(\"Destoryed\", \"destroy\")\r\n        }\r\n    }\r\n\r\n    onClick(ev: MouseEvent) {\r\n        if (this.#inProgress) {\r\n            return;\r\n        }\r\n        const target = this.getTarget();\r\n        if (!is(target)) {\r\n            this._log.warning(`Target ${this.#args.target} not found`, 'onClick')\r\n            return;\r\n        }\r\n        this.#inProgress = true;\r\n        this.run(target).then((result) => {\r\n            this.onActionFinish(ev, target);\r\n        }).catch((e) => {\r\n            this._log.exception(e);\r\n        }).finally(() => {\r\n            this.#inProgress = false;\r\n        })\r\n        if (this.#args.prevent)\r\n            ev.preventDefault();\r\n    }\r\n\r\n    private async run(target: Element): Promise<boolean> {\r\n        let closable = getHandlerExtendingOrNull<ICuiClosable>(target as any, 'close');\r\n        if (closable) {\r\n            return closable.close();\r\n        } else if (this.#args.action) {\r\n            let timeout = this.#args.timeout > 0 ? this.#args.timeout : this.utils.setup.animationTime;\r\n            return this.#actionHelper.performAction(target, this.#args.action, timeout);\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    private onActionFinish(ev: MouseEvent, target: Element) {\r\n        let activeCls = getActiveClass(this.#prefix);\r\n        if (is(target) && target.classList.contains(activeCls)) {\r\n            target.classList.remove(activeCls);\r\n        }\r\n        this.emitClose(ev);\r\n    }\r\n\r\n    private getTarget(): Element {\r\n        return is(this.#args.target) ? document.querySelector(this.#args.target) : this.element.parentElement;\r\n    }\r\n\r\n    private emitClose(ev: MouseEvent) {\r\n        this.emitEvent(EVENTS.ON_CLOSE, {\r\n            timestamp: Date.now(),\r\n            event: ev\r\n        })\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandlerBase } from \"../../app/handlers/base\";\r\nimport { ICuiComponentAction, CuiActionsFatory } from \"../../core/utils/actions\";\r\nimport { is, isString, getStringOrDefault, getName, parseAttribute } from \"../../core/utils/functions\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\n\r\nexport class CuiToggleArgs {\r\n    target: string;\r\n    action: ICuiComponentAction;\r\n    constructor() {\r\n        this.action = null;\r\n        this.target = null;\r\n    }\r\n\r\n    parse(args: any) {\r\n        if (is(args) && isString(args)) {\r\n            this.action = CuiActionsFatory.get(args)\r\n        } else {\r\n            this.target = getStringOrDefault(args.target, null);\r\n            this.action = CuiActionsFatory.get(args.action)\r\n        }\r\n    }\r\n}\r\nexport class CuiToggleComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor(prefix?: string) {\r\n        this.attribute = `${prefix ?? \"cui\"}-toggle`;\r\n    }\r\n\r\n    getStyle(): string {\r\n        return null;\r\n    }\r\n\r\n    get(element: Element, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiToggleHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport class CuiToggleHandler extends CuiHandlerBase implements ICuiComponentHandler {\r\n    #attribute: string;\r\n    #args: CuiToggleArgs;\r\n    #target: Element;\r\n    #utils: CuiUtils;\r\n    constructor(element: Element, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiToggleHandler\", element, utils);\r\n        this.#attribute = attribute\r\n        this.#args = new CuiToggleArgs();\r\n        this.#target = this.element;\r\n        this.#utils = utils;\r\n    }\r\n\r\n    handle(args: any): void {\r\n        this.#args.parse(args);\r\n        this.#target = this.getTarget();\r\n        this.element.addEventListener('click', this.onClick.bind(this));\r\n    }\r\n\r\n    refresh(args: any): void {\r\n        this.#args.parse(args);\r\n        this.#target = this.getTarget();\r\n    }\r\n\r\n    destroy(): void {\r\n        this.element.removeEventListener('click', this.onClick.bind(this));\r\n    }\r\n\r\n    onClick(ev: MouseEvent) {\r\n        this.#args.action.toggle(this.#target, this.#utils)\r\n        this.emitEvent(EVENTS.ON_TOGGLE, {\r\n            action: this.#args.action,\r\n            target: this.#target,\r\n            timestamp: Date.now()\r\n        })\r\n        ev.preventDefault();\r\n    }\r\n\r\n    getTarget(): Element {\r\n        return is(this.#args.target) ? document.querySelector(this.#args.target) : this.element;\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler, CuiContext, ICuiEventBus } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandlerBase } from \"../../app/handlers/base\";\r\nimport { ICuiResizable, CuiResizeData } from \"../../app/observers/resize\";\r\nimport { generateCUID } from \"../../core/utils/functions\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\n\r\nexport class CuiResizeComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor() {\r\n        this.attribute = 'cui-resize';\r\n    }\r\n\r\n    getStyle(): string {\r\n        return null;\r\n    }\r\n\r\n    get(element: Element, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiResizeHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport class CuiResizeHandler extends CuiHandlerBase implements ICuiComponentHandler, CuiContext {\r\n\r\n    #attribute: string;\r\n    #bus: ICuiEventBus;\r\n    constructor(element: Element, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiResizeHandler\", element, utils);\r\n        this.#attribute = attribute\r\n        this.#bus = utils.bus;\r\n    }\r\n\r\n\r\n    handle(args: any): void {\r\n        //   this._log.debug(this.#element.getAttribute(this.#attribute));\r\n        this.#bus.on(EVENTS.ON_RESIZE, this.resize, this);\r\n    }\r\n\r\n    refresh(args: any): void {\r\n        // console.log(this.#element.getAttribute(this.#attribute));\r\n    }\r\n\r\n    destroy(): void {\r\n        this.#bus.detach(EVENTS.ON_RESIZE, this);\r\n    }\r\n\r\n    resize(data: CuiResizeData) {\r\n        console.log(data);\r\n    }\r\n\r\n    getId(): string {\r\n        return generateCUID(this.#attribute);\r\n    }\r\n}","import { ICuiEventBus } from \"../../core/models/interfaces\";\r\nimport { CuiKeyPressListener } from \"../../core/listeners/keys\";\r\nimport { EVENTS } from \"../../core/utils/statics\";\r\nexport interface KeyDownEvent {\r\n    timestamp: number;\r\n    event: KeyboardEvent;\r\n}\r\nexport interface ICuiKeysObserver {\r\n    connect(): void;\r\n    disconnect(): void;\r\n}\r\nexport class CuiKeysObserver {\r\n    #listener: CuiKeyPressListener;\r\n    #bus: ICuiEventBus\r\n    constructor(bus: ICuiEventBus) {\r\n        this.#bus = bus;\r\n        this.#listener = new CuiKeyPressListener(true);\r\n        this.#listener.setCallback(this.onKeyDown.bind(this))\r\n    }\r\n    connect(): void {\r\n        this.#listener.attach();\r\n    }\r\n    disconnect(): void {\r\n        this.#listener.detach();\r\n    }\r\n\r\n    onKeyDown(ev: KeyboardEvent) {\r\n        this.#bus.emit(EVENTS.ON_KEYDOWN, null, {\r\n            timestamp: Date.now(),\r\n            event: ev\r\n        })\r\n    }\r\n\r\n}","import { ICuiPlugin } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { ICuiKeysObserver, CuiKeysObserver } from \"./observer\";\r\n\r\n\r\nexport interface CuiKeysObserverPluginSetup {\r\n    autoPrint: boolean;\r\n}\r\n\r\nexport class CuiKeysObserverPlugin implements ICuiPlugin {\r\n    description: string;\r\n    name: string = 'keys-observer';\r\n    setup: CuiKeysObserverPluginSetup;\r\n    #keysObserver: ICuiKeysObserver;\r\n    constructor(keySetup: CuiKeysObserverPluginSetup) {\r\n        this.description = \"CuiKeysObserverPlugin\";\r\n        this.setup = keySetup;\r\n    }\r\n\r\n    init(utils: CuiUtils): void {\r\n        this.#keysObserver = new CuiKeysObserver(utils.bus);\r\n        this.#keysObserver.connect();\r\n    }\r\n\r\n    destroy(): void {\r\n        this.#keysObserver.disconnect();\r\n    }\r\n}","export class AriaAttributes {\r\n    public static setLabel(element: Element, label: string): void {\r\n        if (!element.hasAttribute('aria-label')) {\r\n            element.setAttribute('aria-label', label);\r\n        }\r\n    }\r\n\r\n    public static setAria(element: Element, attr: string, value: string) {\r\n        if (!element.hasAttribute(attr)) {\r\n            element.setAttribute(attr, value);\r\n        }\r\n    }\r\n\r\n    public static removeAria(element: Element, attr: string) {\r\n        if (element.hasAttribute(attr)) {\r\n            element.removeAttribute(attr);\r\n        }\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler, ICuiOpenable, ICuiClosable } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { getStringOrDefault, getIntOrDefault, parseAttribute, is, getActiveClass, isString, getName, replacePrefix, isStringTrue } from \"../../core/utils/functions\";\r\nimport { ICuiComponentAction, CuiActionsFatory, CuiClassAction } from \"../../core/utils/actions\";\r\nimport { CLASSES, EVENTS } from \"../../core/utils/statics\";\r\nimport { CuiActionsHelper } from \"../../core/helpers/helpers\";\r\nimport { KeyDownEvent } from \"../../plugins/keys/observer\";\r\nimport { AriaAttributes } from \"../../core/utils/aria\";\r\nimport { CuiHandler } from \"../../app/handlers/base\";\r\n\r\nconst DIALOG_OPEN_ANIMATION_CLASS = '{prefix}-dialog-default-in';\r\nconst DIALOG_CLOSE_ANIMATION_CLASS = '{prefix}-dialog-default-out';\r\nconst bodyClass = '{prefix}-dialog-open';\r\nconst CONTAINER = '.{prefix}-dialog-container';\r\n\r\nexport interface CuiDialogEvent {\r\n    timestamp: number;\r\n}\r\n\r\nexport class CuiDialogArgs {\r\n    escClose: boolean;\r\n    outClose: boolean;\r\n    constructor() {\r\n        this.escClose = false;\r\n        this.outClose = false;\r\n    }\r\n\r\n    parse(args: any) {\r\n        this.escClose = isStringTrue(args.escClose);\r\n        this.outClose = isStringTrue(args.outClose)\r\n    }\r\n}\r\n\r\nexport class CuiDialogComponent implements ICuiComponent {\r\n    attribute: string;\r\n    #prefix: string;\r\n    constructor(prefix?: string) {\r\n        this.#prefix = prefix ?? 'cui';\r\n        this.attribute = `${this.#prefix}-dialog`;\r\n    }\r\n\r\n    getStyle(): string {\r\n        return null;\r\n    }\r\n\r\n    get(element: Element, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiDialogHandler(element, utils, this.attribute, this.#prefix);\r\n    }\r\n}\r\n\r\nexport class CuiDialogHandler extends CuiHandler<CuiDialogArgs> implements ICuiComponentHandler, ICuiOpenable, ICuiClosable {\r\n\r\n    #prefix: string;\r\n    #timeout: number;\r\n    #bodyClass: string;\r\n    constructor(element: Element, utils: CuiUtils, attribute: string, prefix: string) {\r\n        super(\"CuiDialogHandler\", element, new CuiDialogArgs(), utils);\r\n\r\n        this.#prefix = prefix;\r\n        this.#timeout = utils.setup.animationTimeLong;\r\n        this.#bodyClass = replacePrefix(bodyClass, prefix);\r\n    }\r\n\r\n    onInit(): void {\r\n        AriaAttributes.setAria(this.element, 'aria-modal', \"\");\r\n        this._log.debug(\"Initialized\", \"handle\")\r\n    }\r\n    onUpdate(): void {\r\n\r\n    }\r\n\r\n    onDestroy(): void {\r\n\r\n    }\r\n\r\n    async open(): Promise<boolean> {\r\n        if (this.checkLockAndWarn('open')) {\r\n            return false;\r\n        }\r\n        if (this.isAnyActive() || this.isActive()) {\r\n            this._log.warning(\"Dialog is already opened\");\r\n            return false;\r\n        }\r\n        this.isLocked = true;\r\n        this._log.debug(`Dialog ${this.cuid}`, 'open')\r\n        let action = this.getAction(DIALOG_OPEN_ANIMATION_CLASS);\r\n        return this.performAction(action, this.#timeout, this.mutate.bind(this, this.onOpen));\r\n    }\r\n\r\n    async close(): Promise<boolean> {\r\n        if (this.checkLockAndWarn(\"close\") || !this.isActive()) {\r\n            return false;\r\n        }\r\n        this.isLocked = true;\r\n        this._log.debug(`Dialog ${this.cuid}`, 'close')\r\n        let action = this.getAction(DIALOG_CLOSE_ANIMATION_CLASS);\r\n        return this.performAction(action, this.#timeout, this.mutate.bind(this, this.onClose));\r\n    }\r\n\r\n    onClose() {\r\n        this.element.classList.remove(this.activeClassName);\r\n        document.body.classList.remove(this.#bodyClass);\r\n        AriaAttributes.setAria(this.element, 'aria-expanded', 'false')\r\n        this.detachEvent(EVENTS.ON_KEYDOWN);\r\n        this.detachEvent(EVENTS.ON_WINDOW_CLICK);\r\n        this.emitEvent(EVENTS.ON_CLOSE, {\r\n            timestamp: Date.now()\r\n        })\r\n        this.isLocked = false;\r\n    }\r\n\r\n    onOpen() {\r\n        this.element.classList.add(this.activeClassName);\r\n        document.body.classList.add(this.#bodyClass);\r\n        AriaAttributes.setAria(this.element, 'aria-expanded', 'true')\r\n        if (this.args.escClose) {\r\n            this.onEvent(EVENTS.ON_KEYDOWN, this.onEscClose.bind(this))\r\n        }\r\n        if (this.args.outClose) {\r\n            this.onEvent(EVENTS.ON_WINDOW_CLICK, this.onWindowClick.bind(this));\r\n        }\r\n        this.emitEvent(EVENTS.ON_OPEN, {\r\n            timestamp: Date.now()\r\n        })\r\n        this.isLocked = false;\r\n    }\r\n\r\n    onEscClose(ev: KeyDownEvent) {\r\n        if (ev.event.key === \"Escape\") {\r\n            this.close();\r\n        }\r\n    }\r\n\r\n    onWindowClick(ev: MouseEvent) {\r\n        this._log.debug(\"Dialog windows\")\r\n        let container = this.element.querySelector(replacePrefix(CONTAINER, this.#prefix));\r\n        console.log(container);\r\n        if (!container.contains((ev.target as Node))) {\r\n            this.close();\r\n        }\r\n    }\r\n\r\n    isAnyActive(): boolean {\r\n        return document.body.classList.contains(this.#bodyClass);\r\n    }\r\n\r\n    getAction(className: string): ICuiComponentAction {\r\n        return new CuiClassAction(replacePrefix(className, this.#prefix));\r\n    }\r\n}","import { isStringTrue, replacePrefix, EVENTS, ICuiComponentAction, CuiClassAction, is, getStringOrDefault, getIntOrDefault, CuiActionsFatory, getName } from \"../../core/index\";\r\nimport { ICuiComponent, CuiUtils, ICuiComponentHandler, ICuiOpenable, ICuiClosable } from \"../../index\";\r\nimport { CuiHandler } from \"../../app/handlers/base\";\r\nimport { KeyDownEvent } from \"../../plugins/keys/observer\";\r\nimport { AriaAttributes } from \"../../core/utils/aria\";\r\n\r\nconst OFFCANVAS_RIGHT_ANIM_DEFAULT_IN = \".{prefix}-offcanvas-default-right-in\";\r\nconst OFFCANVAS_RIGHT_ANIM_DEFAULT_OUT = \".{prefix}-offcanvas-default-right-out\";\r\nconst OFFCANVAS_LEFT_ANIM_DEFAULT_IN = \".{prefix}-offcanvas-default-left-in\";\r\nconst OFFCANVAS_LEFT_ANIM_DEFAULT_OUT = \".{prefix}-offcanvas-default-left-out\";\r\n\r\nconst OFFCANVAS_BODY = \"{prefix}-off-canvas-open\";\r\nconst OFFCANVAS_CONTAINER_CLS = '.{prefix}-off-canvas-container';\r\n\r\nexport class CuiOffCanvasArgs {\r\n    escClose: boolean;\r\n    outClose: boolean;\r\n    open: string;\r\n    close: string;\r\n    position: 'left' | 'right';\r\n    timeout: number;\r\n    #prefix: string;\r\n    #defTimeout: number;\r\n    constructor(prefix: string, timeout: number) {\r\n        this.#prefix = prefix;\r\n        this.escClose = false;\r\n        this.position = 'right';\r\n        this.open = this.getDefaultOpenClass();\r\n        this.close = this.getDefaultCloseClass();\r\n        this.#defTimeout = timeout;\r\n        this.timeout = timeout;\r\n    }\r\n\r\n    parse(args: any) {\r\n        if (is(args)) {\r\n            this.escClose = isStringTrue(args.escClose);\r\n            this.outClose = isStringTrue(args.outClose);\r\n            this.position = getStringOrDefault(args.position, 'right');\r\n            this.open = getStringOrDefault(args.openCls, this.getDefaultOpenClass())\r\n            this.close = getStringOrDefault(args.closeCls, this.getDefaultCloseClass());\r\n            this.timeout = getIntOrDefault(args.timeout, this.#defTimeout);\r\n        }\r\n    }\r\n\r\n    getDefaultOpenClass(): string {\r\n        return replacePrefix(this.position === 'right' ? OFFCANVAS_RIGHT_ANIM_DEFAULT_IN : OFFCANVAS_LEFT_ANIM_DEFAULT_IN, this.#prefix);\r\n    }\r\n\r\n    getDefaultCloseClass(): string {\r\n        return replacePrefix(this.position === 'right' ? OFFCANVAS_RIGHT_ANIM_DEFAULT_OUT : OFFCANVAS_LEFT_ANIM_DEFAULT_OUT, this.#prefix);\r\n    }\r\n}\r\n\r\nexport class CuiOffCanvasComponent implements ICuiComponent {\r\n    attribute: string;\r\n    #prefix: string;\r\n    constructor(prefix?: string) {\r\n        this.#prefix = prefix ?? 'cui';\r\n        this.attribute = `${this.#prefix}-off-canvas`;\r\n    }\r\n\r\n    getStyle(): string {\r\n        return null;\r\n    }\r\n\r\n    get(element: Element, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiOffCanvasHandler(element, utils, this.attribute, this.#prefix);\r\n    }\r\n}\r\n\r\nexport class CuiOffCanvasHandler extends CuiHandler<CuiOffCanvasArgs> implements ICuiOpenable, ICuiClosable {\r\n\r\n    #prefix: string;\r\n    #bodyClass: string;\r\n    constructor(element: Element, utils: CuiUtils, attribute: string, prefix: string) {\r\n        super(\"CuiOffCanvasHandler\", element, new CuiOffCanvasArgs(prefix, utils.setup.animationTimeLong), utils);\r\n        this.#prefix = prefix;\r\n        this.#bodyClass = replacePrefix(OFFCANVAS_BODY, prefix);\r\n    }\r\n\r\n    onInit(): void {\r\n        this.mutate(() => {\r\n            this.setPositionLeft();\r\n            AriaAttributes.setAria(this.element, 'aria-modal', \"\");\r\n        })\r\n        this._log.debug(\"Initialized\", \"onInit\")\r\n    }\r\n    onUpdate(): void {\r\n        this.setPositionLeft();\r\n    }\r\n    onDestroy(): void {\r\n        //throw new Error(\"Method not implemented.\");\r\n    }\r\n\r\n    async open(): Promise<boolean> {\r\n        if (this.checkLockAndWarn('open')) {\r\n            return false;\r\n        }\r\n        if (this.isAnyActive() || this.isActive()) {\r\n            this._log.warning(\"Offcanvas is already opened\");\r\n            return false;\r\n        }\r\n        this.isLocked = true;\r\n        this._log.debug(`Offcanvas ${this.cuid}`, 'open')\r\n        let action = CuiActionsFatory.get(this.args.open);\r\n        return this.performAction(action, this.args.timeout, this.mutate.bind(this, this.onOpen));\r\n    }\r\n\r\n    async close(): Promise<boolean> {\r\n        if (this.checkLockAndWarn(\"close\") || !this.isActive()) {\r\n            return false;\r\n        }\r\n        this.isLocked = true;\r\n        this._log.debug(`Offcanvas ${this.cuid}`, 'close')\r\n        let action = CuiActionsFatory.get(this.args.close);\r\n        return this.performAction(action, this.args.timeout, this.mutate.bind(this, this.onClose));\r\n    }\r\n\r\n    onClose() {\r\n        this.element.classList.remove(this.activeClassName);\r\n        document.body.classList.remove(this.#bodyClass);\r\n        AriaAttributes.setAria(this.element, 'aria-expanded', 'false')\r\n        this.detachEvent(EVENTS.ON_KEYDOWN);\r\n        this.detachEvent(EVENTS.ON_WINDOW_CLICK);\r\n        this.emitEvent(EVENTS.ON_CLOSE, {\r\n            timestamp: Date.now()\r\n        })\r\n        this.isLocked = false;\r\n    }\r\n\r\n    onOpen() {\r\n        this.element.classList.add(this.activeClassName);\r\n        document.body.classList.add(this.#bodyClass);\r\n        AriaAttributes.setAria(this.element, 'aria-expanded', 'true')\r\n        if (this.args.escClose) {\r\n            this.onEvent(EVENTS.ON_KEYDOWN, this.onEscClose.bind(this))\r\n        }\r\n        if (this.args.outClose) {\r\n            this.onEvent(EVENTS.ON_WINDOW_CLICK, this.onWindowClick.bind(this));\r\n        }\r\n        this.emitEvent(EVENTS.ON_OPEN, {\r\n            timestamp: Date.now()\r\n        })\r\n        this.isLocked = false;\r\n    }\r\n\r\n    onEscClose(ev: KeyDownEvent) {\r\n        if (ev.event.key === \"Escape\") {\r\n            this.close();\r\n        }\r\n    }\r\n\r\n    onWindowClick(ev: MouseEvent) {\r\n        const container = this.element.querySelector(replacePrefix(OFFCANVAS_CONTAINER_CLS, this.#prefix));\r\n        if (!container.contains((ev.target as Node))) {\r\n            this.close();\r\n        }\r\n    }\r\n\r\n    isAnyActive(): boolean {\r\n        return document.body.classList.contains(this.#bodyClass);\r\n    }\r\n\r\n    setPositionLeft() {\r\n        let cls = getName(this.#prefix, 'left');\r\n        if (this.args.position === 'left' && !this.element.classList.contains(cls)) {\r\n            this.element.classList.add(cls);\r\n        } else if (this.args.position == 'right' && this.element.classList.contains(cls)) {\r\n            this.element.classList.remove(cls);\r\n        }\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler, ICuiSwitchable } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandlerBase, CuiHandler } from \"../../app/handlers/base\";\r\nimport { getIntOrDefault, is, getActiveClass, isStringTrue, replacePrefix, getStringOrDefault } from \"../../core/utils/functions\";\r\nimport { SCOPE_SELECTOR } from \"../../core/index\";\r\n\r\nexport interface CuiAccordionEvent {\r\n    index: number;\r\n    previous: number;\r\n    currentTarget: Element;\r\n    previousTarget: Element;\r\n    timestamp: number;\r\n}\r\n\r\ninterface CuiAccordionTarget {\r\n    element: Element,\r\n    listener?: any\r\n}\r\n\r\nconst ACCORDION_TITLE_CLS = '> * > .{prefix}-accordion-title';\r\nconst ACCORDION_CONTENT_CLS = '> * > .{prefix}-accordion-content';\r\nconst ACCORDION_ITEMS_CLS = '> *';\r\n\r\nconst ACCORDION_EVENT = \"switch\"\r\n\r\nexport class CuiAccordionArgs {\r\n    single: boolean;\r\n    selector: string;\r\n    items: string;\r\n    timeout: number;\r\n    animation: boolean;\r\n    content: string\r\n\r\n    #defTitleSelector: string;\r\n    #defItemsSelector: string;\r\n    #defTimeout: number;\r\n    constructor(prefix: string, timeout: number) {\r\n        this.#defTitleSelector = replacePrefix(ACCORDION_TITLE_CLS, prefix);\r\n        this.#defItemsSelector = replacePrefix(ACCORDION_ITEMS_CLS, prefix);\r\n        this.#defTimeout = timeout;\r\n        this.single = false;\r\n        this.selector = this.#defTitleSelector;\r\n        this.items = this.#defItemsSelector;\r\n        this.timeout = this.#defTimeout;\r\n    }\r\n\r\n    parse(args: any) {\r\n        if (is(args)) {\r\n            this.single = isStringTrue(args.single);\r\n            this.selector = SCOPE_SELECTOR + getStringOrDefault(args.selector, this.#defTitleSelector);\r\n            this.items = SCOPE_SELECTOR + getStringOrDefault(args.content, this.#defItemsSelector);\r\n            this.timeout = getIntOrDefault(args.timeout, this.#defTimeout);\r\n            this.animation = isStringTrue(args.animation);\r\n            return;\r\n        }\r\n\r\n    }\r\n\r\n    isValid(): boolean {\r\n        return true;\r\n    }\r\n}\r\n\r\nexport class CuiAccordionComponent implements ICuiComponent {\r\n    attribute: string;\r\n    #prefix: string;\r\n    constructor(prefix?: string) {\r\n        this.#prefix = prefix ?? 'cui';\r\n        this.attribute = `${this.#prefix}-accordion`;\r\n    }\r\n\r\n    getStyle(): string {\r\n        return null;\r\n    }\r\n\r\n    get(element: Element, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiAccordionHandler(element, utils, this.attribute, this.#prefix);\r\n    }\r\n}\r\n\r\nexport class CuiAccordionHandler extends CuiHandler<CuiAccordionArgs> implements ICuiSwitchable {\r\n\r\n    #isInitialized: boolean;\r\n    #items: Element[];\r\n    #activeCls: string;\r\n    #targets: CuiAccordionTarget[];\r\n\r\n    constructor(element: Element, utils: CuiUtils, attribute: string, prefix: string) {\r\n        super(\"CuiAccordionHandler\", element, new CuiAccordionArgs(prefix, utils.setup.animationTime), utils);\r\n\r\n        this.#isInitialized = false;\r\n        this.#activeCls = getActiveClass(prefix);\r\n    }\r\n\r\n    onInit(): void {\r\n        if (this.args.isValid()) {\r\n            try {\r\n                this.#items = this.queryItems();\r\n                const t = this.element.querySelectorAll(this.args.selector);\r\n                this.#targets = [];\r\n                t.forEach((item: Element, index: number) => {\r\n                    let target: CuiAccordionTarget = { element: item };\r\n                    this.setListener(target, index)\r\n                    this.#targets.push(target);\r\n                })\r\n            } catch (e) {\r\n                this._log.exception(e, 'handle')\r\n            }\r\n            this.#isInitialized = true;\r\n            this._log.debug(\"Initialized\", \"handle\")\r\n        }\r\n    }\r\n    onUpdate(): void {\r\n        if (this.args.isValid() && !this.#isInitialized) {\r\n            this.#isInitialized = true;\r\n            this._log.debug(\"Initialized\", \"refresh\")\r\n        }\r\n        try {\r\n            this.#items = this.queryItems();\r\n            this.#targets.forEach(x => this.removeListener(x))\r\n            const t = this.element.querySelectorAll(this.args.selector);\r\n            this.#targets = [];\r\n            t.forEach((item: Element, index: number) => {\r\n                let target: CuiAccordionTarget = { element: item };\r\n                this.setListener(target, index)\r\n                this.#targets.push(target);\r\n            })\r\n        } catch (e) {\r\n            this._log.exception(e, 'handle')\r\n        }\r\n    }\r\n\r\n    onDestroy(): void {\r\n        //\r\n    }\r\n\r\n\r\n    async switch(index: number): Promise<boolean> {\r\n        this._log.debug(\"Switch to: \" + index);\r\n        if (index < 0 || this.isLocked || !this.#isInitialized) {\r\n            return false;\r\n        }\r\n\r\n        this.#items = this.queryItems();\r\n        if (this.#items.length <= index) {\r\n            return false;\r\n        }\r\n        this.isLocked = true;\r\n        const current = this.#items[index]\r\n        if (current.classList.contains(this.#activeCls))\r\n            this.mutate(() => {\r\n                current.classList.remove(this.#activeCls)\r\n            })\r\n\r\n        else {\r\n            if (this.args.single) {\r\n                this.closeAllExcept(index)\r\n            }\r\n            this.mutate(() => { current.classList.add(this.#activeCls) })\r\n        }\r\n        this.emitEvent(ACCORDION_EVENT, {\r\n            index: index,\r\n            currentTarget: current,\r\n            timestamp: Date.now()\r\n        })\r\n        this.isLocked = false;\r\n        return true;\r\n    }\r\n\r\n    closeAllExcept(current: number) {\r\n        this.mutate(() => {\r\n            this.#items.forEach((item: Element, index: number) => {\r\n                if (current !== index && item.classList.contains(this.#activeCls)) {\r\n                    item.classList.remove(this.#activeCls)\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    setListener(target: CuiAccordionTarget, index: number) {\r\n        target.listener = () => {\r\n            this.switch(index);\r\n        }\r\n        target.element.addEventListener('click', target.listener)\r\n    }\r\n\r\n    removeListener(target: CuiAccordionTarget) {\r\n        if (target.listener) {\r\n            target.element.removeEventListener('click', target.listener);\r\n        }\r\n    }\r\n\r\n    queryItems(): Element[] {\r\n        return this.#items = [...this.element.querySelectorAll(this.args.items)]\r\n    }\r\n}","import { ICuiEventListener } from \"../models/interfaces\";\r\nimport { are } from \"../utils/functions\";\r\n\r\nexport interface CuiHoverEvent {\r\n    isHovering: boolean;\r\n    event: MouseEvent;\r\n    timestamp: number;\r\n}\r\nexport class CuiHoverListener implements ICuiEventListener<CuiHoverEvent> {\r\n    #target: Element;\r\n    #callback: (t: CuiHoverEvent) => void = null;\r\n    #inProgress: boolean;\r\n    #isHovering: boolean;\r\n    #isAttached: boolean;\r\n    constructor(target: Element) {\r\n        this.#target = target;\r\n        this.#inProgress = false;\r\n        this.#isHovering = false;\r\n    }\r\n\r\n    setCallback(callback: (t: CuiHoverEvent) => void): void {\r\n        this.#callback = callback;\r\n    }\r\n\r\n    isInProgress(): boolean {\r\n        return this.#inProgress;\r\n    }\r\n    attach(): void {\r\n        this.#target.addEventListener(\"mouseover\", this.onMouseOver.bind(this));\r\n        this.#target.addEventListener(\"mousemove\", this.onMouseMove.bind(this));\r\n        this.#target.addEventListener(\"mouseout\", this.onMouseOut.bind(this));\r\n        this.#isAttached = true;\r\n    }\r\n\r\n    detach(): void {\r\n        this.#target.removeEventListener(\"mouseover\", this.onMouseOver.bind(this));\r\n        this.#target.removeEventListener(\"mousemove\", this.onMouseMove.bind(this));\r\n        this.#target.removeEventListener(\"mouseout\", this.onMouseOut.bind(this));\r\n        this.#isAttached = false;\r\n    }\r\n\r\n    emit(mouseEvent: MouseEvent, force: boolean) {\r\n        if (!are(this.#callback)) {\r\n            return;\r\n        }\r\n        if (!force && this.#inProgress) {\r\n            return;\r\n        }\r\n        this.#inProgress = true;\r\n        window.requestAnimationFrame(this.invoke.bind(this, {\r\n            isHovering: this.#isHovering,\r\n            event: mouseEvent,\r\n            timestamp: Date.now()\r\n        }))\r\n    }\r\n\r\n    isAttached() {\r\n        return this.#isAttached;\r\n    }\r\n    invoke(ev: CuiHoverEvent) {\r\n        this.#callback(ev);\r\n        this.#inProgress = false;\r\n    }\r\n\r\n    onMouseOver(ev: MouseEvent) {\r\n        this.#isHovering = true;\r\n        this.emit(ev, true);\r\n    }\r\n\r\n    onMouseOut(ev: MouseEvent) {\r\n        this.#isHovering = false;\r\n        this.emit(ev, true);\r\n    }\r\n\r\n    onMouseMove(ev: MouseEvent) {\r\n        this.emit(ev, false);\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler, ICuiOpenable, ICuiClosable, CuiElement } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandler } from \"../../app/handlers/base\";\r\nimport { getIntOrDefault, parseAttribute, is, getActiveClass, isString, getName, replacePrefix, isStringTrue, getStringOrDefault, boolStringOrDefault } from \"../../core/utils/functions\";\r\nimport { ICuiComponentAction, CuiClassAction } from \"../../core/utils/actions\";\r\nimport { CLASSES, EVENTS } from \"../../core/utils/statics\";\r\nimport { KeyDownEvent } from \"../../plugins/keys/observer\";\r\nimport { AriaAttributes } from \"../../core/utils/aria\";\r\nimport { CuiHoverListener, CuiHoverEvent } from \"../../core/listeners/hover\";\r\n\r\nconst bodyClass = '{prefix}-drop-open';\r\n\r\nconst DROP_DEFAULT_TRIGGER = \"a, button\";\r\n\r\n\r\nexport interface CuiDropEvent {\r\n    timestamp: number;\r\n}\r\n\r\nexport class CuiDropArgs {\r\n    escClose: boolean;\r\n    mode: \"click\" | \"hover\";\r\n    match: string;\r\n    trigger: string;\r\n    prevent: boolean;\r\n    autoClose: boolean;\r\n    outClose: boolean;\r\n    constructor() {\r\n        this.escClose = false;\r\n        this.mode = \"click\";\r\n        this.match = null;\r\n        this.trigger = DROP_DEFAULT_TRIGGER;\r\n        this.autoClose = false;\r\n        this.outClose = false;\r\n    }\r\n\r\n    parse(args: any) {\r\n        this.escClose = args.escClose && isStringTrue(args.escClose);\r\n        this.mode = getStringOrDefault(args.mode, 'click').toLowerCase();\r\n        this.match = args.match;\r\n        this.trigger = getStringOrDefault(args.trigger, DROP_DEFAULT_TRIGGER);\r\n        this.prevent = isStringTrue(args.prevent);\r\n        this.autoClose = isStringTrue(args.autoClose);\r\n        this.outClose = isStringTrue(args.closeOut);\r\n    }\r\n}\r\n\r\nexport class CuiDropComponenet implements ICuiComponent {\r\n    attribute: string;\r\n    #prefix: string;\r\n    constructor(prefix?: string) {\r\n        this.#prefix = prefix ?? 'cui';\r\n        this.attribute = `${this.#prefix}-drop`;\r\n    }\r\n\r\n    getStyle(): string {\r\n        return null;\r\n    }\r\n\r\n    get(element: Element, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiDropHandler(element, utils, this.attribute, this.#prefix);\r\n    }\r\n}\r\n\r\nexport class CuiDropHandler extends CuiHandler<CuiDropArgs> implements ICuiComponentHandler, ICuiOpenable, ICuiClosable {\r\n\r\n\r\n    #isInitialized: boolean;\r\n    #prefix: string;\r\n    #bodyClass: string;\r\n    #attribute: string;\r\n    #triggerHoverListener: CuiHoverListener;\r\n    #hoverListener: CuiHoverListener;\r\n    #trigger: Element;\r\n    #clearId: any;\r\n\r\n    constructor(element: Element, utils: CuiUtils, attribute: string, prefix: string) {\r\n        super(\"CuidropHandler\", element, new CuiDropArgs(), utils);\r\n        this.#attribute = attribute;\r\n        this.#isInitialized = false;\r\n        this.#prefix = prefix;\r\n        this.#clearId = null;\r\n        this.#bodyClass = replacePrefix(bodyClass, prefix);\r\n        this.#hoverListener = new CuiHoverListener(this.element);\r\n        this.#hoverListener.setCallback(this.onTargetHover.bind(this))\r\n    }\r\n\r\n    onInit(): void {\r\n        this.#trigger = this.element.parentElement.querySelector(this.args.trigger)\r\n        this.#triggerHoverListener = new CuiHoverListener(this.#trigger);\r\n        this.setTriggerEvent();\r\n        this.#isInitialized = true;\r\n        AriaAttributes.setAria(this.element, 'aria-dropdown', \"\");\r\n        this._log.debug(\"Initialized\", \"handle\")\r\n    }\r\n    onUpdate(): void {\r\n        if (this.#triggerHoverListener.isAttached()) {\r\n            this.#triggerHoverListener.detach();\r\n        } else if (this.prevArgs.mode === 'click') {\r\n            this.#trigger.removeEventListener('click', this.onTriggerClick.bind(this))\r\n        }\r\n\r\n        this.#trigger = this.element.parentElement.querySelector(this.args.trigger)\r\n        this.#triggerHoverListener = new CuiHoverListener(this.#trigger);\r\n        this.setTriggerEvent();\r\n        if (!this.#isInitialized) {\r\n            this.#isInitialized = true;\r\n            AriaAttributes.setAria(this.element, 'aria-dropdown', \"\");\r\n            this._log.debug(\"Initialized\", \"refresh\")\r\n        }\r\n    }\r\n\r\n    onDestroy(): void {\r\n\r\n    }\r\n\r\n\r\n    async open(): Promise<boolean> {\r\n        if (this.checkLockAndWarn('open')) {\r\n            return false;\r\n        }\r\n        if (this.isActive()) {\r\n            return this.close();\r\n        }\r\n        if (this.isAnyActive()) {\r\n            await this.findAndCloseOpenedDrop();\r\n        }\r\n        this.isLocked = true;\r\n        this._log.debug(`Drop ${this.cuid}`, 'open');\r\n        this.mutate(this.onOpen, this);\r\n        this.emitEvent(EVENTS.ON_OPEN, {\r\n            timestamp: Date.now()\r\n        })\r\n        this.#hoverListener.attach();\r\n        if (this.args.autoClose) {\r\n            this.runAutoCloseTask();\r\n        }\r\n        this.isLocked = false;\r\n        return true\r\n    }\r\n\r\n    async close(): Promise<boolean> {\r\n        if (this.checkLockAndWarn(\"close\") || !this.isActive()) {\r\n            return false;\r\n        }\r\n        this.isLocked = true;\r\n        this._log.debug(`Drop ${this.cuid}`, 'close');\r\n        this.mutate(this.onClose, this);\r\n        this.emitEvent(EVENTS.ON_CLOSE, {\r\n            timestamp: Date.now()\r\n        })\r\n        this.#hoverListener.detach();\r\n        this.isLocked = false;\r\n        return true;\r\n    }\r\n\r\n    onTargetHover(ev: CuiHoverEvent) {\r\n        if (ev.isHovering && is(this.#clearId)) {\r\n            clearTimeout(this.#clearId);\r\n            this.#clearId = null;\r\n        } else if (!ev.isHovering && !is(this.#clearId) && this.args.autoClose) {\r\n            this.runAutoCloseTask();\r\n        }\r\n    }\r\n\r\n    onClose() {\r\n        this.element.classList.remove(this.activeClassName);\r\n        document.body.classList.remove(this.#bodyClass);\r\n        AriaAttributes.setAria(this.element, 'aria-expanded', 'false')\r\n        this.detachEvent(EVENTS.ON_KEYDOWN);\r\n        this.detachEvent(EVENTS.ON_WINDOW_CLICK);\r\n\r\n    }\r\n\r\n    onOpen() {\r\n        this.element.classList.add(this.activeClassName);\r\n        document.body.classList.add(this.#bodyClass);\r\n        AriaAttributes.setAria(this.element, 'aria-expanded', 'true')\r\n        if (this.args.escClose) {\r\n            this.onEvent(EVENTS.ON_KEYDOWN, this.onEscClose.bind(this))\r\n        }\r\n        if (this.args.outClose) {\r\n            this.onEvent(EVENTS.ON_WINDOW_CLICK, this.onWindowClick.bind(this));\r\n        }\r\n    }\r\n\r\n    onEscClose(ev: KeyDownEvent) {\r\n        if (ev.event.key === \"Escape\") {\r\n            this.close();\r\n        }\r\n    }\r\n\r\n    onWindowClick(ev: MouseEvent) {\r\n        if (this.element.contains((ev.target as Node))) {\r\n            this.close();\r\n        }\r\n    }\r\n\r\n    isAnyActive(): boolean {\r\n        return document.body.classList.contains(this.#bodyClass);\r\n    }\r\n\r\n    getAction(className: string): ICuiComponentAction {\r\n        return new CuiClassAction(replacePrefix(className, this.#prefix));\r\n    }\r\n\r\n    async findAndCloseOpenedDrop(): Promise<boolean> {\r\n        const opened = document.querySelector(`[${this.#attribute}].${this.activeClassName}`);\r\n        if (!is(opened)) {\r\n            this._log.warning(\"Opened drop was not found\");\r\n            return false;\r\n        }\r\n        const handler = (<CuiElement>(opened as any)).$handlers[this.#attribute] as any;\r\n        if (!is(handler)) {\r\n            this._log.warning(\"Drop handler was not found in the element\");\r\n            return false;\r\n        }\r\n        return handler.close();\r\n    }\r\n\r\n    onTriggerClick(ev: MouseEvent) {\r\n        if (this.isActive()) {\r\n            this.close();\r\n        } else {\r\n            this.open();\r\n        }\r\n        if (this.args.prevent) {\r\n            ev.preventDefault();\r\n        }\r\n    }\r\n\r\n    onHoverEvent(ev: CuiHoverEvent) {\r\n        if (ev.isHovering && !this.isActive()) {\r\n            this.open();\r\n        }\r\n        if (this.args.prevent) {\r\n            ev.event.preventDefault();\r\n        }\r\n    }\r\n\r\n    setTriggerEvent() {\r\n        if (this.args.mode === 'hover') {\r\n            this.#triggerHoverListener.setCallback(this.onHoverEvent.bind(this));\r\n            this.#triggerHoverListener.attach();\r\n        } else {\r\n            this.#trigger.addEventListener('click', this.onTriggerClick.bind(this))\r\n        }\r\n    }\r\n\r\n    runAutoCloseTask() {\r\n        this.#clearId = setTimeout(() => {\r\n            this.close();\r\n        }, 5000)\r\n    }\r\n\r\n}","import { ICuiPlugin, ICuiEventBus } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { EVENTS } from \"../../core/index\";\r\n\r\nexport class CuiWindowClickPlugin implements ICuiPlugin {\r\n    description: string;\r\n    name: string = 'click-plugin';\r\n    setup: any;\r\n    #bus: ICuiEventBus;\r\n\r\n    constructor() {\r\n        this.description = \"CuiWindowClickPlugin\";\r\n    }\r\n\r\n    init(utils: CuiUtils): void {\r\n        this.#bus = utils.bus;\r\n        window.addEventListener('click', this.onWindowClick.bind(this))\r\n    }\r\n\r\n    destroy(): void {\r\n        window.removeEventListener('click', this.onWindowClick.bind(this));\r\n    }\r\n\r\n    onWindowClick(ev: MouseEvent) {\r\n        this.#bus.emit(EVENTS.ON_WINDOW_CLICK, null, ev)\r\n    }\r\n}","import { ICuiComponent, ICuiComponentHandler } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandlerBase, CuiHandler } from \"../../app/handlers/base\";\r\nimport { CuiScrollListener, CuiScrollEvent } from \"../../core/listeners/scroll\";\r\nimport { ICuiComponentAction, CuiActionsFatory, CuiActionsListFactory } from \"../../core/utils/actions\";\r\nimport { getIntOrDefault } from \"../../core/utils/functions\";\r\n\r\nexport const ON_OFFSET_EVENT_NAME = \"offset\"\r\n\r\nexport interface CuiOffsetEvent {\r\n    matches: boolean;\r\n    timestamp: number;\r\n}\r\n\r\nexport interface CuiOffsetAttribute {\r\n    target?: string;\r\n    action?: string;\r\n    offsetY?: number;\r\n    offsetX?: number;\r\n}\r\n\r\nexport class CuiOffsetArgs {\r\n    target: string;\r\n    action: ICuiComponentAction[];\r\n    offsetY?: number;\r\n    offsetX?: number\r\n\r\n    constructor() {\r\n        this.offsetX = 0;\r\n        this.offsetY = 0;\r\n        this.target = null;\r\n    }\r\n    parse(args: any) {\r\n        this.target = args.target;\r\n        this.action = CuiActionsListFactory.get(args.action);\r\n        this.offsetX = getIntOrDefault(args.offsetX, -1);\r\n        this.offsetY = getIntOrDefault(args.offsetY, -1);\r\n    }\r\n}\r\nexport class CuiOffsetComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor(prefix?: string) {\r\n        this.attribute = `${prefix ?? 'cui'}-offset`;\r\n    }\r\n\r\n    getStyle(): string {\r\n        return null;\r\n    }\r\n\r\n    get(element: Element, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiOffsetHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport class CuiOffsetHandler extends CuiHandler<CuiOffsetArgs> {\r\n\r\n    #listener: CuiScrollListener;\r\n    #target: Element;\r\n    #utils: CuiUtils;\r\n    #matched: boolean;\r\n\r\n    constructor(element: Element, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiOffsetHandler\", element, new CuiOffsetArgs(), utils);\r\n        this.element = element as HTMLElement;\r\n        this.#listener = new CuiScrollListener(this.element, this.utils.setup.scrollThreshold);\r\n        this.#target = this.element;\r\n        this.#utils = utils;\r\n        this.#matched = false;\r\n    }\r\n\r\n    onInit(): void {\r\n        this.parseAttribute();\r\n        this.#listener.setCallback(this.onScroll.bind(this));\r\n        this.#listener.attach();\r\n    }\r\n    onUpdate(): void {\r\n        this.parseAttribute();\r\n    }\r\n    onDestroy(): void {\r\n        this.#listener.detach();\r\n    }\r\n\r\n    private onScroll(ev: CuiScrollEvent): void {\r\n        this.checkAndPerformActions(ev.top, ev.left);\r\n    }\r\n\r\n    private parseAttribute() {\r\n        this.#target = this.args.target ? this.element.querySelector(this.args.target) : this.element;\r\n        this.checkAndPerformActions(this.element.scrollTop, this.element.scrollLeft);\r\n\r\n    }\r\n\r\n    private matchesOffset(top: number, left: number) {\r\n        return (this.args.offsetX > 0 && left >= this.args.offsetX) ||\r\n            (this.args.offsetY > 0 && top >= this.args.offsetY)\r\n    }\r\n\r\n    private checkAndPerformActions(top: number, left: number) {\r\n        let matchesOffset = this.matchesOffset(top, left);\r\n        if (matchesOffset && !this.#matched) {\r\n            this.args.action.forEach(action => action.add(this.#target, this.#utils));\r\n            this.#matched = true;\r\n            this.callEvent();\r\n        } else if (!matchesOffset && this.#matched) {\r\n            this.args.action.forEach(action => action.remove(this.#target, this.#utils));\r\n            this.#matched = false;\r\n            this.callEvent();\r\n        }\r\n    }\r\n\r\n    private callEvent() {\r\n        this.emitEvent(ON_OFFSET_EVENT_NAME, {\r\n            matches: this.#matched,\r\n            timestamp: Date.now()\r\n        })\r\n    }\r\n\r\n}","import { are, is } from \"./functions\";\r\n\r\nexport interface ICuiTask {\r\n    start(): void;\r\n    stop(): void;\r\n    getId(): any;\r\n    setCallback(callback: () => void): void;\r\n}\r\n\r\nexport class CuiTaskRunner implements ICuiTask {\r\n    #taskId: any;\r\n    #autoRenew: boolean;\r\n    #timeout: number;\r\n    #callback: () => void;\r\n\r\n    constructor(timeout: number, autoRenew: boolean, callback?: () => void) {\r\n        this.#autoRenew = autoRenew;\r\n        this.#timeout = timeout;\r\n        this.#callback = callback;\r\n    }\r\n    start(): void {\r\n        if (!this.canRun()) {\r\n            return;\r\n        }\r\n        this.stop();\r\n        this.#taskId = setTimeout(() => {\r\n            this.#callback();\r\n            this.#taskId = null;\r\n            if (this.#autoRenew) {\r\n                this.start();\r\n            }\r\n        }, this.#timeout);\r\n    }\r\n\r\n    stop(): void {\r\n        if (this.#taskId) {\r\n            clearTimeout(this.#taskId);\r\n            this.#taskId = null\r\n        }\r\n    }\r\n\r\n    getId() {\r\n        return this.#taskId;\r\n    }\r\n\r\n    private canRun(): boolean {\r\n        return is(this.#callback) && this.#timeout > 0;\r\n    }\r\n\r\n    setCallback(callback: () => void) {\r\n        this.#callback = callback;\r\n    }\r\n\r\n}","import { ICuiComponent, ICuiComponentHandler, ICuiParsable, ICuiSwitchable, CuiElement } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandlerBase, CuiHandler } from \"../../app/handlers/base\";\r\nimport { ICuiComponentAction, is, getStringOrDefault, CuiActionsFatory, replacePrefix, getIntOrDefault, isInRange, isStringTrue } from \"../../core/index\";\r\nimport { ICuiTask, CuiTaskRunner } from \"../../core/utils/task\";\r\n\r\nconst SWITCH_DEFAULT_ACTION_IN = \".{prefix}-switch-animation-default-in\";\r\nconst SWITCH_DEFAULT_ACTION_OUT = \".{prefix}-switch-animation-default-out\";\r\nconst SWITCH_DEFAULT_TARGETS = \"li\";\r\nconst SWITCH_EVENT_ON_SWITCH = 'switch';\r\n\r\nexport const SWITCH_EVENT_PUSH_SWITCH = 'pushswitch';\r\n\r\nexport class CuiSwitchArgs implements ICuiParsable {\r\n\r\n    targets: string;\r\n    in: ICuiComponentAction;\r\n    out: ICuiComponentAction;\r\n    timeout: number;\r\n    links: string;\r\n    switch: string;\r\n    auto: boolean;\r\n    autoTimeout: number;\r\n\r\n    #prefix: string;\r\n    #defTimeout: number;\r\n    constructor(prefix: string, timeout: number) {\r\n        this.#prefix = prefix;\r\n        this.#defTimeout = timeout;\r\n    }\r\n\r\n    parse(args: any): void {\r\n        this.targets = getStringOrDefault(args.targets, SWITCH_DEFAULT_TARGETS)\r\n        this.in = CuiActionsFatory.get(args.in ?? replacePrefix(SWITCH_DEFAULT_ACTION_IN, this.#prefix))\r\n        this.out = CuiActionsFatory.get(args.out ?? replacePrefix(SWITCH_DEFAULT_ACTION_OUT, this.#prefix))\r\n        this.timeout = getIntOrDefault(args.timeout, this.#defTimeout);\r\n        this.links = args.links;\r\n        this.switch = args.switch;\r\n        this.auto = isStringTrue(args.auto)\r\n        this.autoTimeout = getIntOrDefault(args.autoTimeout, 5000);\r\n    }\r\n\r\n}\r\n\r\nexport class CuiSwitchComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor(prefix?: string) {\r\n        this.attribute = `${prefix ?? 'cui'}-switch`;\r\n    }\r\n\r\n    getStyle(): string {\r\n        return null;\r\n    }\r\n\r\n    get(element: Element, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiSwitchHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport class CuiSwitchHandler extends CuiHandler<CuiSwitchArgs> implements ICuiSwitchable {\r\n    #targets: Element[];\r\n    #currentIdx: number;\r\n    #links: Element[];\r\n    #switches: CuiElement[];\r\n    #task: ICuiTask;\r\n    constructor(element: Element, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiSwitchHandler\", element, new CuiSwitchArgs(utils.setup.prefix, utils.setup.animationTime), utils);\r\n        this.#targets = [];\r\n        this.#currentIdx = -1;\r\n        this.#links = [];\r\n        this.#switches = [];\r\n\r\n    }\r\n\r\n    onInit(): void {\r\n        this.onEvent(SWITCH_EVENT_PUSH_SWITCH, this.onPushSwitch)\r\n        this.getTargets();\r\n        this.getLinks();\r\n        this.getActiveIndex();\r\n        this.getSwitches();\r\n        this.setSwitchesActive(this.#currentIdx);\r\n        this.setLinkActive(-1, this.#currentIdx);\r\n        this.#task = new CuiTaskRunner(this.args.autoTimeout, true, this.switch.bind(this, 'next'));\r\n        this.startTask();\r\n    }\r\n\r\n    onUpdate(): void {\r\n        this.startTask();\r\n    }\r\n\r\n    onDestroy(): void {\r\n        this.#task.stop();\r\n        this.detachEvent(SWITCH_EVENT_PUSH_SWITCH)\r\n    }\r\n\r\n    async switch(index: any): Promise<boolean> {\r\n        if (this.isLocked) {\r\n            return false;\r\n        }\r\n        this.getTargets();\r\n        this.getLinks();\r\n        this.getSwitches();\r\n        this.getActiveIndex();\r\n        let nextIdx = this.getNextIndex(index);\r\n        if (nextIdx == this.#currentIdx || nextIdx < 0 || nextIdx >= this.#targets.length) {\r\n            this._log.warning(`Index ${index} is not within the suitable range`);\r\n            return false;\r\n        }\r\n        this.isLocked = true;\r\n        this.setSwitchesActive(nextIdx);\r\n        await this.actionsHelper.performSwitchAction(this.#targets[nextIdx],\r\n            this.#currentIdx > -1 ? this.#targets[this.#currentIdx] : null,\r\n            this.args.in,\r\n            this.args.out,\r\n            () => {\r\n                this.#targets[nextIdx].classList.add(this.activeClassName);\r\n                if (this.#currentIdx > -1)\r\n                    this.#targets[this.#currentIdx].classList.remove(this.activeClassName)\r\n                this.setLinkActive(this.#currentIdx, nextIdx);\r\n                this.startTask();\r\n                this.isLocked = false;\r\n            },\r\n            this.args.timeout,\r\n        )\r\n        this.emitEvent(SWITCH_EVENT_ON_SWITCH, {\r\n            timestamp: Date.now(),\r\n            index: nextIdx\r\n        })\r\n        return true;\r\n\r\n    }\r\n\r\n    onPushSwitch(index: string) {\r\n        this._log.debug(\"Intercepted event\");\r\n        this.switch(index);\r\n    }\r\n\r\n    getActiveIndex(): void {\r\n        this.#currentIdx = is(this.#targets) ? this.#targets.findIndex(target => target.classList.contains(this.activeClassName)) : -1;\r\n    }\r\n\r\n    getNextIndex(val: any): number {\r\n        let idx = -1;\r\n        switch (val) {\r\n            case 'prev':\r\n                idx = this.#currentIdx <= 0 ? this.#targets.length - 1 : this.#currentIdx - 1;\r\n                break;\r\n            case 'next':\r\n                idx = this.#currentIdx < this.#targets.length - 1 ? this.#currentIdx + 1 : 0\r\n                break;\r\n            case 'first':\r\n                idx = 0;\r\n                break;\r\n            case 'last':\r\n                idx = this.#targets.length - 1;\r\n            default:\r\n                idx = getIntOrDefault(val, -1);\r\n                break;\r\n        }\r\n        return idx;\r\n    }\r\n\r\n    getTargets() {\r\n        let t = this.element.querySelectorAll(this.args.targets);\r\n        this.#targets = t.length > 0 ? [...t] : [];\r\n    }\r\n\r\n    getLinks() {\r\n        this.#links = is(this.args.links) ? [...document.querySelectorAll(this.args.links)] : []\r\n    }\r\n\r\n    getSwitches() {\r\n        let s = is(this.args.switch) ? document.querySelectorAll(this.args.switch) : null;\r\n        this.#switches = [];\r\n        if (s) {\r\n            s.forEach(sw => {\r\n                this.#switches.push(<CuiElement>(sw as any))\r\n            })\r\n        }\r\n    }\r\n\r\n    setLinkActive(current: number, next: number) {\r\n        if (!is(this.#links)) {\r\n            return\r\n        }\r\n        if (isInRange(current, 0, this.#links.length - 1)) {\r\n            this.#links[current].classList.remove(this.activeClassName);\r\n        }\r\n        if (isInRange(next, 0, this.#links.length - 1)) {\r\n            this.#links[next].classList.add(this.activeClassName);\r\n        }\r\n    }\r\n    /**\r\n     * Sets propers active state on attached switches\r\n     * @param index \r\n     */\r\n\r\n    setSwitchesActive(index: number) {\r\n        this.#switches.forEach(sw => {\r\n            this.setLinkSwitch(sw.$cuid, index)\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Emits push event to attached switch to set proper index\r\n     * @param id - cuid of element\r\n     * @param index - index to be set on element\r\n     */\r\n    setLinkSwitch(id: string, index: number) {\r\n        if (is(id))\r\n            this.utils.bus.emit(SWITCH_EVENT_PUSH_SWITCH, id, index);\r\n    }\r\n\r\n    /**\r\n     * Runs task if arguments setup allows for it - auto flag must be set to true \r\n     */\r\n    startTask() {\r\n        this.#task.stop();\r\n        if (this.args.auto) {\r\n            this.#task.start();\r\n        }\r\n    }\r\n\r\n}","import { ICuiComponent, ICuiComponentHandler, ICuiParsable, ICuiSwitchable, CuiElement } from \"../../core/models/interfaces\";\r\nimport { CuiUtils } from \"../../core/models/utils\";\r\nimport { CuiHandlerBase, CuiHandler } from \"../../app/handlers/base\";\r\nimport { ICuiComponentAction, is, getStringOrDefault, CuiActionsFatory, replacePrefix, getIntOrDefault, are } from \"../../core/index\";\r\nimport { CuiSwitchHandler, SWITCH_EVENT_PUSH_SWITCH } from \"./switch\";\r\n\r\nconst SWITCHER_LIST_ITEM_SELECTOR = \"li > a\";\r\n\r\nexport class CuiSwitcherArgs implements ICuiParsable {\r\n\r\n    target: string;\r\n    index: string;\r\n\r\n    constructor() {\r\n\r\n    }\r\n\r\n    parse(args: any): void {\r\n        if (!is(args)) {\r\n            return;\r\n        }\r\n        this.target = args.target;\r\n        this.index = args.index;\r\n    }\r\n\r\n}\r\n\r\nexport class CuiSwitcherComponent implements ICuiComponent {\r\n    attribute: string;\r\n    constructor(prefix?: string) {\r\n        this.attribute = `${prefix ?? 'cui'}-switcher`;\r\n    }\r\n\r\n    getStyle(): string {\r\n        return null;\r\n    }\r\n\r\n    get(element: Element, utils: CuiUtils): ICuiComponentHandler {\r\n        return new CuiSwitcherHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n\r\nexport class CuiSwitcherHandler extends CuiHandler<CuiSwitcherArgs>  {\r\n    #targetId: string;\r\n    #isList: boolean;\r\n    constructor(element: Element, utils: CuiUtils, attribute: string) {\r\n        super(\"CuiSwitcherHandler\", element, new CuiSwitcherArgs(), utils);\r\n        this.#targetId = null;\r\n        this.#isList = element.tagName === 'UL';\r\n    }\r\n\r\n    onInit(): void {\r\n        this.setEvents();\r\n        this.getTarget();\r\n    }\r\n\r\n    onUpdate(): void {\r\n        this.getTarget();\r\n    }\r\n\r\n    onDestroy(): void {\r\n        this.removeEvents();\r\n    }\r\n\r\n    getTarget() {\r\n        if (!is(this.args.target)) {\r\n            this.#targetId = null;\r\n        }\r\n\r\n        let target = <CuiElement>(document.querySelector(this.args.target) as any);\r\n        if (is(target)) {\r\n            this.#targetId = target.$cuid;\r\n        }\r\n    }\r\n\r\n    setEvents() {\r\n        if (this.#isList) {\r\n            let elements = this.element.querySelectorAll(SWITCHER_LIST_ITEM_SELECTOR);\r\n            elements.forEach((el: Element, index: number) => {\r\n                el.addEventListener('click', this.onListItemClick.bind(this, index))\r\n            })\r\n        } else {\r\n            this.element.addEventListener('click', this.onClickEvent.bind(this))\r\n        }\r\n    }\r\n\r\n    removeEvents() {\r\n        if (this.#isList) {\r\n            let elements = this.element.querySelectorAll(SWITCHER_LIST_ITEM_SELECTOR);\r\n            elements.forEach((el: Element, index: number) => {\r\n                el.removeEventListener('click', this.onListItemClick.bind(this, index))\r\n            })\r\n        } else {\r\n            this.element.removeEventListener('click', this.onClickEvent.bind(this));\r\n        }\r\n    }\r\n\r\n    onClickEvent(ev: MouseEvent) {\r\n        this.getTarget();\r\n        if (!is(this.args.index)) {\r\n            return;\r\n        }\r\n        this.onClick(this.args.index.trim());\r\n    }\r\n\r\n    onListItemClick(index: number, ev: MouseEvent) {\r\n        this.getTarget();\r\n        this.onClick(index);\r\n    }\r\n\r\n    onClick(index: any) {\r\n        if (!is(this.#targetId)) {\r\n            return;\r\n        }\r\n        this.utils.bus.emit(SWITCH_EVENT_PUSH_SWITCH, this.#targetId, index);\r\n    }\r\n\r\n}","import { CuiSetupInit } from \"../core/models/setup\";\r\nimport { is } from \"../core/utils/functions\";\r\nimport { CuiInstance } from \"./instance\";\r\nimport { ICONS } from \"../core/utils/statics\";\r\nimport { ICuiPlugin, CuiInitData, CuiInitResult, ICuiComponent } from \"../core/models/interfaces\";\r\nimport { CuiAutoLightModePlugin } from \"../plugins/light/light\";\r\nimport { CuiIconComponent } from \"../components/icon/icon\";\r\nimport { CuiCircleComponent } from \"../components/circle/circle\";\r\nimport { CuiSpinnerComponent } from \"../components/spinner/spinner\";\r\nimport { CuiDummyComponent } from \"../components/dummy/dummy\";\r\nimport { CuiScrollComponent } from \"../components/scroll/scroll\";\r\nimport { CuiScrollspyComponent } from \"../components/scrollspy/scrollspy\";\r\nimport { CuiAutoPrintModePlugin } from \"../plugins/print/print\";\r\nimport { CuiIntersectionComponent } from \"../components/intersection/intersection\";\r\nimport { CuiOpenComponent } from \"../components/open/open\";\r\nimport { CuiCloseComponent } from \"../components/close/close\";\r\nimport { CuiToggleComponent } from \"../components/toggle/toggle\";\r\nimport { CuiResizeComponent } from \"../components/resize/resize\";\r\nimport { CuiKeysObserverPlugin } from \"../plugins/keys/keys\";\r\nimport { CuiDialogComponent } from \"../components/dialog/dialog\";\r\nimport { CuiOffCanvasArgs, CuiOffCanvasComponent } from \"../components/offcanvas/offcanvas\";\r\nimport { CuiAccordionComponent } from \"../components/accordion/accordion\";\r\nimport { CuiDropComponenet } from \"../components/drop/drop\";\r\nimport { CuiWindowClickPlugin } from \"../plugins/click/click\";\r\nimport { CuiOffsetComponent } from \"../components/offset/offset\";\r\nimport { CuiSwitchArgs, CuiSwitchComponent } from \"../components/switch/switch\";\r\nimport { CuiSwitcherComponent } from \"../components/switch/switcher\";\r\n\r\nexport class CuiInitializer {\r\n    #window: any;\r\n    constructor() {\r\n        this.#window = window;\r\n    }\r\n\r\n    async init(setup: CuiInitData): Promise<CuiInitResult> {\r\n        let settings: CuiSetupInit = { ... new CuiSetupInit(), ...setup.setup }\r\n        const appPrefix: string = settings.app;\r\n        const result: CuiInitResult = {\r\n            result: false\r\n        }\r\n        if (is(this.#window[appPrefix])) {\r\n            result.message = \"Instance is already initialized\";\r\n            return result;\r\n        }\r\n        if (is(setup.icons)) {\r\n            for (let icon in setup.icons) {\r\n                ICONS[icon] = setup.icons[icon];\r\n            }\r\n        }\r\n        try {\r\n            this.#window[appPrefix] = new CuiInstance(settings, setup.plugins, setup.components)\r\n            this.#window[appPrefix].init();\r\n        } catch (e) {\r\n            console.error(e);\r\n            result.message = \"An error occured during initialization\";\r\n            return result;\r\n        }\r\n        result.result = true;\r\n        return result;\r\n    }\r\n}\r\n\r\nexport class CuiInit {\r\n    #isInitialized: boolean;\r\n    constructor() {\r\n        this.#isInitialized = false;\r\n    }\r\n\r\n    async init(data: CuiInitData): Promise<boolean> {\r\n        if (this.#isInitialized) {\r\n            console.log(\"Module is already initialized\")\r\n            return false;\r\n        }\r\n        const initializer = new CuiInitializer();\r\n        const pluginList: ICuiPlugin[] = [\r\n            new CuiAutoLightModePlugin({ autoLight: true }),\r\n            new CuiAutoPrintModePlugin({ autoPrint: true }),\r\n            new CuiKeysObserverPlugin(null),\r\n            new CuiWindowClickPlugin()\r\n        ];\r\n\r\n        const componentList: ICuiComponent[] = [\r\n            new CuiIconComponent(),\r\n            new CuiCircleComponent(),\r\n            new CuiSpinnerComponent(),\r\n            new CuiDummyComponent(),\r\n            new CuiScrollComponent(),\r\n            new CuiScrollspyComponent(),\r\n            new CuiIntersectionComponent(),\r\n            new CuiOpenComponent(),\r\n            new CuiCloseComponent(),\r\n            new CuiToggleComponent(),\r\n            new CuiResizeComponent(),\r\n            new CuiDialogComponent(),\r\n            new CuiOffCanvasComponent(),\r\n            new CuiAccordionComponent(),\r\n            new CuiDropComponenet(),\r\n            new CuiOffsetComponent(),\r\n            new CuiSwitchComponent(),\r\n            new CuiSwitcherComponent()\r\n        ];\r\n\r\n        let result = await initializer.init({\r\n            setup: data.setup,\r\n            icons: data.icons,\r\n            plugins: is(data.plugins) ? [...pluginList, ...data.plugins] : pluginList,\r\n            components: is(data.components) ? [...componentList, ...data.components] : componentList\r\n        })\r\n        if (result.result) {\r\n            this.#isInitialized = true;\r\n            return true;\r\n        } else {\r\n            console.error(`A cUI instance failed to initialize: [${result.message ?? \"#\"}]`);\r\n        }\r\n        console.log(\"Cui Light failed to init\")\r\n        return false;\r\n\r\n    }\r\n}","import { CuiInit } from './app/initializer';\r\n\r\n\r\ndeclare global {\r\n    interface Window {\r\n        cuiInit: CuiInit;\r\n    }\r\n}\r\n\r\nexport * from \"./core/models/interfaces\";\r\nexport * from './core/models/events';\r\nexport * from './core/models/setup';\r\nexport * from './core/models/utils';\r\nexport * from './app/initializer'\r\n\r\nwindow.cuiInit = new CuiInit();"],"sourceRoot":""}