{"version":3,"sources":["webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/functions.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/statics.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/actions.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/models/errors.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/logger.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/factories/logger.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/builders/element.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/animation/definitions.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/listeners/move.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/models/setup.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/observers/mutations.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/helpers/helpers.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/index.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/index.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/index.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/aria.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/handlers/base.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/accordion/accordion.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/animation/animators.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/animation/engine.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/banner/banner.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/builders/icon.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/circle/circle.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/close/close.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/cover/cover.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/dialog/dialog.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/listeners/hover.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/position/evaluator.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/position/calculator.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/task.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/drop/drop.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/float/helpers.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/float/float.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/icon/icon.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/observers/intersection.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/intersection/intersection.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/offcanvas/offcanvas.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/models/elements.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/listeners/scroll.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/offset/modes.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/offset/offset.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/open/open.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/resize/resize.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/scroll/scroll.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/intersection/intersection.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/scrollspy/mode.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/scrollspy/scrollspy.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/handlers/drag/detectors.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/handlers/drag/drag.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/sortable/sortable.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/spinner/spinner.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/switch/slider.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/switch/switch.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/switch/switcher.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/toggle/toggle.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/tooltip/tooltip.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/module.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/click/click.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/listeners/keys.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/keys/observer.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/keys/keys.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/listeners/media.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/light/light.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/print/print.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/models/colors.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/properties/colors.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/properties/setter.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/properties/handler.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/properties/properties.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/module.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/interactions.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/dictionary.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/managers/cache.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/bus/handlers.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/bus/executors.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/bus/bus.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/styles/appender.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/handlers/colors.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/observers/resize.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/managers/development.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/models/utils.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/factories/interactions.js"],"names":["is","val","typecheck","length","Array","isArray","isEmpty","getName","prefix","name","sleep","timeout","Promise","resolve","setTimeout","createElementFromString","htmlString","template","document","createElement","innerHTML","content","children","getRangeValue","value","min","max","getRangeValueOrDefault","def","isNaN","clone","object","Object","assign","joinAttributesForQuery","attributes","join","getSystemLightMode","window","matchMedia","matches","getSystemPrintMode","are","c","i","calcWindowSize","width","calcWindowSize2","size","parseAttributeString","attribute","ret","out","startsWith","endsWith","JSON","parse","jsonify","e","console","error","message","component","functionName","Date","toLocaleString","parseJsonString","trim","includes","split","forEach","sp","splitColon","tag","undefined","replace","getOffsetTop","element","offsetTop","parseInt","getStyleValue","getIntOrDefault","integer","target","property","currentStyle","getComputedStyle","getPropertyValue","isInRange","getActiveClass","parseAttribute","getAttribute","isStringTrue","toLowerCase","boolStringOrDefault","prop","getStringOrDefault","isString","replacePrefix","generateRandomString","rand","getRandomInt","rand2","Math","floor","random","ceil","registerCuiElement","node","components","utils","$handlers","matching","hasAttribute","filter","a","getMatchingAttributes","$cuid","next","generateCUID","tagName","setAttribute","match","find","styleAppender","append","getStyle","handler","get","handle","attr","addCuiArgument","cuiArg","args","argArr","enumerateObject","arg","push","counter","idx","getParentCuiElement","parent","parentElement","getChildrenHeight","height","from","child","getBoundingClientRect","callback","hasOwnProperty","calculateNextIndex","currentIndex","totalLength","getFirstMatching","array","count","text","shift","CUID_ATTRIBUTE","CLASSES","dark","animProgress","print","active","swipingOn","selectionOff","ICONS","close","accordion","special_menu","special_fail","special_success","CSS_APP_BACKGROUND_COLORS","light","CSS_COMPONENT_BACKGROUND_COLORS","CSS_COMPONENT_BORDER_COLORS","CSS_THEMES","base","muted","accent","secondary","success","warning","SCOPE_SELECTOR","CSS_VARIABLES","fontSize","lineHeight","animationTime","animationTimeLong","animationTimeShort","colorLightAppBackground","colorLightBackground","colorLightBorder","colorLightBase","colorLightActive","colorLightMuted","colorDarkAppBackground","colorDarkBackground","colorDarkBorder","colorDarkBase","colorDarkActive","colorDarkMuted","colorAccent","colorAccentActive","colorAccentMuted","colorAccentShade","colorAccentShadeDark","colorSecondary","colorSecondaryActive","colorSecondaryMuted","colorSecondaryShade","colorSecondaryShadeDark","colorWarning","colorWarningActive","colorWarningMuted","colorWarningShade","colorWarningShadeDark","colorSuccess","colorSuccessActive","colorSuccessMuted","colorSuccessShade","colorSuccessShadeDark","colorError","colorErrorActive","colorErrorMuted","colorErrorShade","colorErrorShadeDark","inputBackground","colorShade","colorShadeDarker","colorShadeLight","colorShadeLighter","outline","borderRadius","padding","margin","scrollbarWidth","componentSpace","accordionIcon","STATICS","logLevel","EVENTS","INSTANCE_INITIALIZED","INSTANCE_FINISHED","RESIZE","OPEN","OPENED","CLOSE","CLOSED","TOGGLE","TOGGLED","SWITCH","SWITCHED","ON_SCROLL","TARGET_CHANGE","INTERSECTION","KEYDOWN","SCROLLBY","WINDOW_CLICK","OFFSET","PROGRESS_CHANGE","PROGRESS_CHANGED","CHANGE","CHANGED","GLOBAL_MOVE","MOVE_LOCK","PAUSE","PAUSED","SORTED","SORT_START","COMPONENTS_COUNTER","_class","_name","_attributeName","_attributeValue","_attributeName_1","_attributeValue_1","__classPrivateFieldSet","receiver","privateMap","has","TypeError","set","__classPrivateFieldGet","CuiClassAction","className","this","classList","contains","add","remove","WeakMap","CuiInboundAction","setLightMode","setDarkMode","getLightMode","AttributeAction","_a","_b","_c","removeAttribute","StyleAction","el","style","DummyAction","CuiActionsFatory","substring","CuiActionsListFactory","map","single","ErrorBase","Error","super","setPrototypeOf","prototype","ItemNotFoundError","ArgumentError","CuiInstanceInitError","RegisterElementError","AnimatorError","CSSVariableError","CuiColorError","CuiPositionError","CuiLogger","level","id","log","prepString","warn","stack","start","now","_id","_classes","_attributes","_tag","ElementBuilder","SWIPE_ANIMATIONS_DEFINITIONS","current","left","transform","translateX","to","unit","right","previous","fade","opacity","_element","_onEvent","_isLocked","_isAttached","_preventDefault","_target","CuiMoveEventListener","body","onMouseDown","bind","onMouseUp","onMouseMove","onTouchStart","onTouchEnd","onTouchMove","flag","addEventListener","passive","removeEventListener","ev","publishMouseEvent","publishTouchEvent","type","cancelable","preventDefault","call","x","clientX","y","clientY","moveX","movementX","moveY","movementY","event","touch","touches","changedTouches","CuiSetup","autoLightMode","scrollThreshold","resizeThreshold","plugins","init","cacheSize","CuiSetupInit","app","interaction","root","busSetup","development","_observer","_options","_components","_utils","_queryString","_isObserving","_observer_1","_element_1","_disabled","_options_1","CuiMutationObserver","_log","subtree","childList","attributeFilter","debug","MutationObserver","mutationCallback","observe","disconnect","mutations","observer","mutation","item","attributeName","refresh","handleChildListMutation","onMutation","then","addedLen","addedNodes","removedLen","removedNodes","handleAddedNodes","handleRemovedNodes","nodes","childrens","hasChildNodes","querySelectorAll","exception","destroySingleElement","destroy","CuiComponentMutationHandler","unobserve","_interactions","__awaiter","thisArg","_arguments","P","generator","reject","fulfilled","step","rejected","result","done","apply","CuiActionsHelper","interactions","action","mutate","actions","inTarget","outTarget","inAction","outAction","onFinish","CUI_LIGHT_COMPONENTS_VERSION","CUI_LIGHT_PLUGINS_VERSION","CUI_CORE_VERSION","AriaAttributes","label","_emittedEvents","_attribute","_openEventId","_closeEventId","_keyCloseEventId","_openAct","_closeAct","_mutionHandler","cls","setClasses","classes","removeClasses","componentName","cuid","isLocked","setId","activeClassName","setup","helper","fetch","data","bus","emit","on","detach","fName","detachByCuid","registerElement","unregisterElement","setProperty","pushState","actionsHelper","prevArgs","isInitialized","logInfo","logWarning","registerInDebug","onHandle","pushDebugState","onRefresh","logError","onRemove","detachEmiitedEvents","removeFromDebug","CuiHandler","onInit","onUpdate","onDestroy","performActions","onEvent","openFromEvent","closeFromEvent","openAct","closeAct","detachEvent","checkLockAndWarn","isActive","escClose","keyClose","onKeyClose","onBeforeOpen","performAction","onActionFinish","onAfterOpen","setClass","setAria","onBeforeClose","onAfterClose","removeClass","open","emitEvent","timestamp","state","key","records","reduce","added","removed","_defTitleSelector","_defItemsSelector","_defTimeout","_prefix","_items","_targets","_switchEventId","animation","selector","items","CuiAccordionComponent","isValid","initTargets","onSwitch","index","queryItems","hasClass","removeClassesAs","closeAllExcept","setClassesAs","currentTarget","switch","t","setListener","listener","_unit","rtl","abs","progress","factor","createValue","props","cur","diff","buildSingle","build","_onFinishCallback","_animators","_lock","_animStartStamp","_cleanOnFinish","_errorOccured","_factory_1","_onError_1","_animators_1","_animationEngine","_factory_2","_onError_2","cleanOnFinish","animators","animator","reportError","revert","animationProgress","shouldCalcRevert","requestAnimationFrame","animateAsync","initialProgress","pr","currProgress","callUpdate","endAnimation","reverted","perform","shouldCleanOnFinish","setOnError","update","setElement","setAnimators","animate","_prefix_1","_swipeEngine","_isTracking","_startX","_ratio","_swipeAnimation","_moveEventId","swipe","CuiBanerComponent","setOnFinish","onSwipeFinish","onMove","absRatio","back","finish","newRatio","offsetWidth","setProps","_scale","_appender","svgString","scale","created","toString","_factor","_full","_path","_attr","_progressEventId","iconSvg","svg","querySelector","appendChild","getTotalLength","readStyle","onSetProgress","strokeDashoffset","updateStyle","_eventId","prevent","CuiCloseComponent","onClick","onClose","getTarget","run","catch","finally","cuiId","removeActiveClass","removeActiveClassAsync","shouldEmit","emitClose","_bodyClass","_scrollY","defTimeout","CuiCoverComponent","isAnyActive","pageYOffset","top","scrollTo","_prefix_2","_windowClickEventId","outClose","CuiDialogComponent","onWindowClick","container","_callback","_inProgress","_isHovering","_onOverBound","_onMoveBound","_onOutBound","onMouseOut","onMouseOver","mouseEvent","force","invoke","isHovering","_box","_targetWidth","_targetHeight","_margin","box","targetBox","getTopPosition","getBottomPosition","getMiddlePosition","getLeftPosition","getRightPosition","getCenterPosition","initial","innerHeight","number","getVerticalPosition","innerWidth","getHorizontalPosition","throwIfNotValid","method","validate","_static","_preferred","_evaluator","evaluator","setMargin","position","elementBox","setElementBox","setTarget","vertical","horizontal","outVNum","outVPos","getAutoVerticalPosition","outHNum","outHPos","getAutoHorizontalPosition","_taskId","_autoRenew","autoRenew","canRun","stop","clearTimeout","_defOpenAct","_triggerHoverListener","_hoverListener","_trigger","_positionCalculator","_posClass","_autoTask","_actions","mode","trigger","autoClose","pos","CuiDropComponenet","setCallback","onElementHover","onTriggerClick","setPreferred","acquireTrigger","setTriggerEvent","setStatic","isAttached","findAndCloseOpenedDrop","onOpen","toggleActions","calculate","attach","runAutoCloseTask","opened","onHoverEvent","toggle","BasePositionCalculator","diffX","diffY","BaseResizeCalculator","offsetLeft","_isMoving","_isResizing","_prevX","_prevY","_moveListener","_resizeCalculator","_resizeBtn","_moveBtn","CuiFloatComponent","move","resize","peform","newWidth","newHeight","fitsWindow","newX","newY","offsetHeight","_currentIcon","icon","CuiIconComponent","addIcon","iconStr","setScale","childNodes","insertBefore","iconElement","firstChild","_root","_threshold","CuiIntersectionObserver","threshold","IntersectionObserver","rootMargin","offset","isRoot","parseFloat","CuiIntersectionComponent","parseArguments","onIntersection","connect","entries","entry","isIntersecting","intersectionRatio","addActions","removeActions","emitIntersection","getDefaultOpenClass","getDefaultCloseClass","CuiOffCanvasComponent","setPositionLeft","scrollY","CuiElementBoxFactory","Window","WindowElementBox","HTMLElement","HTMLElementBox","ElementBox","scrollHeight","scrollWidth","scrollTop","scrollLeft","pageXOffset","_task","_listener","onScrollFinish","source","getScrollLeft","getScrollTop","passedThreshold","scrolling","_pointLeft","_pointTop","_prevDiffY","_prevDiffX","_wasTriggeredX","_wasTriggeredY","CuiOffsetStaticMode","offsetX","offsetY","CuiOffsetDynamicMode","fitsOffsetY","fitsOffsetX","_matched","_action","_modeHandler","CuiOffsetComponent","onScroll","checkAndPerformActions","getRoot","matchesOffset","act","callEvent","calcaRatio","exceededThreshold","ratioX","ratioY","ratY","clientHeight","toFixed","ratX","clientWidth","CuiOpenComponent","activateTarget","setActiveClass","setActiveClassAsync","emitOpen","_intersectionObserver","_currentSize","_currentValue","_lastValue","_currentAction","_isIntersecting","_timeoutToken","default","small","medium","large","xlarge","delay","_d","s","m","l","xl","CuiResizeComponent","documentElement","isInViewport","setNewValue","updateElement","newValue","isSmartMode","getSmartValue","getValue","newAction","rect","bottom","_parent","_onClickBound","behavior","setTargets","by","scrollBy","_scrollListener","_children","options","setThreshold","isInProgress","prepareCallbackResult","currentTop","currentBottom","childBottom","ratio","currentLeft","currentRight","childRight","parentBottom","getHeight","parentRight","getWidth","verticalRatio","calcChildVerticalRatio","horizontalRatio","calcChildHorizontalRatio","CuiScrollSpyModeHandlerFactory","elements","forEachAction","links","linksActions","getMatching","len","last","changed","lastElement","intersecting","_links","_linkActions","_rootBox","link","linkAction","CuiScrollspyComponent","updateAttributes","updateResult","targets","queryAll","setChildren","setParent","_elements","_count","found","isInBounds","_moveHandler","_onDragStart","_onDragOver","_onDragEnd","_timeoutId","cancelTimeout","_dragHandler","_triggers","_currentTarget","_currentIdx","_preview","_movingCls","_detector","_currentBefore","_animation","_previewCls","CuiSortableComponent","sutils","onDragStart","onDragOver","onDragEnd","stopMovementPrep","getTargetsAndTrggers","setLongPressTimeout","setElements","getPressedElementIdx","startMovementPrep","getFinishAnimation","findIndex","createPreview","setPreviewPosition","setCurrentPosition","removePreview","detected","detect","insertElement","destination","_pauseEventId","_animationPauseClass","spinner","onPause","removeIfAnyExisists","svgIcon","addSpinner","existing","_swipeRatio","_nextIdx","_nextElement","_ratioThreshold","_currSlider","_nextSlider","_animationDef","_targetsCount","autoTimeout","loop","CuiSliderComponent","onAnimationFinish","onPushSwitch","getTargets","getLinks","getActiveIndex","setLinkActive","setStyle","getElementHeight","startTask","record","nextIdx","adjustMoveRatio","errorOccured","_switches","_actionsIn","_actionsOut","in","CuiSwitchComponent","getSwitches","setSwitchesActive","nextItem","performSwitchAction","switches","sw","emitLinkSwitch","_targetId","_isList","_listeners","CuiSwitcherComponent","onClickEvent","setEvents","removeEvents","list","onListItemClick","_toggleEventId","CuiToggleComponent","_defAct","_tooltip","_tooltipDataCls","CuiTooltipComponent","onHover","getDataFromArgs","removeTooltip","createTooltip","textContent","maxWidth","toolbox","GetComponents","_bus","_boundClick","description","_keys","_singleEmit","_onKeyDownBound","_onKeyUpBound","singleEmit","keys","onKeyDown","onKeyUp","code","_keysObserver","keySetup","_mediaQuery","_isInitialized","_onEventBound","CuiMediaQueryListener","mediaQuery","autoLightInit","autoLight","onChange","autoLightSetup","autoPrintInit","autoPrint","setPrintMode","_red","_green","_blue","_alpha","_colorStr","_colorStr_1","red","green","blue","alpha","colorStr","parser","res","amount","shade","percent","self","shadeSingle","newVal","round","alphaHex","_set","_setter","_setter_1","_set_1","baseColorSets","background","themeColors","shadeDark","CuiBaseColorsSetter","colorSet","setter","color","setColor","colors","toCssString","setProperties","CuiThemeColorsSetter","lighten","darken","setBaseUnitValue","setAnimationTimeLong","setAnimationTimeShort","setCSSVariable","strVal","onCssChange","accentSetter","isArgNumber","setBaseFontSize","setBaseLineHeight","setAnimationTime","setBaseMargin","setBasePadding","setBaseBorderRadius","setComponentSpace","setScrollbarWidth","setAccordionIcon","setAppBackgroundColor","create","setDarkAppBackgroundColor","isArgColor","getBaseColorSetter","palette","setBackgroundColor","setBaseColor","setMutedColor","setActiveColor","getAccentColorSetter","setAutoColors","setShadeColor","setShadeDarkColor","pallete","getBaseColorsSetter","getDarkBaseColorsSetter","getAccentThemeColorsSetter","getSecondaryThemeColorsSetter","getErrorThemeColorsSetter","getWarningThemeColorsSetter","getSuccessThemeColorsSetter","GetPlugins","_writes","_reads","_raf","_isScheduled","_limit","_reportCallback","FastDom","ctx","createTask","schedule","tasks","task","recursion","flush","rec","writes","reads","SyncInteractions","isRunning","raf","_values","throwOnEmptyKey","containsKey","indexOf","splice","_cache","_maxSize","maxSize","clean","clear","_executor","_executor_1","queue","isBusy","emitId","handleId","executor","events","idMatches","execute","promises","all","CuiCallbackExecutor","_events","_eventHandler","_events_1","_log_1","_buses","_last","emitHandler","cui","getCuid","callbacks","evId","evValue","sort","first","second","priority","initBusInstance","mapEvents","eventsDef","detachAll","isSubscribing","busName","handlerName","head","getElementsByTagName","createTextNode","_LIGHTEN_FACTOR","_DARKEN_FACTOR","setPropertyIn","baseColor","mutedColor","activeColor","propertyName","_promises","_prevYValue","_previousSize","_listenerBoundCall","resizeData","currentSize","pushUpdateToItems","_tool","tool","checkAndCall","_resizeObserver","initialSetup","fromInit","errorReport","fastDom","onError","onInteractionError","cache"],"mappings":"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","file":"vendors~index.min.js","sourcesContent":["import { ArgumentError, RegisterElementError } from \"../models/errors\";\r\nimport { COMPONENTS_COUNTER, CUID_ATTRIBUTE } from \"./statics\";\r\n/**\r\n * Checks if value is defined an is not null\r\n * Additionally with type check it can check value if it is not empty string or collection or object\r\n *\r\n * @param val - value\r\n * @param typecheck - default true - additional check whether value is not empty (string, collection, object)\r\n * @returns whether value passed all conditions\r\n */\r\nexport function is(val, typecheck = true) {\r\n    if (typeof val !== 'undefined' && val !== null) {\r\n        if (!typecheck) {\r\n            return true;\r\n        }\r\n        else {\r\n            return !isEmpty(val);\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Checks if value is empty string, array or object\r\n *\r\n *\r\n * @param val - value\r\n * @returns whether value passed all conditions\r\n */\r\nexport function isEmpty(val) {\r\n    if (typeof val === \"string\") {\r\n        return val.length === 0;\r\n    }\r\n    if (typeof val === \"boolean\") {\r\n        return val;\r\n    }\r\n    else if (Array.isArray(val)) {\r\n        return val.length === 0;\r\n    }\r\n    return false;\r\n}\r\nexport function getName(prefix, name) {\r\n    if (!is(prefix) || !is(name)) {\r\n        throw new ArgumentError(\"Missing argument value\");\r\n    }\r\n    return `${prefix}-${name}`;\r\n}\r\nexport function sleep(timeout) {\r\n    return new Promise(resolve => setTimeout(() => {\r\n        resolve(true);\r\n    }, timeout));\r\n}\r\n/**\r\n * Creates proper html element from given string\r\n * @param htmlString - string containing html\r\n */\r\nexport function createElementFromString(htmlString) {\r\n    if (!is(htmlString)) {\r\n        return null;\r\n    }\r\n    let template = document.createElement('template');\r\n    template.innerHTML = htmlString;\r\n    return template.content.children.length > 0 ? template.content.children[0] : null;\r\n}\r\nexport function getMatchingAttribute(element, attributes) {\r\n    let attr = null;\r\n    let len = attributes.length;\r\n    for (let i = 0; i < len; i++) {\r\n        let attribute = attributes[i];\r\n        if (element.hasAttribute(attribute)) {\r\n            attr = attribute;\r\n            break;\r\n        }\r\n    }\r\n    return attr;\r\n}\r\nexport function getMatchingAttributes(element, attributes) {\r\n    if (!element || !is(element.hasAttribute)) {\r\n        return [];\r\n    }\r\n    return attributes.filter(a => {\r\n        return element.hasAttribute(a);\r\n    });\r\n}\r\nexport function getRangeValue(value, min, max) {\r\n    if (value < min) {\r\n        return min;\r\n    }\r\n    else if (value > max) {\r\n        return max;\r\n    }\r\n    return value;\r\n}\r\nexport function getRangeValueOrDefault(value, min, max, def) {\r\n    if (value === null || typeof value === 'undefined' || isNaN(value)) {\r\n        return def;\r\n    }\r\n    return getRangeValue(value, min, max);\r\n}\r\nexport function increaseValue(value, amount) {\r\n    return amount < 0 || amount > 1 ? 0 : value + (value * amount);\r\n}\r\nexport function decreaseValue(value, amount) {\r\n    return amount < 0 || amount > 1 ? 0 : value - (value * amount);\r\n}\r\nexport function clone(object) {\r\n    if (!is(object)) {\r\n        return null;\r\n    }\r\n    return Object.assign({}, object);\r\n}\r\nexport function getSingleColorRatio(first, second, max) {\r\n    return Math.abs(((first - second) / max) * 100);\r\n}\r\n/**\r\n * Creates string containg css selector for array of attributes\r\n * @param attributes - attributes values\r\n */\r\nexport function joinAttributesForQuery(attributes) {\r\n    if (!is(attributes)) {\r\n        return \"\";\r\n    }\r\n    return `[${attributes.join('],[')}]`;\r\n}\r\n/**\r\n * Checks light system light mode\r\n * @returns Light Mode - dark/light\r\n */\r\nexport function getSystemLightMode() {\r\n    return window.matchMedia &&\r\n        window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\r\n}\r\n/**\r\n * Check print mode in the browser window\r\n * @returns true if window is displayed in print mode\r\n */\r\nexport function getSystemPrintMode() {\r\n    return window.matchMedia &&\r\n        window.matchMedia('print').matches;\r\n}\r\n/**\r\n * Verifies whether attributes exist and have some values\r\n * @param attributes attributes list\r\n */\r\nexport function are(...attributes) {\r\n    if (!is(attributes)) {\r\n        return false;\r\n    }\r\n    let c = attributes.length;\r\n    for (let i = 0; i < c; i++) {\r\n        if (!is(attributes[i])) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nexport function calcWindowSize(width) {\r\n    if (width <= 640) {\r\n        return 'small';\r\n    }\r\n    else if (width > 640 && width <= 960) {\r\n        return \"medium\";\r\n    }\r\n    else if (width > 960 && width <= 1200) {\r\n        return \"large\";\r\n    }\r\n    return 'xlarge';\r\n}\r\nexport function calcWindowSize2(width) {\r\n    let size = \"none\";\r\n    if (width >= 640) {\r\n        size = 'small';\r\n    }\r\n    if (width >= 960) {\r\n        size = \"medium\";\r\n    }\r\n    if (width >= 1200) {\r\n        size = \"large\";\r\n    }\r\n    if (width >= 1600) {\r\n        size = 'xlarge';\r\n    }\r\n    return size;\r\n}\r\n/**\r\n * Creates object from string.\r\n * Supported syntaxes are:\r\n * - JSON\r\n * - single value\r\n * - key:value,value;key=value\r\n *\r\n * @param attribute - attribute value\r\n */\r\nexport function parseAttributeString(attribute) {\r\n    let ret = {};\r\n    if (!is(attribute)) {\r\n        return ret;\r\n    }\r\n    //@ts-ignore - null already checked\r\n    ret = parseJsonString(attribute.trim());\r\n    if (!is(ret)) {\r\n        //@ts-ignore - null already checked\r\n        if (!attribute.includes(';') && !attribute.includes(':')) {\r\n            ret = attribute;\r\n        }\r\n        else {\r\n            ret = {};\r\n            //@ts-ignore - null already checked\r\n            attribute.split(';').forEach(val => {\r\n                let sp = splitColon(val);\r\n                //let sp = val.split(':')\r\n                let len = sp.length;\r\n                let tag = undefined;\r\n                let value = \"\";\r\n                if (len < 2) {\r\n                    return;\r\n                }\r\n                tag = sp[0].trim();\r\n                value = sp[1].trim();\r\n                if (tag)\r\n                    ret[tag] = value.replace('U+0003B', ';');\r\n            });\r\n        }\r\n    }\r\n    return ret;\r\n}\r\n/**\r\n * Creates object from JSON string\r\n* String must start with { and end with }\r\n *\r\n * @param attribute - attribute value\r\n * @returns object if string passes test, null otherwise\r\n */\r\nexport function parseJsonString(attribute) {\r\n    let out = null;\r\n    if (is(attribute) && attribute.startsWith('{') && attribute.endsWith('}')) {\r\n        try {\r\n            out = jsonify(attribute);\r\n        }\r\n        catch (e) {\r\n            console.error(prepLogString(\"An exception occured\", 'Functions', 'parseJsonString'), e);\r\n        }\r\n        return out;\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Creates object from JSON string\r\n * @param attribute - JSON string\r\n */\r\nexport function jsonify(attribute) {\r\n    return attribute && attribute.length > 0 ? JSON.parse(attribute) : {};\r\n}\r\nexport function getOffsetTop(element) {\r\n    if (!is(element)) {\r\n        return -1;\r\n    }\r\n    let val = element.offsetTop - parseInt(getStyleValue(element, 'margin-top')) - parseInt(getStyleValue(element, 'padding-top')) - parseInt(getStyleValue(element, 'border-top-width'));\r\n    return val < 0 ? element.offsetTop : val;\r\n}\r\nexport function getOffsetLeft(element) {\r\n    if (!is(element)) {\r\n        return -1;\r\n    }\r\n    let val = element.offsetLeft - parseInt(getStyleValue(element, 'margin-left')) - parseInt(getStyleValue(element, 'padding-left')) - parseInt(getStyleValue(element, 'border-left-width'));\r\n    return val < 0 ? element.offsetLeft : val;\r\n}\r\nexport function getIntOrDefault(value, def) {\r\n    let integer = parseInt(value);\r\n    return isNaN(integer) ? def : integer;\r\n}\r\nexport function getStyleValue(target, property) {\r\n    if (!is(target) || !is(property)) {\r\n        return null;\r\n    }\r\n    if (target.currentStyle) {\r\n        return target.currentStyle[property];\r\n    }\r\n    else if (window.getComputedStyle) {\r\n        return window.getComputedStyle(target, null).getPropertyValue(property);\r\n    }\r\n    return null;\r\n}\r\nexport function prepLogString(message, component, functionName) {\r\n    return `[${new Date().toLocaleString()}][${component !== null && component !== void 0 ? component : \"-\"}][${functionName !== null && functionName !== void 0 ? functionName : '-'}][${message}]`;\r\n}\r\nexport function isInRange(value, min, max) {\r\n    return is(value) && value >= min && value <= max;\r\n}\r\nexport function getActiveClass(prefix) {\r\n    return `${prefix !== null && prefix !== void 0 ? prefix : \"\"}-active`;\r\n}\r\nexport function parseAttribute(element, attribute) {\r\n    return are(element, attribute) ? parseAttributeString(element.getAttribute(attribute)) : null;\r\n}\r\n/**\r\n *  Checks whether string value contains synonym of true\r\n * @param value - string to check\r\n */\r\nexport function isStringTrue(value) {\r\n    return is(value) ? ['y', 't', 'true', 'yes'].includes(value.toLowerCase()) : false;\r\n}\r\nexport function boolStringOrDefault(prop, def) {\r\n    return is(prop) ? isStringTrue(prop) : def;\r\n}\r\nexport function getStringOrDefault(value, def) {\r\n    return is(value) ? value.toLowerCase() : def;\r\n}\r\n/**\r\n * Checks whether device supports touch\r\n */\r\nexport function isTouchSupported() {\r\n    return ('ontouchstart' in window) ||\r\n        (navigator.maxTouchPoints > 0) ||\r\n        (navigator.msMaxTouchPoints > 0);\r\n}\r\n/**\r\n * Checks whether value is type of string\r\n * @param {any} value - value to be checked\r\n */\r\nexport function isString(value) {\r\n    return typeof value === 'string';\r\n}\r\n/**\r\n * Replaces mask {prefix} with actual value in the string\r\n * @param {string} value - text containg a mask\r\n * @param {string} prefix - value to be put in place of mask\r\n */\r\nexport function replacePrefix(value, prefix) {\r\n    return !is(value) ? value : value.replace(\"{prefix}\", prefix !== null && prefix !== void 0 ? prefix : \"\");\r\n}\r\n/**\r\n * Generates identifier for Cui element\r\n *\r\n * @param element - Cui element selector\r\n * @returns generated identifier\r\n */\r\nexport function generateCUID(element) {\r\n    let starter = is(element) ? element : \"cui-element\";\r\n    return `${starter}-${COMPONENTS_COUNTER.next().value}`;\r\n}\r\n/**\r\n * Generates random string\r\n */\r\nexport function generateRandomString() {\r\n    let rand = getRandomInt(1, 1000);\r\n    let rand2 = getRandomInt(1, 100);\r\n    return `${Math.floor(Math.random() * rand2)}-${Math.floor(rand)}`;\r\n}\r\n/**\r\n * Generates random integer\r\n * @param min - min number\r\n * @param max - max number\r\n * @returns random integer\r\n */\r\nexport function getRandomInt(min, max) {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n/**\r\n * Registers Element as Cui element, initializes handlers, sets component style to document header and sets $cuid\r\n * @param {any} node - document node\r\n * @param {ICuiComponent[]} components -supported components array\r\n * @param {string[]} attributes - supported attributes array\r\n * @param {CuiUtils} utils - Cui Utils instance\r\n */\r\nexport function registerCuiElement(node, components, attributes, utils) {\r\n    let element = node;\r\n    element.$handlers = {};\r\n    let matching = getMatchingAttributes(node, attributes);\r\n    if (is(matching)) {\r\n        element.$cuid = node.hasAttribute(CUID_ATTRIBUTE) ? node.getAttribute(CUID_ATTRIBUTE) : generateCUID(node.tagName);\r\n        node.setAttribute(CUID_ATTRIBUTE, element.$cuid);\r\n        matching.forEach(match => {\r\n            let component = components.find(c => { return c.attribute === match; });\r\n            if (!is(component)) {\r\n                return;\r\n            }\r\n            try {\r\n                //@ts-ignore - component already checked agains undefined\r\n                utils.styleAppender.append(component.getStyle());\r\n                //@ts-ignore - component already checked agains undefined\r\n                let handler = component.get(node, utils);\r\n                //@ts-ignore - component already checked agains undefined\r\n                element.$handlers[component.attribute] = handler;\r\n                //@ts-ignore - component already checked agains undefined\r\n                element.$handlers[component.attribute].handle(parseAttribute(node, component.attribute));\r\n            }\r\n            catch (e) {\r\n                let attr = matching ? matching.join(\", \") : \"\";\r\n                throw new RegisterElementError(`An error occured during [${attr}] initialization: ${e.message}`);\r\n            }\r\n        });\r\n    }\r\n}\r\nexport function addCuiArgument(element, cuiArg, args) {\r\n    if (!are(cuiArg, args, element)) {\r\n        return false;\r\n    }\r\n    if (element.hasAttribute(cuiArg)) {\r\n        return false;\r\n    }\r\n    let argArr = [];\r\n    enumerateObject(args, (arg, value) => {\r\n        argArr.push(`${arg}: ${value}`);\r\n    });\r\n    element.setAttribute(cuiArg, argArr.join(\"; \"));\r\n    return true;\r\n}\r\nexport function* counter() {\r\n    let idx = 0;\r\n    while (true) {\r\n        let reset = yield idx++;\r\n        if (reset || idx > 200000) {\r\n            idx = 0;\r\n        }\r\n    }\r\n}\r\nexport function getHandlerExtendingOrNull(target, fName) {\r\n    if (!is(target.$handlers)) {\r\n        return null;\r\n    }\r\n    for (let handler in target.$handlers) {\r\n        if (target.$handlers.hasOwnProperty(handler)) {\r\n            let h = target.$handlers[handler];\r\n            if (hasFunction(h, fName))\r\n                return h;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Checks whether property exists on the object and it is a function\r\n * @param obj - object\r\n * @param fName - property name\r\n */\r\nexport function hasFunction(obj, fName) {\r\n    return is(obj[fName]) && typeof obj[fName] === 'function';\r\n}\r\n/**\r\n * Gets closest parent element which is a cUI element\r\n * @param element\r\n */\r\nexport function getParentCuiElement(element) {\r\n    if (!is(element)) {\r\n        return undefined;\r\n    }\r\n    let parent = element.parentElement;\r\n    return is(parent) && is(parent.$cuid) ? parent : getParentCuiElement(parent);\r\n}\r\n/**\r\n * Calculates element height by calculating childerns heights\r\n * @param element\r\n */\r\nexport function getChildrenHeight(element) {\r\n    let height = 0;\r\n    if (!element) {\r\n        return -1;\r\n    }\r\n    Array.from(element.children).forEach((child) => {\r\n        height += child.getBoundingClientRect().height;\r\n    });\r\n    return height > 0 ? height + 4 : height;\r\n}\r\nexport function enumerateObject(object, callback) {\r\n    if (!are(object, callback)) {\r\n        return;\r\n    }\r\n    for (let prop in object) {\r\n        if (object.hasOwnProperty(prop)) {\r\n            callback(prop, object[prop]);\r\n        }\r\n    }\r\n}\r\nexport function round(value, decimalPlaces) {\r\n    const multiplier = Math.pow(10, decimalPlaces);\r\n    return Math.floor(value) / multiplier;\r\n}\r\nexport function calculateNextIndex(val, currentIndex, totalLength) {\r\n    let idx = -1;\r\n    switch (val) {\r\n        case 'prev':\r\n            idx = currentIndex <= 0 ? totalLength - 1 : currentIndex - 1;\r\n            break;\r\n        case 'next':\r\n            idx = currentIndex < totalLength - 1 ? currentIndex + 1 : 0;\r\n            break;\r\n        case 'first':\r\n            idx = 0;\r\n            break;\r\n        case 'last':\r\n            idx = totalLength - 1;\r\n        default:\r\n            idx = getIntOrDefault(val, -1);\r\n            break;\r\n    }\r\n    return idx;\r\n}\r\nexport function getFirstMatching(array, callback) {\r\n    let count = array.length;\r\n    if (!array || count === 0) {\r\n        return undefined;\r\n    }\r\n    for (let idx = 0; idx < count; idx++) {\r\n        if (callback(array[idx], idx)) {\r\n            return array[idx];\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexport function mapObject(input, callback) {\r\n    return callback(input);\r\n}\r\nexport function mapObjectArray(input, callback) {\r\n    return input.map((item) => {\r\n        return mapObject(item, callback);\r\n    });\r\n}\r\n/**\r\n * Delays callback execution by specific time. Callback cannot be called again until previous execution finishes or was cancelled\r\n * @param callback - callback to execute\r\n * @param delayTime - time in ms that execution shall be delayed by\r\n * @returns Cancel callback\r\n */\r\nexport function delay(callback, delayTime) {\r\n    if (!are(callback, delayTime)) {\r\n        throw new Error(\"[delay]: Input arguments are not correct\");\r\n    }\r\n    let id = null;\r\n    return function (...args) {\r\n        if (id === null) {\r\n            id = setTimeout(() => {\r\n                callback(...args);\r\n                id = null;\r\n            }, delayTime);\r\n        }\r\n        return function () {\r\n            if (id !== null) {\r\n                clearTimeout(id);\r\n                id = null;\r\n            }\r\n        };\r\n    };\r\n}\r\nexport function splitColon(text) {\r\n    let ret = [];\r\n    if (!is(text)) {\r\n        return ret;\r\n    }\r\n    let split = text.split(\":\");\r\n    if (split.length === 1) {\r\n        return split;\r\n    }\r\n    let tag = split.shift();\r\n    // @ts-ignore tag is always defined\r\n    return [tag, split.join(\":\")];\r\n}\r\n","import { counter } from \"./functions\";\r\nexport const CUID_ATTRIBUTE = \"cuid\";\r\nexport const CLASSES = {\r\n    dark: 'dark',\r\n    animProgress: 'animation-progress',\r\n    print: 'print',\r\n    active: 'active',\r\n    swipingOn: \"swiping-on\",\r\n    selectionOff: \"selection-off\",\r\n};\r\nexport const ICONS = {\r\n    close: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M 1.9999999,1.9999999 18,18\\\"></path><path d=\\\"M 18,1.9999999 1.9999999,18\\\"></path></svg>\",\r\n    accordion: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M 5.0000475,7.4490018 10.000024,12.551028 15,7.4490018\\\"></path></svg>\",\r\n    special_menu: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path class=\\\"menu_handle_2\\\" d=\\\"M 1,10 H 19\\\"></path><path class=\\\"menu_handle_1\\\" d=\\\"M 1,4.8571429 H 19\\\"></path><path  class=\\\"menu_handle_3\\\" d=\\\"M 1,15.142857 H 19\\\"></path></svg>\",\r\n    special_fail: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"special-fail\\\" viewBox=\\\"0 0 100 100\\\" width=\\\"100\\\" height=\\\"100\\\"><path class=\\\"circle\\\" d=\\\"M 50,7.000001 A 43,43 0 0 1 92.999999,50 43,43 0 0 1 50,92.999999 43,43 0 0 1 7.0000011,50 43,43 0 0 1 50,7.000001 Z\\\"></path><path class=\\\"arm_1\\\" d=\\\"M 28.536809,28.536809 71.342023,71.342023\\\"></path><path class=\\\"arm_2\\\" d=\\\"M 71.342023,28.536809 28.536809,71.342023\\\"></path></svg>\",\r\n    special_success: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"special-success\\\" viewBox=\\\"0 0 100 100\\\" width=\\\"100\\\" height=\\\"100\\\"><path class=\\\"circle\\\" d=\\\"M 50,7 A 43,43 0 0 1 93,50 43,43 0 0 1 50,93 43,43 0 0 1 7,50 43,43 0 0 1 50,7 Z\\\"></path><path class=\\\"arm\\\" d=\\\"M 22.988405,48.234784 36.946233,72.410453 75.516456,33.84023\\\"></path></svg>\",\r\n};\r\nexport const COLORS = ['red', 'green', 'blue', 'alpha'];\r\nexport const CSS_APP_BACKGROUND_COLORS = {\r\n    light: '--cui-color-light-app-background',\r\n    dark: '--cui-color-dark-app-background'\r\n};\r\nexport const CSS_COMPONENT_BACKGROUND_COLORS = {\r\n    light: '--cui-color-light-background',\r\n    dark: '--cui-color-dark-background '\r\n};\r\nexport const CSS_COMPONENT_BORDER_COLORS = {\r\n    light: '--cui-color-light-border',\r\n    dark: '--cui-color-dark-border'\r\n};\r\nexport const CSS_THEMES = {\r\n    light: {\r\n        base: '--cui-color-light-base',\r\n        muted: '--cui-color-light-muted',\r\n        active: '--cui-color-light-active'\r\n    },\r\n    dark: {\r\n        base: '--cui-color-dark-base',\r\n        muted: '--cui-color-dark-muted',\r\n        active: '--cui-color-dark-active'\r\n    },\r\n    accent: {\r\n        base: '--cui-color-primary',\r\n        muted: '--cui-color-primary-muted',\r\n        active: '--cui-color-primary-active'\r\n    },\r\n    secondary: {\r\n        base: '--cui-color-secondary',\r\n        muted: '--cui-color-secondary-muted',\r\n        active: '--cui-color-secondary-active'\r\n    },\r\n    success: {\r\n        base: '--cui-color-success',\r\n        muted: '--cui-color-success-muted',\r\n        active: '--cui-color-success-active'\r\n    },\r\n    warning: {\r\n        base: '--cui-color-warning',\r\n        muted: '--cui-color-warning-muted',\r\n        active: '--cui-color-warning-active'\r\n    },\r\n    error: {\r\n        base: '--cui-color-error',\r\n        muted: '--cui-color-error-muted',\r\n        active: '--cui-color-error-active'\r\n    }\r\n};\r\nexport const SCOPE_SELECTOR = \":scope \";\r\nexport const CSS_VARIABLES = {\r\n    fontSize: \"--{prefix}-font-size\",\r\n    lineHeight: \"--{prefix}-line-height\",\r\n    animationTime: \"--{prefix}-animation-time\",\r\n    animationTimeLong: \"--{prefix}-animation-time-long\",\r\n    animationTimeShort: \"--{prefix}-animation-time-short\",\r\n    colorLightAppBackground: \"--{prefix}-color-light-app-background\",\r\n    colorLightBackground: \"--{prefix}-color-light-background\",\r\n    colorLightBorder: \"--{prefix}-color-light-border\",\r\n    colorLightBase: \"--{prefix}-color-light-base\",\r\n    colorLightActive: \"--{prefix}-color-light-active\",\r\n    colorLightMuted: \"--{prefix}-color-light-muted\",\r\n    colorDarkAppBackground: \"--{prefix}-color-dark-app-background\",\r\n    colorDarkBackground: \"--{prefix}-color-dark-background\",\r\n    colorDarkBorder: \"--{prefix}-color-dark-border\",\r\n    colorDarkBase: \"--{prefix}-color-dark-base\",\r\n    colorDarkActive: \"--{prefix}-color-dark-active\",\r\n    colorDarkMuted: \"--{prefix}-color-dark-muted\",\r\n    colorAccent: \"--{prefix}-color-primary\",\r\n    colorAccentActive: \"--{prefix}-color-primary-active\",\r\n    colorAccentMuted: \"--{prefix}-color-primary-muted\",\r\n    colorAccentShade: \"--{prefix}-color-primary-shade\",\r\n    colorAccentShadeDark: \"--{prefix}-color-primary-shade-dark\",\r\n    colorSecondary: \"--{prefix}-color-secondary\",\r\n    colorSecondaryActive: \"--{prefix}-color-secondary-active\",\r\n    colorSecondaryMuted: \"--{prefix}-color-secondary-muted\",\r\n    colorSecondaryShade: \"--{prefix}-color-secondary-shade\",\r\n    colorSecondaryShadeDark: \"--{prefix}-color-secondary-shade-dark\",\r\n    colorWarning: \"--{prefix}-color-warning\",\r\n    colorWarningActive: \"--{prefix}-color-warning-active\",\r\n    colorWarningMuted: \"--{prefix}-color-warning-muted\",\r\n    colorWarningShade: \"--{prefix}-color-warning-shade\",\r\n    colorWarningShadeDark: \"--{prefix}-color-warning-shade-dark\",\r\n    colorSuccess: \"--{prefix}-color-success\",\r\n    colorSuccessActive: \"--{prefix}-color-success-active\",\r\n    colorSuccessMuted: \"--{prefix}-color-success-muted\",\r\n    colorSuccessShade: \"--{prefix}-color-success-shade\",\r\n    colorSuccessShadeDark: \"--{prefix}-color-success-shade-dark\",\r\n    colorError: \"--{prefix}-color-error\",\r\n    colorErrorActive: \"--{prefix}-color-error-active\",\r\n    colorErrorMuted: \"--{prefix}-color-error-muted\",\r\n    colorErrorShade: \"--{prefix}-color-error-shade\",\r\n    colorErrorShadeDark: \"--{prefix}-color-error-shade-dark\",\r\n    inputBackground: \"--{prefix}-input-background-color\",\r\n    colorShade: \"--{prefix}-color-shade\",\r\n    colorShadeDarker: \"--{prefix}-color-shade-darker\",\r\n    colorShadeLight: \"--{prefix}-color-shade-light\",\r\n    colorShadeLighter: \"--{prefix}-color-shade-light-lighter\",\r\n    outline: \"--{prefix}-outline\",\r\n    borderRadius: \"--{prefix}-border-radius\",\r\n    padding: \"--{prefix}-padding\",\r\n    margin: \"--{prefix}-margin\",\r\n    scrollbarWidth: \"--{prefix}-scrollbar-width\",\r\n    componentSpace: \"--{prefix}-component-space\",\r\n    accordionIcon: \"--{prefix}-accordion-icon\"\r\n};\r\nexport class STATICS {\r\n}\r\nSTATICS.logLevel = 'none';\r\nSTATICS.prefix = 'cui';\r\nexport const EVENTS = {\r\n    INSTANCE_INITIALIZED: 'instance-initialized',\r\n    INSTANCE_FINISHED: 'instance-finished',\r\n    RESIZE: \"resize\",\r\n    OPEN: \"open\",\r\n    OPENED: \"opened\",\r\n    CLOSE: \"close\",\r\n    CLOSED: \"closed\",\r\n    TOGGLE: \"toggle\",\r\n    TOGGLED: 'toggled',\r\n    SWITCH: \"switch\",\r\n    SWITCHED: \"switched\",\r\n    ON_SCROLL: \"scroll\",\r\n    TARGET_CHANGE: 'targetchange',\r\n    INTERSECTION: 'intersection',\r\n    KEYDOWN: 'keydown',\r\n    SCROLLBY: 'scrollby',\r\n    WINDOW_CLICK: 'windowclick',\r\n    OFFSET: 'offset',\r\n    PROGRESS_CHANGE: \"progresschange\",\r\n    PROGRESS_CHANGED: \"progresschanged\",\r\n    CHANGE: \"change\",\r\n    CHANGED: \"changed\",\r\n    GLOBAL_MOVE: \"globalmove\",\r\n    MOVE_LOCK: \"movelock\",\r\n    PAUSE: \"pause\",\r\n    PAUSED: \"paused\",\r\n    SORTED: \"sorted\",\r\n    SORT_START: \"sortstart\"\r\n};\r\nexport const OBSERVABLE_SCROLL = \"SCROLL\";\r\nexport const OBSERVABLE_INTERSECTION = \"INTERSECTION\";\r\nexport const COMPONENTS_COUNTER = counter();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _class, _name, _attributeName, _attributeValue, _attributeName_1, _attributeValue_1;\r\nimport { is, are, splitColon } from \"./functions\";\r\nexport class CuiClassAction {\r\n    constructor(className) {\r\n        _class.set(this, void 0);\r\n        __classPrivateFieldSet(this, _class, className);\r\n    }\r\n    add(element, utils) {\r\n        if (are(element, __classPrivateFieldGet(this, _class)) && !element.classList.contains(__classPrivateFieldGet(this, _class))) {\r\n            element.classList.add(__classPrivateFieldGet(this, _class));\r\n        }\r\n    }\r\n    remove(element, utils) {\r\n        if (are(element, __classPrivateFieldGet(this, _class)) && element.classList.contains(__classPrivateFieldGet(this, _class))) {\r\n            element.classList.remove(__classPrivateFieldGet(this, _class));\r\n        }\r\n    }\r\n    toggle(element, utils) {\r\n        if (are(element, __classPrivateFieldGet(this, _class))) {\r\n            if (element.classList.contains(__classPrivateFieldGet(this, _class))) {\r\n                element.classList.remove(__classPrivateFieldGet(this, _class));\r\n            }\r\n            else {\r\n                element.classList.add(__classPrivateFieldGet(this, _class));\r\n            }\r\n        }\r\n    }\r\n}\r\n_class = new WeakMap();\r\nexport class CuiInboundAction {\r\n    constructor(name) {\r\n        _name.set(this, void 0);\r\n        __classPrivateFieldSet(this, _name, name);\r\n    }\r\n    add(element, utils) {\r\n        if (!utils) {\r\n            return;\r\n        }\r\n        switch (__classPrivateFieldGet(this, _name)) {\r\n            case 'dark-mode':\r\n                utils.setLightMode('dark');\r\n                break;\r\n            case 'light-mode':\r\n                utils.setLightMode('light');\r\n                break;\r\n        }\r\n    }\r\n    remove(element, utils) {\r\n        if (!utils) {\r\n            return;\r\n        }\r\n        switch (__classPrivateFieldGet(this, _name)) {\r\n            case 'dark-mode':\r\n                utils.setLightMode('light');\r\n                break;\r\n            case 'light-mode':\r\n                utils.setLightMode('dark');\r\n                break;\r\n        }\r\n    }\r\n    toggle(element, utils) {\r\n        if (!utils) {\r\n            return;\r\n        }\r\n        switch (__classPrivateFieldGet(this, _name)) {\r\n            case 'dark-mode':\r\n                this.setDarkMode(utils);\r\n                break;\r\n            case 'light-mode':\r\n                this.setDarkMode(utils);\r\n                break;\r\n        }\r\n    }\r\n    setDarkMode(utils) {\r\n        if (utils.getLightMode() === 'dark') {\r\n            utils.setLightMode('light');\r\n        }\r\n        else {\r\n            utils.setLightMode('dark');\r\n        }\r\n    }\r\n}\r\n_name = new WeakMap();\r\nexport class AttributeAction {\r\n    constructor(attribute) {\r\n        var _a, _b;\r\n        _attributeName.set(this, void 0);\r\n        _attributeValue.set(this, void 0);\r\n        _a = this, _b = this, [({ set value(_c) { __classPrivateFieldSet(_a, _attributeName, _c); } }).value, ({ set value(_c) { __classPrivateFieldSet(_b, _attributeValue, _c); } }).value] = splitColon(attribute); // attribute.split(',')\r\n    }\r\n    add(element, utils) {\r\n        if (!are(element, __classPrivateFieldGet(this, _attributeName), __classPrivateFieldGet(this, _attributeValue))) {\r\n            return;\r\n        }\r\n        element.setAttribute(__classPrivateFieldGet(this, _attributeName), __classPrivateFieldGet(this, _attributeValue));\r\n    }\r\n    remove(element, utils) {\r\n        if (!are(element, __classPrivateFieldGet(this, _attributeName), __classPrivateFieldGet(this, _attributeValue))) {\r\n            return;\r\n        }\r\n        if (element.hasAttribute(__classPrivateFieldGet(this, _attributeName))) {\r\n            element.removeAttribute(__classPrivateFieldGet(this, _attributeName));\r\n        }\r\n    }\r\n    toggle(element, utils) {\r\n        if (!are(element, __classPrivateFieldGet(this, _attributeName), __classPrivateFieldGet(this, _attributeValue))) {\r\n            return;\r\n        }\r\n        if (element.hasAttribute(__classPrivateFieldGet(this, _attributeName))) {\r\n            element.removeAttribute(__classPrivateFieldGet(this, _attributeName));\r\n        }\r\n        else {\r\n            element.setAttribute(__classPrivateFieldGet(this, _attributeName), __classPrivateFieldGet(this, _attributeValue));\r\n        }\r\n    }\r\n}\r\n_attributeName = new WeakMap(), _attributeValue = new WeakMap();\r\nexport class StyleAction {\r\n    constructor(attribute) {\r\n        var _a, _b;\r\n        _attributeName_1.set(this, void 0);\r\n        _attributeValue_1.set(this, void 0);\r\n        _a = this, _b = this, [({ set value(_c) { __classPrivateFieldSet(_a, _attributeName_1, _c); } }).value, ({ set value(_c) { __classPrivateFieldSet(_b, _attributeValue_1, _c); } }).value] = splitColon(attribute);\r\n    }\r\n    add(element, utils) {\r\n        if (!are(element, __classPrivateFieldGet(this, _attributeName_1), __classPrivateFieldGet(this, _attributeValue_1))) {\r\n            return;\r\n        }\r\n        let el = element;\r\n        if (el.style && !el.style[__classPrivateFieldGet(this, _attributeName_1)]) {\r\n            el.style[__classPrivateFieldGet(this, _attributeName_1)] = __classPrivateFieldGet(this, _attributeValue_1);\r\n        }\r\n    }\r\n    remove(element, utils) {\r\n        if (!are(element, __classPrivateFieldGet(this, _attributeName_1), __classPrivateFieldGet(this, _attributeValue_1))) {\r\n            return;\r\n        }\r\n        let el = element;\r\n        if (el.style && el.style[__classPrivateFieldGet(this, _attributeName_1)]) {\r\n            el.style[__classPrivateFieldGet(this, _attributeName_1)] = \"\";\r\n        }\r\n    }\r\n    toggle(element, utils) {\r\n        if (!are(element, __classPrivateFieldGet(this, _attributeName_1), __classPrivateFieldGet(this, _attributeValue_1))) {\r\n            return;\r\n        }\r\n        let el = element;\r\n        if (!el.style) {\r\n            return;\r\n        }\r\n        if (!el.style[__classPrivateFieldGet(this, _attributeName_1)]) {\r\n            el.style[__classPrivateFieldGet(this, _attributeName_1)] = __classPrivateFieldGet(this, _attributeValue_1);\r\n        }\r\n        else {\r\n            delete el.style[__classPrivateFieldGet(this, _attributeName_1)];\r\n        }\r\n    }\r\n}\r\n_attributeName_1 = new WeakMap(), _attributeValue_1 = new WeakMap();\r\nexport class DummyAction {\r\n    constructor() {\r\n    }\r\n    add(element, utils) {\r\n    }\r\n    remove(element, utils) {\r\n    }\r\n    toggle(element, utils) {\r\n    }\r\n}\r\nexport class CuiActionsFatory {\r\n    static get(value) {\r\n        if (!is(value)) {\r\n            return new DummyAction();\r\n        }\r\n        let indicator = value[0];\r\n        switch (indicator) {\r\n            case '.':\r\n                return new CuiClassAction(value.substring(1));\r\n            case '~':\r\n                return new CuiInboundAction(value.substring(1));\r\n            case \"&\":\r\n                return new AttributeAction(value.substring(1));\r\n            case \"^\":\r\n                return new StyleAction(value.substring(1));\r\n            default:\r\n                return new CuiClassAction(value);\r\n        }\r\n    }\r\n}\r\nexport class CuiActionsListFactory {\r\n    static get(value) {\r\n        if (!is(value)) {\r\n            return [];\r\n        }\r\n        const split = value.split(',');\r\n        return split.map(single => {\r\n            return CuiActionsFatory.get(single.trim());\r\n        });\r\n    }\r\n}\r\n","export class ErrorBase extends Error {\r\n    constructor(name, message) {\r\n        super(message);\r\n        Object.setPrototypeOf(this, new.target.prototype);\r\n        this.name = name;\r\n    }\r\n}\r\nexport class ItemNotFoundError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"ItemNotFoundError\", message);\r\n    }\r\n}\r\nexport class ArgumentError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"ArgumentError\", message);\r\n    }\r\n}\r\nexport class CuiBusError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"ArgumentError\", message);\r\n    }\r\n}\r\nexport class CuiInstanceInitError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"CuiInstanceInitError\", message);\r\n    }\r\n}\r\nexport class CuiScrollSpyOutOfRangeError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"CuiScrollSpyOutOfRangeError\", message);\r\n    }\r\n}\r\nexport class RegisterElementError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"RegisterElementError\", message);\r\n    }\r\n}\r\nexport class AnimatorError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"AnimatorError\", message);\r\n    }\r\n}\r\nexport class CSSVariableError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"CSSVariableError\", message);\r\n    }\r\n}\r\nexport class CuiColorError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"CuiColorError\", message);\r\n    }\r\n}\r\nexport class CuiPositionError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"CuiPositionError\", message);\r\n    }\r\n}\r\n","export class CuiLogger {\r\n    constructor(name, level) {\r\n        this.level = level;\r\n        this.component = name;\r\n        this.id = \"-\";\r\n    }\r\n    setLevel(level) {\r\n        this.level = level;\r\n    }\r\n    setId(id) {\r\n        this.id = id;\r\n    }\r\n    debug(message, functionName) {\r\n        if (this.level === 'debug') {\r\n            console.log(this.prepString(message, \"debug\", functionName));\r\n        }\r\n    }\r\n    error(message, functionName) {\r\n        if (this.level === 'error' || this.level === 'debug' || this.level === 'warning')\r\n            console.error(this.prepString(message, \"error\", functionName));\r\n    }\r\n    warning(message, functionName) {\r\n        if (this.level === 'warning' || this.level === 'debug')\r\n            console.warn(this.prepString(message, \"warning\", functionName));\r\n    }\r\n    exception(e, functionName) {\r\n        console.error(this.prepString(`An exception occured: ${e.name}: ${e.message}`, \"exception\", functionName));\r\n        if (this.level === 'debug')\r\n            console.error(e.stack);\r\n    }\r\n    performance(callback, functionName) {\r\n        if (this.level !== 'debug') {\r\n            return;\r\n        }\r\n        let start = Date.now();\r\n        callback();\r\n        console.log(this.prepString(`Performance measure: ${Date.now() - start}ms`, \"performance\", functionName));\r\n    }\r\n    prepString(message, level, functionName) {\r\n        return `[${new Date().toLocaleString()}][${level}][${this.component}][${functionName !== null && functionName !== void 0 ? functionName : '-'}][${this.id}][${message}]`;\r\n    }\r\n}\r\n","import { CuiLogger } from \"../utils/logger\";\r\nimport { STATICS } from \"../utils/statics\";\r\n/**\r\n *\r\n */\r\nexport class CuiLoggerFactory {\r\n    /**\r\n     * Gets new instance of component focused logger\r\n     * @param name - component name\r\n     */\r\n    static get(name, logLevel) {\r\n        return new CuiLogger(name, logLevel !== null && logLevel !== void 0 ? logLevel : STATICS.logLevel);\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _id, _classes, _attributes, _tag;\r\nimport { is, enumerateObject } from \"../utils/functions\";\r\nexport class ElementBuilder {\r\n    constructor(tag) {\r\n        _id.set(this, void 0);\r\n        _classes.set(this, void 0);\r\n        _attributes.set(this, void 0);\r\n        _tag.set(this, void 0);\r\n        __classPrivateFieldSet(this, _tag, tag);\r\n        __classPrivateFieldSet(this, _classes, []);\r\n        __classPrivateFieldSet(this, _attributes, undefined);\r\n        __classPrivateFieldSet(this, _id, undefined);\r\n    }\r\n    setId(id) {\r\n        __classPrivateFieldSet(this, _id, id);\r\n        return this;\r\n    }\r\n    setClasses(...classList) {\r\n        __classPrivateFieldSet(this, _classes, classList);\r\n        return this;\r\n    }\r\n    setAttributes(attributes) {\r\n        __classPrivateFieldSet(this, _attributes, attributes);\r\n        return this;\r\n    }\r\n    build(innerHTML) {\r\n        let element = document.createElement(__classPrivateFieldGet(this, _tag));\r\n        if (is(__classPrivateFieldGet(this, _id))) {\r\n            // @ts-ignore id is checked\r\n            element.id = __classPrivateFieldGet(this, _id);\r\n        }\r\n        if (is(__classPrivateFieldGet(this, _classes))) {\r\n            element.classList.add(...__classPrivateFieldGet(this, _classes));\r\n        }\r\n        if (is(__classPrivateFieldGet(this, _attributes))) {\r\n            // @ts-ignore attributes are checked\r\n            enumerateObject(__classPrivateFieldGet(this, _attributes), (attr, value) => {\r\n                element.setAttribute(attr, value);\r\n            });\r\n        }\r\n        if (is(innerHTML)) {\r\n            // @ts-ignore innerHTML checked already\r\n            element.innerHTML = innerHTML;\r\n        }\r\n        return element;\r\n    }\r\n}\r\n_id = new WeakMap(), _classes = new WeakMap(), _attributes = new WeakMap(), _tag = new WeakMap();\r\n","export const SWIPE_ANIMATIONS_DEFINITIONS = {\r\n    \"slide\": {\r\n        current: {\r\n            left: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 0,\r\n                        to: -100,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            },\r\n            right: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 0,\r\n                        to: 100,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        previous: {\r\n            left: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 100,\r\n                        to: 0,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            },\r\n            right: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: -100,\r\n                        to: 0,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    fade: {\r\n        current: {\r\n            left: {\r\n                opacity: {\r\n                    from: 1,\r\n                    to: 0\r\n                }\r\n            },\r\n            right: {\r\n                opacity: {\r\n                    from: 1,\r\n                    to: 0\r\n                }\r\n            }\r\n        },\r\n        previous: {\r\n            left: {\r\n                opacity: {\r\n                    from: 0,\r\n                    to: 1\r\n                }\r\n            },\r\n            right: {\r\n                opacity: {\r\n                    from: 0,\r\n                    to: 1\r\n                }\r\n            }\r\n        }\r\n    },\r\n    push: {\r\n        current: {\r\n            left: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 0,\r\n                        to: -10,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            },\r\n            right: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 0,\r\n                        to: 10,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        previous: {\r\n            left: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 100,\r\n                        to: 0,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            },\r\n            right: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: -100,\r\n                        to: 0,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _element, _onEvent, _isLocked, _isAttached, _preventDefault, _target;\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiMoveEventListener {\r\n    constructor(element) {\r\n        _element.set(this, void 0);\r\n        _onEvent.set(this, void 0);\r\n        _isLocked.set(this, void 0);\r\n        _isAttached.set(this, void 0);\r\n        _preventDefault.set(this, void 0);\r\n        _target.set(this, void 0);\r\n        __classPrivateFieldSet(this, _isLocked, false);\r\n        __classPrivateFieldSet(this, _element, element !== null && element !== void 0 ? element : document.body);\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n        __classPrivateFieldSet(this, _preventDefault, false);\r\n        __classPrivateFieldSet(this, _onEvent, undefined);\r\n        __classPrivateFieldSet(this, _target, undefined);\r\n        this.onMouseDown = this.onMouseDown.bind(this);\r\n        this.onMouseUp = this.onMouseUp.bind(this);\r\n        this.onMouseMove = this.onMouseMove.bind(this);\r\n        this.onTouchStart = this.onTouchStart.bind(this);\r\n        this.onTouchEnd = this.onTouchEnd.bind(this);\r\n        this.onTouchMove = this.onTouchMove.bind(this);\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _onEvent, callback);\r\n    }\r\n    setTarget(element) {\r\n        __classPrivateFieldSet(this, _target, element);\r\n    }\r\n    isInProgress() {\r\n        return __classPrivateFieldGet(this, _isLocked);\r\n    }\r\n    preventDefault(flag) {\r\n        __classPrivateFieldSet(this, _preventDefault, flag);\r\n    }\r\n    attach() {\r\n        if (__classPrivateFieldGet(this, _isAttached)) {\r\n            return;\r\n        }\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).addEventListener('mousedown', this.onMouseDown, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).addEventListener('mouseup', this.onMouseUp, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).addEventListener('mousemove', this.onMouseMove, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).addEventListener('touchstart', this.onTouchStart, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).addEventListener('touchend', this.onTouchEnd, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).addEventListener('touchmove', this.onTouchMove, { passive: false });\r\n        __classPrivateFieldSet(this, _isAttached, true);\r\n    }\r\n    detach() {\r\n        console.log(\"On detach\");\r\n        if (!__classPrivateFieldGet(this, _isAttached)) {\r\n            return;\r\n        }\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).removeEventListener('mousedown', this.onMouseDown, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).removeEventListener('mouseup', this.onMouseUp, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).removeEventListener('mousemove', this.onMouseMove, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).removeEventListener('touchstart', this.onTouchStart, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).removeEventListener('touchend', this.onTouchEnd, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).removeEventListener('touchmove', this.onTouchMove, { passive: false });\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n    }\r\n    isAttached() {\r\n        return __classPrivateFieldGet(this, _isAttached);\r\n    }\r\n    onMouseDown(ev) {\r\n        if (__classPrivateFieldGet(this, _isLocked)) {\r\n            return;\r\n        }\r\n        if (__classPrivateFieldGet(this, _target) && !__classPrivateFieldGet(this, _target).contains(ev.target)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _isLocked, true);\r\n        this.publishMouseEvent(\"down\", ev);\r\n    }\r\n    onMouseUp(ev) {\r\n        if (!__classPrivateFieldGet(this, _isLocked)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _isLocked, false);\r\n        this.publishMouseEvent(\"up\", ev);\r\n    }\r\n    onMouseMove(ev) {\r\n        if (__classPrivateFieldGet(this, _isLocked)) {\r\n            this.publishMouseEvent(\"move\", ev);\r\n        }\r\n    }\r\n    onTouchStart(ev) {\r\n        if (__classPrivateFieldGet(this, _isLocked)) {\r\n            return;\r\n        }\r\n        if (__classPrivateFieldGet(this, _target) && !__classPrivateFieldGet(this, _target).contains(ev.target)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _isLocked, true);\r\n        this.publishTouchEvent('down', ev);\r\n    }\r\n    onTouchEnd(ev) {\r\n        if (!__classPrivateFieldGet(this, _isLocked)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _isLocked, false);\r\n        this.publishTouchEvent('up', ev);\r\n    }\r\n    onTouchMove(ev) {\r\n        if (__classPrivateFieldGet(this, _isLocked)) {\r\n            this.publishTouchEvent('move', ev);\r\n        }\r\n    }\r\n    publishMouseEvent(type, ev) {\r\n        if (__classPrivateFieldGet(this, _preventDefault) && ev.cancelable) {\r\n            ev.preventDefault();\r\n        }\r\n        if (!is(__classPrivateFieldGet(this, _onEvent))) {\r\n            return;\r\n        }\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _onEvent).call(this, {\r\n            type: type,\r\n            x: ev.clientX,\r\n            y: ev.clientY,\r\n            moveX: ev.movementX,\r\n            moveY: ev.movementY,\r\n            target: ev.target,\r\n            event: ev\r\n        });\r\n    }\r\n    publishTouchEvent(type, ev) {\r\n        if (__classPrivateFieldGet(this, _preventDefault) && ev.cancelable)\r\n            ev.preventDefault();\r\n        if (!is(__classPrivateFieldGet(this, _onEvent))) {\r\n            return;\r\n        }\r\n        let touch = null;\r\n        if (ev.touches.length > 0) {\r\n            touch = ev.touches[0];\r\n        }\r\n        else if (ev.changedTouches.length > 0) {\r\n            touch = ev.changedTouches[0];\r\n        }\r\n        // @ts-ignore - already checked\r\n        __classPrivateFieldGet(this, _onEvent).call(this, {\r\n            event: ev,\r\n            type: type,\r\n            target: ev.target,\r\n            //@ts-ignore\r\n            x: is(touch) ? touch.clientX : -1,\r\n            //@ts-ignore\r\n            y: is(touch) ? touch.clientY : -1,\r\n            moveX: -1,\r\n            moveY: -1\r\n        });\r\n    }\r\n}\r\n_element = new WeakMap(), _onEvent = new WeakMap(), _isLocked = new WeakMap(), _isAttached = new WeakMap(), _preventDefault = new WeakMap(), _target = new WeakMap();\r\n","export class CuiSetup {\r\n    constructor() {\r\n        this.autoLightMode = false;\r\n        this.scrollThreshold = 20;\r\n        this.resizeThreshold = 20;\r\n        this.prefix = \"cui\";\r\n        this.plugins = {};\r\n    }\r\n    fromInit(init) {\r\n        var _a;\r\n        this.prefix = (_a = init.prefix) !== null && _a !== void 0 ? _a : \"cui\";\r\n        this.logLevel = init.logLevel;\r\n        this.cacheSize = init.cacheSize;\r\n        this.autoLightMode = init.autoLightMode;\r\n        this.animationTime = init.animationTime;\r\n        this.animationTimeShort = init.animationTimeShort;\r\n        this.animationTimeLong = init.animationTimeLong;\r\n        this.scrollThreshold = init.scrollThreshold;\r\n        this.resizeThreshold = init.resizeThreshold;\r\n        return this;\r\n    }\r\n}\r\nexport class CuiSetupInit {\r\n    constructor() {\r\n        this.prefix = 'cui';\r\n        this.app = '$cui';\r\n        this.logLevel = 'warning';\r\n        this.interaction = 'async';\r\n        this.animationTime = 300;\r\n        this.animationTimeShort = 150;\r\n        this.animationTimeLong = 500;\r\n        this.cacheSize = 500;\r\n        this.autoLightMode = false;\r\n        this.scrollThreshold = 20;\r\n        this.resizeThreshold = 20;\r\n        this.root = document.body;\r\n        this.busSetup = undefined;\r\n        this.development = undefined;\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _observer, _options, _element, _components, _attributes, _utils, _queryString, _isObserving, _observer_1, _element_1, _disabled, _options_1;\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\nimport { is, are, registerCuiElement, joinAttributesForQuery, parseAttribute } from \"../utils/functions\";\r\nexport class CuiMutationObserver {\r\n    constructor(element, utils) {\r\n        _observer.set(this, void 0);\r\n        _options.set(this, void 0);\r\n        _element.set(this, void 0);\r\n        _components.set(this, void 0);\r\n        _attributes.set(this, void 0);\r\n        _utils.set(this, void 0);\r\n        _queryString.set(this, void 0);\r\n        __classPrivateFieldSet(this, _observer, undefined);\r\n        this.plugins = undefined;\r\n        __classPrivateFieldSet(this, _options, undefined);\r\n        __classPrivateFieldSet(this, _element, element);\r\n        this._log = CuiLoggerFactory.get('CuiMutationObserver');\r\n        __classPrivateFieldSet(this, _components, []);\r\n        __classPrivateFieldSet(this, _attributes, []);\r\n        __classPrivateFieldSet(this, _utils, utils);\r\n        __classPrivateFieldSet(this, _queryString, \"\");\r\n    }\r\n    setPlugins(plugins) {\r\n        this.plugins = plugins;\r\n        return this;\r\n    }\r\n    setComponents(components) {\r\n        __classPrivateFieldSet(this, _components, components);\r\n        return this;\r\n    }\r\n    setAttributes(attributes) {\r\n        __classPrivateFieldSet(this, _options, {\r\n            attributes: true,\r\n            subtree: true,\r\n            childList: true,\r\n            attributeFilter: attributes\r\n        });\r\n        __classPrivateFieldSet(this, _attributes, attributes);\r\n        __classPrivateFieldSet(this, _queryString, joinAttributesForQuery(attributes));\r\n        return this;\r\n    }\r\n    start() {\r\n        this._log.debug(\"Starting\");\r\n        if (!__classPrivateFieldGet(this, _options)) {\r\n            this._log.error(\"Cannot start - options are not defined\");\r\n            return this;\r\n        }\r\n        __classPrivateFieldSet(this, _observer, new MutationObserver(this.mutationCallback.bind(this)));\r\n        __classPrivateFieldGet(this, _observer).observe(__classPrivateFieldGet(this, _element), __classPrivateFieldGet(this, _options));\r\n        this._log.debug(\"Started\");\r\n        return this;\r\n    }\r\n    stop() {\r\n        this._log.debug(\"Stopping\");\r\n        if (!__classPrivateFieldGet(this, _observer)) {\r\n            this._log.debug(\"Observer not available\");\r\n            return this;\r\n        }\r\n        __classPrivateFieldGet(this, _observer).disconnect();\r\n        __classPrivateFieldSet(this, _observer, undefined);\r\n        this._log.debug(\"Stopped\");\r\n        return this;\r\n    }\r\n    mutationCallback(mutations, observer) {\r\n        mutations.forEach((mutation) => {\r\n            switch (mutation.type) {\r\n                case 'attributes':\r\n                    const item = mutation.target;\r\n                    if (are(mutation.attributeName, item)) {\r\n                        // @ts-ignore - attribute name is checked\r\n                        if (are(item.$handlers, item.$handlers[mutation.attributeName])) {\r\n                            // @ts-ignore - attribute name is checked\r\n                            item.$handlers[mutation.attributeName].refresh(parseAttribute(item, mutation.attributeName));\r\n                        }\r\n                    }\r\n                    else {\r\n                        this._log.error(\"Mutation attribute doesn't not exisist\");\r\n                    }\r\n                    break;\r\n                case 'childList':\r\n                    this.handleChildListMutation(mutation);\r\n                    break;\r\n            }\r\n            if (is(this.plugins)) {\r\n                // @ts-ignore plugins is defined here\r\n                this.plugins.onMutation(mutation).then(() => {\r\n                    //\r\n                });\r\n            }\r\n        });\r\n    }\r\n    handleChildListMutation(mutation) {\r\n        const addedLen = mutation.addedNodes.length;\r\n        const removedLen = mutation.removedNodes.length;\r\n        if (addedLen > 0) {\r\n            this._log.debug(\"Registering added nodes: \" + addedLen);\r\n            this.handleAddedNodes(mutation.addedNodes);\r\n        }\r\n        else if (removedLen > 0) {\r\n            this._log.debug(\"Removing nodes: \" + removedLen);\r\n            this.handleRemovedNodes(mutation.removedNodes);\r\n        }\r\n    }\r\n    handleAddedNodes(nodes) {\r\n        nodes.forEach((node) => {\r\n            try {\r\n                registerCuiElement(node, __classPrivateFieldGet(this, _components), __classPrivateFieldGet(this, _attributes), __classPrivateFieldGet(this, _utils));\r\n                let childrens = node.hasChildNodes() ? node.querySelectorAll(__classPrivateFieldGet(this, _queryString)) : null;\r\n                if (is(childrens)) {\r\n                    childrens.forEach((child) => {\r\n                        registerCuiElement(child, __classPrivateFieldGet(this, _components), __classPrivateFieldGet(this, _attributes), __classPrivateFieldGet(this, _utils));\r\n                    });\r\n                }\r\n            }\r\n            catch (e) {\r\n                this._log.exception(e);\r\n            }\r\n        });\r\n    }\r\n    handleRemovedNodes(nodes) {\r\n        nodes.forEach((node) => {\r\n            this.destroySingleElement(node);\r\n            let childrens = node.hasChildNodes() ? node.querySelectorAll(__classPrivateFieldGet(this, _queryString)) : null;\r\n            if (is(childrens)) {\r\n                childrens.forEach((child) => {\r\n                    this.destroySingleElement(child);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    destroySingleElement(node) {\r\n        let element = node;\r\n        if (element.$handlers) {\r\n            for (let name in element.$handlers) {\r\n                if (element.$handlers.hasOwnProperty(name)) {\r\n                    try {\r\n                        element.$handlers[name].destroy();\r\n                    }\r\n                    catch (e) {\r\n                        this._log.exception(e, 'remove - ' + name);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n_observer = new WeakMap(), _options = new WeakMap(), _element = new WeakMap(), _components = new WeakMap(), _attributes = new WeakMap(), _utils = new WeakMap(), _queryString = new WeakMap();\r\nexport class CuiComponentMutationHandler {\r\n    constructor(target) {\r\n        _isObserving.set(this, void 0);\r\n        _observer_1.set(this, void 0);\r\n        _element_1.set(this, void 0);\r\n        _disabled.set(this, void 0);\r\n        _options_1.set(this, {\r\n            childList: true,\r\n            subtree: true\r\n        });\r\n        __classPrivateFieldSet(this, _observer_1, undefined);\r\n        __classPrivateFieldSet(this, _disabled, false);\r\n        __classPrivateFieldSet(this, _isObserving, false);\r\n        __classPrivateFieldSet(this, _element_1, target);\r\n    }\r\n    observe() {\r\n        if (!__classPrivateFieldGet(this, _isObserving) && !__classPrivateFieldGet(this, _disabled) && __classPrivateFieldGet(this, _observer_1)) {\r\n            __classPrivateFieldGet(this, _observer_1).observe(__classPrivateFieldGet(this, _element_1), __classPrivateFieldGet(this, _options_1));\r\n            __classPrivateFieldSet(this, _isObserving, true);\r\n        }\r\n    }\r\n    unobserve() {\r\n        if (__classPrivateFieldGet(this, _isObserving) && __classPrivateFieldGet(this, _observer_1)) {\r\n            __classPrivateFieldGet(this, _observer_1).disconnect();\r\n            __classPrivateFieldSet(this, _isObserving, false);\r\n        }\r\n    }\r\n    isObserving() {\r\n        return __classPrivateFieldGet(this, _isObserving);\r\n    }\r\n    disable(flag) {\r\n        __classPrivateFieldSet(this, _disabled, flag);\r\n        if (__classPrivateFieldGet(this, _disabled)) {\r\n            this.unobserve();\r\n        }\r\n    }\r\n    onMutation(callback) {\r\n        if (__classPrivateFieldGet(this, _isObserving))\r\n            this.unobserve();\r\n        __classPrivateFieldSet(this, _observer_1, new MutationObserver(callback));\r\n    }\r\n}\r\n_isObserving = new WeakMap(), _observer_1 = new WeakMap(), _element_1 = new WeakMap(), _disabled = new WeakMap(), _options_1 = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _interactions;\r\nimport { CLASSES } from \"../utils/statics\";\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiActionsHelper {\r\n    constructor(interactions) {\r\n        _interactions.set(this, void 0);\r\n        __classPrivateFieldSet(this, _interactions, interactions);\r\n    }\r\n    performAction(target, action, timeout, callback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise((resolve) => {\r\n                __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                    action.add(target);\r\n                    target.classList.add(CLASSES.animProgress);\r\n                    setTimeout(() => {\r\n                        __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                            action.remove(target);\r\n                            target.classList.remove(CLASSES.animProgress);\r\n                            if (callback)\r\n                                callback();\r\n                            resolve(true);\r\n                        }, null);\r\n                    }, timeout);\r\n                }, null);\r\n            });\r\n        });\r\n    }\r\n    performActions(target, actions, timeout, callback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise((resolve) => {\r\n                __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                    actions.forEach(x => x.add(target));\r\n                    target.classList.add(CLASSES.animProgress);\r\n                    setTimeout(() => {\r\n                        __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                            actions.forEach(x => x.remove(target));\r\n                            target.classList.remove(CLASSES.animProgress);\r\n                            if (callback)\r\n                                callback();\r\n                            resolve(true);\r\n                        }, null);\r\n                    }, timeout);\r\n                }, null);\r\n            });\r\n        });\r\n    }\r\n    performSwitchAction(inTarget, outTarget, inAction, outAction, onFinish, timeout) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise((resolve) => {\r\n                __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                    inAction.forEach(x => x.add(inTarget));\r\n                    inTarget.classList.add(CLASSES.animProgress);\r\n                    if (is(outTarget)) {\r\n                        //@ts-ignore\r\n                        outAction.forEach(x => x.add(outTarget));\r\n                        //@ts-ignore\r\n                        outTarget.classList.add(CLASSES.animProgress);\r\n                    }\r\n                    setTimeout(() => {\r\n                        __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                            inAction.forEach(x => x.remove(inTarget));\r\n                            inTarget.classList.remove(CLASSES.animProgress);\r\n                            if (is(outTarget)) {\r\n                                //@ts-ignore\r\n                                outAction.forEach(x => x.remove(outTarget));\r\n                                //@ts-ignore\r\n                                outTarget.classList.remove(CLASSES.animProgress);\r\n                            }\r\n                            onFinish();\r\n                            resolve(true);\r\n                        }, null);\r\n                    }, timeout);\r\n                }, null);\r\n            });\r\n        });\r\n    }\r\n}\r\n_interactions = new WeakMap();\r\n","export const CUI_LIGHT_COMPONENTS_VERSION = \"0.2.7\";\r\n","export const CUI_LIGHT_PLUGINS_VERSION = \"0.2.6\";\r\n","export const CUI_CORE_VERSION = \"0.2.8\";\r\n","export class AriaAttributes {\r\n    static setLabel(element, label) {\r\n        if (!element.hasAttribute('aria-label')) {\r\n            element.setAttribute('aria-label', label);\r\n        }\r\n    }\r\n    static setAria(element, attr, value) {\r\n        if (!element.hasAttribute(attr)) {\r\n            element.setAttribute(attr, value);\r\n        }\r\n    }\r\n    static removeAria(element, attr) {\r\n        if (element.hasAttribute(attr)) {\r\n            element.removeAttribute(attr);\r\n        }\r\n    }\r\n}\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _interactions, _emittedEvents, _attribute, _openEventId, _closeEventId, _keyCloseEventId, _openAct, _closeAct, _mutionHandler;\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\nimport { CuiComponentMutationHandler } from \"../observers/mutations\";\r\nimport { AriaAttributes } from \"../utils/aria\";\r\nimport { CuiActionsHelper } from \"../helpers/helpers\";\r\nimport { CuiActionsListFactory } from \"../utils/actions\";\r\nimport { is, getActiveClass, clone } from \"../utils/functions\";\r\nimport { EVENTS } from \"../utils/statics\";\r\nexport class ComponentHelper {\r\n    constructor(interactions) {\r\n        _interactions.set(this, void 0);\r\n        __classPrivateFieldSet(this, _interactions, interactions);\r\n    }\r\n    hasClass(cls, element) {\r\n        return cls && element.classList.contains(cls) ? true : false;\r\n    }\r\n    setClass(cls, element) {\r\n        this.setClasses([cls], element);\r\n    }\r\n    setClasses(classes, element) {\r\n        if (element) {\r\n            element.classList.add(...classes);\r\n        }\r\n    }\r\n    setClassesAs(element, ...classes) {\r\n        __classPrivateFieldGet(this, _interactions).mutate(this.setClasses, this, classes, element);\r\n    }\r\n    removeClass(cls, element) {\r\n        this.removeClasses([cls], element);\r\n    }\r\n    removeClasses(classes, element) {\r\n        if (element) {\r\n            element.classList.remove(...classes);\r\n        }\r\n    }\r\n    removeClassesAs(element, ...classes) {\r\n        __classPrivateFieldGet(this, _interactions).mutate(this.removeClasses, this, classes, element);\r\n    }\r\n    removeAttribute(attributeName, element) {\r\n        if (element && element.hasAttribute(attributeName))\r\n            element.removeAttribute(attributeName);\r\n    }\r\n    setStyle(element, property, value) {\r\n        if (element && element[\"style\"] && is(value)) {\r\n            element.style[property] = value;\r\n        }\r\n    }\r\n}\r\n_interactions = new WeakMap();\r\nexport class CuiComponentBase {\r\n    constructor(componentName, element, utils) {\r\n        _emittedEvents.set(this, void 0);\r\n        this._log = CuiLoggerFactory.get(componentName);\r\n        this.utils = utils;\r\n        this.element = element;\r\n        this.cuid = element.$cuid;\r\n        this.isLocked = false;\r\n        this._log.setId(this.cuid);\r\n        this.activeClassName = getActiveClass(utils.setup.prefix);\r\n        this.helper = new ComponentHelper(utils.interactions);\r\n        __classPrivateFieldSet(this, _emittedEvents, []);\r\n        this.componentName = componentName;\r\n    }\r\n    mutate(callback, ...args) {\r\n        this.utils.interactions.mutate(callback, this, ...args);\r\n    }\r\n    fetch(callback, ...args) {\r\n        this.utils.interactions.fetch(callback, this, ...args);\r\n    }\r\n    getEventName(name) {\r\n        return [name, this.cuid].join('-');\r\n    }\r\n    /**\r\n     * Emits event using passed data and cuid of the element\r\n     * NOTE: Don't use it to emit global events\r\n     * @param event Event name\r\n     * @param data Data to emit\r\n     */\r\n    emitEvent(event, ...data) {\r\n        if (!__classPrivateFieldGet(this, _emittedEvents).includes(event))\r\n            __classPrivateFieldGet(this, _emittedEvents).push(event);\r\n        this.utils.bus.emit(event, this.cuid, ...data);\r\n    }\r\n    onEvent(event, callback) {\r\n        return this.utils.bus.on(event, callback, this.element);\r\n    }\r\n    detachEvent(event, id) {\r\n        if (id != null) {\r\n            this.utils.bus.detach(event, id);\r\n            id = \"\";\r\n        }\r\n    }\r\n    getId() {\r\n        return this.cuid;\r\n    }\r\n    checkLockAndWarn(fName) {\r\n        if (this.isLocked) {\r\n            this._log.warning(\"Component is locked\", fName);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Helper which checks whether element has an active flag set\r\n     */\r\n    isActive() {\r\n        return this.element.classList.contains(this.activeClassName);\r\n    }\r\n    detachEmiitedEvents() {\r\n        __classPrivateFieldGet(this, _emittedEvents).forEach(event => {\r\n            this.utils.bus.detachByCuid(event, this.cuid);\r\n            this._log.debug(\"Detaching event: \" + event + \" on component delete\");\r\n        });\r\n    }\r\n    registerInDebug() {\r\n        this.utils.development.registerElement(this.element, this.cuid, this.componentName);\r\n    }\r\n    removeFromDebug() {\r\n        this.utils.development.unregisterElement(this.cuid, this.componentName);\r\n    }\r\n    setDebugProperty(name, value) {\r\n        this.utils.development.setProperty(this.cuid, this.componentName, name, value);\r\n    }\r\n    logInfo(message, functionName) {\r\n        this._log.debug(message, functionName);\r\n        this.utils.development.pushState(this.cuid, this.componentName, \"info\", message, functionName);\r\n    }\r\n    logWarning(message, functionName) {\r\n        this._log.warning(message, functionName);\r\n        this.utils.development.pushState(this.cuid, this.componentName, \"warning\", message, functionName);\r\n    }\r\n    pushDebugState(type, message, functionName) {\r\n        this.utils.development.pushState(this.cuid, this.componentName, type, message, functionName);\r\n    }\r\n    logError(message, functionName, error) {\r\n        this._log.error(message, functionName);\r\n        if (error) {\r\n            this._log.exception(error, functionName);\r\n        }\r\n        this.utils.development.pushState(this.cuid, this.componentName, \"error\", message, functionName);\r\n    }\r\n}\r\n_emittedEvents = new WeakMap();\r\nexport class CuiHandlerBase extends CuiComponentBase {\r\n    constructor(componentName, element, attribute, args, utils) {\r\n        super(componentName, element, utils);\r\n        _attribute.set(this, void 0);\r\n        this.args = args;\r\n        this.actionsHelper = new CuiActionsHelper(utils.interactions);\r\n        this.prevArgs = undefined;\r\n        this.isInitialized = false;\r\n        __classPrivateFieldSet(this, _attribute, attribute);\r\n    }\r\n    handle(args) {\r\n        this.logInfo(\"Init\", 'handle');\r\n        if (this.isInitialized) {\r\n            this.logWarning(\"Trying to initialize component again\", 'handle');\r\n            return;\r\n        }\r\n        this.args.parse(args);\r\n        if (!this.element.classList.contains(__classPrivateFieldGet(this, _attribute))) {\r\n            this.element.classList.add(__classPrivateFieldGet(this, _attribute));\r\n        }\r\n        this.registerInDebug();\r\n        this.onHandle();\r\n        this.isInitialized = true;\r\n    }\r\n    refresh(args) {\r\n        this.logInfo(\"Update\", 'refresh');\r\n        if (!this.isInitialized) {\r\n            this.logError(\"Cannot update not initialized component\", 'refresh');\r\n            return;\r\n        }\r\n        this.prevArgs = clone(this.args);\r\n        this.args.parse(args);\r\n        this.pushDebugState(\"info\", \"Component update\", 'refresh');\r\n        this.onRefresh();\r\n    }\r\n    destroy() {\r\n        this.logInfo(\"Destroy\", \"destroy\");\r\n        this.onRemove();\r\n        this.detachEmiitedEvents();\r\n        this.removeFromDebug();\r\n        this.isInitialized = false;\r\n    }\r\n}\r\n_attribute = new WeakMap();\r\nexport class CuiHandler extends CuiHandlerBase {\r\n    constructor(componentName, element, attribute, args, utils) {\r\n        super(componentName, element, attribute, args, utils);\r\n    }\r\n    onHandle() {\r\n        this.onInit();\r\n    }\r\n    onRefresh() {\r\n        this.onUpdate();\r\n    }\r\n    onRemove() {\r\n        this.onDestroy();\r\n    }\r\n    /**\r\n     * Helper created for elements that animate - perfroms an action *add*, after timeout it performs *remove*.\r\n     *\r\n     * @param action - action to perfrom\r\n     * @param timeout - timeout specified for action removal\r\n     * @param onFinish - callback to be performed after action is finished after removal\r\n     * @param callback - optional - callback to be executed in mutation on action removal, e.g. additional DOM changes on element\r\n     */\r\n    performAction(actions, timeout, onFinish, callback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (yield this.actionsHelper.performActions(this.element, actions, timeout, callback)) {\r\n                onFinish();\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n    }\r\n}\r\nexport class CuiInteractableHandler extends CuiHandlerBase {\r\n    constructor(componentName, element, attribute, args, utils) {\r\n        super(componentName, element, attribute, args, utils);\r\n        _openEventId.set(this, void 0);\r\n        _closeEventId.set(this, void 0);\r\n        _keyCloseEventId.set(this, void 0);\r\n        _openAct.set(this, void 0);\r\n        _closeAct.set(this, void 0);\r\n        __classPrivateFieldSet(this, _openEventId, null);\r\n        __classPrivateFieldSet(this, _closeEventId, null);\r\n        __classPrivateFieldSet(this, _keyCloseEventId, null);\r\n        __classPrivateFieldSet(this, _closeAct, []);\r\n        __classPrivateFieldSet(this, _openAct, []);\r\n    }\r\n    onHandle() {\r\n        __classPrivateFieldSet(this, _openEventId, this.onEvent(EVENTS.OPEN, this.openFromEvent.bind(this)));\r\n        __classPrivateFieldSet(this, _closeEventId, this.onEvent(EVENTS.CLOSE, this.closeFromEvent.bind(this)));\r\n        __classPrivateFieldSet(this, _openAct, CuiActionsListFactory.get(this.args.openAct));\r\n        __classPrivateFieldSet(this, _closeAct, CuiActionsListFactory.get(this.args.closeAct));\r\n        this.onInit();\r\n    }\r\n    onRefresh() {\r\n        if (!this.prevArgs || this.args.openAct !== this.prevArgs.openAct) {\r\n            __classPrivateFieldSet(this, _openAct, CuiActionsListFactory.get(this.args.openAct));\r\n        }\r\n        if (!this.prevArgs || this.args.closeAct !== this.prevArgs.closeAct) {\r\n            __classPrivateFieldSet(this, _closeAct, CuiActionsListFactory.get(this.args.closeAct));\r\n        }\r\n        this.onUpdate();\r\n    }\r\n    onRemove() {\r\n        this.detachEvent(EVENTS.CLOSE, __classPrivateFieldGet(this, _closeEventId));\r\n        this.detachEvent(EVENTS.OPEN, __classPrivateFieldGet(this, _openEventId));\r\n        this.onDestroy();\r\n    }\r\n    open(args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.checkLockAndWarn(\"open\")) {\r\n                return false;\r\n            }\r\n            if (this.isActive()) {\r\n                this.logWarning(\"Component is already opened\");\r\n                return false;\r\n            }\r\n            if (this.args.escClose || is(this.args.keyClose)) {\r\n                __classPrivateFieldSet(this, _keyCloseEventId, this.onEvent(EVENTS.KEYDOWN, this.onKeyClose.bind(this)));\r\n            }\r\n            if (!this.onBeforeOpen()) {\r\n                return false;\r\n            }\r\n            this.isLocked = true;\r\n            return this.performAction(__classPrivateFieldGet(this, _openAct), this.args.timeout, this.onActionFinish.bind(this, this.onAfterOpen.bind(this), EVENTS.OPENED, args), () => {\r\n                this.helper.setClass(this.activeClassName, this.element);\r\n                AriaAttributes.setAria(this.element, 'aria-expanded', 'true');\r\n            });\r\n            ;\r\n        });\r\n    }\r\n    close(args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.checkLockAndWarn(\"close\")) {\r\n                return false;\r\n            }\r\n            if (!this.isActive()) {\r\n                this.logWarning(\"Component is already closed\");\r\n                return false;\r\n            }\r\n            this.detachEvent(EVENTS.KEYDOWN, __classPrivateFieldGet(this, _keyCloseEventId));\r\n            if (!this.onBeforeClose()) {\r\n                return false;\r\n            }\r\n            this.isLocked = true;\r\n            return this.performAction(__classPrivateFieldGet(this, _closeAct), this.args.timeout, this.onActionFinish.bind(this, this.onAfterClose.bind(this), EVENTS.CLOSED, args), () => {\r\n                this.helper.removeClass(this.activeClassName, this.element);\r\n                AriaAttributes.setAria(this.element, 'aria-expanded', 'false');\r\n            });\r\n            ;\r\n        });\r\n    }\r\n    /**\r\n     * Helper created for elements that animate - perfroms an action *add*, after timeout it performs *remove*.\r\n     *\r\n     * @param action - action to perfrom\r\n     * @param timeout - timeout specified for action removal\r\n     * @param onFinish - callback to be performed after action is finished after removal\r\n     * @param callback - optional - callback to be executed in mutation on action removal, e.g. additional DOM changes on element\r\n     */\r\n    performAction(actions, timeout, onFinish, callback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (yield this.actionsHelper.performActions(this.element, actions, timeout, callback)) {\r\n                onFinish();\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n    }\r\n    openFromEvent(args) {\r\n        this.open(args);\r\n    }\r\n    closeFromEvent(args) {\r\n        this.close(args);\r\n    }\r\n    onActionFinish(callback, event, args) {\r\n        callback();\r\n        this.emitEvent(event, {\r\n            timestamp: Date.now(),\r\n            state: args\r\n        });\r\n        this.isLocked = false;\r\n    }\r\n    onKeyClose(ev) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.args.escClose && ev.event.key === \"Escape\" || is(this.args.keyClose) && ev.event.key === this.args.keyClose) {\r\n                yield this.close('Closed by key');\r\n            }\r\n        });\r\n    }\r\n}\r\n_openEventId = new WeakMap(), _closeEventId = new WeakMap(), _keyCloseEventId = new WeakMap(), _openAct = new WeakMap(), _closeAct = new WeakMap();\r\nexport class CuiMutableHandler extends CuiHandlerBase {\r\n    constructor(componentName, element, attribute, args, utils) {\r\n        super(componentName, element, attribute, args, utils);\r\n        _mutionHandler.set(this, void 0);\r\n        __classPrivateFieldSet(this, _mutionHandler, new CuiComponentMutationHandler(element));\r\n        __classPrivateFieldGet(this, _mutionHandler).onMutation(this.mutation.bind(this));\r\n    }\r\n    onHandle() {\r\n        this.onInit();\r\n        __classPrivateFieldGet(this, _mutionHandler).observe();\r\n    }\r\n    onRefresh() {\r\n        __classPrivateFieldGet(this, _mutionHandler).unobserve();\r\n        this.onUpdate();\r\n        __classPrivateFieldGet(this, _mutionHandler).observe();\r\n    }\r\n    onRemove() {\r\n        __classPrivateFieldGet(this, _mutionHandler).unobserve();\r\n        this.onDestroy();\r\n    }\r\n    /**\r\n     * Callback attached to mutation observer set on root element\r\n     *\r\n     * @param record - mutation records\r\n     */\r\n    mutation(records) {\r\n        this._log.debug(\"Element mutation\", \"mutation\");\r\n        this.onMutation(records.reduce((result, item) => {\r\n            if (item.type !== \"childList\") {\r\n                return result;\r\n            }\r\n            if (item.addedNodes.length > 0) {\r\n                result.added.push(...item.addedNodes);\r\n            }\r\n            if (item.removedNodes.length > 0) {\r\n                result.removed.push(...item.removedNodes);\r\n            }\r\n            return result;\r\n        }, {\r\n            added: [],\r\n            removed: []\r\n        }));\r\n    }\r\n}\r\n_mutionHandler = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTitleSelector, _defItemsSelector, _defTimeout, _prefix, _items, _targets, _switchEventId;\r\nimport { CuiMutableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { getIntOrDefault, is, isStringTrue, replacePrefix, getStringOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS, SCOPE_SELECTOR } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst ACCORDION_TITLE_CLS = '> * > .{prefix}-accordion-title';\r\nconst ACCORDION_ITEMS_CLS = '> *';\r\nexport class CuiAccordionArgs {\r\n    constructor(prefix, timeout) {\r\n        _defTitleSelector.set(this, void 0);\r\n        _defItemsSelector.set(this, void 0);\r\n        _defTimeout.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTitleSelector, replacePrefix(ACCORDION_TITLE_CLS, prefix));\r\n        __classPrivateFieldSet(this, _defItemsSelector, replacePrefix(ACCORDION_ITEMS_CLS, prefix));\r\n        this.animation = false;\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        this.single = false;\r\n        this.selector = SCOPE_SELECTOR + __classPrivateFieldGet(this, _defTitleSelector);\r\n        this.items = SCOPE_SELECTOR + __classPrivateFieldGet(this, _defItemsSelector);\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n    }\r\n    parse(args) {\r\n        if (is(args)) {\r\n            this.single = isStringTrue(args.single);\r\n            this.selector = SCOPE_SELECTOR + getStringOrDefault(args.selector, __classPrivateFieldGet(this, _defTitleSelector));\r\n            this.items = SCOPE_SELECTOR + getStringOrDefault(args.content, __classPrivateFieldGet(this, _defItemsSelector));\r\n            this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n            this.animation = isStringTrue(args.animation);\r\n            return;\r\n        }\r\n    }\r\n    isValid() {\r\n        return true;\r\n    }\r\n}\r\n_defTitleSelector = new WeakMap(), _defItemsSelector = new WeakMap(), _defTimeout = new WeakMap();\r\nexport class CuiAccordionComponent {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix)}-accordion`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiAccordionHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiAccordionHandler extends CuiMutableHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiAccordionHandler\", element, attribute, new CuiAccordionArgs(prefix, utils.setup.animationTime), utils);\r\n        _items.set(this, void 0);\r\n        _targets.set(this, void 0);\r\n        _switchEventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _switchEventId, null);\r\n        __classPrivateFieldSet(this, _items, []);\r\n        __classPrivateFieldSet(this, _targets, []);\r\n        __classPrivateFieldSet(this, _switchEventId, null);\r\n    }\r\n    onInit() {\r\n        if (this.args.isValid()) {\r\n            try {\r\n                this.initTargets();\r\n                __classPrivateFieldSet(this, _switchEventId, this.onEvent(EVENTS.SWITCH, this.onSwitch.bind(this)));\r\n            }\r\n            catch (e) {\r\n                this._log.exception(e, 'handle');\r\n            }\r\n            this._log.debug(\"Initialized\", \"handle\");\r\n        }\r\n    }\r\n    onUpdate() {\r\n        try {\r\n            this.initTargets();\r\n        }\r\n        catch (e) {\r\n            this._log.exception(e, 'handle');\r\n        }\r\n    }\r\n    onDestroy() {\r\n        this.detachEvent(EVENTS.SWITCH, __classPrivateFieldGet(this, _switchEventId));\r\n    }\r\n    onMutation(mutations) {\r\n        if (mutations.added.length > 0 || mutations.removed.length > 0)\r\n            this.initTargets();\r\n    }\r\n    switch(index) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this._log.debug(\"Switch to: \" + index);\r\n            if (index < 0 || this.isLocked || !this.isInitialized) {\r\n                return false;\r\n            }\r\n            __classPrivateFieldSet(this, _items, this.queryItems());\r\n            if (__classPrivateFieldGet(this, _items).length <= index) {\r\n                return false;\r\n            }\r\n            this.isLocked = true;\r\n            const current = __classPrivateFieldGet(this, _items)[index];\r\n            if (this.helper.hasClass(this.activeClassName, current)) {\r\n                this.helper.removeClassesAs(current, this.activeClassName);\r\n            }\r\n            else {\r\n                if (this.args.single) {\r\n                    this.closeAllExcept(index);\r\n                }\r\n                this.helper.setClassesAs(current, this.activeClassName);\r\n            }\r\n            this.emitEvent(EVENTS.SWITCHED, {\r\n                index: index,\r\n                currentTarget: current,\r\n                timestamp: Date.now()\r\n            });\r\n            this.isLocked = false;\r\n            return true;\r\n        });\r\n    }\r\n    onSwitch(index) {\r\n        this.switch(getIntOrDefault(index, -1)).then(() => {\r\n            this._log.debug(\"Switch from event to \" + index);\r\n        });\r\n    }\r\n    initTargets() {\r\n        __classPrivateFieldSet(this, _items, this.queryItems());\r\n        const t = this.element.querySelectorAll(this.args.selector);\r\n        __classPrivateFieldSet(this, _targets, []);\r\n        t.forEach((item, index) => {\r\n            let target = { element: item };\r\n            this.setListener(target, index);\r\n            __classPrivateFieldGet(this, _targets).push(target);\r\n        });\r\n    }\r\n    closeAllExcept(current) {\r\n        this.mutate(() => {\r\n            __classPrivateFieldGet(this, _items).forEach((item, index) => {\r\n                if (current !== index && this.helper.hasClass(this.activeClassName, item)) {\r\n                    item.classList.remove(this.activeClassName);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    setListener(target, index) {\r\n        target.listener = () => {\r\n            this.switch(index);\r\n        };\r\n        target.element.addEventListener('click', target.listener);\r\n    }\r\n    removeListener(target) {\r\n        if (target.listener) {\r\n            target.element.removeEventListener('click', target.listener);\r\n        }\r\n    }\r\n    queryItems() {\r\n        return [...this.element.querySelectorAll(this.args.items)];\r\n    }\r\n}\r\n_items = new WeakMap(), _targets = new WeakMap(), _switchEventId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _unit;\r\nimport { AnimatorError } from \"../models/errors\";\r\nimport { is } from \"../utils/functions\";\r\n/**\r\n * Changes the opacity of the element from 0 to 1\r\n */\r\nexport class OpacityAnimator {\r\n    constructor() {\r\n        this.length = this.to = this.from = -1;\r\n        this.rtl = false;\r\n    }\r\n    setProperty(prop) {\r\n        if (!prop || !is(prop.from) || !is(prop.to)) {\r\n            throw new AnimatorError(\"[OpacityAnimator] Property has incorrect format\");\r\n        }\r\n        this.from = prop.from;\r\n        this.to = prop.to;\r\n        this.length = Math.abs(this.to - this.from);\r\n        this.rtl = this.from > this.to;\r\n    }\r\n    perform(element, progress, factor) {\r\n        if (this.to < 0) {\r\n            return;\r\n        }\r\n        let current = this.length * progress;\r\n        if (element[\"style\"]) {\r\n            element.style.opacity = this.rtl ? Math.max(this.from - current, 0) : Math.min(this.from + current, 1);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Changes any style property of the element\r\n */\r\nexport class PropertyAnimator {\r\n    constructor(property) {\r\n        _unit.set(this, void 0);\r\n        if (!is(property)) {\r\n            throw new AnimatorError(\"[PropertyAnimator] Valid property is required\");\r\n        }\r\n        this.property = property;\r\n        this.length = this.to = this.from = -1;\r\n        this.rtl = false;\r\n        __classPrivateFieldSet(this, _unit, \"\");\r\n    }\r\n    setProperty(prop) {\r\n        if (!prop || !is(prop.from) || !is(prop.to)) {\r\n            throw new AnimatorError(\"[PropertyAnimator] Property has incorrect format\");\r\n        }\r\n        this.from = prop.from;\r\n        this.to = prop.to;\r\n        this.length = Math.abs(this.to - this.from);\r\n        this.rtl = this.from > this.to;\r\n        __classPrivateFieldSet(this, _unit, prop.unit);\r\n    }\r\n    perform(element, progress, factor) {\r\n        if (!this.property) {\r\n            return;\r\n        }\r\n        let current = this.length * progress;\r\n        if (element[\"style\"]) {\r\n            element.style[this.property] = this.createValue(this.rtl ? this.from - current : this.from + current, __classPrivateFieldGet(this, _unit));\r\n        }\r\n    }\r\n    createValue(value, unit) {\r\n        return `${value}${unit !== null && unit !== void 0 ? unit : \"\"}`;\r\n    }\r\n}\r\n_unit = new WeakMap();\r\n/**\r\n * Changes transform property of the element. Supports mulitple properties at the time\r\n */\r\nexport class TransformAnimator {\r\n    constructor() {\r\n        this.prop = undefined;\r\n    }\r\n    setProperty(prop) {\r\n        if (!prop) {\r\n            throw new AnimatorError(\"[TransformAnimator] Property has incorrect format\");\r\n        }\r\n        this.prop = prop;\r\n    }\r\n    build(progress) {\r\n        let props = [];\r\n        for (let name in this.prop) {\r\n            let cur = this.prop[name];\r\n            let diff = Math.abs(cur.to - cur.from);\r\n            let rtl = cur.from > cur.to;\r\n            let val = rtl ? cur.from - (diff * progress) : cur.from + (diff * progress);\r\n            props.push(this.buildSingle(name, val, cur.unit));\r\n        }\r\n        return props.join(\" \");\r\n    }\r\n    buildSingle(name, value, unit) {\r\n        return `${name}(${value}${unit})`;\r\n    }\r\n    perform(element, progress) {\r\n        if (!this.prop) {\r\n            return;\r\n        }\r\n        if (element[\"style\"]) {\r\n            element.style.transform = this.build(progress);\r\n        }\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _engine, _timeout, _factory, _onError, _onFinishCallback, _animators, _lock, _animStartStamp, _element, _cleanOnFinish, _errorOccured, _factory_1, _onError_1, _element_1, _animators_1, _animationEngine, _factory_2, _onError_2;\r\nimport { is } from \"../utils/functions\";\r\nimport { OpacityAnimator, TransformAnimator, PropertyAnimator } from \"./animators\";\r\nexport class CuiAnimation {\r\n    constructor(element) {\r\n        _engine.set(this, void 0);\r\n        _timeout.set(this, void 0);\r\n        _factory.set(this, void 0);\r\n        _onError.set(this, void 0);\r\n        __classPrivateFieldSet(this, _engine, new CuiAnimationEngine(true));\r\n        __classPrivateFieldSet(this, _onError, undefined);\r\n        __classPrivateFieldSet(this, _timeout, 0);\r\n        __classPrivateFieldSet(this, _factory, new AnimatorFactory());\r\n        if (element) {\r\n            __classPrivateFieldGet(this, _engine).setElement(element);\r\n        }\r\n    }\r\n    setElement(element) {\r\n        __classPrivateFieldGet(this, _engine).setElement(element);\r\n    }\r\n    setTimeout(timeout) {\r\n        __classPrivateFieldSet(this, _timeout, timeout);\r\n    }\r\n    onError(callback) {\r\n        __classPrivateFieldSet(this, _onError, callback);\r\n        __classPrivateFieldGet(this, _engine).setOnError(callback);\r\n    }\r\n    onFinish(callback) {\r\n        __classPrivateFieldGet(this, _engine).onFinish(callback);\r\n    }\r\n    perform(props, timeout, factor) {\r\n        if (!is(props)) {\r\n            this.reportError(new Error(\"Animation property cannot be empty\"));\r\n            return;\r\n        }\r\n        let animators = [];\r\n        try {\r\n            for (let prop in props) {\r\n                let animator = __classPrivateFieldGet(this, _factory).get(prop);\r\n                if (!animator)\r\n                    return;\r\n                animator.setProperty(props[prop]);\r\n                animators.push(animator);\r\n                __classPrivateFieldGet(this, _engine).setAnimators(animators);\r\n                __classPrivateFieldGet(this, _engine).animate(timeout !== null && timeout !== void 0 ? timeout : __classPrivateFieldGet(this, _timeout));\r\n            }\r\n        }\r\n        catch (e) {\r\n            this.reportError(e);\r\n            return;\r\n        }\r\n    }\r\n    reportError(e) {\r\n        if (__classPrivateFieldGet(this, _onError)) {\r\n            __classPrivateFieldGet(this, _onError).call(this, e);\r\n        }\r\n        else {\r\n            console.error(e);\r\n        }\r\n    }\r\n}\r\n_engine = new WeakMap(), _timeout = new WeakMap(), _factory = new WeakMap(), _onError = new WeakMap();\r\nclass AnimatorFactory {\r\n    get(id) {\r\n        if (!is(id)) {\r\n            return undefined;\r\n        }\r\n        switch (id) {\r\n            case \"opacity\":\r\n                return new OpacityAnimator();\r\n            case \"transform\":\r\n                return new TransformAnimator();\r\n            default:\r\n                return new PropertyAnimator(id);\r\n        }\r\n    }\r\n}\r\nexport class CuiAnimationEngine {\r\n    constructor(cleanOnFinish) {\r\n        _onFinishCallback.set(this, void 0);\r\n        _animators.set(this, void 0);\r\n        _lock.set(this, void 0);\r\n        // Needed in animation perform - set on first animation exec, cleaned on end\r\n        _animStartStamp.set(this, void 0);\r\n        _element.set(this, void 0);\r\n        _cleanOnFinish.set(this, void 0);\r\n        _errorOccured.set(this, void 0);\r\n        _factory_1.set(this, void 0);\r\n        _onError_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _animators, []);\r\n        __classPrivateFieldSet(this, _element, undefined);\r\n        __classPrivateFieldSet(this, _animStartStamp, undefined);\r\n        __classPrivateFieldSet(this, _cleanOnFinish, cleanOnFinish !== null && cleanOnFinish !== void 0 ? cleanOnFinish : false);\r\n        __classPrivateFieldSet(this, _factory_1, new AnimatorFactory());\r\n        __classPrivateFieldSet(this, _lock, false);\r\n        __classPrivateFieldSet(this, _onFinishCallback, undefined);\r\n        __classPrivateFieldSet(this, _errorOccured, false);\r\n        __classPrivateFieldSet(this, _onError_1, undefined);\r\n    }\r\n    onFinish(callback) {\r\n        __classPrivateFieldSet(this, _onFinishCallback, callback);\r\n    }\r\n    setAnimators(animators) {\r\n        __classPrivateFieldSet(this, _animators, animators);\r\n    }\r\n    setProps(props) {\r\n        if (!is(props)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _animators, []);\r\n        try {\r\n            for (let prop in props) {\r\n                let animator = __classPrivateFieldGet(this, _factory_1).get(prop);\r\n                if (!animator)\r\n                    return;\r\n                animator.setProperty(props[prop]);\r\n                __classPrivateFieldGet(this, _animators).push(animator);\r\n            }\r\n        }\r\n        catch (e) {\r\n            this.reportError(e);\r\n        }\r\n    }\r\n    setElement(element) {\r\n        __classPrivateFieldSet(this, _element, element);\r\n    }\r\n    setOnError(callback) {\r\n        __classPrivateFieldSet(this, _onError_1, callback);\r\n    }\r\n    animate(timeout, progress, revert) {\r\n        if (__classPrivateFieldGet(this, _lock)) {\r\n            return;\r\n        }\r\n        if (!__classPrivateFieldGet(this, _element) || __classPrivateFieldGet(this, _animators).length === 0) {\r\n            this.reportError(new Error(\"Animation cannot be performed: element or animators are not set\"));\r\n            return;\r\n        }\r\n        let animationProgress = progress !== null && progress !== void 0 ? progress : 0;\r\n        let shouldCalcRevert = revert ? revert : false;\r\n        __classPrivateFieldSet(this, _lock, true);\r\n        requestAnimationFrame(this.animateAsync.bind(this, timeout, animationProgress, shouldCalcRevert));\r\n    }\r\n    isLocked() {\r\n        return __classPrivateFieldGet(this, _lock);\r\n    }\r\n    animateAsync(timeout, initialProgress, revert, timestamp) {\r\n        if (!__classPrivateFieldGet(this, _animStartStamp)) {\r\n            __classPrivateFieldSet(this, _animStartStamp, timestamp);\r\n        }\r\n        let pr = timestamp - __classPrivateFieldGet(this, _animStartStamp);\r\n        let animationProgress = pr / timeout;\r\n        let currProgress = 0;\r\n        if (initialProgress === 0) {\r\n            currProgress = animationProgress;\r\n        }\r\n        else {\r\n            currProgress = revert ? initialProgress - (animationProgress * initialProgress) : initialProgress + (animationProgress * initialProgress);\r\n        }\r\n        this.callUpdate(revert ? Math.max(currProgress, 0) : Math.min(currProgress, 1), 1);\r\n        if (pr < timeout && !__classPrivateFieldGet(this, _errorOccured)) {\r\n            requestAnimationFrame(this.animateAsync.bind(this, timeout, initialProgress, revert));\r\n        }\r\n        else {\r\n            this.endAnimation(revert);\r\n        }\r\n    }\r\n    endAnimation(reverted) {\r\n        if (__classPrivateFieldGet(this, _cleanOnFinish) && __classPrivateFieldGet(this, _element)) {\r\n            __classPrivateFieldGet(this, _element).removeAttribute(\"style\");\r\n        }\r\n        if (__classPrivateFieldGet(this, _onFinishCallback)) {\r\n            __classPrivateFieldGet(this, _onFinishCallback).call(this, __classPrivateFieldGet(this, _element), reverted, __classPrivateFieldGet(this, _errorOccured));\r\n        }\r\n        __classPrivateFieldSet(this, _errorOccured, false);\r\n        __classPrivateFieldSet(this, _animStartStamp, undefined);\r\n        __classPrivateFieldSet(this, _lock, false);\r\n    }\r\n    callUpdate(progress, factor) {\r\n        try {\r\n            __classPrivateFieldGet(this, _animators).forEach(animator => animator.perform(__classPrivateFieldGet(this, _element), progress, factor));\r\n        }\r\n        catch (e) {\r\n            this.reportError(e);\r\n            __classPrivateFieldSet(this, _errorOccured, true);\r\n        }\r\n    }\r\n    reportError(e) {\r\n        if (__classPrivateFieldGet(this, _onError_1)) {\r\n            __classPrivateFieldGet(this, _onError_1).call(this, e);\r\n        }\r\n        else {\r\n            console.error(\"An error occured in CuiAnimtionEngine\");\r\n            console.error(e);\r\n        }\r\n    }\r\n}\r\n_onFinishCallback = new WeakMap(), _animators = new WeakMap(), _lock = new WeakMap(), _animStartStamp = new WeakMap(), _element = new WeakMap(), _cleanOnFinish = new WeakMap(), _errorOccured = new WeakMap(), _factory_1 = new WeakMap(), _onError_1 = new WeakMap();\r\nexport class CuiSwipeAnimationEngine {\r\n    constructor(shouldCleanOnFinish) {\r\n        _element_1.set(this, void 0);\r\n        _animators_1.set(this, void 0);\r\n        _animationEngine.set(this, void 0);\r\n        _factory_2.set(this, void 0);\r\n        _onError_2.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element_1, undefined);\r\n        __classPrivateFieldSet(this, _animators_1, []);\r\n        __classPrivateFieldSet(this, _animationEngine, new CuiAnimationEngine(shouldCleanOnFinish));\r\n        __classPrivateFieldSet(this, _factory_2, new AnimatorFactory());\r\n        __classPrivateFieldSet(this, _onError_2, undefined);\r\n    }\r\n    setElement(element) {\r\n        __classPrivateFieldSet(this, _element_1, element);\r\n    }\r\n    setOnFinish(callback) {\r\n        __classPrivateFieldGet(this, _animationEngine).onFinish(callback);\r\n    }\r\n    setOnError(callback) {\r\n        __classPrivateFieldSet(this, _onError_2, callback);\r\n        __classPrivateFieldGet(this, _animationEngine).setOnError(callback);\r\n    }\r\n    setProps(props) {\r\n        if (!is(props)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _animators_1, []);\r\n        try {\r\n            for (let prop in props) {\r\n                let animator = __classPrivateFieldGet(this, _factory_2).get(prop);\r\n                if (!animator)\r\n                    return;\r\n                animator.setProperty(props[prop]);\r\n                __classPrivateFieldGet(this, _animators_1).push(animator);\r\n            }\r\n        }\r\n        catch (e) {\r\n            this.reportError(e);\r\n        }\r\n    }\r\n    /**\r\n     * Perform single update on animators\r\n     * @param progress - progress value to be set to animators 0..1\r\n     */\r\n    update(progress) {\r\n        if (!__classPrivateFieldGet(this, _element_1) || __classPrivateFieldGet(this, _animators_1).length === 0) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _animators_1).forEach(animator => animator.perform(__classPrivateFieldGet(this, _element_1), Math.min(progress, 1), 1));\r\n    }\r\n    /**\r\n     * Perform single update on animators in RAF\r\n     * @param progress - progress value to be set to animators 0..1\r\n     */\r\n    updateAsync(progress) {\r\n        requestAnimationFrame(this.update.bind(this, progress));\r\n    }\r\n    /**\r\n     * Finish swipe animation using animation engine\r\n     * @param progress - initial progress value 0..1\r\n     * @param timeout - time for animation to perform\r\n     * @param revert - whether animation should return back to 0 or progress to the end\r\n     */\r\n    finish(progress, timeout, revert) {\r\n        if (__classPrivateFieldGet(this, _element_1))\r\n            __classPrivateFieldGet(this, _animationEngine).setElement(__classPrivateFieldGet(this, _element_1));\r\n        __classPrivateFieldGet(this, _animationEngine).setAnimators(__classPrivateFieldGet(this, _animators_1));\r\n        __classPrivateFieldGet(this, _animationEngine).animate(timeout, progress, revert);\r\n    }\r\n    reportError(e) {\r\n        if (__classPrivateFieldGet(this, _onError_2)) {\r\n            __classPrivateFieldGet(this, _onError_2).call(this, e);\r\n        }\r\n        else {\r\n            console.log(e);\r\n        }\r\n    }\r\n}\r\n_element_1 = new WeakMap(), _animators_1 = new WeakMap(), _animationEngine = new WeakMap(), _factory_2 = new WeakMap(), _onError_2 = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTimeout, _prefix, _prefix_1, _swipeEngine, _isTracking, _startX, _ratio, _swipeAnimation, _moveEventId;\r\nimport { SWIPE_ANIMATIONS_DEFINITIONS } from \"cui-light-core/dist/esm/animation/definitions\";\r\nimport { CuiInteractableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiSwipeAnimationEngine } from \"cui-light-core/dist/esm/animation/engine\";\r\nimport { AriaAttributes } from \"cui-light-core/dist/esm/utils/aria\";\r\nimport { boolStringOrDefault, getIntOrDefault, getStringOrDefault, replacePrefix } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS, CLASSES } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst BANNER_OPEN_ANIMATION = \".{prefix}-animation-fade-in\";\r\nconst BANNER_CLOSE_ANIMATION = \".{prefix}-animation-fade-out\";\r\nexport class CuiBannerArgs {\r\n    constructor(prefix, timeout) {\r\n        _defTimeout.set(this, void 0);\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        this.escClose = false;\r\n        this.keyClose = \"\";\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n        this.swipe = false;\r\n        this.openAct = \"\";\r\n        this.closeAct = \"\";\r\n    }\r\n    parse(args) {\r\n        this.swipe = boolStringOrDefault(args.swipe, false);\r\n        this.escClose = false;\r\n        this.keyClose = \"\";\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.openAct = getStringOrDefault(args.openAct, replacePrefix(BANNER_OPEN_ANIMATION, __classPrivateFieldGet(this, _prefix)));\r\n        this.closeAct = getStringOrDefault(args.closeAct, replacePrefix(BANNER_CLOSE_ANIMATION, __classPrivateFieldGet(this, _prefix)));\r\n    }\r\n}\r\n_defTimeout = new WeakMap(), _prefix = new WeakMap();\r\nexport class CuiBanerComponent {\r\n    constructor(prefix) {\r\n        _prefix_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix_1, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix_1)}-banner`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiBannerHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix_1));\r\n    }\r\n}\r\n_prefix_1 = new WeakMap();\r\nexport class CuiBannerHandler extends CuiInteractableHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiBannerHandler\", element, attribute, new CuiBannerArgs(prefix, utils.setup.animationTime), utils);\r\n        _swipeEngine.set(this, void 0);\r\n        _isTracking.set(this, void 0);\r\n        _startX.set(this, void 0);\r\n        _ratio.set(this, void 0);\r\n        _swipeAnimation.set(this, void 0);\r\n        _moveEventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _swipeEngine, new CuiSwipeAnimationEngine(true));\r\n        __classPrivateFieldGet(this, _swipeEngine).setOnFinish(this.onSwipeFinish.bind(this));\r\n        __classPrivateFieldGet(this, _swipeEngine).setElement(this.element);\r\n        __classPrivateFieldSet(this, _startX, -1);\r\n        __classPrivateFieldSet(this, _ratio, 0);\r\n        __classPrivateFieldSet(this, _swipeAnimation, SWIPE_ANIMATIONS_DEFINITIONS[\"fade\"]);\r\n        __classPrivateFieldSet(this, _moveEventId, null);\r\n        __classPrivateFieldSet(this, _isTracking, false);\r\n    }\r\n    onInit() {\r\n        //   this.#moveEventId = this.onEvent(EVENTS.GLOBAL_MOVE, this.onMove.bind(this));\r\n        if (!this.isActive()) {\r\n            this.open();\r\n        }\r\n    }\r\n    onUpdate() {\r\n    }\r\n    onDestroy() {\r\n        this.detachEvent(EVENTS.GLOBAL_MOVE, __classPrivateFieldGet(this, _moveEventId));\r\n    }\r\n    onBeforeOpen() {\r\n        return true;\r\n    }\r\n    onAfterOpen() {\r\n        if (this.args.swipe) {\r\n            __classPrivateFieldSet(this, _moveEventId, this.onEvent(EVENTS.GLOBAL_MOVE, this.onMove.bind(this)));\r\n        }\r\n    }\r\n    onAfterClose() {\r\n        this.detachEvent(EVENTS.GLOBAL_MOVE, __classPrivateFieldGet(this, _moveEventId));\r\n    }\r\n    onBeforeClose() {\r\n        return true;\r\n    }\r\n    onMove(data) {\r\n        if (this.isLocked) {\r\n            return;\r\n        }\r\n        let current = this.element;\r\n        switch (data.type) {\r\n            case \"down\":\r\n                if (__classPrivateFieldGet(this, _isTracking) || !current.contains(data.target)) {\r\n                    return;\r\n                }\r\n                __classPrivateFieldSet(this, _isTracking, true);\r\n                __classPrivateFieldSet(this, _startX, data.x);\r\n                this.helper.setClassesAs(document.body, CLASSES.swipingOn);\r\n                data.event.preventDefault();\r\n                break;\r\n            case \"up\":\r\n                if (!__classPrivateFieldGet(this, _isTracking) && __classPrivateFieldGet(this, _ratio) == 0) {\r\n                    break;\r\n                }\r\n                let absRatio = Math.abs(__classPrivateFieldGet(this, _ratio));\r\n                let timeout = absRatio * this.args.timeout;\r\n                let back = absRatio <= 0.4;\r\n                // Lock component until animation is finished\r\n                this.isLocked = true;\r\n                __classPrivateFieldGet(this, _swipeEngine).finish(absRatio, timeout, back);\r\n                this.helper.removeClassesAs(document.body, CLASSES.swipingOn);\r\n                __classPrivateFieldSet(this, _isTracking, false);\r\n                break;\r\n            case \"move\":\r\n                if (__classPrivateFieldGet(this, _isTracking)) {\r\n                    let newRatio = (data.x - __classPrivateFieldGet(this, _startX)) / current.offsetWidth;\r\n                    if (__classPrivateFieldGet(this, _ratio) >= 0 && newRatio <= 0 || __classPrivateFieldGet(this, _ratio) <= 0 && newRatio > 0) {\r\n                        __classPrivateFieldGet(this, _swipeEngine).setProps(newRatio > 0 ? __classPrivateFieldGet(this, _swipeAnimation).current.right : __classPrivateFieldGet(this, _swipeAnimation).current.left);\r\n                    }\r\n                    __classPrivateFieldSet(this, _ratio, newRatio);\r\n                    this.mutate(() => {\r\n                        __classPrivateFieldGet(this, _swipeEngine).update(Math.abs(__classPrivateFieldGet(this, _ratio)));\r\n                    });\r\n                    data.event.preventDefault();\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    onSwipeFinish(element, reverted, error) {\r\n        this.isLocked = false;\r\n        if (!reverted) {\r\n            this.helper.removeClass(this.activeClassName, this.element);\r\n            AriaAttributes.setAria(this.element, 'aria-expanded', 'false');\r\n        }\r\n        __classPrivateFieldSet(this, _ratio, 0);\r\n        __classPrivateFieldSet(this, _startX, 0);\r\n    }\r\n}\r\n_swipeEngine = new WeakMap(), _isTracking = new WeakMap(), _startX = new WeakMap(), _ratio = new WeakMap(), _swipeAnimation = new WeakMap(), _moveEventId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _element, _scale, _appender;\r\nimport { createElementFromString, getIntOrDefault, is } from \"../utils/functions\";\r\nexport class IconBuilder {\r\n    constructor(svgString) {\r\n        _element.set(this, void 0);\r\n        _scale.set(this, void 0);\r\n        _appender.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element, svgString);\r\n        __classPrivateFieldSet(this, _scale, 1);\r\n        __classPrivateFieldSet(this, _appender, new IconScaleAppender());\r\n    }\r\n    setScale(scale) {\r\n        __classPrivateFieldSet(this, _scale, scale);\r\n        return this;\r\n    }\r\n    build() {\r\n        let created = createElementFromString(__classPrivateFieldGet(this, _element));\r\n        if (is(created) && __classPrivateFieldGet(this, _scale)) {\r\n            // @ts-ignore created is checked already\r\n            __classPrivateFieldGet(this, _appender).append(created, __classPrivateFieldGet(this, _scale));\r\n        }\r\n        return created;\r\n    }\r\n}\r\n_element = new WeakMap(), _scale = new WeakMap(), _appender = new WeakMap();\r\nexport class IconScaleAppender {\r\n    append(element, value) {\r\n        let width = getIntOrDefault(element.getAttribute(\"width\"), 20);\r\n        let height = getIntOrDefault(element.getAttribute(\"height\"), 20);\r\n        element.setAttribute(\"width\", (width * value).toString());\r\n        element.setAttribute(\"height\", (height * value).toString());\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _factor, _full, _path, _attr, _progressEventId;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { is, getRangeValue, isString, getIntOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { ICONS, EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { IconBuilder } from \"cui-light-core/dist/esm/builders/icon\";\r\nexport class CuiCircleArgs {\r\n    constructor() {\r\n        this.progress = 0;\r\n    }\r\n    parse(val) {\r\n        if (!is(val)) {\r\n            this.progress = 0;\r\n        }\r\n        else if (isString(val)) {\r\n            this.progress = getIntOrDefault(val, 0);\r\n        }\r\n        else {\r\n            this.progress = getIntOrDefault(val.progress, 0);\r\n        }\r\n    }\r\n}\r\nexport class CuiCircleComponent {\r\n    constructor(prefix) {\r\n        this.attribute = (prefix !== null && prefix !== void 0 ? prefix : 'cui') + '-circle-progress';\r\n        ICONS['special_circle_progress'] = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"  class=\\\"circle-progress\\\" viewBox=\\\"0 0 100 100\\\" width=\\\"100\\\" height=\\\"100\\\"><path class=\\\"circle-progress-path\\\" d=\\\"M 50,5.3660047 A 44.867708,44.633994 0 0 1 94.867709,49.999997 44.867708,44.633994 0 0 1 50,94.633995 44.867708,44.633994 0 0 1 5.1322908,50.000001 44.867708,44.633994 0 0 1 50,5.3660047\\\"></path></svg>\";\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiCircleHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiCircleHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiCircleHandler\", element, attribute, new CuiCircleArgs(), utils);\r\n        _factor.set(this, void 0);\r\n        _full.set(this, void 0);\r\n        _path.set(this, void 0);\r\n        _attr.set(this, void 0);\r\n        _progressEventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _factor, __classPrivateFieldSet(this, _full, 0));\r\n        __classPrivateFieldSet(this, _path, null);\r\n        __classPrivateFieldSet(this, _attr, attribute);\r\n        __classPrivateFieldSet(this, _progressEventId, null);\r\n    }\r\n    onInit() {\r\n        const iconSvg = new IconBuilder(ICONS['special_circle_progress']).build();\r\n        if (!is(iconSvg)) {\r\n            this.logError(\"SVG circle was not created\", \"onInit\");\r\n            return;\r\n        }\r\n        const svg = this.element.querySelector('svg');\r\n        if (is(svg)) {\r\n            //@ts-ignore svg checked\r\n            svg.remove();\r\n        }\r\n        //@ts-ignore iconSvg checked\r\n        this.element.appendChild(iconSvg);\r\n        __classPrivateFieldSet(this, _path, this.element.querySelector('.circle-progress-path'));\r\n        __classPrivateFieldSet(this, _full, __classPrivateFieldGet(this, _path).getTotalLength());\r\n        __classPrivateFieldSet(this, _factor, __classPrivateFieldGet(this, _full) / 100);\r\n        this.fetch(this.readStyle);\r\n        __classPrivateFieldSet(this, _progressEventId, this.onEvent(EVENTS.PROGRESS_CHANGE, this.onSetProgress.bind(this)));\r\n    }\r\n    onUpdate() {\r\n        this.fetch(this.readStyle);\r\n        this.emitEvent(EVENTS.PROGRESS_CHANGED, {\r\n            timestamp: Date.now(),\r\n            progress: this.args.progress\r\n        });\r\n    }\r\n    onDestroy() {\r\n        this.detachEvent(EVENTS.PROGRESS_CHANGE, __classPrivateFieldGet(this, _progressEventId));\r\n    }\r\n    onSetProgress(val) {\r\n        if (is(val)) {\r\n            this.element.setAttribute(__classPrivateFieldGet(this, _attr), val);\r\n        }\r\n    }\r\n    updateStyle(value) {\r\n        __classPrivateFieldGet(this, _path).style.strokeDashoffset = value;\r\n    }\r\n    readStyle() {\r\n        if (this.prevArgs && this.args.progress === this.prevArgs.progress) {\r\n            return;\r\n        }\r\n        const progress = getRangeValue(this.args.progress, 0, 100);\r\n        this.mutate(this.updateStyle, __classPrivateFieldGet(this, _full) - __classPrivateFieldGet(this, _factor) * progress);\r\n    }\r\n}\r\n_factor = new WeakMap(), _full = new WeakMap(), _path = new WeakMap(), _attr = new WeakMap(), _progressEventId = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTimeout, _prefix, _eventId;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { getStringOrDefault, getIntOrDefault, is, isString, isStringTrue, getParentCuiElement, are } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nexport class CuiCloseArgs {\r\n    constructor(timeout) {\r\n        _defTimeout.set(this, void 0);\r\n        this.target = \"\";\r\n        this.action = \"\";\r\n        this.prevent = false;\r\n        this.state = \"\";\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n    }\r\n    parse(args) {\r\n        if (is(args) && isString(args)) {\r\n            this.target = args;\r\n            this.action = \"\";\r\n            this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n            this.prevent = false;\r\n            this.state = \"\";\r\n            return;\r\n        }\r\n        this.target = getStringOrDefault(args.target, \"\");\r\n        this.action = args.action;\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.prevent = args.prevent && isStringTrue(args.prevent);\r\n        this.state = args.state;\r\n    }\r\n}\r\n_defTimeout = new WeakMap();\r\nexport class CuiCloseComponent {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix)}-close`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiCloseHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiCloseHandler extends CuiHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiCloseHandler\", element, attribute, new CuiCloseArgs(utils.setup.animationTime), utils);\r\n        _eventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _eventId, null);\r\n        this.onClick = this.onClick.bind(this);\r\n    }\r\n    onInit() {\r\n        this.element.addEventListener('click', this.onClick);\r\n        __classPrivateFieldSet(this, _eventId, this.onEvent(EVENTS.CLOSE, this.onClose.bind(this)));\r\n    }\r\n    onUpdate() {\r\n        //\r\n    }\r\n    onDestroy() {\r\n        this.element.removeEventListener('click', this.onClick);\r\n        this.detachEvent(EVENTS.CLOSE, __classPrivateFieldGet(this, _eventId));\r\n    }\r\n    onClick(ev) {\r\n        this.onClose(ev);\r\n        if (this.args.prevent)\r\n            ev.preventDefault();\r\n    }\r\n    onClose(ev) {\r\n        if (this.isLocked) {\r\n            return;\r\n        }\r\n        const target = this.getTarget();\r\n        if (!is(target)) {\r\n            this._log.warning(`Target ${this.args.target} not found`, 'onClick');\r\n            return;\r\n        }\r\n        this.isLocked = true;\r\n        //@ts-ignore target is checked\r\n        this.run(target).then((result) => {\r\n            this.onActionFinish(ev, result);\r\n        }).catch((e) => {\r\n            this._log.exception(e);\r\n        }).finally(() => {\r\n            this.isLocked = false;\r\n        });\r\n    }\r\n    run(target) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let cuiId = target.$cuid;\r\n            if (is(cuiId)) {\r\n                yield this.utils.bus.emit(EVENTS.CLOSE, cuiId, this.args.state);\r\n                return false;\r\n            }\r\n            else if (are(this.args.action, this.args.timeout)) {\r\n                let actions = CuiActionsListFactory.get(this.args.action);\r\n                return this.actionsHelper.performActions(target, actions, this.args.timeout, () => {\r\n                    this.removeActiveClass(target);\r\n                });\r\n            }\r\n            else {\r\n                this.removeActiveClassAsync(target);\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n    removeActiveClass(target) {\r\n        if (is(target) && this.helper.hasClass(this.activeClassName, target)) {\r\n            this.helper.removeClass(this.activeClassName, target);\r\n        }\r\n    }\r\n    removeActiveClassAsync(target) {\r\n        this.fetch(() => {\r\n            if (is(target) && this.helper.hasClass(this.activeClassName, target)) {\r\n                this.helper.removeClassesAs(target, this.activeClassName);\r\n            }\r\n        });\r\n    }\r\n    onActionFinish(ev, shouldEmit) {\r\n        if (shouldEmit)\r\n            this.emitClose(ev);\r\n    }\r\n    getTarget() {\r\n        var _a;\r\n        if (!is(this.args.target)) {\r\n            return getParentCuiElement(this.element);\r\n        }\r\n        return (_a = document.querySelector(this.args.target)) !== null && _a !== void 0 ? _a : getParentCuiElement(this.element);\r\n    }\r\n    emitClose(ev) {\r\n        this.emitEvent(EVENTS.CLOSED, {\r\n            timestamp: Date.now(),\r\n            state: this.args.state,\r\n            event: ev\r\n        });\r\n    }\r\n}\r\n_eventId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTimeout, _prefix, _prefix_1, _bodyClass, _scrollY;\r\nimport { replacePrefix, isStringTrue, getStringOrDefault, getIntOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { AriaAttributes } from \"cui-light-core/dist/esm/utils/aria\";\r\nimport { CuiInteractableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nconst COVER_OPEN_ANIMATION_CLASS = '.{prefix}-dialog-default-in';\r\nconst COVER_CLOSE_ANIMATION_CLASS = '.{prefix}-dialog-default-out';\r\nconst bodyClass = '{prefix}-cover-open';\r\nexport class CuiCoverArgs {\r\n    constructor(prefix, defTimeout) {\r\n        _defTimeout.set(this, void 0);\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTimeout, defTimeout !== null && defTimeout !== void 0 ? defTimeout : 300);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        this.escClose = false;\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n        this.openAct = \"\";\r\n        this.closeAct = \"\";\r\n        this.keyClose = \"\";\r\n    }\r\n    parse(args) {\r\n        this.escClose = isStringTrue(args.escClose);\r\n        this.keyClose = args.keyClose;\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.openAct = getStringOrDefault(args.openAct, replacePrefix(COVER_OPEN_ANIMATION_CLASS, __classPrivateFieldGet(this, _prefix)));\r\n        this.closeAct = getStringOrDefault(args.closeAct, replacePrefix(COVER_CLOSE_ANIMATION_CLASS, __classPrivateFieldGet(this, _prefix)));\r\n    }\r\n}\r\n_defTimeout = new WeakMap(), _prefix = new WeakMap();\r\nexport class CuiCoverComponent {\r\n    constructor(prefix) {\r\n        _prefix_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix_1, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix_1)}-cover`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiCoverHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix_1));\r\n    }\r\n}\r\n_prefix_1 = new WeakMap();\r\nexport class CuiCoverHandler extends CuiInteractableHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiDialogHandler\", element, attribute, new CuiCoverArgs(prefix, utils.setup.animationTimeLong), utils);\r\n        _bodyClass.set(this, void 0);\r\n        _scrollY.set(this, void 0);\r\n        __classPrivateFieldSet(this, _bodyClass, replacePrefix(bodyClass, prefix));\r\n        __classPrivateFieldSet(this, _scrollY, 0);\r\n    }\r\n    onInit() {\r\n        AriaAttributes.setAria(this.element, 'aria-modal', \"\");\r\n    }\r\n    onUpdate() {\r\n    }\r\n    onDestroy() {\r\n    }\r\n    onBeforeOpen() {\r\n        if (this.isAnyActive()) {\r\n            return false;\r\n        }\r\n        __classPrivateFieldSet(this, _scrollY, window.pageYOffset);\r\n        return true;\r\n    }\r\n    onAfterOpen() {\r\n        this.helper.setClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n        document.body.style.top = `-${__classPrivateFieldGet(this, _scrollY)}px`;\r\n        AriaAttributes.setAria(this.element, 'aria-hidden', \"false\");\r\n    }\r\n    onAfterClose() {\r\n        document.body.style.top = '';\r\n        window.scrollTo(0, (__classPrivateFieldGet(this, _scrollY) || 0) * -1);\r\n        __classPrivateFieldSet(this, _scrollY, 0);\r\n        this.helper.removeClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n        AriaAttributes.setAria(this.element, 'aria-hidden', \"true\");\r\n    }\r\n    onBeforeClose() {\r\n        return true;\r\n    }\r\n    isAnyActive() {\r\n        return this.helper.hasClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n    }\r\n}\r\n_bodyClass = new WeakMap(), _scrollY = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTimeout, _prefix, _prefix_1, _prefix_2, _bodyClass, _scrollY, _windowClickEventId;\r\nimport { replacePrefix, isStringTrue, getStringOrDefault, getIntOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { AriaAttributes } from \"cui-light-core/dist/esm/utils/aria\";\r\nimport { CuiInteractableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nconst DIALOG_OPEN_ANIMATION_CLASS = '.{prefix}-dialog-default-in';\r\nconst DIALOG_CLOSE_ANIMATION_CLASS = '.{prefix}-dialog-default-out';\r\nconst bodyClass = '{prefix}-dialog-open';\r\nconst CONTAINER = '.{prefix}-dialog-container';\r\nexport class CuiDialogArgs {\r\n    constructor(prefix, defTimeout) {\r\n        _defTimeout.set(this, void 0);\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTimeout, defTimeout !== null && defTimeout !== void 0 ? defTimeout : 300);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        this.escClose = false;\r\n        this.outClose = false;\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n        this.openAct = \"\";\r\n        this.closeAct = \"\";\r\n        this.keyClose = \"\";\r\n    }\r\n    parse(args) {\r\n        this.escClose = isStringTrue(args.escClose);\r\n        this.outClose = isStringTrue(args.outClose);\r\n        this.keyClose = args.keyClose;\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.openAct = getStringOrDefault(args.openAct, replacePrefix(DIALOG_OPEN_ANIMATION_CLASS, __classPrivateFieldGet(this, _prefix)));\r\n        this.closeAct = getStringOrDefault(args.closeAct, replacePrefix(DIALOG_CLOSE_ANIMATION_CLASS, __classPrivateFieldGet(this, _prefix)));\r\n    }\r\n}\r\n_defTimeout = new WeakMap(), _prefix = new WeakMap();\r\nexport class CuiDialogComponent {\r\n    constructor(prefix) {\r\n        _prefix_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix_1, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix_1)}-dialog`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiDialogHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix_1));\r\n    }\r\n}\r\n_prefix_1 = new WeakMap();\r\nexport class CuiDialogHandler extends CuiInteractableHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiDialogHandler\", element, attribute, new CuiDialogArgs(prefix, utils.setup.animationTimeLong), utils);\r\n        _prefix_2.set(this, void 0);\r\n        _bodyClass.set(this, void 0);\r\n        _scrollY.set(this, void 0);\r\n        _windowClickEventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _bodyClass, replacePrefix(bodyClass, prefix));\r\n        __classPrivateFieldSet(this, _prefix_2, prefix);\r\n        __classPrivateFieldSet(this, _scrollY, 0);\r\n        __classPrivateFieldSet(this, _windowClickEventId, null);\r\n    }\r\n    onInit() {\r\n        AriaAttributes.setAria(this.element, 'aria-modal', \"\");\r\n    }\r\n    onUpdate() {\r\n    }\r\n    onDestroy() {\r\n    }\r\n    onBeforeOpen() {\r\n        if (this.isAnyActive()) {\r\n            return false;\r\n        }\r\n        __classPrivateFieldSet(this, _scrollY, window.pageYOffset);\r\n        return true;\r\n    }\r\n    onAfterOpen() {\r\n        if (this.args.outClose) {\r\n            __classPrivateFieldSet(this, _windowClickEventId, this.onEvent(EVENTS.WINDOW_CLICK, this.onWindowClick.bind(this)));\r\n        }\r\n        this.helper.setClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n        document.body.style.top = `-${__classPrivateFieldGet(this, _scrollY)}px`;\r\n    }\r\n    onAfterClose() {\r\n        document.body.style.top = '';\r\n        window.scrollTo(0, (__classPrivateFieldGet(this, _scrollY) || 0) * -1);\r\n        __classPrivateFieldSet(this, _scrollY, 0);\r\n        this.helper.removeClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n        this.detachEvent(EVENTS.WINDOW_CLICK, __classPrivateFieldGet(this, _windowClickEventId));\r\n    }\r\n    onBeforeClose() {\r\n        return true;\r\n    }\r\n    isAnyActive() {\r\n        return this.helper.hasClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n    }\r\n    onWindowClick(ev) {\r\n        let container = this.element.querySelector(replacePrefix(CONTAINER, __classPrivateFieldGet(this, _prefix_2)));\r\n        if (container && !container.contains(ev.target)) {\r\n            this.close('out').then(() => {\r\n                this._log.debug(\"Closed by click outside\");\r\n            });\r\n        }\r\n    }\r\n}\r\n_prefix_2 = new WeakMap(), _bodyClass = new WeakMap(), _scrollY = new WeakMap(), _windowClickEventId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _target, _callback, _inProgress, _isHovering, _isAttached, _onOverBound, _onMoveBound, _onOutBound;\r\nimport { are } from \"../utils/functions\";\r\nexport class CuiHoverListener {\r\n    constructor(target) {\r\n        _target.set(this, void 0);\r\n        _callback.set(this, void 0);\r\n        _inProgress.set(this, void 0);\r\n        _isHovering.set(this, void 0);\r\n        _isAttached.set(this, void 0);\r\n        _onOverBound.set(this, void 0);\r\n        _onMoveBound.set(this, void 0);\r\n        _onOutBound.set(this, void 0);\r\n        __classPrivateFieldSet(this, _target, target);\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n        __classPrivateFieldSet(this, _isHovering, false);\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n        __classPrivateFieldSet(this, _callback, undefined);\r\n        __classPrivateFieldSet(this, _onMoveBound, this.onMouseMove.bind(this));\r\n        __classPrivateFieldSet(this, _onOutBound, this.onMouseOut.bind(this));\r\n        __classPrivateFieldSet(this, _onOverBound, this.onMouseOver.bind(this));\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    isInProgress() {\r\n        return __classPrivateFieldGet(this, _inProgress);\r\n    }\r\n    attach() {\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _target).addEventListener(\"mouseover\", __classPrivateFieldGet(this, _onOverBound));\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _target).addEventListener(\"mousemove\", __classPrivateFieldGet(this, _onMoveBound));\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _target).addEventListener(\"mouseout\", __classPrivateFieldGet(this, _onOutBound));\r\n        __classPrivateFieldSet(this, _isAttached, true);\r\n    }\r\n    detach() {\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _target).removeEventListener(\"mouseover\", __classPrivateFieldGet(this, _onOverBound));\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _target).removeEventListener(\"mousemove\", __classPrivateFieldGet(this, _onMoveBound));\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _target).removeEventListener(\"mouseout\", __classPrivateFieldGet(this, _onOutBound));\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n    }\r\n    emit(mouseEvent, force) {\r\n        if (!are(__classPrivateFieldGet(this, _callback))) {\r\n            return;\r\n        }\r\n        if (!force && __classPrivateFieldGet(this, _inProgress)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _inProgress, true);\r\n        window.requestAnimationFrame(this.invoke.bind(this, {\r\n            isHovering: __classPrivateFieldGet(this, _isHovering),\r\n            event: mouseEvent,\r\n            timestamp: Date.now()\r\n        }));\r\n    }\r\n    isAttached() {\r\n        return __classPrivateFieldGet(this, _isAttached);\r\n    }\r\n    invoke(ev) {\r\n        if (__classPrivateFieldGet(this, _callback))\r\n            __classPrivateFieldGet(this, _callback).call(this, ev);\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n    }\r\n    onMouseOver(ev) {\r\n        __classPrivateFieldSet(this, _isHovering, true);\r\n        this.emit(ev, true);\r\n    }\r\n    onMouseOut(ev) {\r\n        __classPrivateFieldSet(this, _isHovering, false);\r\n        this.emit(ev, true);\r\n    }\r\n    onMouseMove(ev) {\r\n        this.emit(ev, false);\r\n    }\r\n}\r\n_target = new WeakMap(), _callback = new WeakMap(), _inProgress = new WeakMap(), _isHovering = new WeakMap(), _isAttached = new WeakMap(), _onOverBound = new WeakMap(), _onMoveBound = new WeakMap(), _onOutBound = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _box, _targetWidth, _targetHeight, _margin;\r\nimport { CuiPositionError } from \"../models/errors\";\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiBasePositionEvaluator {\r\n    constructor() {\r\n        _box.set(this, void 0);\r\n        _targetWidth.set(this, void 0);\r\n        _targetHeight.set(this, void 0);\r\n        _margin.set(this, void 0);\r\n        __classPrivateFieldSet(this, _targetHeight, -1);\r\n        __classPrivateFieldSet(this, _targetWidth, -1);\r\n        __classPrivateFieldSet(this, _box, undefined);\r\n        __classPrivateFieldSet(this, _margin, 0);\r\n    }\r\n    setElementBox(box) {\r\n        __classPrivateFieldSet(this, _box, box);\r\n    }\r\n    setTarget(targetBox) {\r\n        __classPrivateFieldSet(this, _targetWidth, targetBox.width);\r\n        __classPrivateFieldSet(this, _targetHeight, targetBox.height);\r\n    }\r\n    setMargin(value) {\r\n        __classPrivateFieldSet(this, _margin, value);\r\n    }\r\n    getVerticalPosition(value) {\r\n        switch (value) {\r\n            case 'top':\r\n                return this.getTopPosition();\r\n            case \"bottom\":\r\n                return this.getBottomPosition();\r\n            case \"middle\":\r\n                return this.getMiddlePosition();\r\n            default:\r\n                return -1;\r\n        }\r\n    }\r\n    getHorizontalPosition(value) {\r\n        switch (value) {\r\n            case 'left':\r\n                return this.getLeftPosition();\r\n            case \"right\":\r\n                return this.getRightPosition();\r\n            case \"center\":\r\n                return this.getCenterPosition();\r\n            default:\r\n                return -1;\r\n        }\r\n    }\r\n    getAutoVerticalPosition(initial) {\r\n        let innerHeight = window.innerHeight;\r\n        let number = this.getVerticalPosition(initial);\r\n        if ((initial === 'top' || initial === \"middle\") && number < 0) {\r\n            return [this.getVerticalPosition(\"bottom\"), \"bottom\"];\r\n        }\r\n        else if ((initial === \"bottom\" || initial === \"middle\") && number + __classPrivateFieldGet(this, _targetHeight) > innerHeight) {\r\n            return [this.getVerticalPosition(\"top\"), \"top\"];\r\n        }\r\n        return [number, initial];\r\n    }\r\n    getAutoHorizontalPosition(initial) {\r\n        let innerWidth = window.innerWidth;\r\n        let number = this.getHorizontalPosition(initial);\r\n        if ((initial === 'right' || initial === \"center\") && number < 0) {\r\n            return [this.getHorizontalPosition(\"left\"), \"left\"];\r\n        }\r\n        else if ((initial === 'left' || initial === \"center\") && number + __classPrivateFieldGet(this, _targetWidth) > innerWidth) {\r\n            return [this.getHorizontalPosition(\"right\"), \"right\"];\r\n        }\r\n        return [number, initial];\r\n    }\r\n    getTopPosition() {\r\n        this.throwIfNotValid(\"getTopPosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return __classPrivateFieldGet(this, _box).top - __classPrivateFieldGet(this, _margin) - __classPrivateFieldGet(this, _targetHeight);\r\n    }\r\n    getBottomPosition() {\r\n        this.throwIfNotValid(\"getBottomPosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return __classPrivateFieldGet(this, _box).top + __classPrivateFieldGet(this, _box).height + __classPrivateFieldGet(this, _margin);\r\n    }\r\n    getMiddlePosition() {\r\n        this.throwIfNotValid(\"getMiddlePosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return (__classPrivateFieldGet(this, _box).top + __classPrivateFieldGet(this, _box).height / 2) - __classPrivateFieldGet(this, _targetHeight) / 2;\r\n    }\r\n    getLeftPosition() {\r\n        this.throwIfNotValid(\"getLeftPosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return __classPrivateFieldGet(this, _box).left;\r\n    }\r\n    getRightPosition() {\r\n        this.throwIfNotValid(\"getRightPosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return __classPrivateFieldGet(this, _box).left + __classPrivateFieldGet(this, _box).width - __classPrivateFieldGet(this, _targetWidth);\r\n    }\r\n    getCenterPosition() {\r\n        this.throwIfNotValid(\"getCenterPosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return (__classPrivateFieldGet(this, _box).left + __classPrivateFieldGet(this, _box).width / 2) - __classPrivateFieldGet(this, _targetWidth) / 2;\r\n    }\r\n    validate() {\r\n        return is(__classPrivateFieldGet(this, _box)) && __classPrivateFieldGet(this, _targetHeight) > 0 && __classPrivateFieldGet(this, _targetWidth) > 0;\r\n    }\r\n    throwIfNotValid(method) {\r\n        if (!this.validate()) {\r\n            throw new CuiPositionError(`[${method}] Position cannot be calculated: missing data [width: ${__classPrivateFieldGet(this, _targetWidth)}][height: ${__classPrivateFieldGet(this, _targetHeight)}]`);\r\n        }\r\n    }\r\n}\r\n_box = new WeakMap(), _targetWidth = new WeakMap(), _targetHeight = new WeakMap(), _margin = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _static, _preferred, _evaluator, _log;\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\nimport { is } from \"../utils/functions\";\r\nimport { CuiBasePositionEvaluator } from \"./evaluator\";\r\nexport class CuiBasePositionCalculator {\r\n    constructor(evaluator) {\r\n        _static.set(this, void 0);\r\n        _preferred.set(this, void 0);\r\n        _evaluator.set(this, void 0);\r\n        _log.set(this, void 0);\r\n        __classPrivateFieldSet(this, _preferred, \"top-center\");\r\n        __classPrivateFieldSet(this, _static, \"\");\r\n        __classPrivateFieldSet(this, _evaluator, evaluator !== null && evaluator !== void 0 ? evaluator : new CuiBasePositionEvaluator());\r\n        __classPrivateFieldSet(this, _log, CuiLoggerFactory.get(\"CuiBasePositionCalculator\"));\r\n    }\r\n    setMargin(value) {\r\n        __classPrivateFieldGet(this, _evaluator).setMargin(value);\r\n    }\r\n    setPreferred(position) {\r\n        __classPrivateFieldSet(this, _preferred, position);\r\n    }\r\n    setStatic(position) {\r\n        __classPrivateFieldSet(this, _static, position);\r\n    }\r\n    //targetWidth: number, targetHeight: number\r\n    calculate(elementBox, targetBox) {\r\n        __classPrivateFieldGet(this, _evaluator).setElementBox(elementBox);\r\n        __classPrivateFieldGet(this, _evaluator).setTarget(targetBox);\r\n        if (is(__classPrivateFieldGet(this, _static))) {\r\n            __classPrivateFieldGet(this, _log).debug(\"Evaluating static position\");\r\n            const [vertical, horizontal] = this.parse(__classPrivateFieldGet(this, _static));\r\n            return [__classPrivateFieldGet(this, _evaluator).getHorizontalPosition(horizontal), __classPrivateFieldGet(this, _evaluator).getVerticalPosition(vertical), __classPrivateFieldGet(this, _static)];\r\n        }\r\n        let [vertical, horizontal] = [\"\", \"\"];\r\n        if (is(__classPrivateFieldGet(this, _preferred))) {\r\n            __classPrivateFieldGet(this, _log).debug(\"Evaluating auto position\");\r\n            [vertical, horizontal] = this.parse(__classPrivateFieldGet(this, _preferred));\r\n        }\r\n        vertical = vertical !== null && vertical !== void 0 ? vertical : \"top\";\r\n        horizontal = horizontal !== null && horizontal !== void 0 ? horizontal : \"center\";\r\n        __classPrivateFieldGet(this, _log).debug(\"Calculating position: \" + vertical + \"-\" + horizontal);\r\n        const [outVNum, outVPos] = __classPrivateFieldGet(this, _evaluator).getAutoVerticalPosition(vertical);\r\n        const [outHNum, outHPos] = __classPrivateFieldGet(this, _evaluator).getAutoHorizontalPosition(horizontal);\r\n        __classPrivateFieldGet(this, _log).debug(\"Calculated position: \" + outVPos + \"-\" + outHPos);\r\n        return [outHNum, outVNum, outVPos + \"-\" + outHPos];\r\n    }\r\n    parse(position) {\r\n        return position.split(\"-\");\r\n    }\r\n}\r\n_static = new WeakMap(), _preferred = new WeakMap(), _evaluator = new WeakMap(), _log = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _taskId, _autoRenew, _timeout, _callback;\r\nimport { is } from \"./functions\";\r\nexport class CuiTaskRunner {\r\n    constructor(timeout, autoRenew, callback) {\r\n        _taskId.set(this, void 0);\r\n        _autoRenew.set(this, void 0);\r\n        _timeout.set(this, void 0);\r\n        _callback.set(this, void 0);\r\n        __classPrivateFieldSet(this, _autoRenew, autoRenew);\r\n        __classPrivateFieldSet(this, _timeout, timeout);\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    start() {\r\n        if (!this.canRun()) {\r\n            return;\r\n        }\r\n        this.stop();\r\n        __classPrivateFieldSet(this, _taskId, setTimeout(() => {\r\n            //@ts-ignore - already checked in canRun\r\n            __classPrivateFieldGet(this, _callback).call(this);\r\n            __classPrivateFieldSet(this, _taskId, null);\r\n            if (__classPrivateFieldGet(this, _autoRenew)) {\r\n                this.start();\r\n            }\r\n        }, __classPrivateFieldGet(this, _timeout)));\r\n    }\r\n    stop() {\r\n        if (__classPrivateFieldGet(this, _taskId)) {\r\n            clearTimeout(__classPrivateFieldGet(this, _taskId));\r\n            __classPrivateFieldSet(this, _taskId, null);\r\n        }\r\n    }\r\n    getId() {\r\n        return __classPrivateFieldGet(this, _taskId);\r\n    }\r\n    canRun() {\r\n        return is(__classPrivateFieldGet(this, _callback)) && __classPrivateFieldGet(this, _timeout) > 0;\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    setTimeout(timeout) {\r\n        __classPrivateFieldSet(this, _timeout, timeout);\r\n    }\r\n}\r\n_taskId = new WeakMap(), _autoRenew = new WeakMap(), _timeout = new WeakMap(), _callback = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defOpenAct, _prefix, _prefix_1, _bodyClass, _attribute, _triggerHoverListener, _hoverListener, _trigger, _windowClickEventId, _openEventId, _closeEventId, _positionCalculator, _posClass, _autoTask, _actions;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { is, replacePrefix, isStringTrue, getStringOrDefault, getIntOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS, SCOPE_SELECTOR } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { AriaAttributes } from \"cui-light-core/dist/esm/utils/aria\";\r\nimport { CuiHoverListener } from \"cui-light-core/dist/esm/listeners/hover\";\r\nimport { CuiBasePositionCalculator } from \"cui-light-core/dist/esm/position/calculator\";\r\nimport { CuiTaskRunner } from \"cui-light-core/dist/esm/utils/task\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nconst bodyClass = '{prefix}-drop-open';\r\nconst DROP_POSITION = \"{prefix}-drop-position-\";\r\nconst DROP_TRIGGER = \"{prefix}-drop-trigger\";\r\nconst DROP_DEFAULT_TRIGGER = \"> a, button\";\r\nconst DROP_DEFAULT_ANIMATION_CLS = '{prefix}-drop-animation-in';\r\nexport class CuiDropArgs {\r\n    constructor(prefix) {\r\n        _defOpenAct.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defOpenAct, replacePrefix(DROP_DEFAULT_ANIMATION_CLS, prefix));\r\n        this.mode = \"click\";\r\n        this.trigger = DROP_DEFAULT_TRIGGER;\r\n        this.autoClose = false;\r\n        this.outClose = false;\r\n        this.prevent = false;\r\n        this.pos = \"\";\r\n        this.action = __classPrivateFieldGet(this, _defOpenAct);\r\n        this.timeout = 3000;\r\n        this.margin = 8;\r\n    }\r\n    parse(args) {\r\n        this.mode = getStringOrDefault(args.mode, 'click').toLowerCase();\r\n        this.trigger = SCOPE_SELECTOR + getStringOrDefault(args.trigger, DROP_DEFAULT_TRIGGER);\r\n        this.prevent = isStringTrue(args.prevent);\r\n        this.autoClose = isStringTrue(args.autoClose);\r\n        this.outClose = args.outClose ? isStringTrue(args.outClose) : true;\r\n        this.pos = getStringOrDefault(args.pos, \"\");\r\n        this.action = getStringOrDefault(args.action, __classPrivateFieldGet(this, _defOpenAct));\r\n        this.timeout = getIntOrDefault(args.timeout, 3000);\r\n        this.margin = getIntOrDefault(args.margin, 8);\r\n    }\r\n}\r\n_defOpenAct = new WeakMap();\r\nexport class CuiDropComponenet {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix)}-drop`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiDropHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiDropHandler extends CuiHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuidropHandler\", element, attribute, new CuiDropArgs(prefix), utils);\r\n        _prefix_1.set(this, void 0);\r\n        _bodyClass.set(this, void 0);\r\n        _attribute.set(this, void 0);\r\n        _triggerHoverListener.set(this, void 0);\r\n        _hoverListener.set(this, void 0);\r\n        _trigger.set(this, void 0);\r\n        _windowClickEventId.set(this, void 0);\r\n        _openEventId.set(this, void 0);\r\n        _closeEventId.set(this, void 0);\r\n        _positionCalculator.set(this, void 0);\r\n        _posClass.set(this, void 0);\r\n        _autoTask.set(this, void 0);\r\n        _actions.set(this, void 0);\r\n        __classPrivateFieldSet(this, _attribute, attribute);\r\n        __classPrivateFieldSet(this, _prefix_1, prefix);\r\n        __classPrivateFieldSet(this, _bodyClass, replacePrefix(bodyClass, prefix));\r\n        __classPrivateFieldSet(this, _hoverListener, new CuiHoverListener(this.element));\r\n        __classPrivateFieldGet(this, _hoverListener).setCallback(this.onElementHover.bind(this));\r\n        __classPrivateFieldSet(this, _windowClickEventId, null);\r\n        __classPrivateFieldSet(this, _openEventId, null);\r\n        __classPrivateFieldSet(this, _closeEventId, null);\r\n        this.onTriggerClick = this.onTriggerClick.bind(this);\r\n        __classPrivateFieldSet(this, _positionCalculator, new CuiBasePositionCalculator());\r\n        __classPrivateFieldGet(this, _positionCalculator).setMargin(8);\r\n        __classPrivateFieldGet(this, _positionCalculator).setPreferred(\"bottom-left\");\r\n        __classPrivateFieldSet(this, _posClass, \"\");\r\n        __classPrivateFieldSet(this, _triggerHoverListener, undefined);\r\n        __classPrivateFieldSet(this, _trigger, this.element);\r\n        __classPrivateFieldSet(this, _actions, []);\r\n        __classPrivateFieldSet(this, _autoTask, new CuiTaskRunner(this.args.timeout, false, this.close.bind(this)));\r\n        ;\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldSet(this, _trigger, this.acquireTrigger());\r\n        __classPrivateFieldSet(this, _triggerHoverListener, new CuiHoverListener(__classPrivateFieldGet(this, _trigger)));\r\n        this.setTriggerEvent();\r\n        __classPrivateFieldSet(this, _openEventId, this.onEvent(EVENTS.OPEN, this.open.bind(this)));\r\n        __classPrivateFieldSet(this, _closeEventId, this.onEvent(EVENTS.CLOSE, this.close.bind(this)));\r\n        __classPrivateFieldGet(this, _positionCalculator).setStatic(this.args.pos);\r\n        __classPrivateFieldGet(this, _positionCalculator).setMargin(this.args.margin);\r\n        __classPrivateFieldSet(this, _autoTask, new CuiTaskRunner(this.args.timeout, false, this.close.bind(this)));\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n        this.mutate(() => {\r\n            AriaAttributes.setAria(this.element, 'aria-dropdown', \"\");\r\n        });\r\n        this._log.debug(\"Initialized\", \"handle\");\r\n    }\r\n    onUpdate() {\r\n        if (__classPrivateFieldGet(this, _triggerHoverListener) && __classPrivateFieldGet(this, _triggerHoverListener).isAttached()) {\r\n            __classPrivateFieldGet(this, _triggerHoverListener).detach();\r\n        }\r\n        else if (this.prevArgs && this.prevArgs.mode === 'click') {\r\n            //@ts-ignore \r\n            __classPrivateFieldGet(this, _trigger).removeEventListener('click', this.onTriggerClick);\r\n        }\r\n        __classPrivateFieldSet(this, _trigger, this.acquireTrigger());\r\n        __classPrivateFieldSet(this, _triggerHoverListener, new CuiHoverListener(__classPrivateFieldGet(this, _trigger)));\r\n        this.setTriggerEvent();\r\n        __classPrivateFieldGet(this, _positionCalculator).setStatic(this.args.pos);\r\n        __classPrivateFieldGet(this, _positionCalculator).setMargin(this.args.margin);\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n        __classPrivateFieldGet(this, _autoTask).setTimeout(this.args.timeout);\r\n    }\r\n    onDestroy() {\r\n        this.detachEvent(EVENTS.OPEN, __classPrivateFieldGet(this, _openEventId));\r\n        this.detachEvent(EVENTS.CLOSE, __classPrivateFieldGet(this, _closeEventId));\r\n    }\r\n    /**\r\n    * Api Method open\r\n    */\r\n    open() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.checkLockAndWarn('open')) {\r\n                return false;\r\n            }\r\n            if (this.isActive()) {\r\n                return this.close();\r\n            }\r\n            if (this.isAnyActive()) {\r\n                yield this.findAndCloseOpenedDrop();\r\n            }\r\n            this.isLocked = true;\r\n            this._log.debug(`Drop ${this.cuid}`, 'open');\r\n            this.onOpen();\r\n            this.isLocked = false;\r\n            return true;\r\n        });\r\n    }\r\n    /**\r\n     * Api Method close\r\n     */\r\n    close() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.checkLockAndWarn(\"close\") || !this.isActive()) {\r\n                return false;\r\n            }\r\n            this.isLocked = true;\r\n            this.logInfo(`Drop ${this.cuid}`, 'close');\r\n            this.onClose();\r\n            this.detachEvent(EVENTS.WINDOW_CLICK, __classPrivateFieldGet(this, _windowClickEventId));\r\n            this.emitEvent(EVENTS.CLOSED, {\r\n                timestamp: Date.now()\r\n            });\r\n            __classPrivateFieldGet(this, _hoverListener).detach();\r\n            this.isLocked = false;\r\n            return true;\r\n        });\r\n    }\r\n    onClose() {\r\n        this.mutate(() => {\r\n            this.helper.removeClass(this.activeClassName, this.element);\r\n            this.helper.removeClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n            this.toggleActions();\r\n            this.helper.removeClass(__classPrivateFieldGet(this, _posClass), this.element);\r\n            AriaAttributes.setAria(this.element, 'aria-expanded', 'false');\r\n        });\r\n    }\r\n    onOpen() {\r\n        this.helper.setClass(this.activeClassName, this.element);\r\n        this.mutate(() => {\r\n            const box = __classPrivateFieldGet(this, _trigger).getBoundingClientRect();\r\n            try {\r\n                const [x, y, pos] = __classPrivateFieldGet(this, _positionCalculator).calculate(box, this.element.getBoundingClientRect());\r\n                this.element.style.top = `${y - box.top}px`;\r\n                this.element.style.left = `${x - box.left}px`;\r\n                __classPrivateFieldSet(this, _posClass, replacePrefix(DROP_POSITION + pos, __classPrivateFieldGet(this, _prefix_1)));\r\n                this.toggleActions();\r\n                this.helper.setClass(__classPrivateFieldGet(this, _posClass), this.element);\r\n                this.helper.setClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n                this.emitEvent(EVENTS.OPENED, {\r\n                    timestamp: Date.now()\r\n                });\r\n                __classPrivateFieldGet(this, _hoverListener).attach();\r\n                this.runAutoCloseTask();\r\n                if (this.args.outClose) {\r\n                    __classPrivateFieldSet(this, _windowClickEventId, this.onEvent(EVENTS.WINDOW_CLICK, this.onWindowClick.bind(this)));\r\n                }\r\n                AriaAttributes.setAria(this.element, 'aria-expanded', 'true');\r\n            }\r\n            catch (e) {\r\n                this._log.exception(e);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Event invoked when window is clicked\r\n     * @param ev\r\n     */\r\n    onWindowClick(ev) {\r\n        if (!this.element.contains(ev.target)) {\r\n            this.close();\r\n        }\r\n    }\r\n    isAnyActive() {\r\n        return this.helper.hasClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n    }\r\n    /**\r\n     * Finds and opens other active drop element\r\n     */\r\n    findAndCloseOpenedDrop() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const opened = document.querySelector(`[${__classPrivateFieldGet(this, _attribute)}].${this.activeClassName}`);\r\n            if (!is(opened)) {\r\n                this._log.warning(\"Opened drop was not found\");\r\n                return false;\r\n            }\r\n            //@ts-ignore opened checked\r\n            const handler = opened.$handlers[__classPrivateFieldGet(this, _attribute)];\r\n            if (!is(handler)) {\r\n                this._log.warning(\"Drop handler was not found in the element\");\r\n                return false;\r\n            }\r\n            return handler.close();\r\n        });\r\n    }\r\n    /**\r\n     * Invoked when trigger button is clicked\r\n     * @param ev\r\n     */\r\n    onTriggerClick(ev) {\r\n        if (this.isActive()) {\r\n            this.close();\r\n        }\r\n        else {\r\n            this.open();\r\n        }\r\n        if (this.args.prevent) {\r\n            ev.preventDefault();\r\n        }\r\n    }\r\n    /**\r\n    * Invoked when trigger button is hovered on\r\n    * @param ev\r\n    */\r\n    onHoverEvent(ev) {\r\n        if (ev.isHovering && !this.isActive()) {\r\n            this.open();\r\n        }\r\n        if (this.args.prevent) {\r\n            ev.event.preventDefault();\r\n        }\r\n    }\r\n    /**\r\n     * Method triggered when opened element is hovered on\r\n     * @param ev\r\n     */\r\n    onElementHover(ev) {\r\n        if (ev.isHovering) {\r\n            __classPrivateFieldGet(this, _autoTask).stop();\r\n        }\r\n        else if (!ev.isHovering && this.args.autoClose) {\r\n            this.runAutoCloseTask();\r\n        }\r\n    }\r\n    /**\r\n     * Sets event on trigger button\r\n     */\r\n    setTriggerEvent() {\r\n        if (this.args.mode === 'hover' && __classPrivateFieldGet(this, _triggerHoverListener)) {\r\n            __classPrivateFieldGet(this, _triggerHoverListener).setCallback(this.onHoverEvent.bind(this));\r\n            __classPrivateFieldGet(this, _triggerHoverListener).attach();\r\n        }\r\n        else {\r\n            //@ts-ignore\r\n            __classPrivateFieldGet(this, _trigger).addEventListener('click', this.onTriggerClick);\r\n        }\r\n    }\r\n    /**\r\n     * Runs auto-close task on opened element\r\n     */\r\n    runAutoCloseTask() {\r\n        if (!this.args.autoClose) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _autoTask).start();\r\n    }\r\n    toggleActions() {\r\n        __classPrivateFieldGet(this, _actions).forEach(action => {\r\n            action.toggle(this.element);\r\n        });\r\n    }\r\n    acquireTrigger() {\r\n        let ret = null;\r\n        if (!this.element.parentElement) {\r\n            ret = document.querySelector(this.args.trigger);\r\n        }\r\n        else\r\n            ret = this.element.parentElement.querySelector(this.args.trigger);\r\n        return ret !== null && ret !== void 0 ? ret : this.element;\r\n    }\r\n}\r\n_prefix_1 = new WeakMap(), _bodyClass = new WeakMap(), _attribute = new WeakMap(), _triggerHoverListener = new WeakMap(), _hoverListener = new WeakMap(), _trigger = new WeakMap(), _windowClickEventId = new WeakMap(), _openEventId = new WeakMap(), _closeEventId = new WeakMap(), _positionCalculator = new WeakMap(), _posClass = new WeakMap(), _autoTask = new WeakMap(), _actions = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _element, _element_1, _element_2;\r\nexport class BasePositionCalculator {\r\n    calculate(x, y, diffX, diffY) {\r\n        return [x, y];\r\n    }\r\n}\r\nexport class OptionalPositionCalculator {\r\n    constructor(element) {\r\n        _element.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element, element);\r\n    }\r\n    calculate(x, y, diffX, diffY) {\r\n        let newX = __classPrivateFieldGet(this, _element).offsetLeft + diffX;\r\n        let newY = __classPrivateFieldGet(this, _element).offsetTop + diffY;\r\n        return [newX, newY];\r\n    }\r\n}\r\n_element = new WeakMap();\r\nexport class BaseResizeCalculator {\r\n    constructor(element) {\r\n        _element_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element_1, element);\r\n    }\r\n    calculate(x, y, diffX, diffY) {\r\n        let width = x - __classPrivateFieldGet(this, _element_1).offsetLeft;\r\n        let height = y - __classPrivateFieldGet(this, _element_1).offsetTop;\r\n        return [width, height];\r\n    }\r\n}\r\n_element_1 = new WeakMap();\r\nexport class OptionalResizeCalculator {\r\n    constructor(element) {\r\n        _element_2.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element_2, element);\r\n    }\r\n    calculate(x, y, diffX, diffY) {\r\n        let width = __classPrivateFieldGet(this, _element_2).offsetWidth + diffX;\r\n        let height = __classPrivateFieldGet(this, _element_2).offsetHeight + diffY;\r\n        return [width, height];\r\n    }\r\n}\r\n_element_2 = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTimeout, _prefix, _prefix_1, _isMoving, _isResizing, _prevX, _prevY, _prefix_2, _moveListener, _positionCalculator, _resizeCalculator, _resizeBtn, _moveBtn;\r\nimport { replacePrefix, isStringTrue, is, getIntOrDefault, getStringOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { AriaAttributes } from \"cui-light-core/dist/esm/utils/aria\";\r\nimport { CuiInteractableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiMoveEventListener } from \"cui-light-core/dist/esm/listeners/move\";\r\nimport { BasePositionCalculator, BaseResizeCalculator } from \"./helpers\";\r\nimport { CLASSES, EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst FLOAT_OPEN_ANIMATION_CLASS = '.{prefix}-float-default-in';\r\nconst FLOAT_CLOSE_ANIMATION_CLASS = '.{prefix}-float-default-out';\r\nconst MOVE = '.{prefix}-float-move';\r\nconst RESIZE = '.{prefix}-float-resize';\r\nexport class CuiFloatArgs {\r\n    constructor(prefix, defTimeout) {\r\n        _defTimeout.set(this, void 0);\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTimeout, defTimeout !== null && defTimeout !== void 0 ? defTimeout : 300);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        this.escClose = false;\r\n        this.keyClose = \"\";\r\n        this.openAct = \"\";\r\n        this.closeAct = \"\";\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n    }\r\n    parse(args) {\r\n        this.escClose = isStringTrue(args.escClose);\r\n        this.keyClose = args.keyClose;\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.openAct = getStringOrDefault(args.openAct, replacePrefix(FLOAT_OPEN_ANIMATION_CLASS, __classPrivateFieldGet(this, _prefix)));\r\n        this.closeAct = getStringOrDefault(args.closeAct, replacePrefix(FLOAT_CLOSE_ANIMATION_CLASS, __classPrivateFieldGet(this, _prefix)));\r\n    }\r\n}\r\n_defTimeout = new WeakMap(), _prefix = new WeakMap();\r\nexport class CuiFloatComponent {\r\n    constructor(prefix) {\r\n        _prefix_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix_1, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix_1)}-float`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiFloatHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix_1));\r\n    }\r\n}\r\n_prefix_1 = new WeakMap();\r\nexport class CuiFloatHandler extends CuiInteractableHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiFloatHandler\", element, attribute, new CuiFloatArgs(prefix, utils.setup.animationTime), utils);\r\n        _isMoving.set(this, void 0);\r\n        _isResizing.set(this, void 0);\r\n        _prevX.set(this, void 0);\r\n        _prevY.set(this, void 0);\r\n        _prefix_2.set(this, void 0);\r\n        _moveListener.set(this, void 0);\r\n        _positionCalculator.set(this, void 0);\r\n        _resizeCalculator.set(this, void 0);\r\n        _resizeBtn.set(this, void 0);\r\n        _moveBtn.set(this, void 0);\r\n        __classPrivateFieldSet(this, _isMoving, false);\r\n        __classPrivateFieldSet(this, _isResizing, false);\r\n        __classPrivateFieldSet(this, _prevX, 0);\r\n        __classPrivateFieldSet(this, _prevY, 0);\r\n        __classPrivateFieldSet(this, _moveListener, new CuiMoveEventListener());\r\n        __classPrivateFieldGet(this, _moveListener).preventDefault(false);\r\n        __classPrivateFieldSet(this, _positionCalculator, new BasePositionCalculator());\r\n        __classPrivateFieldSet(this, _resizeCalculator, new BaseResizeCalculator(element));\r\n        __classPrivateFieldSet(this, _prefix_2, prefix);\r\n        this.move = this.move.bind(this);\r\n        this.resize = this.resize.bind(this);\r\n        __classPrivateFieldSet(this, _moveBtn, null);\r\n        __classPrivateFieldSet(this, _resizeBtn, null);\r\n    }\r\n    onInit() {\r\n        AriaAttributes.setAria(this.element, 'aria-modal', \"\");\r\n        __classPrivateFieldSet(this, _moveBtn, this.element.querySelector(replacePrefix(MOVE, __classPrivateFieldGet(this, _prefix_2))));\r\n        __classPrivateFieldSet(this, _resizeBtn, this.element.querySelector(replacePrefix(RESIZE, __classPrivateFieldGet(this, _prefix_2))));\r\n        __classPrivateFieldGet(this, _moveListener).setCallback(this.onMove.bind(this));\r\n    }\r\n    onUpdate() {\r\n    }\r\n    onDestroy() {\r\n    }\r\n    onBeforeOpen() {\r\n        return true;\r\n    }\r\n    onAfterOpen() {\r\n        __classPrivateFieldGet(this, _moveListener).attach();\r\n    }\r\n    onAfterClose() {\r\n        __classPrivateFieldGet(this, _moveListener).detach();\r\n    }\r\n    onBeforeClose() {\r\n        return true;\r\n    }\r\n    onMove(ev) {\r\n        switch (ev.type) {\r\n            case 'down':\r\n                this.onMouseDown(ev);\r\n                break;\r\n            case 'up':\r\n                this.onMouseUp(ev);\r\n                break;\r\n            case 'move':\r\n                this.onMouseMove(ev);\r\n                break;\r\n        }\r\n    }\r\n    onMouseDown(ev) {\r\n        if (ev.target === __classPrivateFieldGet(this, _moveBtn)) {\r\n            __classPrivateFieldSet(this, _isMoving, true);\r\n            ev.event.preventDefault();\r\n        }\r\n        else if (ev.target === __classPrivateFieldGet(this, _resizeBtn)) {\r\n            __classPrivateFieldSet(this, _isResizing, true);\r\n            ev.event.preventDefault();\r\n            //this.helper.setClass(\"cui-float-resize-shadow\")\r\n        }\r\n        __classPrivateFieldSet(this, _prevX, ev.x);\r\n        __classPrivateFieldSet(this, _prevY, ev.y);\r\n        this.helper.setClassesAs(document.body, CLASSES.swipingOn);\r\n        // Lock global move handler\r\n        this.utils.bus.emit(EVENTS.MOVE_LOCK, null, true);\r\n    }\r\n    onMouseMove(ev) {\r\n        if (__classPrivateFieldGet(this, _isMoving)) {\r\n            this.peform(ev, this.move);\r\n        }\r\n        else if (__classPrivateFieldGet(this, _isResizing)) {\r\n            this.peform(ev, this.resize);\r\n        }\r\n    }\r\n    onMouseUp(ev) {\r\n        __classPrivateFieldSet(this, _isMoving, false);\r\n        __classPrivateFieldSet(this, _isResizing, false);\r\n        this.helper.removeClassesAs(document.body, CLASSES.swipingOn);\r\n        // Unlock global handler\r\n        this.utils.bus.emit(EVENTS.MOVE_LOCK, null, false);\r\n    }\r\n    peform(ev, callback) {\r\n        this.mutate(() => {\r\n            if (is(callback))\r\n                callback(this.element, ev.x, ev.y, (ev.x - __classPrivateFieldGet(this, _prevX)), (ev.y - __classPrivateFieldGet(this, _prevY)));\r\n            __classPrivateFieldSet(this, _prevX, ev.x);\r\n            __classPrivateFieldSet(this, _prevY, ev.y);\r\n        });\r\n        ev.event.preventDefault();\r\n    }\r\n    resize(element, x, y, diffX, diffY) {\r\n        let [newWidth, newHeight] = __classPrivateFieldGet(this, _resizeCalculator).calculate(x, y, diffX, diffY);\r\n        if (this.fitsWindow(element.offsetTop, element.offsetLeft, newWidth, newHeight)) {\r\n            this.mutate(() => {\r\n                element.style.width = newWidth + \"px\";\r\n                element.style.height = newHeight + \"px\";\r\n            });\r\n        }\r\n    }\r\n    move(element, x, y, diffX, diffY) {\r\n        let [newX, newY] = __classPrivateFieldGet(this, _positionCalculator).calculate(x, y, diffX, diffY);\r\n        if (this.fitsWindow(newY, newX, element.offsetWidth, element.offsetHeight)) {\r\n            this.mutate(() => {\r\n                element.style.left = newX + \"px\";\r\n                element.style.top = newY + \"px\";\r\n            });\r\n        }\r\n    }\r\n    fitsWindow(top, left, width, height) {\r\n        return (top + height < window.innerHeight - 10) &&\r\n            (top > 10) && (left > 10) &&\r\n            (left + width < window.innerWidth - 10);\r\n    }\r\n}\r\n_isMoving = new WeakMap(), _isResizing = new WeakMap(), _prevX = new WeakMap(), _prevY = new WeakMap(), _prefix_2 = new WeakMap(), _moveListener = new WeakMap(), _positionCalculator = new WeakMap(), _resizeCalculator = new WeakMap(), _resizeBtn = new WeakMap(), _moveBtn = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _currentIcon;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { ICONS } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { is, isString, getStringOrDefault, getIntOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { IconBuilder } from \"cui-light-core/dist/esm/builders/icon\";\r\nexport class CuiIconArgs {\r\n    constructor() {\r\n        this.icon = \"\";\r\n        this.scale = 1;\r\n    }\r\n    parse(val) {\r\n        if (isString(val)) {\r\n            this.icon = getStringOrDefault(val, \"\");\r\n        }\r\n        else {\r\n            this.icon = getStringOrDefault(val.icon, \"\");\r\n            this.scale = getIntOrDefault(val.scale, 1);\r\n        }\r\n    }\r\n}\r\nexport class CuiIconComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-icon`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiIconHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiIconHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiIconHandler\", element, attribute, new CuiIconArgs(), utils);\r\n        _currentIcon.set(this, void 0);\r\n        __classPrivateFieldSet(this, _currentIcon, null);\r\n    }\r\n    onInit() {\r\n        if (__classPrivateFieldGet(this, _currentIcon) !== null) {\r\n            this._log.debug(\"Icon already initialized\");\r\n            return;\r\n        }\r\n        this.addIcon(this.args.icon);\r\n        __classPrivateFieldSet(this, _currentIcon, this.args.icon);\r\n    }\r\n    onUpdate() {\r\n        if (this.args.icon === __classPrivateFieldGet(this, _currentIcon)) {\r\n            return;\r\n        }\r\n        this.addIcon(this.args.icon);\r\n        __classPrivateFieldSet(this, _currentIcon, this.args.icon);\r\n    }\r\n    onDestroy() {\r\n        const svg = this.element.querySelector('svg');\r\n        if (is(svg)) {\r\n            //@ts-ignore checked\r\n            svg.remove();\r\n        }\r\n        __classPrivateFieldSet(this, _currentIcon, null);\r\n    }\r\n    addIcon(icon) {\r\n        const iconStr = icon ? ICONS[icon] : null;\r\n        if (!iconStr) {\r\n            return;\r\n        }\r\n        const iconSvg = new IconBuilder(iconStr).setScale(this.args.scale).build();\r\n        const svg = this.element.querySelector('svg');\r\n        if (is(svg)) {\r\n            //@ts-ignore checked\r\n            svg.remove();\r\n        }\r\n        if (this.element.childNodes.length > 0) {\r\n            this.mutate(this.insertBefore, iconSvg);\r\n        }\r\n        else {\r\n            this.mutate(this.appendChild, iconSvg);\r\n        }\r\n    }\r\n    insertBefore(iconElement) {\r\n        this.element.insertBefore(iconElement, this.element.firstChild);\r\n    }\r\n    appendChild(iconElement) {\r\n        this.element.appendChild(iconElement);\r\n    }\r\n}\r\n_currentIcon = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _observer, _root, _threshold, _callback;\r\nexport class CuiIntersectionEntry {\r\n    constructor() {\r\n        this.isInView = false;\r\n        this.ratio = 0;\r\n    }\r\n}\r\n/**\r\n * Creates a wrapper for intersection observer\r\n * Constructor gets a root element for observer and optional array of threshold values [0...1]\r\n */\r\nexport class CuiIntersectionObserver {\r\n    constructor(root, threshold) {\r\n        _observer.set(this, void 0);\r\n        _root.set(this, void 0);\r\n        _threshold.set(this, void 0);\r\n        _callback.set(this, void 0);\r\n        __classPrivateFieldSet(this, _root, root);\r\n        __classPrivateFieldSet(this, _threshold, threshold !== null && threshold !== void 0 ? threshold : [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1]);\r\n        __classPrivateFieldSet(this, _callback, undefined);\r\n        __classPrivateFieldSet(this, _observer, undefined);\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    connect() {\r\n        if (!__classPrivateFieldGet(this, _callback)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _observer, new IntersectionObserver(__classPrivateFieldGet(this, _callback), {\r\n            root: __classPrivateFieldGet(this, _root),\r\n            rootMargin: '0px',\r\n            threshold: __classPrivateFieldGet(this, _threshold)\r\n        }));\r\n    }\r\n    observe(target) {\r\n        if (__classPrivateFieldGet(this, _observer))\r\n            __classPrivateFieldGet(this, _observer).observe(target);\r\n    }\r\n    unobserve(target) {\r\n        if (__classPrivateFieldGet(this, _observer))\r\n            __classPrivateFieldGet(this, _observer).unobserve(target);\r\n    }\r\n    disconnect() {\r\n        if (__classPrivateFieldGet(this, _observer))\r\n            __classPrivateFieldGet(this, _observer).disconnect();\r\n    }\r\n}\r\n_observer = new WeakMap(), _root = new WeakMap(), _threshold = new WeakMap(), _callback = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _observer, _targets, _actions;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiIntersectionObserver } from \"cui-light-core/dist/esm/observers/intersection\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { is, getRangeValueOrDefault, getStringOrDefault, isStringTrue } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS, SCOPE_SELECTOR } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst DEFAULT_SELCTOR = \"> *\";\r\n/**\r\n * Intersection\r\n * Toggles action in/out when target is intersecting with the screen\r\n *\r\n * Set this on scrollable element\r\n * target - children selector\r\n * offset - 0...1 - tells how much target must intersecting with the screen\r\n * action - action to trigger\r\n */\r\nexport class CuiIntersectionAttributes {\r\n    constructor() {\r\n        this.target = \"div\";\r\n        this.action = \"\";\r\n        this.offset = 0;\r\n        this.isRoot = false;\r\n    }\r\n    parse(args) {\r\n        this.target = is(args.target) ? SCOPE_SELECTOR + args.target : SCOPE_SELECTOR + DEFAULT_SELCTOR;\r\n        this.action = getStringOrDefault(args.action, \"\");\r\n        this.offset = getRangeValueOrDefault(parseFloat(args.offset), 0, 1, 0);\r\n        this.isRoot = isStringTrue(args.isRoot);\r\n    }\r\n}\r\nexport class CuiIntersectionComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-intersection`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiIntersectionHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiIntersectionHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiIntersectionHandler\", element, attribute, new CuiIntersectionAttributes(), utils);\r\n        _observer.set(this, void 0);\r\n        _targets.set(this, void 0);\r\n        _actions.set(this, void 0);\r\n        __classPrivateFieldSet(this, _observer, new CuiIntersectionObserver(this.element));\r\n        __classPrivateFieldSet(this, _targets, []);\r\n        __classPrivateFieldSet(this, _actions, []);\r\n    }\r\n    onInit() {\r\n        this.parseArguments();\r\n        __classPrivateFieldGet(this, _observer).setCallback(this.onIntersection.bind(this));\r\n        __classPrivateFieldGet(this, _observer).connect();\r\n        __classPrivateFieldGet(this, _targets).forEach(target => {\r\n            __classPrivateFieldGet(this, _observer).observe(target);\r\n        });\r\n    }\r\n    onUpdate() {\r\n        this.parseArguments();\r\n    }\r\n    onDestroy() {\r\n        __classPrivateFieldGet(this, _observer).disconnect();\r\n    }\r\n    parseArguments() {\r\n        // @ts-ignore prevArgs is correct\r\n        if (!is(this.prevArgs) || (this.prevArgs.target !== this.args.target)) {\r\n            let el = this.args.isRoot ? document.body : this.element;\r\n            __classPrivateFieldSet(this, _targets, [...el.querySelectorAll(this.args.target)]);\r\n        }\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n    }\r\n    onIntersection(entries, observer) {\r\n        if (!is(__classPrivateFieldGet(this, _targets))) {\r\n            return;\r\n        }\r\n        entries.forEach(entry => {\r\n            if (entry.isIntersecting && entry.intersectionRatio >= this.args.offset) {\r\n                this.addActions(entry.target);\r\n            }\r\n            else {\r\n                this.removeActions(entry.target);\r\n            }\r\n            this.emitIntersection(entry);\r\n        });\r\n    }\r\n    emitIntersection(entry) {\r\n        this.emitEvent(EVENTS.INTERSECTION, {\r\n            entry: entry,\r\n            offset: this.args.offset,\r\n            timestamp: Date.now()\r\n        });\r\n    }\r\n    addActions(element) {\r\n        __classPrivateFieldGet(this, _actions).forEach(action => action.add(element));\r\n    }\r\n    removeActions(element) {\r\n        __classPrivateFieldGet(this, _actions).forEach(action => action.remove(element));\r\n    }\r\n}\r\n_observer = new WeakMap(), _targets = new WeakMap(), _actions = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _prefix, _defTimeout, _prefix_1, _prefix_2, _bodyClass, _scrollY, _windowClickEventId;\r\nimport { CuiInteractableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { AriaAttributes } from \"cui-light-core/dist/esm/utils/aria\";\r\nimport { is, isStringTrue, getStringOrDefault, getIntOrDefault, replacePrefix, getName } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst OFFCANVAS_RIGHT_ANIM_DEFAULT_IN = \".{prefix}-offcanvas-default-right-in\";\r\nconst OFFCANVAS_RIGHT_ANIM_DEFAULT_OUT = \".{prefix}-offcanvas-default-right-out\";\r\nconst OFFCANVAS_LEFT_ANIM_DEFAULT_IN = \".{prefix}-offcanvas-default-left-in\";\r\nconst OFFCANVAS_LEFT_ANIM_DEFAULT_OUT = \".{prefix}-offcanvas-default-left-out\";\r\nconst OFFCANVAS_BODY = \"{prefix}-off-canvas-open\";\r\nconst OFFCANVAS_CONTAINER_CLS = '.{prefix}-off-canvas-container';\r\nexport class CuiOffCanvasArgs {\r\n    constructor(prefix, timeout) {\r\n        _prefix.set(this, void 0);\r\n        _defTimeout.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        this.escClose = false;\r\n        this.position = 'right';\r\n        this.openAct = this.getDefaultOpenClass();\r\n        this.closeAct = this.getDefaultCloseClass();\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n        this.outClose = false;\r\n        this.keyClose = \"\";\r\n    }\r\n    parse(args) {\r\n        if (is(args)) {\r\n            this.escClose = isStringTrue(args.escClose);\r\n            this.outClose = isStringTrue(args.outClose);\r\n            this.position = getStringOrDefault(args.position, 'right');\r\n            this.openAct = getStringOrDefault(args.openAct, this.getDefaultOpenClass());\r\n            this.closeAct = getStringOrDefault(args.closeAct, this.getDefaultCloseClass());\r\n            this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n            this.keyClose = args.keyClose;\r\n        }\r\n    }\r\n    getDefaultOpenClass() {\r\n        return replacePrefix(this.position === 'right' ? OFFCANVAS_RIGHT_ANIM_DEFAULT_IN : OFFCANVAS_LEFT_ANIM_DEFAULT_IN, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n    getDefaultCloseClass() {\r\n        return replacePrefix(this.position === 'right' ? OFFCANVAS_RIGHT_ANIM_DEFAULT_OUT : OFFCANVAS_LEFT_ANIM_DEFAULT_OUT, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap(), _defTimeout = new WeakMap();\r\nexport class CuiOffCanvasComponent {\r\n    constructor(prefix) {\r\n        _prefix_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix_1, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix_1)}-off-canvas`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiOffCanvasHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix_1));\r\n    }\r\n}\r\n_prefix_1 = new WeakMap();\r\nexport class CuiOffCanvasHandler extends CuiInteractableHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiOffCanvasHandler\", element, attribute, new CuiOffCanvasArgs(prefix, utils.setup.animationTime), utils);\r\n        _prefix_2.set(this, void 0);\r\n        _bodyClass.set(this, void 0);\r\n        _scrollY.set(this, void 0);\r\n        _windowClickEventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix_2, prefix);\r\n        __classPrivateFieldSet(this, _bodyClass, replacePrefix(OFFCANVAS_BODY, prefix));\r\n        __classPrivateFieldSet(this, _windowClickEventId, null);\r\n        __classPrivateFieldSet(this, _scrollY, 0);\r\n    }\r\n    onInit() {\r\n        this.mutate(() => {\r\n            this.setPositionLeft();\r\n            AriaAttributes.setAria(this.element, 'aria-modal', \"\");\r\n        });\r\n    }\r\n    onUpdate() {\r\n        this.setPositionLeft();\r\n    }\r\n    onDestroy() {\r\n    }\r\n    onBeforeOpen() {\r\n        if (this.isAnyActive()) {\r\n            return false;\r\n        }\r\n        __classPrivateFieldSet(this, _scrollY, window.pageYOffset);\r\n        return true;\r\n    }\r\n    onAfterOpen() {\r\n        if (this.args.outClose) {\r\n            __classPrivateFieldSet(this, _windowClickEventId, this.onEvent(EVENTS.WINDOW_CLICK, this.onWindowClick.bind(this)));\r\n        }\r\n        this.helper.setClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n        document.body.style.top = `-${scrollY}px`;\r\n    }\r\n    onAfterClose() {\r\n        this.detachEvent(EVENTS.WINDOW_CLICK, __classPrivateFieldGet(this, _windowClickEventId));\r\n        this.helper.removeClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n        document.body.style.top = '';\r\n        window.scrollTo(0, __classPrivateFieldGet(this, _scrollY) * -1);\r\n    }\r\n    onBeforeClose() {\r\n        return true;\r\n    }\r\n    onWindowClick(ev) {\r\n        const container = this.element.querySelector(replacePrefix(OFFCANVAS_CONTAINER_CLS, __classPrivateFieldGet(this, _prefix_2)));\r\n        if (container && !container.contains(ev.target)) {\r\n            this.close();\r\n        }\r\n    }\r\n    isAnyActive() {\r\n        return this.helper.hasClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n    }\r\n    setPositionLeft() {\r\n        let cls = getName(__classPrivateFieldGet(this, _prefix_2), 'left');\r\n        if (this.args.position === 'left' && !this.helper.hasClass(cls, this.element)) {\r\n            this.helper.setClass(cls, this.element);\r\n        }\r\n        else if (this.args.position == 'right' && this.helper.hasClass(cls, this.element)) {\r\n            this.helper.removeClass(cls, this.element);\r\n        }\r\n    }\r\n}\r\n_prefix_2 = new WeakMap(), _bodyClass = new WeakMap(), _scrollY = new WeakMap(), _windowClickEventId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _box, _element, _element_1;\r\nexport class CuiElementBoxFactory {\r\n    static get(element) {\r\n        if (element instanceof Window) {\r\n            return new WindowElementBox();\r\n        }\r\n        else if (element instanceof HTMLElement) {\r\n            return new HTMLElementBox(element);\r\n        }\r\n        return new ElementBox(element);\r\n    }\r\n}\r\nexport class ElementBox {\r\n    constructor(element) {\r\n        _box.set(this, void 0);\r\n        _element.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element, element);\r\n        __classPrivateFieldSet(this, _box, element.getBoundingClientRect());\r\n    }\r\n    getHeight() {\r\n        return __classPrivateFieldGet(this, _box).height;\r\n    }\r\n    getWidth() {\r\n        return __classPrivateFieldGet(this, _box).width;\r\n    }\r\n    getTop() {\r\n        return __classPrivateFieldGet(this, _box).top;\r\n    }\r\n    getLeft() {\r\n        return __classPrivateFieldGet(this, _box).left;\r\n    }\r\n    getScrollHeight() {\r\n        return __classPrivateFieldGet(this, _element).scrollHeight;\r\n    }\r\n    getScrollWidth() {\r\n        return __classPrivateFieldGet(this, _element).scrollWidth;\r\n    }\r\n    getScrollTop() {\r\n        return __classPrivateFieldGet(this, _element).scrollTop;\r\n    }\r\n    getScrollLeft() {\r\n        return __classPrivateFieldGet(this, _element).scrollLeft;\r\n    }\r\n    queryAll(selector) {\r\n        return [...__classPrivateFieldGet(this, _element).querySelectorAll(selector)];\r\n    }\r\n}\r\n_box = new WeakMap(), _element = new WeakMap();\r\nexport class HTMLElementBox {\r\n    constructor(element) {\r\n        _element_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element_1, element);\r\n    }\r\n    getHeight() {\r\n        return __classPrivateFieldGet(this, _element_1).offsetHeight;\r\n    }\r\n    getWidth() {\r\n        return __classPrivateFieldGet(this, _element_1).offsetWidth;\r\n    }\r\n    getTop() {\r\n        return __classPrivateFieldGet(this, _element_1).offsetTop;\r\n    }\r\n    getLeft() {\r\n        return __classPrivateFieldGet(this, _element_1).offsetLeft;\r\n    }\r\n    getScrollHeight() {\r\n        return __classPrivateFieldGet(this, _element_1).scrollHeight;\r\n    }\r\n    getScrollWidth() {\r\n        return __classPrivateFieldGet(this, _element_1).scrollWidth;\r\n    }\r\n    getScrollTop() {\r\n        return __classPrivateFieldGet(this, _element_1).scrollTop;\r\n    }\r\n    getScrollLeft() {\r\n        return __classPrivateFieldGet(this, _element_1).scrollLeft;\r\n    }\r\n    queryAll(selector) {\r\n        return [...__classPrivateFieldGet(this, _element_1).querySelectorAll(selector)];\r\n    }\r\n}\r\n_element_1 = new WeakMap();\r\nexport class WindowElementBox {\r\n    getHeight() {\r\n        return window.innerHeight;\r\n    }\r\n    getWidth() {\r\n        return window.innerWidth;\r\n    }\r\n    getTop() {\r\n        return 0;\r\n    }\r\n    getLeft() {\r\n        return 0;\r\n    }\r\n    getScrollHeight() {\r\n        return window.innerHeight;\r\n    }\r\n    getScrollWidth() {\r\n        return window.innerWidth;\r\n    }\r\n    getScrollTop() {\r\n        return window.pageYOffset;\r\n    }\r\n    getScrollLeft() {\r\n        return window.pageXOffset;\r\n    }\r\n    queryAll(selector) {\r\n        return [...document.querySelectorAll(selector)];\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _target, _inProgress, _threshold, _prevX, _prevY, _callback, _isAttached, _box, _task, _listener;\r\nimport { CuiElementBoxFactory } from \"../models/elements\";\r\nimport { getRangeValueOrDefault, is } from \"../utils/functions\";\r\nimport { CuiTaskRunner } from \"../utils/task\";\r\nconst DEFAULT_SCROLL_END_TIMEOUT = 50;\r\nexport class CuiScrollListener {\r\n    constructor(target, threshold) {\r\n        _target.set(this, void 0);\r\n        _inProgress.set(this, void 0);\r\n        _threshold.set(this, void 0);\r\n        _prevX.set(this, void 0);\r\n        _prevY.set(this, void 0);\r\n        _callback.set(this, void 0);\r\n        _isAttached.set(this, void 0);\r\n        _box.set(this, void 0);\r\n        _task.set(this, void 0);\r\n        _listener.set(this, void 0);\r\n        __classPrivateFieldSet(this, _target, target);\r\n        __classPrivateFieldSet(this, _box, CuiElementBoxFactory.get(target));\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n        __classPrivateFieldSet(this, _threshold, getRangeValueOrDefault(threshold, 0, 100, 0));\r\n        __classPrivateFieldSet(this, _prevX, __classPrivateFieldSet(this, _prevY, 0));\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n        __classPrivateFieldSet(this, _callback, undefined);\r\n        __classPrivateFieldSet(this, _task, new CuiTaskRunner(DEFAULT_SCROLL_END_TIMEOUT, false, this.onScrollFinish.bind(this)));\r\n        __classPrivateFieldSet(this, _listener, this.listener.bind(this));\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    attach() {\r\n        __classPrivateFieldGet(this, _target).addEventListener('scroll', __classPrivateFieldGet(this, _listener));\r\n        __classPrivateFieldSet(this, _isAttached, true);\r\n        this.listener(undefined, true, \"init\");\r\n    }\r\n    detach() {\r\n        __classPrivateFieldGet(this, _target).removeEventListener('scroll', __classPrivateFieldGet(this, _listener));\r\n        __classPrivateFieldGet(this, _task).stop();\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n    }\r\n    setTarget(target) {\r\n        if (target !== __classPrivateFieldGet(this, _target)) {\r\n            this.detach();\r\n            __classPrivateFieldSet(this, _target, target);\r\n            this.attach();\r\n        }\r\n    }\r\n    setThreshold(threshold) {\r\n        __classPrivateFieldSet(this, _threshold, getRangeValueOrDefault(threshold, 0, 100, 0));\r\n    }\r\n    isInProgress() {\r\n        return __classPrivateFieldGet(this, _inProgress);\r\n    }\r\n    isAttached() {\r\n        return __classPrivateFieldGet(this, _isAttached);\r\n    }\r\n    listener(ev, initial, source) {\r\n        if (!is(__classPrivateFieldGet(this, _callback))) {\r\n            return;\r\n        }\r\n        let left = __classPrivateFieldGet(this, _box).getScrollLeft();\r\n        let top = __classPrivateFieldGet(this, _box).getScrollTop();\r\n        __classPrivateFieldSet(this, _prevX, __classPrivateFieldGet(this, _prevX) + left);\r\n        __classPrivateFieldSet(this, _prevY, __classPrivateFieldGet(this, _prevY) + top);\r\n        if (__classPrivateFieldGet(this, _inProgress) || (!this.passedThreshold() && is(ev))) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _inProgress, true);\r\n        // @ts-ignore - callback already checked\r\n        __classPrivateFieldGet(this, _callback).call(this, {\r\n            base: ev,\r\n            top: top,\r\n            left: left,\r\n            initial: initial !== null && initial !== void 0 ? initial : false,\r\n            scrolling: is(ev),\r\n            source: source !== null && source !== void 0 ? source : \"event\"\r\n        });\r\n        if (is(ev))\r\n            __classPrivateFieldGet(this, _task).start();\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n        __classPrivateFieldSet(this, _prevX, 0);\r\n        __classPrivateFieldSet(this, _prevY, 0);\r\n    }\r\n    passedThreshold() {\r\n        return __classPrivateFieldGet(this, _threshold) <= 0 || (__classPrivateFieldGet(this, _prevX) >= __classPrivateFieldGet(this, _threshold) || __classPrivateFieldGet(this, _prevY) >= __classPrivateFieldGet(this, _threshold));\r\n    }\r\n    onScrollFinish() {\r\n        this.listener(undefined, false, \"task\");\r\n    }\r\n}\r\n_target = new WeakMap(), _inProgress = new WeakMap(), _threshold = new WeakMap(), _prevX = new WeakMap(), _prevY = new WeakMap(), _callback = new WeakMap(), _isAttached = new WeakMap(), _box = new WeakMap(), _task = new WeakMap(), _listener = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _pointLeft, _pointTop, _prevDiffY, _prevDiffX, _wasTriggeredX, _wasTriggeredY, _threshold;\r\nexport class CuiOffsetStaticMode {\r\n    matches(top, left, offsetX, offsetY) {\r\n        return (offsetX > 0 && left >= offsetX) ||\r\n            (offsetY > 0 && top >= offsetY);\r\n    }\r\n}\r\n/**\r\n * Dynamically calculates whether to trigger or untrigger an action.\r\n * If current value exceedes offset and threshold action is triggered.\r\n * If action was triggered and current move is lower than threshold action is untriggered\r\n *\r\n * Example: If offsetY is 100, then first after 100 action is set on. It is kept when scrolling down.\r\n * If user decides to scroll up and difference between turning point and current is bigger than threshold then action is set off.\r\n *\r\n * Example usage is with navbar - it shall disappear after offset and return back when user scrolls up.\r\n */\r\nexport class CuiOffsetDynamicMode {\r\n    constructor() {\r\n        _pointLeft.set(this, void 0);\r\n        _pointTop.set(this, void 0);\r\n        _prevDiffY.set(this, void 0);\r\n        _prevDiffX.set(this, void 0);\r\n        _wasTriggeredX.set(this, void 0);\r\n        _wasTriggeredY.set(this, void 0);\r\n        _threshold.set(this, void 0);\r\n        __classPrivateFieldSet(this, _pointLeft, 0);\r\n        __classPrivateFieldSet(this, _pointTop, 0);\r\n        __classPrivateFieldSet(this, _prevDiffX, 0);\r\n        __classPrivateFieldSet(this, _prevDiffY, 0);\r\n        __classPrivateFieldSet(this, _threshold, 100);\r\n        __classPrivateFieldSet(this, _wasTriggeredX, false);\r\n        __classPrivateFieldSet(this, _wasTriggeredY, false);\r\n    }\r\n    matches(top, left, offsetX, offsetY) {\r\n        return this.fitsOffsetY(top, offsetY) || this.fitsOffsetX(left, offsetX);\r\n    }\r\n    fitsOffsetX(left, offsetX) {\r\n        if (offsetX <= 0)\r\n            return false;\r\n        let diffX = left - __classPrivateFieldGet(this, _pointLeft);\r\n        if (left >= offsetX && diffX > __classPrivateFieldGet(this, _threshold)) {\r\n            __classPrivateFieldSet(this, _wasTriggeredX, true);\r\n        }\r\n        else if (__classPrivateFieldGet(this, _wasTriggeredX) && diffX < -__classPrivateFieldGet(this, _threshold)) {\r\n            __classPrivateFieldSet(this, _wasTriggeredX, false);\r\n        }\r\n        if (diffX < 0 && __classPrivateFieldGet(this, _prevDiffX) < diffX || diffX >= 0 && __classPrivateFieldGet(this, _prevDiffX) > diffX) {\r\n            __classPrivateFieldSet(this, _pointLeft, left);\r\n        }\r\n        __classPrivateFieldSet(this, _prevDiffX, diffX);\r\n        return __classPrivateFieldGet(this, _wasTriggeredX);\r\n    }\r\n    fitsOffsetY(top, offsetY) {\r\n        if (offsetY <= 0) {\r\n            return false;\r\n        }\r\n        let diffY = top - __classPrivateFieldGet(this, _pointTop);\r\n        if (top >= offsetY && diffY > __classPrivateFieldGet(this, _threshold)) {\r\n            __classPrivateFieldSet(this, _wasTriggeredY, true);\r\n        }\r\n        else if (__classPrivateFieldGet(this, _wasTriggeredY) && diffY < -__classPrivateFieldGet(this, _threshold)) {\r\n            __classPrivateFieldSet(this, _wasTriggeredY, false);\r\n        }\r\n        if (diffY < 0 && __classPrivateFieldGet(this, _prevDiffY) < diffY || diffY >= 0 && __classPrivateFieldGet(this, _prevDiffY) > diffY) {\r\n            __classPrivateFieldSet(this, _pointTop, top);\r\n        }\r\n        __classPrivateFieldSet(this, _prevDiffY, diffY);\r\n        return __classPrivateFieldGet(this, _wasTriggeredY);\r\n    }\r\n}\r\n_pointLeft = new WeakMap(), _pointTop = new WeakMap(), _prevDiffY = new WeakMap(), _prevDiffX = new WeakMap(), _wasTriggeredX = new WeakMap(), _wasTriggeredY = new WeakMap(), _threshold = new WeakMap();\r\nexport class CuiOffsetModeFactory {\r\n    static get(mode) {\r\n        if (mode === 'dynamic') {\r\n            return new CuiOffsetDynamicMode();\r\n        }\r\n        return new CuiOffsetStaticMode();\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _listener, _target, _utils, _matched, _action, _prevX, _prevY, _threshold, _root, _modeHandler;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiScrollListener } from \"cui-light-core/dist/esm/listeners/scroll\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { are, getIntOrDefault, getRangeValue, getStringOrDefault, is, isStringTrue } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiOffsetModeFactory } from \"./modes\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nexport class CuiOffsetArgs {\r\n    constructor() {\r\n        this.offsetX = 0;\r\n        this.offsetY = 0;\r\n        this.target = \"\";\r\n        this.root = false;\r\n        this.action = \"\";\r\n        this.mode = 'static';\r\n    }\r\n    parse(args) {\r\n        this.target = args.target;\r\n        this.action = args.action;\r\n        this.offsetX = getIntOrDefault(args.offsetX, -1);\r\n        this.offsetY = getIntOrDefault(args.offsetY, -1);\r\n        this.root = isStringTrue(args.root);\r\n        this.mode = getStringOrDefault(args.mode, 'static');\r\n    }\r\n}\r\nexport class CuiOffsetComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-offset`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiOffsetHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiOffsetHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiOffsetHandler\", element, attribute, new CuiOffsetArgs(), utils);\r\n        _listener.set(this, void 0);\r\n        _target.set(this, void 0);\r\n        _utils.set(this, void 0);\r\n        _matched.set(this, void 0);\r\n        _action.set(this, void 0);\r\n        _prevX.set(this, void 0);\r\n        _prevY.set(this, void 0);\r\n        _threshold.set(this, void 0);\r\n        _root.set(this, void 0);\r\n        _modeHandler.set(this, void 0);\r\n        this.element = element;\r\n        __classPrivateFieldSet(this, _target, this.element);\r\n        __classPrivateFieldSet(this, _utils, utils);\r\n        __classPrivateFieldSet(this, _matched, false);\r\n        __classPrivateFieldSet(this, _action, []);\r\n        __classPrivateFieldSet(this, _prevX, 0);\r\n        __classPrivateFieldSet(this, _prevY, 0);\r\n        __classPrivateFieldSet(this, _threshold, 20);\r\n        __classPrivateFieldSet(this, _root, this.element);\r\n        __classPrivateFieldSet(this, _modeHandler, null);\r\n        __classPrivateFieldSet(this, _listener, undefined);\r\n    }\r\n    onInit() {\r\n        this.parseAttribute();\r\n        __classPrivateFieldSet(this, _listener, new CuiScrollListener(this.args.root ? window : this.element, this.utils.setup.scrollThreshold));\r\n        __classPrivateFieldGet(this, _listener).setCallback(this.onScroll.bind(this));\r\n        __classPrivateFieldGet(this, _listener).attach();\r\n    }\r\n    onUpdate() {\r\n        this.parseAttribute();\r\n    }\r\n    onDestroy() {\r\n        if (__classPrivateFieldGet(this, _listener))\r\n            __classPrivateFieldGet(this, _listener).detach();\r\n    }\r\n    onScroll(ev) {\r\n        this.checkAndPerformActions(ev);\r\n    }\r\n    parseAttribute() {\r\n        __classPrivateFieldSet(this, _root, this.getRoot());\r\n        __classPrivateFieldSet(this, _target, this.getTarget());\r\n        __classPrivateFieldSet(this, _action, CuiActionsListFactory.get(this.args.action));\r\n        __classPrivateFieldSet(this, _modeHandler, CuiOffsetModeFactory.get(this.args.mode));\r\n    }\r\n    checkAndPerformActions(ev) {\r\n        if (!is(__classPrivateFieldGet(this, _modeHandler))) {\r\n            this.logError(\"Cannot perform - mode handler not initialized\", \"checkAndPerformActions\");\r\n        }\r\n        // @ts-ignore modehandler\r\n        let matchesOffset = __classPrivateFieldGet(this, _modeHandler).matches(ev.top, ev.left, this.args.offsetX, this.args.offsetY);\r\n        /**\r\n         * Act and emit event when offset has been reached\r\n         */\r\n        if (matchesOffset !== __classPrivateFieldGet(this, _matched)) {\r\n            this.act(matchesOffset);\r\n            __classPrivateFieldSet(this, _matched, matchesOffset);\r\n            this.callEvent(__classPrivateFieldGet(this, _matched), ev.left, ev.top, ev.scrolling, ev.source, ...this.calcaRatio(ev.left, ev.top));\r\n            return;\r\n        }\r\n        /**\r\n         * Emit event periodically\r\n         */\r\n        if (this.exceededThreshold(ev.left, ev.top)) {\r\n            this.callEvent(__classPrivateFieldGet(this, _matched), ev.left, ev.top, ev.scrolling, ev.source, ...this.calcaRatio(ev.left, ev.top));\r\n            __classPrivateFieldSet(this, _prevX, ev.left);\r\n            __classPrivateFieldSet(this, _prevY, ev.top);\r\n        }\r\n    }\r\n    act(matching) {\r\n        if (!are(__classPrivateFieldGet(this, _action), __classPrivateFieldGet(this, _target))) {\r\n            return;\r\n        }\r\n        this.isLocked = true;\r\n        __classPrivateFieldGet(this, _action).forEach(action => {\r\n            if (matching) {\r\n                action.add(__classPrivateFieldGet(this, _target), __classPrivateFieldGet(this, _utils));\r\n            }\r\n            else {\r\n                action.remove(__classPrivateFieldGet(this, _target), __classPrivateFieldGet(this, _utils));\r\n            }\r\n        });\r\n        this.isLocked = false;\r\n    }\r\n    callEvent(matches, x, y, scrolling, source, ratioX, ratioY) {\r\n        this.emitEvent(EVENTS.OFFSET, {\r\n            matches: __classPrivateFieldGet(this, _matched),\r\n            offsetX: x,\r\n            offsetY: y,\r\n            ratioX: ratioX,\r\n            ratioY: ratioY,\r\n            scrolling: scrolling,\r\n            source: source,\r\n            timestamp: Date.now()\r\n        });\r\n    }\r\n    getRoot() {\r\n        return this.args.root ? document.body : this.element;\r\n    }\r\n    exceededThreshold(x, y) {\r\n        return Math.abs(x - __classPrivateFieldGet(this, _prevX)) > __classPrivateFieldGet(this, _threshold) || Math.abs(y - __classPrivateFieldGet(this, _prevY)) > __classPrivateFieldGet(this, _threshold);\r\n    }\r\n    calcaRatio(x, y) {\r\n        let ratY = parseFloat(((__classPrivateFieldGet(this, _root).clientHeight + y) / __classPrivateFieldGet(this, _root).scrollHeight).toFixed(2));\r\n        let ratX = parseFloat(((__classPrivateFieldGet(this, _root).clientWidth + x) / __classPrivateFieldGet(this, _root).scrollWidth).toFixed(2));\r\n        return [getRangeValue(ratX, 0, 1), getRangeValue(ratY, 0, 1)];\r\n    }\r\n    getTarget() {\r\n        let target = this.args.target ? __classPrivateFieldGet(this, _root).querySelector(this.args.target) : null;\r\n        return target !== null && target !== void 0 ? target : this.element;\r\n    }\r\n}\r\n_listener = new WeakMap(), _target = new WeakMap(), _utils = new WeakMap(), _matched = new WeakMap(), _action = new WeakMap(), _prevX = new WeakMap(), _prevY = new WeakMap(), _threshold = new WeakMap(), _root = new WeakMap(), _modeHandler = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTimeout, _prefix, _eventId;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { getStringOrDefault, getIntOrDefault, is, isString, isStringTrue, are, getFirstMatching } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { CUID_ATTRIBUTE, EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nexport class CuiOpenArgs {\r\n    constructor(timeout) {\r\n        _defTimeout.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        this.target = \"\";\r\n        this.action = \"\";\r\n        this.timeout = 0;\r\n        this.prevent = false;\r\n        this.state = \"\";\r\n    }\r\n    parse(args) {\r\n        if (is(args) && isString(args)) {\r\n            this.target = args;\r\n            this.action = \"\";\r\n            this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n            this.prevent = false;\r\n            this.state = \"\";\r\n            return;\r\n        }\r\n        this.target = getStringOrDefault(args.target, \"\");\r\n        this.action = args.action;\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.prevent = isStringTrue(args.prevent);\r\n        this.state = args.state;\r\n    }\r\n}\r\n_defTimeout = new WeakMap();\r\nexport class CuiOpenComponent {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix)}-open`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiOpenHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiOpenHandler extends CuiHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiOpenHandler\", element, attribute, new CuiOpenArgs(utils.setup.animationTime), utils);\r\n        _eventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _eventId, null);\r\n        this.onClick = this.onClick.bind(this);\r\n    }\r\n    onInit() {\r\n        this.element.addEventListener('click', this.onClick);\r\n        __classPrivateFieldSet(this, _eventId, this.onEvent(EVENTS.OPEN, this.onOpen.bind(this)));\r\n    }\r\n    onUpdate() {\r\n        //\r\n    }\r\n    onDestroy() {\r\n        this.element.removeEventListener('click', this.onClick);\r\n        this.detachEvent(EVENTS.OPEN, __classPrivateFieldGet(this, _eventId));\r\n    }\r\n    onClick(ev) {\r\n        this.onOpen(ev);\r\n        if (this.args.prevent) {\r\n            ev.preventDefault();\r\n        }\r\n    }\r\n    onOpen(ev) {\r\n        if (this.isLocked) {\r\n            return;\r\n        }\r\n        const target = this.getTarget(this.args.target);\r\n        if (!is(target)) {\r\n            this._log.warning(`Target ${this.args.target} not found`, 'onClick');\r\n            return;\r\n        }\r\n        this.isLocked = true;\r\n        //@ts-ignore - target checked\r\n        this.run(target).then((result) => {\r\n            //@ts-ignore - target checked\r\n            this.activateTarget(ev, target, result);\r\n        }).catch((e) => {\r\n            this._log.exception(e);\r\n        }).finally(() => {\r\n            this.isLocked = false;\r\n        });\r\n    }\r\n    /**\r\n     * Emits open event or performs an opening action\r\n     * @param target target element\r\n     * @returns whether event opened shall be emitted\r\n     */\r\n    run(target) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let cuiId = target.$cuid;\r\n            if (is(cuiId)) {\r\n                this._log.debug(\"Open cUI component\");\r\n                yield this.utils.bus.emit(EVENTS.OPEN, cuiId, this.args.state);\r\n                return false;\r\n            }\r\n            else {\r\n                this._log.debug(\"Open html component\");\r\n                if (are(this.args.timeout, this.args.action)) {\r\n                    this._log.debug(\"Perfrom an action\");\r\n                    let actions = CuiActionsListFactory.get(this.args.action);\r\n                    yield this.actionsHelper.performActions(target, actions, this.args.timeout, () => {\r\n                        this.setActiveClass(target);\r\n                    });\r\n                    return true;\r\n                }\r\n                this.setActiveClassAsync(target);\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n    setActiveClass(target) {\r\n        if (is(target) && !this.helper.hasClass(this.activeClassName, target)) {\r\n            this.helper.setClass(this.activeClassName, target);\r\n        }\r\n    }\r\n    setActiveClassAsync(target) {\r\n        this.fetch(() => {\r\n            if (is(target) && !this.helper.hasClass(this.activeClassName, target)) {\r\n                this.helper.setClassesAs(target, this.activeClassName);\r\n            }\r\n        });\r\n    }\r\n    activateTarget(ev, target, shouldEmit) {\r\n        if (is(target) && !this.helper.hasClass(this.activeClassName, target)) {\r\n            this.helper.setClassesAs(target, this.activeClassName);\r\n        }\r\n        if (shouldEmit)\r\n            this.emitOpen(ev);\r\n    }\r\n    emitOpen(ev) {\r\n        this.emitEvent(EVENTS.OPENED, {\r\n            event: ev,\r\n            state: this.args.state,\r\n            timestamp: Date.now()\r\n        });\r\n    }\r\n    getTarget(target) {\r\n        if (is(target)) {\r\n            //@ts-ignore - target checked\r\n            return document.querySelector(target);\r\n        }\r\n        let parent = this.element.parentElement;\r\n        //@ts-ignore - parent checked\r\n        let result = is(parent) ? parent.querySelectorAll(`[${CUID_ATTRIBUTE}]`) : undefined;\r\n        if (!result || result.length < 2) {\r\n            return undefined;\r\n        }\r\n        return getFirstMatching([...result], (el) => {\r\n            return el !== this.element;\r\n        });\r\n    }\r\n}\r\n_eventId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _prefix, _eventId, _intersectionObserver, _currentSize, _currentValue, _lastValue, _currentAction, _isIntersecting, _timeoutToken;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { calcWindowSize2, getIntOrDefault, getStringOrDefault, is } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiIntersectionObserver } from \"cui-light-core/dist/esm/observers/intersection\";\r\nimport { CuiActionsFatory } from \"cui-light-core/dist/esm/utils/actions\";\r\nexport class CuiResizeArgs {\r\n    constructor() {\r\n        this.mode = \"simple\";\r\n        this.default = \"\";\r\n        this.small = this.medium = this.large = this.xlarge = undefined;\r\n        this.delay = 0;\r\n    }\r\n    parse(args) {\r\n        var _a, _b, _c, _d;\r\n        this.default = getStringOrDefault(args.default, \"\");\r\n        this.small = (_a = args.small) !== null && _a !== void 0 ? _a : args.s;\r\n        this.medium = (_b = args.medium) !== null && _b !== void 0 ? _b : args.m;\r\n        this.large = (_c = args.large) !== null && _c !== void 0 ? _c : args.l;\r\n        this.xlarge = (_d = args.xlarge) !== null && _d !== void 0 ? _d : args.xl;\r\n        this.mode = args.mode === 'smart' ? \"smart\" : \"simple\";\r\n        this.delay = getIntOrDefault(args.delay, 0);\r\n    }\r\n}\r\nexport class CuiResizeComponent {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix)}-resize`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiResizeHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiResizeHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiResizeHandler\", element, attribute, new CuiResizeArgs(), utils);\r\n        _eventId.set(this, void 0);\r\n        _intersectionObserver.set(this, void 0);\r\n        _currentSize.set(this, void 0);\r\n        _currentValue.set(this, void 0);\r\n        _lastValue.set(this, void 0);\r\n        _currentAction.set(this, void 0);\r\n        _isIntersecting.set(this, void 0);\r\n        _timeoutToken.set(this, void 0);\r\n        __classPrivateFieldSet(this, _eventId, null);\r\n        __classPrivateFieldSet(this, _intersectionObserver, new CuiIntersectionObserver(document.documentElement, [0, 0.1]));\r\n        __classPrivateFieldGet(this, _intersectionObserver).setCallback(this.onIntersection.bind(this));\r\n        __classPrivateFieldSet(this, _lastValue, \"\");\r\n        __classPrivateFieldSet(this, _currentValue, \"\");\r\n        __classPrivateFieldSet(this, _currentSize, \"none\");\r\n        __classPrivateFieldSet(this, _isIntersecting, false);\r\n        __classPrivateFieldSet(this, _timeoutToken, undefined);\r\n        __classPrivateFieldSet(this, _currentAction, undefined);\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldSet(this, _eventId, this.utils.bus.on(EVENTS.RESIZE, this.resize.bind(this)));\r\n        __classPrivateFieldGet(this, _intersectionObserver).connect();\r\n        __classPrivateFieldGet(this, _intersectionObserver).observe(this.element);\r\n        __classPrivateFieldSet(this, _currentSize, calcWindowSize2(window.innerWidth));\r\n        __classPrivateFieldSet(this, _isIntersecting, this.isInViewport(this.element));\r\n        this.setNewValue();\r\n        this.updateElement();\r\n    }\r\n    onUpdate() {\r\n        this.setNewValue();\r\n        this.updateElement();\r\n    }\r\n    onDestroy() {\r\n        if (__classPrivateFieldGet(this, _eventId) !== null) {\r\n            this.utils.bus.detach(EVENTS.RESIZE, __classPrivateFieldGet(this, _eventId));\r\n            __classPrivateFieldSet(this, _eventId, null);\r\n        }\r\n        __classPrivateFieldGet(this, _intersectionObserver).unobserve(this.element);\r\n        __classPrivateFieldGet(this, _intersectionObserver).disconnect();\r\n    }\r\n    resize(data) {\r\n        __classPrivateFieldSet(this, _currentSize, data.current);\r\n        this.setNewValue();\r\n        this.updateElement();\r\n    }\r\n    onIntersection(entries) {\r\n        if (entries.length > 0) {\r\n            __classPrivateFieldSet(this, _isIntersecting, entries[0].isIntersecting);\r\n        }\r\n        this.updateElement();\r\n    }\r\n    setNewValue() {\r\n        let newValue = this.isSmartMode() ? this.getSmartValue(__classPrivateFieldGet(this, _currentSize)) : this.getValue(__classPrivateFieldGet(this, _currentSize), true);\r\n        console.log(\"New value: \" + newValue);\r\n        if (newValue && newValue !== __classPrivateFieldGet(this, _currentValue)) {\r\n            __classPrivateFieldSet(this, _currentValue, newValue);\r\n        }\r\n    }\r\n    getValue(size, replace) {\r\n        let value = undefined;\r\n        switch (size) {\r\n            case \"xlarge\":\r\n                value = this.args.xlarge;\r\n                break;\r\n            case \"large\":\r\n                value = this.args.large;\r\n                break;\r\n            case \"medium\":\r\n                value = this.args.medium;\r\n                break;\r\n            case \"small\":\r\n                value = this.args.small;\r\n                break;\r\n            default:\r\n                value = this.args.default;\r\n        }\r\n        return (replace && !value) ? this.args.default : value;\r\n    }\r\n    getSmartValue(size) {\r\n        var _a, _b, _c, _d;\r\n        let value = this.args.default;\r\n        if (size === 'none') {\r\n            return value;\r\n        }\r\n        value = (_a = this.args.small) !== null && _a !== void 0 ? _a : value;\r\n        if (size === 'small') {\r\n            return value;\r\n        }\r\n        value = (_b = this.args.medium) !== null && _b !== void 0 ? _b : value;\r\n        if (size === 'medium') {\r\n            return value;\r\n        }\r\n        value = (_c = this.args.large) !== null && _c !== void 0 ? _c : value;\r\n        if (size === 'large') {\r\n            return value;\r\n        }\r\n        return (_d = this.args.xlarge) !== null && _d !== void 0 ? _d : value;\r\n    }\r\n    updateElement() {\r\n        if (!__classPrivateFieldGet(this, _isIntersecting) && this.isSmartMode()) {\r\n            this.logInfo(\"Not intersecting\");\r\n            return;\r\n        }\r\n        if (!is(__classPrivateFieldGet(this, _currentValue))) {\r\n            this.logWarning(\"Not eligible to set value: \" + __classPrivateFieldGet(this, _currentValue));\r\n            return;\r\n        }\r\n        if (__classPrivateFieldGet(this, _lastValue) !== __classPrivateFieldGet(this, _currentValue)) {\r\n            this.run(() => {\r\n                //@ts-ignore already checked\r\n                let newAction = CuiActionsFatory.get(__classPrivateFieldGet(this, _currentValue));\r\n                this.mutate(() => {\r\n                    if (__classPrivateFieldGet(this, _currentAction)) {\r\n                        __classPrivateFieldGet(this, _currentAction).remove(this.element);\r\n                    }\r\n                    newAction.add(this.element);\r\n                    //@ts-ignore already checked\r\n                    __classPrivateFieldSet(this, _lastValue, __classPrivateFieldGet(this, _currentValue));\r\n                    __classPrivateFieldSet(this, _currentAction, newAction);\r\n                });\r\n            });\r\n        }\r\n    }\r\n    isSmartMode() {\r\n        return this.args.mode === 'smart';\r\n    }\r\n    isInViewport(element) {\r\n        const rect = element.getBoundingClientRect();\r\n        return (rect.top >= 0 &&\r\n            rect.left >= 0 &&\r\n            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\r\n            rect.right <= (window.innerWidth || document.documentElement.clientWidth));\r\n    }\r\n    run(callback) {\r\n        if (__classPrivateFieldGet(this, _timeoutToken)) {\r\n            clearTimeout(__classPrivateFieldGet(this, _timeoutToken));\r\n            __classPrivateFieldSet(this, _timeoutToken, undefined);\r\n        }\r\n        __classPrivateFieldSet(this, _timeoutToken, setTimeout(() => {\r\n            callback();\r\n            __classPrivateFieldSet(this, _timeoutToken, undefined);\r\n        }, this.args.delay));\r\n    }\r\n}\r\n_eventId = new WeakMap(), _intersectionObserver = new WeakMap(), _currentSize = new WeakMap(), _currentValue = new WeakMap(), _lastValue = new WeakMap(), _currentAction = new WeakMap(), _isIntersecting = new WeakMap(), _timeoutToken = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _parent, _target, _onClickBound;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { is, getOffsetTop, getStringOrDefault, are } from \"cui-light-core/dist/esm/utils/functions\";\r\n/**\r\n * Component scrolls to specified target in the document\r\n * Arguments:\r\n * target - selector to target element where page should be scrolled to.\r\n * parent - set parent selector if parent should be different than html parent\r\n * behavior - auto/smooth - choose between step and smooth scrolling\r\n *\r\n */\r\nexport class CuiScrollComponent {\r\n    constructor(prefix) {\r\n        this.attribute = is(prefix) ? prefix + 'scroll' : 'cui-scroll';\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiScrollHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiScrollArgs {\r\n    constructor() {\r\n        this.target = \"\";\r\n        this.parent = \"\";\r\n        this.behavior = 'auto';\r\n    }\r\n    parse(val) {\r\n        this.target = getStringOrDefault(val.target, \"\");\r\n        this.parent = getStringOrDefault(val.parent, \"\");\r\n        this.behavior = is(val.behavior) && val.behavior.toLowerCase() === 'smooth' ? 'smooth' : 'auto';\r\n    }\r\n}\r\nexport class CuiScrollHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiScrollHandler\", element, attribute, new CuiScrollArgs(), utils);\r\n        _parent.set(this, void 0);\r\n        _target.set(this, void 0);\r\n        _onClickBound.set(this, void 0);\r\n        this.element = element;\r\n        __classPrivateFieldSet(this, _parent, null);\r\n        __classPrivateFieldSet(this, _target, null);\r\n        __classPrivateFieldSet(this, _onClickBound, this.onClick.bind(this));\r\n    }\r\n    onInit() {\r\n        this.element.addEventListener('click', __classPrivateFieldGet(this, _onClickBound));\r\n        this.setTargets();\r\n    }\r\n    onUpdate() {\r\n        this.setTargets();\r\n    }\r\n    onDestroy() {\r\n        this.element.removeEventListener('click', __classPrivateFieldGet(this, _onClickBound));\r\n    }\r\n    onClick(ev) {\r\n        if (!are(__classPrivateFieldGet(this, _target), __classPrivateFieldGet(this, _parent))) {\r\n            return;\r\n        }\r\n        //@ts-ignore\r\n        let to = getOffsetTop(__classPrivateFieldGet(this, _target)) - __classPrivateFieldGet(this, _parent).offsetTop;\r\n        //@ts-ignore\r\n        let from = __classPrivateFieldGet(this, _parent).scrollTop;\r\n        let by = to - from;\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _parent).scrollBy({\r\n            top: by,\r\n            behavior: this.args.behavior\r\n        });\r\n        this.emitEvent(EVENTS.ON_SCROLL, {\r\n            to: to,\r\n            by: by,\r\n            //@ts-ignore\r\n            target: __classPrivateFieldGet(this, _target),\r\n            //@ts-ignore\r\n            parent: __classPrivateFieldGet(this, _parent),\r\n            timestamp: Date.now(),\r\n        });\r\n        ev.preventDefault();\r\n    }\r\n    setTargets() {\r\n        __classPrivateFieldSet(this, _target, document.querySelector(this.args.target));\r\n        if (is(__classPrivateFieldGet(this, _target))) {\r\n            __classPrivateFieldSet(this, _parent, is(this.args.parent) ? document.querySelector(this.args.parent) : __classPrivateFieldGet(this, _target).parentElement);\r\n        }\r\n    }\r\n}\r\n_parent = new WeakMap(), _target = new WeakMap(), _onClickBound = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _scrollListener, _callback, _children, _box;\r\nimport { CuiScrollListener } from \"../listeners/scroll\";\r\nimport { CuiElementBoxFactory } from \"../models/elements\";\r\nimport { are, getRangeValue } from \"../utils/functions\";\r\nconst DEFAULT_OPTION_THRESHOLD = 0;\r\nexport class CuiIntersectionListener {\r\n    constructor(element, options) {\r\n        var _a;\r\n        _scrollListener.set(this, void 0);\r\n        _callback.set(this, void 0);\r\n        _children.set(this, void 0);\r\n        _box.set(this, void 0);\r\n        __classPrivateFieldSet(this, _box, CuiElementBoxFactory.get(element));\r\n        __classPrivateFieldSet(this, _scrollListener, new CuiScrollListener(element, (_a = options === null || options === void 0 ? void 0 : options.threshold) !== null && _a !== void 0 ? _a : DEFAULT_OPTION_THRESHOLD));\r\n        __classPrivateFieldGet(this, _scrollListener).setCallback(this.onScroll.bind(this));\r\n        __classPrivateFieldSet(this, _children, []);\r\n        __classPrivateFieldSet(this, _callback, undefined);\r\n    }\r\n    /**\r\n     * Sets child elements - ratio is calcutalated based on them\r\n     * @param children\r\n     */\r\n    setChildren(children) {\r\n        __classPrivateFieldSet(this, _children, children);\r\n    }\r\n    setThreshold(threshold) {\r\n        __classPrivateFieldGet(this, _scrollListener).setThreshold(threshold);\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    setParent(target) {\r\n        __classPrivateFieldSet(this, _box, CuiElementBoxFactory.get(target));\r\n        __classPrivateFieldGet(this, _scrollListener).setTarget(target);\r\n    }\r\n    isInProgress() {\r\n        return __classPrivateFieldGet(this, _scrollListener).isInProgress();\r\n    }\r\n    attach() {\r\n        if (this.isAttached()) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _scrollListener).attach();\r\n    }\r\n    detach() {\r\n        if (!this.isAttached()) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _scrollListener).detach();\r\n    }\r\n    isAttached() {\r\n        return __classPrivateFieldGet(this, _scrollListener) && __classPrivateFieldGet(this, _scrollListener).isAttached();\r\n    }\r\n    onScroll(ev) {\r\n        if (!are(__classPrivateFieldGet(this, _children), __classPrivateFieldGet(this, _callback))) {\r\n            return;\r\n        }\r\n        if (__classPrivateFieldGet(this, _callback))\r\n            __classPrivateFieldGet(this, _callback).call(this, this.prepareCallbackResult(ev));\r\n    }\r\n    calcChildVerticalRatio(child, currentTop, currentBottom) {\r\n        let childBottom = child.offsetTop + child.offsetHeight;\r\n        // Simulated top if view top is outside of parent then takes parent top\r\n        let symTop = currentTop > child.offsetTop ? currentTop : child.offsetTop;\r\n        // Simulated bottom if view bottom is outside of parent then takes parent bottom\r\n        let symBottom = currentBottom < childBottom ? currentBottom : childBottom;\r\n        // Calculates amount of pixels that are in view\r\n        let diff = symBottom - symTop;\r\n        // Calculates ratio - how much of a child is in parent view\r\n        let ratio = diff / child.offsetHeight;\r\n        return getRangeValue(ratio, 0, 1);\r\n    }\r\n    calcChildHorizontalRatio(child, currentLeft, currentRight) {\r\n        let childRight = child.offsetLeft + child.offsetWidth;\r\n        // Simulated top if view left is outside of parent then takes parent left\r\n        let symLeft = currentLeft > child.offsetLeft ? currentLeft : child.offsetLeft;\r\n        // Simulated bottom if view right is outside of parent then takes parent right\r\n        let symRight = currentRight < childRight ? currentRight : childRight;\r\n        // Calculates amount of pixels that are in view\r\n        let diff = symRight - symLeft;\r\n        // Calculates ratio - how much of a child is in parent view\r\n        let ratio = diff / child.offsetWidth;\r\n        return getRangeValue(ratio, 0, 1);\r\n    }\r\n    prepareCallbackResult(ev) {\r\n        var _a, _b;\r\n        let parentBottom = ev.top + __classPrivateFieldGet(this, _box).getHeight();\r\n        let parentRight = ev.left + __classPrivateFieldGet(this, _box).getWidth();\r\n        let result = {\r\n            ev: ev.base,\r\n            top: ev.top,\r\n            left: ev.left,\r\n            scrolling: (_a = ev.scrolling) !== null && _a !== void 0 ? _a : false,\r\n            initial: (_b = ev.initial) !== null && _b !== void 0 ? _b : false,\r\n            source: ev.source,\r\n            items: __classPrivateFieldGet(this, _children).map((child, index) => {\r\n                let verticalRatio = this.calcChildVerticalRatio(child, ev.top, parentBottom);\r\n                let horizontalRatio = this.calcChildHorizontalRatio(child, ev.left, parentRight);\r\n                return {\r\n                    verticalRatio: verticalRatio,\r\n                    horizontalRatio: horizontalRatio,\r\n                    element: child\r\n                };\r\n            })\r\n        };\r\n        return result;\r\n    }\r\n}\r\n_scrollListener = new WeakMap(), _callback = new WeakMap(), _children = new WeakMap(), _box = new WeakMap();\r\n","import { are, is } from \"cui-light-core/dist/esm/utils/functions\";\r\nexport class CuiScrollSpyModeHandlerFactory {\r\n    static get(mode) {\r\n        if (mode === \"multi\") {\r\n            return new CuiMultiModeHandler();\r\n        }\r\n        return new CuiSingleModeHandler();\r\n    }\r\n}\r\nclass CuiModeHandlerBase {\r\n    constructor(init) {\r\n        this.previous = init;\r\n    }\r\n    getMatching(ratio, items) {\r\n        return items.reduce((result, item, index) => {\r\n            if (item.verticalRatio > ratio) {\r\n                result.push(index);\r\n            }\r\n            return result;\r\n        }, []);\r\n    }\r\n    addActions(actions, ...elements) {\r\n        this.forEachAction(actions, elements, (action, element) => {\r\n            action.add(element);\r\n        });\r\n    }\r\n    removeActions(actions, ...elements) {\r\n        this.forEachAction(actions, elements, (action, element) => {\r\n            action.remove(element);\r\n        });\r\n    }\r\n    forEachAction(actions, elements, callback) {\r\n        if (!are(actions, elements, callback)) {\r\n            return;\r\n        }\r\n        actions.forEach(action => {\r\n            elements.forEach(element => {\r\n                if (is(element))\r\n                    callback(action, element);\r\n            });\r\n        });\r\n    }\r\n}\r\nexport class CuiSingleModeHandler extends CuiModeHandlerBase {\r\n    constructor() {\r\n        super(-1);\r\n    }\r\n    update(items, ratio, actions, links, linksActions) {\r\n        let matching = this.getMatching(ratio, items);\r\n        let len = matching.length;\r\n        let last = len > 0 ? matching[len - 1] : -1;\r\n        let result = {\r\n            changed: false\r\n        };\r\n        if (!this.matches(last)) {\r\n            if (this.previous > -1)\r\n                this.removeActions(actions, items[this.previous].element);\r\n            if (last > -1) {\r\n                let lastElement = items[last].element;\r\n                result.intersecting = [lastElement];\r\n                this.addActions(actions, lastElement);\r\n            }\r\n            if (are(links, linksActions)) {\r\n                if (this.previous > -1)\r\n                    this.removeActions(linksActions, links[this.previous]);\r\n                if (last > -1)\r\n                    this.addActions(linksActions, links[last]);\r\n            }\r\n            this.previous = last;\r\n            result.changed = true;\r\n            result.intersecting = [];\r\n            return result;\r\n        }\r\n        return result;\r\n    }\r\n    matches(item) {\r\n        return item === this.previous;\r\n    }\r\n}\r\nexport class CuiMultiModeHandler extends CuiModeHandlerBase {\r\n    constructor() {\r\n        super([]);\r\n    }\r\n    update(items, ratio, actions, links, linksActions) {\r\n        let matching = this.getMatching(ratio, items);\r\n        let result = {\r\n            changed: false\r\n        };\r\n        if (!this.matches(matching)) {\r\n            let intersecting = matching.map(idx => { return items[idx].element; });\r\n            this.removeActions(actions, ...this.previous.map(idx => { return items[idx].element; }));\r\n            this.addActions(actions, ...intersecting);\r\n            result.intersecting = intersecting;\r\n            if (are(links, linksActions)) {\r\n                this.removeActions(linksActions, ...this.previous.map(idx => { return links[idx]; }));\r\n                this.addActions(linksActions, ...matching.map(idx => { return links[idx]; }));\r\n            }\r\n            this.previous = matching;\r\n            result.changed = true;\r\n            return result;\r\n        }\r\n        return result;\r\n    }\r\n    matches(item) {\r\n        let len = item.length;\r\n        if (len !== this.previous.length) {\r\n            return false;\r\n        }\r\n        let i = 0;\r\n        for (i = 0; i < len; i++) {\r\n            if (!this.previous.includes(item[i])) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _listener, _links, _actions, _linkActions, _root, _rootBox, _modeHandler;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { getRangeValueOrDefault, getStringOrDefault, isStringTrue, getIntOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS, SCOPE_SELECTOR } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { CuiIntersectionListener } from \"cui-light-core/dist/esm/intersection/intersection\";\r\nimport { CuiElementBoxFactory } from \"cui-light-core/dist/esm/models/elements\";\r\nimport { CuiScrollSpyModeHandlerFactory } from \"./mode\";\r\nconst DEFAULT_SELECTOR = \"> *\";\r\nexport class CuiScrollSpyArgs {\r\n    constructor() {\r\n        this.ratio = 0;\r\n        this.mode = \"single\";\r\n        this.threshold = -1;\r\n        this.selector = \"\";\r\n        this.action = \"\";\r\n        this.isRoot = false;\r\n        this.link = \"\";\r\n        this.linkAction = \"\";\r\n    }\r\n    parse(args) {\r\n        var _a;\r\n        this.selector = `${SCOPE_SELECTOR}${(_a = args.selector) !== null && _a !== void 0 ? _a : DEFAULT_SELECTOR}`;\r\n        this.action = getStringOrDefault(args.action, \"\");\r\n        this.link = getStringOrDefault(args.link, \"\");\r\n        this.linkAction = getStringOrDefault(args.linkAction, \"\");\r\n        this.ratio = getRangeValueOrDefault(parseFloat(args.ratio), 0, 1, 0);\r\n        this.isRoot = isStringTrue(args.isRoot);\r\n        this.mode = (args === null || args === void 0 ? void 0 : args.mode) === 'multi' ? \"multi\" : \"single\";\r\n        this.threshold = getIntOrDefault(args.threshold, -1);\r\n    }\r\n}\r\nexport class CuiScrollspyComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-scrollspy`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiScrollspyHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiScrollspyHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiScrollspyHandler\", element, attribute, new CuiScrollSpyArgs(), utils);\r\n        _listener.set(this, void 0);\r\n        _links.set(this, void 0);\r\n        _actions.set(this, void 0);\r\n        _linkActions.set(this, void 0);\r\n        _root.set(this, void 0);\r\n        _rootBox.set(this, void 0);\r\n        _modeHandler.set(this, void 0);\r\n        this.element = element;\r\n        __classPrivateFieldSet(this, _listener, new CuiIntersectionListener(this.element, { threshold: this.utils.setup.scrollThreshold }));\r\n        __classPrivateFieldSet(this, _links, []);\r\n        __classPrivateFieldSet(this, _actions, []);\r\n        __classPrivateFieldSet(this, _linkActions, []);\r\n        __classPrivateFieldSet(this, _root, undefined);\r\n        __classPrivateFieldSet(this, _rootBox, undefined);\r\n        __classPrivateFieldSet(this, _modeHandler, undefined);\r\n    }\r\n    onInit() {\r\n        this.parseAttribute();\r\n        __classPrivateFieldGet(this, _listener).setCallback(this.onIntersection.bind(this));\r\n        __classPrivateFieldGet(this, _listener).attach();\r\n    }\r\n    onUpdate() {\r\n        this.updateAttributes();\r\n    }\r\n    onDestroy() {\r\n        __classPrivateFieldGet(this, _listener).detach();\r\n    }\r\n    onIntersection(ev) {\r\n        if (!__classPrivateFieldGet(this, _modeHandler)) {\r\n            this.logError(\"Cannot perform - mode handler not initialized\", \"OnIntersection\");\r\n            return;\r\n        }\r\n        let timestamp = Date.now();\r\n        this.mutate(() => {\r\n            //@ts-ignore - modeHandler checked\r\n            let updateResult = __classPrivateFieldGet(this, _modeHandler).update(ev.items, this.args.ratio, __classPrivateFieldGet(this, _actions), __classPrivateFieldGet(this, _links), __classPrivateFieldGet(this, _linkActions));\r\n            if (updateResult.changed) {\r\n                this.emitEvent(EVENTS.TARGET_CHANGE, {\r\n                    intersecting: updateResult.intersecting,\r\n                    timestamp: timestamp\r\n                });\r\n            }\r\n        });\r\n        this.emitEvent(EVENTS.ON_SCROLL, {\r\n            top: ev.top,\r\n            left: ev.left,\r\n            scrolling: ev.scrolling,\r\n            initial: ev.initial,\r\n            source: ev.source,\r\n            timestamp: timestamp,\r\n        });\r\n    }\r\n    parseAttribute() {\r\n        __classPrivateFieldSet(this, _root, this.args.isRoot ? window : this.element);\r\n        __classPrivateFieldSet(this, _rootBox, CuiElementBoxFactory.get(__classPrivateFieldGet(this, _root)));\r\n        let targets = this.args.selector ? __classPrivateFieldGet(this, _rootBox).queryAll(this.args.selector) : [];\r\n        __classPrivateFieldGet(this, _listener).setChildren(targets);\r\n        __classPrivateFieldGet(this, _listener).setThreshold(this.args.threshold);\r\n        __classPrivateFieldSet(this, _links, this.args.link ? [...document.querySelectorAll(this.args.link)] : []);\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n        __classPrivateFieldSet(this, _linkActions, CuiActionsListFactory.get(this.args.linkAction));\r\n        __classPrivateFieldSet(this, _modeHandler, CuiScrollSpyModeHandlerFactory.get(this.args.mode));\r\n    }\r\n    updateAttributes() {\r\n        if (this.prevArgs && this.args.isRoot !== this.prevArgs.isRoot) {\r\n            __classPrivateFieldSet(this, _root, this.args.isRoot ? window : this.element);\r\n            __classPrivateFieldSet(this, _rootBox, CuiElementBoxFactory.get(__classPrivateFieldGet(this, _root)));\r\n            __classPrivateFieldGet(this, _listener).setParent(__classPrivateFieldGet(this, _root));\r\n        }\r\n        if (this.prevArgs && __classPrivateFieldGet(this, _rootBox) && this.args.selector !== this.prevArgs.selector) {\r\n            let targets = this.args.selector ? __classPrivateFieldGet(this, _rootBox).queryAll(this.args.selector) : [];\r\n            __classPrivateFieldGet(this, _listener).setChildren(targets);\r\n        }\r\n        __classPrivateFieldGet(this, _listener).setThreshold(this.args.threshold);\r\n        __classPrivateFieldSet(this, _links, this.args.link ? [...document.querySelectorAll(this.args.link)] : []);\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n        __classPrivateFieldSet(this, _linkActions, CuiActionsListFactory.get(this.args.linkAction));\r\n        __classPrivateFieldSet(this, _modeHandler, CuiScrollSpyModeHandlerFactory.get(this.args.mode));\r\n    }\r\n}\r\n_listener = new WeakMap(), _links = new WeakMap(), _actions = new WeakMap(), _linkActions = new WeakMap(), _root = new WeakMap(), _rootBox = new WeakMap(), _modeHandler = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _elements, _count, _threshold;\r\nimport { is } from \"../../utils/functions\";\r\nexport class CuiSimpleDragOverDetector {\r\n    constructor() {\r\n        _elements.set(this, void 0);\r\n        _count.set(this, void 0);\r\n        _threshold.set(this, void 0);\r\n        __classPrivateFieldSet(this, _elements, []);\r\n        __classPrivateFieldSet(this, _count, 0);\r\n        __classPrivateFieldSet(this, _threshold, 5);\r\n    }\r\n    setElements(elements) {\r\n        __classPrivateFieldSet(this, _elements, elements);\r\n        __classPrivateFieldSet(this, _count, __classPrivateFieldGet(this, _elements).length);\r\n    }\r\n    setThreshold(value) {\r\n        __classPrivateFieldSet(this, _threshold, value);\r\n    }\r\n    detect(x, y) {\r\n        if (!is(__classPrivateFieldGet(this, _elements))) {\r\n            return [-1, undefined];\r\n        }\r\n        let idx = -1;\r\n        let found = undefined;\r\n        for (let i = 0; i < __classPrivateFieldGet(this, _count); i++) {\r\n            if (this.isInBounds(__classPrivateFieldGet(this, _elements)[i], x, y)) {\r\n                if (i === 0) {\r\n                    idx = i;\r\n                    found = __classPrivateFieldGet(this, _elements)[i];\r\n                    //break;\r\n                }\r\n                else if (i < __classPrivateFieldGet(this, _count) - 1) {\r\n                    idx = i + 1;\r\n                    found = __classPrivateFieldGet(this, _elements)[i + 1];\r\n                    //break;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        return [idx, found];\r\n    }\r\n    isInBounds(element, x, y) {\r\n        const box = element.getBoundingClientRect();\r\n        if (box.width === 0) {\r\n            console.log(element);\r\n        }\r\n        return x > box.left - __classPrivateFieldGet(this, _threshold) && x < box.left + box.width + __classPrivateFieldGet(this, _threshold) &&\r\n            y > box.top - __classPrivateFieldGet(this, _threshold) && y < box.top + box.height + __classPrivateFieldGet(this, _threshold);\r\n    }\r\n}\r\n_elements = new WeakMap(), _count = new WeakMap(), _threshold = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _root, _moveHandler, _onDragStart, _onDragOver, _onDragEnd, _timeout, _isTracking, _timeoutId;\r\nimport { CuiMoveEventListener } from \"../../listeners/move\";\r\nexport class CuiDragHandler {\r\n    constructor(root) {\r\n        _root.set(this, void 0);\r\n        _moveHandler.set(this, void 0);\r\n        _onDragStart.set(this, void 0);\r\n        _onDragOver.set(this, void 0);\r\n        _onDragEnd.set(this, void 0);\r\n        _timeout.set(this, void 0);\r\n        _isTracking.set(this, void 0);\r\n        _timeoutId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _root, root);\r\n        __classPrivateFieldSet(this, _moveHandler, new CuiMoveEventListener());\r\n        __classPrivateFieldSet(this, _timeout, 150);\r\n        __classPrivateFieldSet(this, _isTracking, false);\r\n        __classPrivateFieldSet(this, _timeoutId, undefined);\r\n        __classPrivateFieldGet(this, _moveHandler).setTarget(__classPrivateFieldGet(this, _root));\r\n        __classPrivateFieldGet(this, _moveHandler).preventDefault(false);\r\n        __classPrivateFieldGet(this, _moveHandler).setCallback(this.onMove.bind(this));\r\n        __classPrivateFieldSet(this, _onDragStart, undefined);\r\n        __classPrivateFieldSet(this, _onDragOver, undefined);\r\n        __classPrivateFieldSet(this, _onDragEnd, undefined);\r\n    }\r\n    setLongPressTimeout(timeout) {\r\n        __classPrivateFieldSet(this, _timeout, timeout);\r\n    }\r\n    onDragStart(callback) {\r\n        __classPrivateFieldSet(this, _onDragStart, callback);\r\n    }\r\n    onDragOver(callback) {\r\n        __classPrivateFieldSet(this, _onDragOver, callback);\r\n    }\r\n    onDragEnd(callback) {\r\n        __classPrivateFieldSet(this, _onDragEnd, callback);\r\n    }\r\n    attach() {\r\n        __classPrivateFieldGet(this, _moveHandler).attach();\r\n    }\r\n    detach() {\r\n        __classPrivateFieldGet(this, _moveHandler).detach();\r\n    }\r\n    onMove(data) {\r\n        switch (data.type) {\r\n            case \"down\":\r\n                if (__classPrivateFieldGet(this, _isTracking)) {\r\n                    return;\r\n                }\r\n                __classPrivateFieldSet(this, _timeoutId, setTimeout(() => {\r\n                    if (__classPrivateFieldGet(this, _onDragStart) && __classPrivateFieldGet(this, _onDragStart).call(this, data)) {\r\n                        __classPrivateFieldSet(this, _isTracking, true);\r\n                    }\r\n                }, __classPrivateFieldGet(this, _timeout)));\r\n                break;\r\n            case \"move\":\r\n                this.cancelTimeout();\r\n                if (!__classPrivateFieldGet(this, _isTracking)) {\r\n                    return;\r\n                }\r\n                if (__classPrivateFieldGet(this, _onDragOver)) {\r\n                    __classPrivateFieldGet(this, _onDragOver).call(this, data);\r\n                }\r\n                break;\r\n            case \"up\":\r\n                this.cancelTimeout();\r\n                if (!__classPrivateFieldGet(this, _isTracking)) {\r\n                    return;\r\n                }\r\n                if (__classPrivateFieldGet(this, _onDragEnd)) {\r\n                    __classPrivateFieldGet(this, _onDragEnd).call(this, data);\r\n                }\r\n                __classPrivateFieldSet(this, _isTracking, false);\r\n                break;\r\n        }\r\n    }\r\n    cancelTimeout() {\r\n        if (__classPrivateFieldGet(this, _timeoutId)) {\r\n            clearTimeout(__classPrivateFieldGet(this, _timeoutId));\r\n            __classPrivateFieldSet(this, _timeoutId, undefined);\r\n        }\r\n    }\r\n}\r\n_root = new WeakMap(), _moveHandler = new WeakMap(), _onDragStart = new WeakMap(), _onDragOver = new WeakMap(), _onDragEnd = new WeakMap(), _timeout = new WeakMap(), _isTracking = new WeakMap(), _timeoutId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _prefix, _dragHandler, _triggers, _targets, _currentTarget, _currentIdx, _preview, _movingCls, _detector, _currentBefore, _animation, _previewCls;\r\nimport { ElementBuilder } from \"cui-light-core/dist/esm/builders/element\";\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiSimpleDragOverDetector } from \"cui-light-core/dist/esm/handlers/drag/detectors\";\r\nimport { CuiDragHandler } from \"cui-light-core/dist/esm/handlers/drag/drag\";\r\nimport { CuiSwipeAnimationEngine } from \"cui-light-core/dist/esm/animation/engine\";\r\nimport { getIntOrDefault, replacePrefix, is, are } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { SCOPE_SELECTOR, EVENTS, CLASSES } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst SORTABLE_IS_MOVING = \"{prefix}-moving\";\r\nconst DEFAULT_SELECTOR = \" > *\";\r\nconst SORTABLE_PREVIEW_CLS = \"{prefix}-sortable-preview\";\r\nexport class CuiSortableArgs {\r\n    constructor() {\r\n        this.target = SCOPE_SELECTOR + DEFAULT_SELECTOR;\r\n        ;\r\n        this.trigger = SCOPE_SELECTOR + DEFAULT_SELECTOR;\r\n        this.timeout = 150;\r\n        this.threshold = 5;\r\n    }\r\n    parse(val) {\r\n        this.target = val.target ? SCOPE_SELECTOR + \" \" + val.target : SCOPE_SELECTOR + DEFAULT_SELECTOR;\r\n        this.trigger = val.trigger ? SCOPE_SELECTOR + \" \" + val.trigger : SCOPE_SELECTOR + DEFAULT_SELECTOR;\r\n        this.timeout = getIntOrDefault(val.timeout, 150);\r\n        this.threshold = getIntOrDefault(val.threshold, 5);\r\n    }\r\n}\r\nexport class CuiSortableComponent {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : \"cui\");\r\n        this.attribute = __classPrivateFieldGet(this, _prefix) + \"-sortable\";\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, sutils) {\r\n        return new CuiSortableHandler(element, this.attribute, sutils, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiSortableHandler extends CuiHandler {\r\n    constructor(element, attribute, utils, prefix) {\r\n        super(\"CuiSortableHandler\", element, attribute, new CuiSortableArgs(), utils);\r\n        _dragHandler.set(this, void 0);\r\n        _triggers.set(this, void 0);\r\n        _targets.set(this, void 0);\r\n        _currentTarget.set(this, void 0);\r\n        _currentIdx.set(this, void 0);\r\n        _preview.set(this, void 0);\r\n        _movingCls.set(this, void 0);\r\n        _detector.set(this, void 0);\r\n        _currentBefore.set(this, void 0);\r\n        _animation.set(this, void 0);\r\n        _previewCls.set(this, void 0);\r\n        __classPrivateFieldSet(this, _targets, []);\r\n        __classPrivateFieldSet(this, _triggers, []);\r\n        __classPrivateFieldSet(this, _currentIdx, -1);\r\n        __classPrivateFieldSet(this, _currentTarget, null);\r\n        __classPrivateFieldSet(this, _currentBefore, null);\r\n        __classPrivateFieldSet(this, _preview, null);\r\n        __classPrivateFieldSet(this, _dragHandler, new CuiDragHandler(element));\r\n        __classPrivateFieldGet(this, _dragHandler).onDragStart(this.onDragStart.bind(this));\r\n        __classPrivateFieldGet(this, _dragHandler).onDragOver(this.onDragOver.bind(this));\r\n        __classPrivateFieldGet(this, _dragHandler).onDragEnd(this.onDragEnd.bind(this));\r\n        __classPrivateFieldSet(this, _movingCls, replacePrefix(SORTABLE_IS_MOVING, prefix));\r\n        __classPrivateFieldSet(this, _previewCls, replacePrefix(SORTABLE_PREVIEW_CLS, prefix));\r\n        __classPrivateFieldSet(this, _detector, new CuiSimpleDragOverDetector());\r\n        __classPrivateFieldSet(this, _animation, new CuiSwipeAnimationEngine());\r\n        __classPrivateFieldGet(this, _animation).setOnFinish(() => {\r\n            let item = __classPrivateFieldGet(this, _currentTarget);\r\n            let idx = __classPrivateFieldGet(this, _currentIdx);\r\n            this.stopMovementPrep();\r\n            this.utils.bus.emit(EVENTS.MOVE_LOCK, null, false);\r\n            this.emitEvent(EVENTS.SORTED, {\r\n                item: item,\r\n                index: idx,\r\n                timestamp: new Date()\r\n            });\r\n        });\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldGet(this, _dragHandler).attach();\r\n        this.getTargetsAndTrggers();\r\n        __classPrivateFieldGet(this, _detector).setThreshold(this.args.threshold);\r\n    }\r\n    onUpdate() {\r\n        if (this.prevArgs && (this.args.target !== this.prevArgs.target ||\r\n            this.args.trigger !== this.prevArgs.trigger)) {\r\n            this.getTargetsAndTrggers();\r\n        }\r\n        __classPrivateFieldGet(this, _dragHandler).setLongPressTimeout(this.args.timeout);\r\n    }\r\n    onDestroy() {\r\n        __classPrivateFieldGet(this, _dragHandler).detach();\r\n    }\r\n    /**\r\n     * queries targets and triggers from the element\r\n     * If exception - lists are cleared\r\n     */\r\n    getTargetsAndTrggers() {\r\n        try {\r\n            __classPrivateFieldSet(this, _targets, [...this.element.querySelectorAll(this.args.target)]);\r\n            __classPrivateFieldSet(this, _triggers, [...this.element.querySelectorAll(this.args.trigger)]);\r\n            if (__classPrivateFieldGet(this, _triggers).length !== __classPrivateFieldGet(this, _targets).length) {\r\n                throw new Error(`Triggers (count ${__classPrivateFieldGet(this, _triggers).length}) and targets (count ${__classPrivateFieldGet(this, _targets).length}) selector are not correct`);\r\n            }\r\n            __classPrivateFieldGet(this, _detector).setElements(__classPrivateFieldGet(this, _targets));\r\n        }\r\n        catch (e) {\r\n            this._log.error(\"Incorrect trigger or target selector\");\r\n            this._log.exception(e, \"getTargetsAndTrggers\");\r\n            __classPrivateFieldSet(this, _targets, []);\r\n            __classPrivateFieldSet(this, _triggers, []);\r\n        }\r\n    }\r\n    onDragStart(data) {\r\n        __classPrivateFieldSet(this, _currentIdx, this.getPressedElementIdx(data.target));\r\n        __classPrivateFieldSet(this, _currentTarget, __classPrivateFieldGet(this, _currentIdx) > -1 ? __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)] : null);\r\n        if (!is(__classPrivateFieldGet(this, _currentTarget))) {\r\n            return false;\r\n        }\r\n        this.utils.bus.emit(EVENTS.MOVE_LOCK, null, true);\r\n        this.startMovementPrep(data);\r\n        this.emitEvent(EVENTS.SORT_START, {\r\n            item: __classPrivateFieldGet(this, _currentTarget),\r\n            index: __classPrivateFieldGet(this, _currentIdx),\r\n            timestamp: new Date()\r\n        });\r\n        return true;\r\n    }\r\n    onDragOver(data) {\r\n        this.move(data);\r\n        data.event.preventDefault();\r\n    }\r\n    onDragEnd(data) {\r\n        if (!is(__classPrivateFieldGet(this, _preview))) {\r\n            return;\r\n        }\r\n        //@ts-ignore preview\r\n        __classPrivateFieldGet(this, _animation).setElement(__classPrivateFieldGet(this, _preview));\r\n        __classPrivateFieldGet(this, _animation).setProps(this.getFinishAnimation());\r\n        __classPrivateFieldGet(this, _animation).finish(0, 100, false);\r\n    }\r\n    getPressedElementIdx(target) {\r\n        return __classPrivateFieldGet(this, _triggers).findIndex((trigger) => {\r\n            return trigger.contains(target);\r\n        });\r\n    }\r\n    startMovementPrep(data) {\r\n        this.mutate(() => {\r\n            this.createPreview();\r\n            if (is(__classPrivateFieldGet(this, _currentTarget)))\r\n                //@ts-ignore currentTarget\r\n                this.helper.setClass(__classPrivateFieldGet(this, _movingCls), __classPrivateFieldGet(this, _currentTarget));\r\n            this.helper.setClass(\"cui-locked\", this.element);\r\n            this.helper.setClass(CLASSES.swipingOn, document.body);\r\n            this.setPreviewPosition(data);\r\n            this.setCurrentPosition(data);\r\n        });\r\n    }\r\n    stopMovementPrep() {\r\n        this.mutate(() => {\r\n            if (is(__classPrivateFieldGet(this, _currentTarget)))\r\n                //@ts-ignore currentTarget\r\n                this.helper.removeClass(__classPrivateFieldGet(this, _movingCls), __classPrivateFieldGet(this, _currentTarget));\r\n            this.helper.removeClass(CLASSES.swipingOn, document.body);\r\n            this.helper.removeClass(\"cui-locked\", this.element);\r\n            this.removePreview();\r\n            __classPrivateFieldSet(this, _currentTarget, null);\r\n            __classPrivateFieldSet(this, _currentBefore, null);\r\n            this.getTargetsAndTrggers();\r\n        });\r\n    }\r\n    move(data) {\r\n        this.mutate(() => {\r\n            this.setPreviewPosition(data);\r\n            this.setCurrentPosition(data);\r\n        });\r\n    }\r\n    createPreview() {\r\n        if (!is(__classPrivateFieldGet(this, _currentTarget))) {\r\n            this.logError(\"Cannot create preview - current target does not exist\", \"createPreview\");\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _preview, new ElementBuilder(\"div\").setClasses(__classPrivateFieldGet(this, _previewCls)).build());\r\n        //@ts-ignore currentTarget\r\n        __classPrivateFieldGet(this, _preview).style.width = `${__classPrivateFieldGet(this, _currentTarget).offsetWidth}px`;\r\n        //@ts-ignore currentTarget\r\n        __classPrivateFieldGet(this, _preview).style.height = `${__classPrivateFieldGet(this, _currentTarget).offsetHeight}px`;\r\n        document.body.appendChild(__classPrivateFieldGet(this, _preview));\r\n    }\r\n    removePreview() {\r\n        if (is(__classPrivateFieldGet(this, _preview))) {\r\n            //@ts-ignore currentTarget\r\n            __classPrivateFieldGet(this, _preview).remove();\r\n            __classPrivateFieldSet(this, _preview, null);\r\n        }\r\n    }\r\n    setPreviewPosition(data) {\r\n        if (!is(__classPrivateFieldGet(this, _preview))) {\r\n            return;\r\n        }\r\n        //@ts-ignore preview\r\n        __classPrivateFieldGet(this, _preview).style.top = `${data.y}px`;\r\n        //@ts-ignore preview\r\n        __classPrivateFieldGet(this, _preview).style.left = `${data.x}px`;\r\n    }\r\n    setCurrentPosition(data) {\r\n        if (!__classPrivateFieldGet(this, _currentTarget)) {\r\n            return;\r\n        }\r\n        let [idx, detected] = __classPrivateFieldGet(this, _detector).detect(data.x, data.y);\r\n        if ((idx !== __classPrivateFieldGet(this, _currentIdx)) && detected && __classPrivateFieldGet(this, _currentBefore) !== detected) {\r\n            let el = detected;\r\n            this.insertElement(__classPrivateFieldGet(this, _currentTarget), el);\r\n            __classPrivateFieldSet(this, _currentBefore, el);\r\n            this.getTargetsAndTrggers();\r\n            __classPrivateFieldSet(this, _currentIdx, idx);\r\n        }\r\n    }\r\n    insertElement(source, destination) {\r\n        if (is(destination)) {\r\n            this.element.insertBefore(source, destination);\r\n        }\r\n        else {\r\n            this.element.appendChild(source);\r\n        }\r\n    }\r\n    getFinishAnimation() {\r\n        if (!are(__classPrivateFieldGet(this, _currentTarget), __classPrivateFieldGet(this, _preview))) {\r\n            return {\r\n                opacity: {\r\n                    from: 1,\r\n                    to: 0,\r\n                }\r\n            };\r\n        }\r\n        //@ts-ignore currentTarget\r\n        const box = __classPrivateFieldGet(this, _currentTarget).getBoundingClientRect();\r\n        return {\r\n            opacity: {\r\n                from: 1,\r\n                to: 0,\r\n            },\r\n            top: {\r\n                //@ts-ignore preview\r\n                from: __classPrivateFieldGet(this, _preview).offsetTop,\r\n                //@ts-ignore preview\r\n                to: box.top > 0 ? box.top : __classPrivateFieldGet(this, _preview).offsetTop,\r\n                unit: \"px\"\r\n            },\r\n            left: {\r\n                //@ts-ignore preview\r\n                from: __classPrivateFieldGet(this, _preview).offsetLeft,\r\n                //@ts-ignore preview\r\n                to: box.left > 0 ? box.left : __classPrivateFieldGet(this, _preview).offsetLeft,\r\n                unit: \"px\"\r\n            }\r\n        };\r\n    }\r\n}\r\n_dragHandler = new WeakMap(), _triggers = new WeakMap(), _targets = new WeakMap(), _currentTarget = new WeakMap(), _currentIdx = new WeakMap(), _preview = new WeakMap(), _movingCls = new WeakMap(), _detector = new WeakMap(), _currentBefore = new WeakMap(), _animation = new WeakMap(), _previewCls = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _prefix, _pauseEventId, _animationPauseClass;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { EVENTS, ICONS } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { is, isString, getStringOrDefault, getIntOrDefault, replacePrefix } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { IconBuilder } from \"cui-light-core/dist/esm/builders/icon\";\r\nexport class CuiSpinnerArgs {\r\n    constructor() {\r\n        this.spinner = \"circle\";\r\n        this.scale = 1;\r\n    }\r\n    parse(args) {\r\n        if (isString(args)) {\r\n            this.spinner = getStringOrDefault(args, \"circle\");\r\n        }\r\n        else {\r\n            this.spinner = getStringOrDefault(args.spinner, \"circle\");\r\n            this.scale = getIntOrDefault(args.scale, 1);\r\n        }\r\n    }\r\n}\r\nexport class CuiSpinnerComponent {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix)}-spinner`;\r\n        ICONS['spinner_circle'] = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M 7.800378,1.7908996 A 8.4986862,8.4986862 0 0 1 18.2091,7.8003784 8.4986862,8.4986862 0 0 1 12.199621,18.209101 8.4986862,8.4986862 0 0 1 1.7908995,12.199622 8.4986862,8.4986862 0 0 1 7.800378,1.7908996 Z\\\"></path></svg>\";\r\n        ICONS['spinner_circle_double'] = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M 10,1.5000006 A 8.4999997,8.4999997 0 0 1 18.5,10 8.4999997,8.4999997 0 0 1 10,18.499999 8.4999997,8.4999997 0 0 1 1.5000005,10 8.4999997,8.4999997 0 0 1 10,1.5000006 Z\\\"></path><path d=\\\"M 10,3.4999997 A 6.5000002,6.5000002 0 0 1 16.5,10 6.5000002,6.5000002 0 0 1 10,16.5 6.5000002,6.5000002 0 0 1 3.5,9.9999993 6.5000002,6.5000002 0 0 1 10,3.4999997 Z\\\"></path></svg>\";\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiSpinnerHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiSpinnerHandler extends CuiHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiSpinnerHandler\", element, attribute, new CuiSpinnerArgs(), utils);\r\n        _pauseEventId.set(this, void 0);\r\n        _animationPauseClass.set(this, void 0);\r\n        __classPrivateFieldSet(this, _pauseEventId, null);\r\n        __classPrivateFieldSet(this, _animationPauseClass, replacePrefix(\"{prefix}-animation-pause\", prefix));\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldSet(this, _pauseEventId, this.onEvent(EVENTS.PAUSE, this.onPause.bind(this)));\r\n        this.add();\r\n    }\r\n    onUpdate() {\r\n        if (this.prevArgs && this.args.spinner !== this.prevArgs.spinner) {\r\n            this.add();\r\n        }\r\n    }\r\n    onDestroy() {\r\n        this.removeIfAnyExisists();\r\n        this.detachEvent(EVENTS.PAUSE, __classPrivateFieldGet(this, _pauseEventId));\r\n    }\r\n    addSpinner(iconElement, name) {\r\n        this.element.appendChild(iconElement);\r\n        this.element.classList.add(`animation-spinner-${name}`);\r\n    }\r\n    add() {\r\n        const svgIcon = is(this.args.spinner) ? ICONS[`spinner_${this.args.spinner}`] : null;\r\n        if (!is(svgIcon)) {\r\n            this._log.warning(\"Incorrect spinner name: \" + this.args.spinner);\r\n            return;\r\n        }\r\n        this.removeIfAnyExisists();\r\n        const iconElement = new IconBuilder(svgIcon).setScale(this.args.scale).build();\r\n        this.mutate(this.addSpinner, iconElement, this.args.spinner);\r\n    }\r\n    removeIfAnyExisists() {\r\n        let existing = this.element.querySelector(\"svg\");\r\n        if (existing) {\r\n            existing.remove();\r\n        }\r\n    }\r\n    onPause(flag) {\r\n        this.fetch(() => {\r\n            if (flag && !this.helper.hasClass(__classPrivateFieldGet(this, _animationPauseClass), this.element)) {\r\n                this.helper.setClassesAs(this.element, __classPrivateFieldGet(this, _animationPauseClass));\r\n            }\r\n            else {\r\n                this.helper.removeClassesAs(this.element, __classPrivateFieldGet(this, _animationPauseClass));\r\n            }\r\n        });\r\n        this.emitEvent(EVENTS.PAUSED, flag);\r\n    }\r\n}\r\n_pauseEventId = new WeakMap(), _animationPauseClass = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _prefix, _defTimeout, _targets, _currentIdx, _links, _task, _switchEventId, _isTracking, _startX, _swipeRatio, _nextIdx, _nextElement, _ratioThreshold, _currSlider, _nextSlider, _animationDef, _targetsCount, _moveEventId;\r\nimport { CuiMutableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiTaskRunner } from \"cui-light-core/dist/esm/utils/task\";\r\nimport { CuiSwipeAnimationEngine } from \"cui-light-core/dist/esm/animation/engine\";\r\nimport { SWIPE_ANIMATIONS_DEFINITIONS } from \"cui-light-core/dist/esm/animation/definitions\";\r\nimport { getStringOrDefault, getIntOrDefault, boolStringOrDefault, calculateNextIndex, is, getChildrenHeight, isInRange } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { SCOPE_SELECTOR, EVENTS, CLASSES } from \"cui-light-core/dist/esm/utils/statics\";\r\n/**\r\n *\r\n *   targets: string - slider elements\r\n *   timeout: number - animation timeout\r\n *   links: string; - link to switcher (indicator, tab, etc)\r\n *   autoTimeout: number - if defined, slider will switch item automatically\r\n *   height: 'auto' | string - element height\r\n *   animation: string - animation name\r\n *   loop: boolean - allows to slide elements in loop\r\n */\r\nconst SWITCH_DEFAULT_TARGETS = \"> li\";\r\nexport class CuiSliderArgs {\r\n    constructor(prefix, timeout) {\r\n        _prefix.set(this, void 0);\r\n        _defTimeout.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        this.targets = SWITCH_DEFAULT_TARGETS;\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n        this.links = \"\";\r\n        this.autoTimeout = -1;\r\n        this.height = \"\";\r\n        this.animation = \"\";\r\n        this.loop = false;\r\n    }\r\n    parse(args) {\r\n        this.targets = SCOPE_SELECTOR + getStringOrDefault(args.targets, SWITCH_DEFAULT_TARGETS);\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.links = args.links;\r\n        this.autoTimeout = getIntOrDefault(args.autoTimeout, -1);\r\n        this.height = getStringOrDefault(args.height, 'auto');\r\n        this.animation = getStringOrDefault(args.animation, 'slide');\r\n        this.loop = boolStringOrDefault(args.loop, false);\r\n    }\r\n}\r\n_prefix = new WeakMap(), _defTimeout = new WeakMap();\r\nexport class CuiSliderComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-slider`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiSliderHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiSliderHandler extends CuiMutableHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiSliderHandler\", element, attribute, new CuiSliderArgs(utils.setup.prefix, utils.setup.animationTime), utils);\r\n        _targets.set(this, void 0);\r\n        _currentIdx.set(this, void 0);\r\n        _links.set(this, void 0);\r\n        _task.set(this, void 0);\r\n        _switchEventId.set(this, void 0);\r\n        //  #moveListener: CuiMoveEventListener;\r\n        _isTracking.set(this, void 0);\r\n        _startX.set(this, void 0);\r\n        _swipeRatio.set(this, void 0);\r\n        _nextIdx.set(this, void 0);\r\n        _nextElement.set(this, void 0);\r\n        _ratioThreshold.set(this, void 0);\r\n        _currSlider.set(this, void 0);\r\n        _nextSlider.set(this, void 0);\r\n        _animationDef.set(this, void 0);\r\n        _targetsCount.set(this, void 0);\r\n        _moveEventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _targets, []);\r\n        __classPrivateFieldSet(this, _currentIdx, -1);\r\n        __classPrivateFieldSet(this, _nextIdx, -1);\r\n        __classPrivateFieldSet(this, _links, []);\r\n        __classPrivateFieldSet(this, _switchEventId, null);\r\n        __classPrivateFieldSet(this, _moveEventId, null);\r\n        __classPrivateFieldSet(this, _isTracking, false);\r\n        __classPrivateFieldSet(this, _startX, -1);\r\n        __classPrivateFieldSet(this, _swipeRatio, 0);\r\n        __classPrivateFieldSet(this, _nextElement, null);\r\n        __classPrivateFieldSet(this, _ratioThreshold, 0.4);\r\n        __classPrivateFieldSet(this, _currSlider, new CuiSwipeAnimationEngine());\r\n        __classPrivateFieldSet(this, _nextSlider, new CuiSwipeAnimationEngine());\r\n        __classPrivateFieldGet(this, _currSlider).setOnFinish(this.onAnimationFinish.bind(this));\r\n        __classPrivateFieldSet(this, _targetsCount, 0);\r\n        __classPrivateFieldSet(this, _task, new CuiTaskRunner(this.args.autoTimeout, true, this.switch.bind(this, 'next')));\r\n        __classPrivateFieldSet(this, _animationDef, SWIPE_ANIMATIONS_DEFINITIONS[this.args.animation]);\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldSet(this, _switchEventId, this.onEvent(EVENTS.SWITCH, this.onPushSwitch.bind(this)));\r\n        __classPrivateFieldSet(this, _moveEventId, this.onEvent(EVENTS.GLOBAL_MOVE, this.onMove.bind(this)));\r\n        this.getTargets();\r\n        this.getLinks();\r\n        this.getActiveIndex();\r\n        this.setLinkActive(-1, __classPrivateFieldGet(this, _currentIdx));\r\n        this.mutate(() => {\r\n            this.helper.setStyle(this.element, 'height', this.getElementHeight(__classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)]));\r\n        });\r\n        __classPrivateFieldSet(this, _task, new CuiTaskRunner(this.args.autoTimeout, true, this.switch.bind(this, 'next')));\r\n        __classPrivateFieldSet(this, _animationDef, SWIPE_ANIMATIONS_DEFINITIONS[this.args.animation]);\r\n        this.startTask();\r\n    }\r\n    onUpdate() {\r\n        this.mutate(() => {\r\n            this.helper.setStyle(this.element, 'height', this.getElementHeight(__classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)]));\r\n        });\r\n        __classPrivateFieldSet(this, _animationDef, SWIPE_ANIMATIONS_DEFINITIONS[this.args.animation]);\r\n        this.startTask();\r\n    }\r\n    onDestroy() {\r\n        __classPrivateFieldGet(this, _task).stop();\r\n        this.detachEvent(EVENTS.SWITCH, __classPrivateFieldGet(this, _switchEventId));\r\n        this.detachEvent(EVENTS.GLOBAL_MOVE, __classPrivateFieldGet(this, _moveEventId));\r\n    }\r\n    onMutation(record) {\r\n    }\r\n    /**\r\n     * Move listener callback\r\n     * @param data move listener data\r\n     */\r\n    onMove(data) {\r\n        if (this.isLocked || !__classPrivateFieldGet(this, _animationDef)) {\r\n            return;\r\n        }\r\n        let current = __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)];\r\n        switch (data.type) {\r\n            case \"down\":\r\n                if (__classPrivateFieldGet(this, _isTracking) || !current.contains(data.target)) {\r\n                    return;\r\n                }\r\n                __classPrivateFieldSet(this, _isTracking, true);\r\n                __classPrivateFieldSet(this, _startX, data.x);\r\n                __classPrivateFieldGet(this, _currSlider).setElement(current);\r\n                this.helper.setClassesAs(document.body, CLASSES.swipingOn);\r\n                if (data.event.cancelable)\r\n                    data.event.preventDefault();\r\n                break;\r\n            case \"up\":\r\n                if (!__classPrivateFieldGet(this, _isTracking)) {\r\n                    break;\r\n                }\r\n                // Lock component until animation is finished\r\n                this.isLocked = true;\r\n                let absRatio = Math.abs(__classPrivateFieldGet(this, _swipeRatio));\r\n                let timeout = absRatio * this.args.timeout;\r\n                let back = absRatio <= __classPrivateFieldGet(this, _ratioThreshold);\r\n                __classPrivateFieldGet(this, _currSlider).finish(absRatio, timeout, back);\r\n                __classPrivateFieldGet(this, _nextSlider).finish(absRatio, timeout, back);\r\n                this.helper.removeClassesAs(document.body, CLASSES.swipingOn);\r\n                __classPrivateFieldSet(this, _isTracking, false);\r\n                break;\r\n            case \"move\":\r\n                if (!__classPrivateFieldGet(this, _isTracking)) {\r\n                    break;\r\n                }\r\n                let newRatio = (data.x - __classPrivateFieldGet(this, _startX)) / current.offsetWidth;\r\n                if (Math.abs(newRatio - __classPrivateFieldGet(this, _swipeRatio)) < 0.02) {\r\n                    break;\r\n                }\r\n                let nextIdx = calculateNextIndex(__classPrivateFieldGet(this, _swipeRatio) > 0 ? \"next\" : \"prev\", __classPrivateFieldGet(this, _currentIdx), __classPrivateFieldGet(this, _targetsCount));\r\n                __classPrivateFieldSet(this, _swipeRatio, this.adjustMoveRatio(newRatio));\r\n                if (nextIdx !== __classPrivateFieldGet(this, _nextIdx)) {\r\n                    __classPrivateFieldGet(this, _nextElement) && this.helper.removeClass(CLASSES.animProgress, __classPrivateFieldGet(this, _nextElement));\r\n                    __classPrivateFieldSet(this, _nextElement, __classPrivateFieldGet(this, _targets)[nextIdx]);\r\n                    __classPrivateFieldSet(this, _nextIdx, nextIdx);\r\n                    __classPrivateFieldGet(this, _nextSlider).setElement(__classPrivateFieldGet(this, _nextElement));\r\n                    __classPrivateFieldGet(this, _nextSlider).setProps(__classPrivateFieldGet(this, _swipeRatio) > 0 ? __classPrivateFieldGet(this, _animationDef).previous.right : __classPrivateFieldGet(this, _animationDef).previous.left);\r\n                    __classPrivateFieldGet(this, _currSlider).setProps(__classPrivateFieldGet(this, _swipeRatio) > 0 ? __classPrivateFieldGet(this, _animationDef).current.right : __classPrivateFieldGet(this, _animationDef).current.left);\r\n                    this.mutate(() => {\r\n                        __classPrivateFieldGet(this, _nextElement) && this.helper.setClass(CLASSES.animProgress, __classPrivateFieldGet(this, _nextElement));\r\n                    });\r\n                }\r\n                this.mutate(() => {\r\n                    __classPrivateFieldGet(this, _currSlider).update(Math.abs(__classPrivateFieldGet(this, _swipeRatio)));\r\n                    __classPrivateFieldGet(this, _nextSlider).update(Math.abs(__classPrivateFieldGet(this, _swipeRatio)));\r\n                });\r\n                if (data.event.cancelable)\r\n                    data.event.preventDefault();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    adjustMoveRatio(ratio) {\r\n        if (this.args.loop) {\r\n            return ratio;\r\n        }\r\n        if (__classPrivateFieldGet(this, _currentIdx) === __classPrivateFieldGet(this, _targetsCount) - 1 && ratio > 0) {\r\n            return 0;\r\n        }\r\n        if (__classPrivateFieldGet(this, _currentIdx) === 0 && ratio < 0) {\r\n            return 0;\r\n        }\r\n        return ratio;\r\n    }\r\n    /**\r\n     * Api method to switch childrens\r\n     * @param index - index to switch to\r\n     */\r\n    switch(index) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.isLocked) {\r\n                return false;\r\n            }\r\n            this.onPushSwitch(index);\r\n            return true;\r\n        });\r\n    }\r\n    /**\r\n     *\r\n     * @param element element this animation was perfromed on\r\n     * @param reverted - flag inidicating whether animation was performed to the end or reverted back to start\r\n     * @param errorOccured - tells whether animation was finished with error\r\n     */\r\n    onAnimationFinish(element, reverted, errorOccured) {\r\n        this.isLocked = false;\r\n        // If not go back or from push then switch, else was go back\r\n        let next = __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _nextIdx)];\r\n        let current = __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)];\r\n        if (!reverted) {\r\n            if (__classPrivateFieldGet(this, _nextIdx) > -1) {\r\n                this.mutate(() => {\r\n                    this.helper.removeClass(CLASSES.animProgress, next);\r\n                    this.helper.setClass(this.activeClassName, next);\r\n                    this.helper.removeClass(this.activeClassName, current);\r\n                    this.helper.removeAttribute(\"style\", current);\r\n                    this.helper.removeAttribute(\"style\", next);\r\n                    this.setLinkActive(__classPrivateFieldGet(this, _currentIdx), __classPrivateFieldGet(this, _nextIdx));\r\n                    this.emitEvent(EVENTS.SWITCHED, {\r\n                        timestamp: Date.now(),\r\n                        index: __classPrivateFieldGet(this, _nextIdx)\r\n                    });\r\n                    __classPrivateFieldSet(this, _currentIdx, __classPrivateFieldGet(this, _nextIdx));\r\n                    __classPrivateFieldSet(this, _nextIdx, -1);\r\n                    __classPrivateFieldSet(this, _nextElement, null);\r\n                    __classPrivateFieldSet(this, _startX, -1);\r\n                    __classPrivateFieldSet(this, _swipeRatio, 0);\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            if (is(__classPrivateFieldGet(this, _nextElement))) {\r\n                //@ts-ignore\r\n                this.helper.removeClass(CLASSES.animProgress, __classPrivateFieldGet(this, _nextElement));\r\n                //@ts-ignore\r\n                this.helper.removeAttribute(\"style\", __classPrivateFieldGet(this, _nextElement));\r\n            }\r\n            this.helper.removeAttribute(\"style\", current);\r\n            __classPrivateFieldSet(this, _nextIdx, -1);\r\n            __classPrivateFieldSet(this, _nextElement, null);\r\n            __classPrivateFieldSet(this, _startX, -1);\r\n            __classPrivateFieldSet(this, _swipeRatio, 0);\r\n        }\r\n        this.startTask();\r\n    }\r\n    onPushSwitch(index) {\r\n        if (!is(index) ||\r\n            this.isLocked ||\r\n            !__classPrivateFieldGet(this, _animationDef) ||\r\n            (!this.args.loop && __classPrivateFieldGet(this, _currentIdx) === 0 && index === 'prev') ||\r\n            (!this.args.loop && __classPrivateFieldGet(this, _currentIdx) === __classPrivateFieldGet(this, _targetsCount) - 1 && index === 'next')) {\r\n            return;\r\n        }\r\n        this.isLocked = true;\r\n        let nextIdx = calculateNextIndex(index, __classPrivateFieldGet(this, _currentIdx), __classPrivateFieldGet(this, _targetsCount));\r\n        if (nextIdx == __classPrivateFieldGet(this, _currentIdx) || nextIdx < 0 || nextIdx >= __classPrivateFieldGet(this, _targets).length) {\r\n            this._log.warning(`Index ${index} is not within the suitable range`);\r\n            return false;\r\n        }\r\n        __classPrivateFieldSet(this, _nextIdx, nextIdx);\r\n        let current = __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)];\r\n        let next = __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _nextIdx)];\r\n        __classPrivateFieldGet(this, _currSlider).setElement(current);\r\n        __classPrivateFieldGet(this, _nextSlider).setElement(next);\r\n        __classPrivateFieldGet(this, _currSlider).setProps(index === 'prev' ? __classPrivateFieldGet(this, _animationDef).current.left : __classPrivateFieldGet(this, _animationDef).current.right);\r\n        __classPrivateFieldGet(this, _nextSlider).setProps(index === 'prev' ? __classPrivateFieldGet(this, _animationDef).previous.left : __classPrivateFieldGet(this, _animationDef).previous.right);\r\n        this.mutate(() => {\r\n            __classPrivateFieldGet(this, _currSlider).finish(0, this.args.timeout, false);\r\n            __classPrivateFieldGet(this, _nextSlider).finish(0, this.args.timeout, false);\r\n            this.helper.setClass(CLASSES.animProgress, next);\r\n        });\r\n    }\r\n    getActiveIndex() {\r\n        __classPrivateFieldSet(this, _currentIdx, is(__classPrivateFieldGet(this, _targets)) ? __classPrivateFieldGet(this, _targets).findIndex(target => this.helper.hasClass(this.activeClassName, target)) : -1);\r\n    }\r\n    getElementHeight(current) {\r\n        if (!is(this.args.height) || this.args.height === 'auto') {\r\n            return getChildrenHeight(current) + \"px\";\r\n        }\r\n        else {\r\n            return this.args.height;\r\n        }\r\n    }\r\n    /**\r\n     * Queries targets\r\n     */\r\n    getTargets() {\r\n        let t = this.element.querySelectorAll(this.args.targets);\r\n        __classPrivateFieldSet(this, _targets, t.length > 0 ? [...t] : []);\r\n        __classPrivateFieldSet(this, _targetsCount, __classPrivateFieldGet(this, _targets).length);\r\n    }\r\n    /**\r\n     * Get linked switcher elements\r\n     */\r\n    getLinks() {\r\n        __classPrivateFieldSet(this, _links, is(this.args.links) ? [...document.querySelectorAll(this.args.links)] : []);\r\n    }\r\n    /**\r\n     * Set active class on linked switcher if set\r\n     * @param current - current index (to remove active from)\r\n     * @param next - next index (to set action on)\r\n     */\r\n    setLinkActive(current, next) {\r\n        if (!is(__classPrivateFieldGet(this, _links))) {\r\n            return;\r\n        }\r\n        this.mutate(() => {\r\n            if (isInRange(current, 0, __classPrivateFieldGet(this, _links).length - 1)) {\r\n                this.helper.removeClass(this.activeClassName, __classPrivateFieldGet(this, _links)[current]);\r\n            }\r\n            if (isInRange(next, 0, __classPrivateFieldGet(this, _links).length - 1)) {\r\n                this.helper.setClass(this.activeClassName, __classPrivateFieldGet(this, _links)[next]);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Runs task if arguments setup allows for it - auto flag must be set to true\r\n     */\r\n    startTask() {\r\n        __classPrivateFieldGet(this, _task).stop();\r\n        if (this.args.autoTimeout) {\r\n            __classPrivateFieldGet(this, _task).start();\r\n        }\r\n    }\r\n}\r\n_targets = new WeakMap(), _currentIdx = new WeakMap(), _links = new WeakMap(), _task = new WeakMap(), _switchEventId = new WeakMap(), _isTracking = new WeakMap(), _startX = new WeakMap(), _swipeRatio = new WeakMap(), _nextIdx = new WeakMap(), _nextElement = new WeakMap(), _ratioThreshold = new WeakMap(), _currSlider = new WeakMap(), _nextSlider = new WeakMap(), _animationDef = new WeakMap(), _targetsCount = new WeakMap(), _moveEventId = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _prefix, _defTimeout, _targets, _currentIdx, _links, _switches, _task, _switchEventId, _actionsIn, _actionsOut;\r\nimport { CuiMutableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiTaskRunner } from \"cui-light-core/dist/esm/utils/task\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { is, getStringOrDefault, replacePrefix, getIntOrDefault, isStringTrue, calculateNextIndex, getChildrenHeight, isInRange } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { SCOPE_SELECTOR, EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst SWITCH_DEFAULT_ACTION_IN = \".{prefix}-switch-animation-default-in\";\r\nconst SWITCH_DEFAULT_ACTION_OUT = \".{prefix}-switch-animation-default-out\";\r\nconst SWITCH_DEFAULT_TARGETS = \" > *\";\r\nexport class CuiSwitchArgs {\r\n    constructor(prefix, timeout) {\r\n        _prefix.set(this, void 0);\r\n        _defTimeout.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        this.targets = \"\";\r\n        this.in = \"\";\r\n        this.out = \"\";\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n        this.links = \"\";\r\n        this.switch = \"\";\r\n        this.autoTimeout = -1;\r\n        this.height = \"\";\r\n        this.loop = false;\r\n    }\r\n    parse(args) {\r\n        this.targets = is(args.targets) ? SCOPE_SELECTOR + args.targets : SCOPE_SELECTOR + SWITCH_DEFAULT_TARGETS;\r\n        this.in = getStringOrDefault(args.in, replacePrefix(SWITCH_DEFAULT_ACTION_IN, __classPrivateFieldGet(this, _prefix)));\r\n        this.out = getStringOrDefault(args.out, replacePrefix(SWITCH_DEFAULT_ACTION_OUT, __classPrivateFieldGet(this, _prefix)));\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.links = getStringOrDefault(args.links, \"\");\r\n        this.switch = getStringOrDefault(args.switch, \"\");\r\n        this.autoTimeout = getIntOrDefault(args.autoTimeout, -1);\r\n        this.height = getStringOrDefault(args.height, 'auto');\r\n        this.loop = isStringTrue(args.loop);\r\n    }\r\n}\r\n_prefix = new WeakMap(), _defTimeout = new WeakMap();\r\nexport class CuiSwitchComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-switch`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiSwitchHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiSwitchHandler extends CuiMutableHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiSwitchHandler\", element, attribute, new CuiSwitchArgs(utils.setup.prefix, utils.setup.animationTime), utils);\r\n        _targets.set(this, void 0);\r\n        _currentIdx.set(this, void 0);\r\n        _links.set(this, void 0);\r\n        _switches.set(this, void 0);\r\n        _task.set(this, void 0);\r\n        _switchEventId.set(this, void 0);\r\n        _actionsIn.set(this, void 0);\r\n        _actionsOut.set(this, void 0);\r\n        __classPrivateFieldSet(this, _targets, []);\r\n        __classPrivateFieldSet(this, _currentIdx, -1);\r\n        __classPrivateFieldSet(this, _links, []);\r\n        __classPrivateFieldSet(this, _switches, []);\r\n        __classPrivateFieldSet(this, _switchEventId, null);\r\n        __classPrivateFieldSet(this, _actionsIn, __classPrivateFieldSet(this, _actionsOut, []));\r\n        __classPrivateFieldSet(this, _task, new CuiTaskRunner(this.args.autoTimeout, true, this.switch.bind(this, 'next')));\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldSet(this, _switchEventId, this.onEvent(EVENTS.SWITCH, this.onPushSwitch.bind(this)));\r\n        this.parseArguments();\r\n        this.getTargets();\r\n        this.getActiveIndex();\r\n        this.getSwitches();\r\n        this.setSwitchesActive(__classPrivateFieldGet(this, _currentIdx));\r\n        this.setLinkActive(-1, __classPrivateFieldGet(this, _currentIdx));\r\n        this.mutate(() => {\r\n            this.helper.setStyle(this.element, 'height', this.getElementHeight(__classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)]));\r\n        });\r\n        __classPrivateFieldSet(this, _task, new CuiTaskRunner(this.args.autoTimeout, true, this.switch.bind(this, 'next')));\r\n        this.startTask();\r\n    }\r\n    onUpdate() {\r\n        this.parseArguments();\r\n        this.getTargets();\r\n        this.getSwitches();\r\n        this.setSwitchesActive(__classPrivateFieldGet(this, _currentIdx));\r\n        this.mutate(() => {\r\n            this.helper.setStyle(this.element, 'height', this.getElementHeight(__classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)]));\r\n        });\r\n        this.startTask();\r\n    }\r\n    onDestroy() {\r\n        __classPrivateFieldGet(this, _task).stop();\r\n        this.detachEvent(EVENTS.SWITCH, __classPrivateFieldGet(this, _switchEventId));\r\n    }\r\n    onMutation(record) {\r\n        this.getTargets();\r\n        this.mutate(() => {\r\n            this.helper.setStyle(this.element, 'height', this.getElementHeight(__classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)]));\r\n        });\r\n    }\r\n    switch(index) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.isLocked) {\r\n                return false;\r\n            }\r\n            this.getSwitches();\r\n            this.getActiveIndex();\r\n            let nextIdx = calculateNextIndex(index, __classPrivateFieldGet(this, _currentIdx), __classPrivateFieldGet(this, _targets).length);\r\n            if (!this.args.loop && ((index === \"next\" && nextIdx === 0) || (index === 'prev' && __classPrivateFieldGet(this, _currentIdx) === 0))) {\r\n                this.logInfo(\"Switch blocked by loop settings\", \"switch\");\r\n                return false;\r\n            }\r\n            if (nextIdx == __classPrivateFieldGet(this, _currentIdx) || nextIdx < 0 || nextIdx >= __classPrivateFieldGet(this, _targets).length) {\r\n                this.logWarning(`Index ${index} is not within the suitable range`, \"switch\");\r\n                return false;\r\n            }\r\n            this.isLocked = true;\r\n            this.setSwitchesActive(nextIdx);\r\n            let nextItem = __classPrivateFieldGet(this, _targets)[nextIdx];\r\n            yield this.actionsHelper.performSwitchAction(nextItem, __classPrivateFieldGet(this, _currentIdx) > -1 ? __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)] : null, __classPrivateFieldGet(this, _actionsIn), __classPrivateFieldGet(this, _actionsOut), () => {\r\n                // Set next element active\r\n                nextItem.classList.add(this.activeClassName);\r\n                // Remove active from current element (if current exists)\r\n                if (__classPrivateFieldGet(this, _currentIdx) > -1)\r\n                    __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)].classList.remove(this.activeClassName);\r\n                // Update linked items\r\n                this.setLinkActive(__classPrivateFieldGet(this, _currentIdx), nextIdx);\r\n                // Update element height - it must be done a parent get height based on current child\r\n                this.helper.setStyle(this.element, 'height', this.getElementHeight(nextItem));\r\n                this.startTask();\r\n                this.isLocked = false;\r\n            }, this.args.timeout);\r\n            this.emitEvent(EVENTS.SWITCHED, {\r\n                timestamp: Date.now(),\r\n                index: nextIdx\r\n            });\r\n            return true;\r\n        });\r\n    }\r\n    onPushSwitch(index) {\r\n        this.switch(index);\r\n    }\r\n    getActiveIndex() {\r\n        __classPrivateFieldSet(this, _currentIdx, is(__classPrivateFieldGet(this, _targets)) ? __classPrivateFieldGet(this, _targets).findIndex(target => this.helper.hasClass(this.activeClassName, target)) : -1);\r\n    }\r\n    getElementHeight(current) {\r\n        if (!is(this.args.height) || this.args.height === 'auto') {\r\n            return getChildrenHeight(current) + \"px\";\r\n        }\r\n        else {\r\n            return this.args.height;\r\n        }\r\n    }\r\n    /**\r\n     * Gets attributes value and prepares properties\r\n     */\r\n    parseArguments() {\r\n        __classPrivateFieldSet(this, _actionsIn, CuiActionsListFactory.get(this.args.in));\r\n        __classPrivateFieldSet(this, _actionsOut, CuiActionsListFactory.get(this.args.out));\r\n        __classPrivateFieldSet(this, _links, is(this.args.links) ? [...document.querySelectorAll(this.args.links)] : []);\r\n    }\r\n    /**\r\n     * Query target elements\r\n     */\r\n    getTargets() {\r\n        console.log(this.args.targets);\r\n        let t = this.element.querySelectorAll(this.args.targets);\r\n        __classPrivateFieldSet(this, _targets, t.length > 0 ? [...t] : []);\r\n    }\r\n    getSwitches() {\r\n        let switches = is(this.args.switch) ? document.querySelectorAll(this.args.switch) : null;\r\n        __classPrivateFieldSet(this, _switches, []);\r\n        if (switches) {\r\n            switches.forEach(sw => {\r\n                __classPrivateFieldGet(this, _switches).push(sw);\r\n            });\r\n        }\r\n    }\r\n    setLinkActive(current, next) {\r\n        if (!is(__classPrivateFieldGet(this, _links))) {\r\n            return;\r\n        }\r\n        if (isInRange(current, 0, __classPrivateFieldGet(this, _links).length - 1)) {\r\n            this.helper.removeClass(this.activeClassName, __classPrivateFieldGet(this, _links)[current]);\r\n        }\r\n        if (isInRange(next, 0, __classPrivateFieldGet(this, _links).length - 1)) {\r\n            this.helper.setClass(this.activeClassName, __classPrivateFieldGet(this, _links)[next]);\r\n        }\r\n    }\r\n    /**\r\n     * Sets propers active state on attached switches\r\n     * @param index\r\n     */\r\n    setSwitchesActive(index) {\r\n        __classPrivateFieldGet(this, _switches).forEach(sw => {\r\n            this.emitLinkSwitch(sw.$cuid, index);\r\n        });\r\n    }\r\n    /**\r\n     * Emits push event to attached switch to set proper index\r\n     * @param id - cuid of element\r\n     * @param index - index to be set on element\r\n     */\r\n    emitLinkSwitch(id, index) {\r\n        if (is(id))\r\n            this.utils.bus.emit(EVENTS.SWITCH, id, index);\r\n    }\r\n    /**\r\n     * Runs task if arguments setup allows for it - auto flag must be set to true\r\n     */\r\n    startTask() {\r\n        __classPrivateFieldGet(this, _task).stop();\r\n        if (this.args.autoTimeout) {\r\n            __classPrivateFieldGet(this, _task).start();\r\n        }\r\n    }\r\n}\r\n_targets = new WeakMap(), _currentIdx = new WeakMap(), _links = new WeakMap(), _switches = new WeakMap(), _task = new WeakMap(), _switchEventId = new WeakMap(), _actionsIn = new WeakMap(), _actionsOut = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _targetId, _isList, _listeners;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst SWITCHER_LIST_ITEM_SELECTOR = \"li > a\";\r\nexport class CuiSwitcherArgs {\r\n    constructor() {\r\n        this.index = \"\";\r\n        this.target = \"\";\r\n    }\r\n    parse(args) {\r\n        if (!is(args)) {\r\n            return;\r\n        }\r\n        this.target = args.target;\r\n        this.index = args.index;\r\n    }\r\n}\r\nexport class CuiSwitcherComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-switcher`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiSwitcherHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiSwitcherHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiSwitcherHandler\", element, attribute, new CuiSwitcherArgs(), utils);\r\n        _targetId.set(this, void 0);\r\n        _isList.set(this, void 0);\r\n        _listeners.set(this, void 0);\r\n        __classPrivateFieldSet(this, _targetId, null);\r\n        __classPrivateFieldSet(this, _isList, element.tagName === 'UL');\r\n        this.onClickEvent = this.onClickEvent.bind(this);\r\n        __classPrivateFieldSet(this, _listeners, []);\r\n    }\r\n    onInit() {\r\n        this.setEvents();\r\n        this.getTarget();\r\n    }\r\n    onUpdate() {\r\n        this.getTarget();\r\n    }\r\n    onDestroy() {\r\n        this.removeEvents();\r\n    }\r\n    getTarget() {\r\n        if (!is(this.args.target)) {\r\n            __classPrivateFieldSet(this, _targetId, null);\r\n        }\r\n        let target = document.querySelector(this.args.target);\r\n        if (is(target)) {\r\n            __classPrivateFieldSet(this, _targetId, target.$cuid);\r\n        }\r\n    }\r\n    setEvents() {\r\n        if (__classPrivateFieldGet(this, _isList)) {\r\n            let elements = this.element.querySelectorAll(SWITCHER_LIST_ITEM_SELECTOR);\r\n            elements.forEach((el, index) => {\r\n                let list = this.onListItemClick.bind(this, index);\r\n                __classPrivateFieldGet(this, _listeners).push(list);\r\n                //@ts-ignore\r\n                el.addEventListener('click', list);\r\n            });\r\n        }\r\n        else {\r\n            this.element.addEventListener('click', this.onClickEvent);\r\n        }\r\n    }\r\n    removeEvents() {\r\n        if (__classPrivateFieldGet(this, _isList)) {\r\n            let elements = this.element.querySelectorAll(SWITCHER_LIST_ITEM_SELECTOR);\r\n            elements.forEach((el, index) => {\r\n                if (__classPrivateFieldGet(this, _listeners).length > index)\r\n                    //@ts-ignore\r\n                    el.removeEventListener('click', __classPrivateFieldGet(this, _listeners)[index]);\r\n            });\r\n            __classPrivateFieldSet(this, _listeners, []);\r\n        }\r\n        else {\r\n            this.element.removeEventListener('click', this.onClickEvent);\r\n        }\r\n    }\r\n    onClickEvent(ev) {\r\n        this.getTarget();\r\n        if (!is(this.args.index)) {\r\n            return;\r\n        }\r\n        this.onClick(this.args.index.trim());\r\n    }\r\n    onListItemClick(index, ev) {\r\n        this.getTarget();\r\n        this.onClick(index);\r\n    }\r\n    onClick(index) {\r\n        if (!is(__classPrivateFieldGet(this, _targetId))) {\r\n            return;\r\n        }\r\n        //@ts-ignore  targetId checked already\r\n        this.utils.bus.emit(EVENTS.SWITCH, __classPrivateFieldGet(this, _targetId), index);\r\n    }\r\n}\r\n_targetId = new WeakMap(), _isList = new WeakMap(), _listeners = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _target, _utils, _toggleEventId, _actions;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { is, isString, getStringOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nexport class CuiToggleArgs {\r\n    constructor() {\r\n        this.action = \"\";\r\n        this.target = \"\";\r\n    }\r\n    parse(args) {\r\n        if (is(args) && isString(args)) {\r\n            this.action = args;\r\n        }\r\n        else {\r\n            this.target = getStringOrDefault(args.target, \"\");\r\n            this.action = args.action;\r\n        }\r\n    }\r\n}\r\nexport class CuiToggleComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : \"cui\"}-toggle`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiToggleHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiToggleHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiToggleHandler\", element, attribute, new CuiToggleArgs(), utils);\r\n        _target.set(this, void 0);\r\n        _utils.set(this, void 0);\r\n        _toggleEventId.set(this, void 0);\r\n        _actions.set(this, void 0);\r\n        __classPrivateFieldSet(this, _target, this.element);\r\n        __classPrivateFieldSet(this, _utils, utils);\r\n        __classPrivateFieldSet(this, _toggleEventId, null);\r\n        __classPrivateFieldSet(this, _actions, []);\r\n        this.onClick = this.onClick.bind(this);\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldSet(this, _target, this.getTarget());\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n        this.element.addEventListener('click', this.onClick);\r\n        __classPrivateFieldSet(this, _toggleEventId, this.onEvent(EVENTS.TOGGLE, this.toggle.bind(this)));\r\n    }\r\n    onUpdate() {\r\n        __classPrivateFieldSet(this, _target, this.getTarget());\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n    }\r\n    onDestroy() {\r\n        this.element.removeEventListener('click', this.onClick);\r\n        this.detachEvent(EVENTS.TOGGLE, __classPrivateFieldGet(this, _toggleEventId));\r\n    }\r\n    toggle() {\r\n        if (!__classPrivateFieldGet(this, _target)) {\r\n            this.logError(\"Target in not provided\", \"toggle\");\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _actions).forEach(action => action.toggle(__classPrivateFieldGet(this, _target), __classPrivateFieldGet(this, _utils)));\r\n        this.emitEvent(EVENTS.TOGGLED, {\r\n            action: this.args.action,\r\n            target: __classPrivateFieldGet(this, _target),\r\n            timestamp: Date.now()\r\n        });\r\n    }\r\n    onClick(ev) {\r\n        this.toggle();\r\n        ev.preventDefault();\r\n    }\r\n    getTarget() {\r\n        var _a;\r\n        if (!this.args.target) {\r\n            return this.element;\r\n        }\r\n        return (_a = document.querySelector(this.args.target)) !== null && _a !== void 0 ? _a : this.element;\r\n    }\r\n}\r\n_target = new WeakMap(), _utils = new WeakMap(), _toggleEventId = new WeakMap(), _actions = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defAct, _prefix, _hoverListener, _tooltip, _margin, _positionCalculator, _tooltipDataCls, _actions, _task;\r\nimport { ElementBuilder } from \"cui-light-core/dist/esm/builders/element\";\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiHoverListener } from \"cui-light-core/dist/esm/listeners/hover\";\r\nimport { CuiBasePositionCalculator } from \"cui-light-core/dist/esm/position/calculator\";\r\nimport { CuiTaskRunner } from \"cui-light-core/dist/esm/utils/task\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { replacePrefix, isString, getStringOrDefault, getIntOrDefault, is } from \"cui-light-core/dist/esm/utils/functions\";\r\nconst TOOLTIP_ACTION = \".{prefix}-animation-tooltip-in\";\r\nconst TOOLTIP_DATA = \"{prefix}-tooltip-data\";\r\nexport class CuiTooltipArgs {\r\n    constructor(prefix) {\r\n        _defAct.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defAct, replacePrefix(TOOLTIP_ACTION, prefix));\r\n        this.content = \"\";\r\n        this.width = 150;\r\n        this.margin = 8;\r\n        this.timeout = 2000;\r\n        this.pos = \"\";\r\n        this.action = __classPrivateFieldGet(this, _defAct);\r\n    }\r\n    parse(val) {\r\n        if (isString(val)) {\r\n            this.content = getStringOrDefault(val, \"\");\r\n            return;\r\n        }\r\n        this.content = getStringOrDefault(val.content, \"\");\r\n        this.width = getIntOrDefault(val.width, 150);\r\n        this.margin = getIntOrDefault(val.margin, 8);\r\n        this.pos = getStringOrDefault(val.pos, \"\");\r\n        this.action = getStringOrDefault(val.action, __classPrivateFieldGet(this, _defAct));\r\n        this.timeout = getIntOrDefault(val.timeout, 2000);\r\n    }\r\n}\r\n_defAct = new WeakMap();\r\nexport class CuiTooltipComponent {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix)}-tooltip`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, sutils) {\r\n        return new CuiTooltipHandler(element, this.attribute, sutils, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiTooltipHandler extends CuiHandler {\r\n    constructor(element, attribute, utils, prefix) {\r\n        super(\"CuiTooltipHandler\", element, attribute, new CuiTooltipArgs(prefix), utils);\r\n        _hoverListener.set(this, void 0);\r\n        _tooltip.set(this, void 0);\r\n        _margin.set(this, void 0);\r\n        _positionCalculator.set(this, void 0);\r\n        _tooltipDataCls.set(this, void 0);\r\n        _actions.set(this, void 0);\r\n        _task.set(this, void 0);\r\n        __classPrivateFieldSet(this, _tooltip, undefined);\r\n        __classPrivateFieldSet(this, _actions, []);\r\n        __classPrivateFieldSet(this, _task, undefined);\r\n        __classPrivateFieldSet(this, _tooltipDataCls, replacePrefix(TOOLTIP_DATA, prefix));\r\n        __classPrivateFieldSet(this, _hoverListener, new CuiHoverListener(element));\r\n        __classPrivateFieldGet(this, _hoverListener).setCallback(this.onHover.bind(this));\r\n        __classPrivateFieldSet(this, _margin, 8);\r\n        __classPrivateFieldSet(this, _positionCalculator, new CuiBasePositionCalculator());\r\n        __classPrivateFieldGet(this, _positionCalculator).setPreferred(\"top-center\");\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldGet(this, _hoverListener).attach();\r\n        this.getDataFromArgs();\r\n        __classPrivateFieldSet(this, _task, new CuiTaskRunner(this.args.timeout, false, this.removeTooltip.bind(this)));\r\n    }\r\n    onUpdate() {\r\n        this.getDataFromArgs();\r\n        if (__classPrivateFieldGet(this, _task))\r\n            __classPrivateFieldGet(this, _task).setTimeout(this.args.timeout);\r\n    }\r\n    onDestroy() {\r\n        this.removeTooltip();\r\n        __classPrivateFieldGet(this, _hoverListener).detach();\r\n    }\r\n    onHover(ev) {\r\n        if (ev.isHovering) {\r\n            this.createTooltip();\r\n        }\r\n        else {\r\n            this.removeTooltip();\r\n        }\r\n    }\r\n    createTooltip() {\r\n        if (is(__classPrivateFieldGet(this, _tooltip)) || !is(this.args.content)) {\r\n            return;\r\n        }\r\n        const box = this.element.getBoundingClientRect();\r\n        __classPrivateFieldSet(this, _tooltip, new ElementBuilder(\"div\").setClasses(__classPrivateFieldGet(this, _tooltipDataCls)).build());\r\n        __classPrivateFieldGet(this, _tooltip).textContent = this.args.content;\r\n        __classPrivateFieldGet(this, _tooltip).style.maxWidth = `${this.args.width}px`;\r\n        document.body.appendChild(__classPrivateFieldGet(this, _tooltip));\r\n        this.mutate(() => {\r\n            if (!__classPrivateFieldGet(this, _tooltip)) {\r\n                return;\r\n            }\r\n            const toolbox = __classPrivateFieldGet(this, _tooltip).getBoundingClientRect();\r\n            __classPrivateFieldGet(this, _positionCalculator).setMargin(__classPrivateFieldGet(this, _margin));\r\n            try {\r\n                let [x, y] = __classPrivateFieldGet(this, _positionCalculator).calculate(box, toolbox);\r\n                __classPrivateFieldGet(this, _tooltip).style.top = `${y}px`;\r\n                __classPrivateFieldGet(this, _tooltip).style.left = `${x}px`;\r\n                this.toggleActions();\r\n                if (__classPrivateFieldGet(this, _task))\r\n                    __classPrivateFieldGet(this, _task).start();\r\n            }\r\n            catch (e) {\r\n                this.logError(e.message, \"createTooltip\", e);\r\n            }\r\n        });\r\n    }\r\n    removeTooltip() {\r\n        if (!is(__classPrivateFieldGet(this, _tooltip))) {\r\n            return;\r\n        }\r\n        if (__classPrivateFieldGet(this, _task))\r\n            __classPrivateFieldGet(this, _task).stop();\r\n        this.mutate(() => {\r\n            //@ts-ignore already checked\r\n            __classPrivateFieldGet(this, _tooltip).remove();\r\n            __classPrivateFieldSet(this, _tooltip, undefined);\r\n        });\r\n    }\r\n    getDataFromArgs() {\r\n        __classPrivateFieldGet(this, _positionCalculator).setMargin(this.args.margin);\r\n        __classPrivateFieldGet(this, _positionCalculator).setStatic(this.args.pos);\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n    }\r\n    toggleActions() {\r\n        if (!__classPrivateFieldGet(this, _tooltip)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _actions).forEach(action => {\r\n            // @ts-ignore\r\n            action.toggle(__classPrivateFieldGet(this, _tooltip));\r\n        });\r\n    }\r\n}\r\n_hoverListener = new WeakMap(), _tooltip = new WeakMap(), _margin = new WeakMap(), _positionCalculator = new WeakMap(), _tooltipDataCls = new WeakMap(), _actions = new WeakMap(), _task = new WeakMap();\r\n","import { CuiAccordionComponent } from \"./accordion/accordion\";\r\nimport { CuiBanerComponent } from \"./banner/banner\";\r\nimport { CuiCircleComponent } from \"./circle/circle\";\r\nimport { CuiCloseComponent } from \"./close/close\";\r\nimport { CuiCoverComponent } from \"./cover/cover\";\r\nimport { CuiDialogComponent } from \"./dialog/dialog\";\r\nimport { CuiDropComponenet } from \"./drop/drop\";\r\nimport { CuiFloatComponent } from \"./float/float\";\r\nimport { CuiIconComponent } from \"./icon/icon\";\r\nimport { CuiIntersectionComponent } from \"./intersection/intersection\";\r\nimport { CuiOffCanvasComponent } from \"./offcanvas/offcanvas\";\r\nimport { CuiOffsetComponent } from \"./offset/offset\";\r\nimport { CuiOpenComponent } from \"./open/open\";\r\nimport { CuiResizeComponent } from \"./resize/resize\";\r\nimport { CuiScrollComponent } from \"./scroll/scroll\";\r\nimport { CuiScrollspyComponent } from \"./scrollspy/scrollspy\";\r\nimport { CuiSortableComponent } from \"./sortable/sortable\";\r\nimport { CuiSpinnerComponent } from \"./spinner/spinner\";\r\nimport { CuiSliderComponent } from \"./switch/slider\";\r\nimport { CuiSwitchComponent } from \"./switch/switch\";\r\nimport { CuiSwitcherComponent } from \"./switch/switcher\";\r\nimport { CuiToggleComponent } from \"./toggle/toggle\";\r\nimport { CuiTooltipComponent } from \"./tooltip/tooltip\";\r\n/**\r\n * Function that initializes and returns all components available in package\r\n * @param attributes - object holding data needed for components initialization\r\n */\r\nexport function GetComponents(attributes) {\r\n    let prefix = attributes === null || attributes === void 0 ? void 0 : attributes.prefix;\r\n    return [\r\n        new CuiIconComponent(prefix),\r\n        new CuiTooltipComponent(prefix),\r\n        new CuiCircleComponent(prefix),\r\n        new CuiSpinnerComponent(prefix),\r\n        new CuiScrollComponent(prefix),\r\n        new CuiScrollspyComponent(prefix),\r\n        new CuiIntersectionComponent(prefix),\r\n        new CuiOpenComponent(prefix),\r\n        new CuiCloseComponent(prefix),\r\n        new CuiToggleComponent(prefix),\r\n        new CuiDialogComponent(prefix),\r\n        new CuiOffCanvasComponent(prefix),\r\n        new CuiAccordionComponent(prefix),\r\n        new CuiDropComponenet(prefix),\r\n        new CuiOffsetComponent(prefix),\r\n        new CuiSwitchComponent(prefix),\r\n        new CuiSwitcherComponent(prefix),\r\n        new CuiFloatComponent(prefix),\r\n        new CuiSliderComponent(prefix),\r\n        new CuiBanerComponent(prefix),\r\n        new CuiCoverComponent(prefix),\r\n        new CuiSortableComponent(prefix),\r\n        new CuiResizeComponent(prefix),\r\n    ];\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _bus, _boundClick;\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nexport class CuiWindowClickPlugin {\r\n    constructor() {\r\n        this.name = 'click-plugin';\r\n        _bus.set(this, void 0);\r\n        _boundClick.set(this, void 0);\r\n        this.description = \"CuiWindowClickPlugin\";\r\n        __classPrivateFieldSet(this, _bus, undefined);\r\n        __classPrivateFieldSet(this, _boundClick, this.onWindowClick.bind(this));\r\n    }\r\n    init(utils) {\r\n        __classPrivateFieldSet(this, _bus, utils.bus);\r\n        window.addEventListener('click', __classPrivateFieldGet(this, _boundClick));\r\n    }\r\n    destroy() {\r\n        window.removeEventListener('click', __classPrivateFieldGet(this, _boundClick));\r\n    }\r\n    onWindowClick(ev) {\r\n        if (__classPrivateFieldGet(this, _bus))\r\n            __classPrivateFieldGet(this, _bus).emit(EVENTS.WINDOW_CLICK, null, ev);\r\n    }\r\n}\r\n_bus = new WeakMap(), _boundClick = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _callback, _keys, _inProgress, _singleEmit, _isAttached, _onKeyDownBound, _onKeyUpBound;\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiKeyPressListener {\r\n    constructor(singleEmit, keys) {\r\n        _callback.set(this, void 0);\r\n        _keys.set(this, void 0);\r\n        _inProgress.set(this, void 0);\r\n        _singleEmit.set(this, void 0);\r\n        _isAttached.set(this, void 0);\r\n        _onKeyDownBound.set(this, void 0);\r\n        _onKeyUpBound.set(this, void 0);\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n        __classPrivateFieldSet(this, _singleEmit, true);\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n        __classPrivateFieldSet(this, _callback, undefined);\r\n        __classPrivateFieldSet(this, _keys, keys !== null && keys !== void 0 ? keys : []);\r\n        __classPrivateFieldSet(this, _onKeyDownBound, this.onKeyDown.bind(this));\r\n        __classPrivateFieldSet(this, _onKeyUpBound, this.onKeyUp.bind(this));\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    isInProgress() {\r\n        return __classPrivateFieldGet(this, _inProgress);\r\n    }\r\n    attach() {\r\n        document.addEventListener('keydown', __classPrivateFieldGet(this, _onKeyDownBound));\r\n        if (__classPrivateFieldGet(this, _singleEmit)) {\r\n            document.addEventListener('keyup', __classPrivateFieldGet(this, _onKeyUpBound));\r\n        }\r\n        __classPrivateFieldSet(this, _isAttached, true);\r\n    }\r\n    detach() {\r\n        document.removeEventListener('keydown', __classPrivateFieldGet(this, _onKeyDownBound));\r\n        if (__classPrivateFieldGet(this, _singleEmit)) {\r\n            document.addEventListener('keyup', __classPrivateFieldGet(this, _onKeyUpBound));\r\n        }\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n    }\r\n    isAttached() {\r\n        return __classPrivateFieldGet(this, _isAttached);\r\n    }\r\n    onKeyDown(ev) {\r\n        if (__classPrivateFieldGet(this, _inProgress)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _inProgress, true);\r\n        try {\r\n            if ((!is(__classPrivateFieldGet(this, _keys)) || __classPrivateFieldGet(this, _keys).includes(ev.code)) && __classPrivateFieldGet(this, _callback)) {\r\n                __classPrivateFieldGet(this, _callback).call(this, ev);\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n        }\r\n        finally {\r\n            if (!__classPrivateFieldGet(this, _singleEmit))\r\n                __classPrivateFieldSet(this, _inProgress, false);\r\n        }\r\n    }\r\n    onKeyUp(ev) {\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n    }\r\n}\r\n_callback = new WeakMap(), _keys = new WeakMap(), _inProgress = new WeakMap(), _singleEmit = new WeakMap(), _isAttached = new WeakMap(), _onKeyDownBound = new WeakMap(), _onKeyUpBound = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _listener, _bus;\r\nimport { CuiKeyPressListener } from \"cui-light-core/dist/esm/listeners/keys\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nexport class CuiKeysObserver {\r\n    constructor(bus) {\r\n        _listener.set(this, void 0);\r\n        _bus.set(this, void 0);\r\n        __classPrivateFieldSet(this, _bus, bus);\r\n        __classPrivateFieldSet(this, _listener, new CuiKeyPressListener(true));\r\n        __classPrivateFieldGet(this, _listener).setCallback(this.onKeyDown.bind(this));\r\n    }\r\n    connect() {\r\n        __classPrivateFieldGet(this, _listener).attach();\r\n    }\r\n    disconnect() {\r\n        __classPrivateFieldGet(this, _listener).detach();\r\n    }\r\n    onKeyDown(ev) {\r\n        __classPrivateFieldGet(this, _bus).emit(EVENTS.KEYDOWN, null, {\r\n            timestamp: Date.now(),\r\n            event: ev\r\n        });\r\n    }\r\n}\r\n_listener = new WeakMap(), _bus = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _keysObserver;\r\nimport { CuiKeysObserver } from \"./observer\";\r\nexport class CuiKeysObserverPlugin {\r\n    constructor(keySetup) {\r\n        this.name = 'keys-observer';\r\n        _keysObserver.set(this, void 0);\r\n        this.description = \"CuiKeysObserverPlugin\";\r\n        this.setup = keySetup;\r\n        __classPrivateFieldSet(this, _keysObserver, undefined);\r\n    }\r\n    init(utils) {\r\n        __classPrivateFieldSet(this, _keysObserver, new CuiKeysObserver(utils.bus));\r\n        __classPrivateFieldGet(this, _keysObserver).connect();\r\n    }\r\n    destroy() {\r\n        if (__classPrivateFieldGet(this, _keysObserver))\r\n            __classPrivateFieldGet(this, _keysObserver).disconnect();\r\n    }\r\n}\r\n_keysObserver = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _mediaQuery, _callback, _isInitialized, _inProgress, _onEventBound;\r\nexport class CuiMediaQueryListener {\r\n    constructor(mediaQuery) {\r\n        _mediaQuery.set(this, void 0);\r\n        _callback.set(this, void 0);\r\n        _isInitialized.set(this, void 0);\r\n        _inProgress.set(this, void 0);\r\n        _onEventBound.set(this, void 0);\r\n        __classPrivateFieldSet(this, _mediaQuery, mediaQuery);\r\n        __classPrivateFieldSet(this, _isInitialized, false);\r\n        __classPrivateFieldSet(this, _callback, undefined);\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n        __classPrivateFieldSet(this, _onEventBound, this.event.bind(this));\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    isInProgress() {\r\n        return __classPrivateFieldGet(this, _inProgress);\r\n    }\r\n    attach() {\r\n        if (!window.matchMedia || __classPrivateFieldGet(this, _isInitialized) || !__classPrivateFieldGet(this, _mediaQuery)) {\r\n            return;\r\n        }\r\n        window.matchMedia(__classPrivateFieldGet(this, _mediaQuery))\r\n            .addEventListener('change', __classPrivateFieldGet(this, _onEventBound));\r\n        __classPrivateFieldSet(this, _isInitialized, true);\r\n    }\r\n    detach() {\r\n        if (__classPrivateFieldGet(this, _isInitialized)) {\r\n            window.matchMedia(__classPrivateFieldGet(this, _mediaQuery)).removeEventListener('change', __classPrivateFieldGet(this, _onEventBound));\r\n            __classPrivateFieldSet(this, _isInitialized, false);\r\n        }\r\n    }\r\n    isAttached() {\r\n        return __classPrivateFieldGet(this, _isInitialized);\r\n    }\r\n    event(ev) {\r\n        if (__classPrivateFieldGet(this, _inProgress) || !__classPrivateFieldGet(this, _callback)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _inProgress, true);\r\n        try {\r\n            __classPrivateFieldGet(this, _callback).call(this, ev);\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n        }\r\n        finally {\r\n            __classPrivateFieldSet(this, _inProgress, false);\r\n        }\r\n    }\r\n}\r\n_mediaQuery = new WeakMap(), _callback = new WeakMap(), _isInitialized = new WeakMap(), _inProgress = new WeakMap(), _onEventBound = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _listener, _utils;\r\nimport { getSystemLightMode } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiMediaQueryListener } from \"cui-light-core/dist/esm/listeners/media\";\r\nexport class CuiAutoLightModePlugin {\r\n    constructor(autoLightInit) {\r\n        this.description = 'Dark vs Light mode auto switcher';\r\n        this.name = 'auto-light';\r\n        _listener.set(this, void 0);\r\n        _utils.set(this, void 0);\r\n        this.description = \"CuiAutoLightModePlugin\";\r\n        this.setup = autoLightInit;\r\n        __classPrivateFieldSet(this, _utils, undefined);\r\n        __classPrivateFieldSet(this, _listener, undefined);\r\n    }\r\n    init(utils) {\r\n        __classPrivateFieldSet(this, _utils, utils);\r\n        if (this.setup.autoLight && getSystemLightMode() === 'dark') {\r\n            __classPrivateFieldGet(this, _utils).setLightMode('dark');\r\n        }\r\n        __classPrivateFieldSet(this, _listener, new CuiMediaQueryListener('(prefers-color-scheme: dark)'));\r\n        __classPrivateFieldGet(this, _listener).setCallback(this.onChange.bind(this));\r\n        __classPrivateFieldGet(this, _listener).attach();\r\n    }\r\n    destroy() {\r\n        if (__classPrivateFieldGet(this, _listener))\r\n            __classPrivateFieldGet(this, _listener).detach();\r\n    }\r\n    onChange(ev) {\r\n        var _a;\r\n        if (!__classPrivateFieldGet(this, _utils)) {\r\n            return;\r\n        }\r\n        let autoLightSetup = __classPrivateFieldGet(this, _utils).setup.plugins[this.description];\r\n        let autoLight = (_a = autoLightSetup === null || autoLightSetup === void 0 ? void 0 : autoLightSetup.autoLight) !== null && _a !== void 0 ? _a : false;\r\n        if (autoLight) {\r\n            if (ev.matches) {\r\n                __classPrivateFieldGet(this, _utils).setLightMode('dark');\r\n            }\r\n            else {\r\n                __classPrivateFieldGet(this, _utils).setLightMode('light');\r\n            }\r\n        }\r\n    }\r\n}\r\n_listener = new WeakMap(), _utils = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _listener, _utils;\r\nimport { getSystemPrintMode } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiMediaQueryListener } from \"cui-light-core/dist/esm/listeners/media\";\r\nexport class CuiAutoPrintModePlugin {\r\n    constructor(autoPrintInit) {\r\n        this.description = 'Auto print mode';\r\n        this.name = 'auto-print';\r\n        _listener.set(this, void 0);\r\n        _utils.set(this, void 0);\r\n        this.description = \"CuiAutoPrintModePlugin\";\r\n        this.setup = autoPrintInit;\r\n        __classPrivateFieldSet(this, _listener, undefined);\r\n        __classPrivateFieldSet(this, _utils, undefined);\r\n    }\r\n    init(utils) {\r\n        __classPrivateFieldSet(this, _utils, utils);\r\n        if (this.setup.autoPrint && getSystemPrintMode()) {\r\n            __classPrivateFieldGet(this, _utils).setPrintMode(true);\r\n        }\r\n        __classPrivateFieldSet(this, _listener, new CuiMediaQueryListener('print'));\r\n        __classPrivateFieldGet(this, _listener).setCallback(this.onChange.bind(this));\r\n        __classPrivateFieldGet(this, _listener).attach();\r\n    }\r\n    destroy() {\r\n        if (__classPrivateFieldGet(this, _listener))\r\n            __classPrivateFieldGet(this, _listener).detach();\r\n    }\r\n    onChange(ev) {\r\n        var _a, _b;\r\n        if (!__classPrivateFieldGet(this, _utils)) {\r\n            return;\r\n        }\r\n        this.setup = __classPrivateFieldGet(this, _utils).setup.plugins[this.description];\r\n        let autoPrint = (_b = (_a = this.setup) === null || _a === void 0 ? void 0 : _a.autoPrint) !== null && _b !== void 0 ? _b : false;\r\n        if (autoPrint) {\r\n            if (ev.matches) {\r\n                __classPrivateFieldGet(this, _utils).setPrintMode(true);\r\n            }\r\n            else {\r\n                __classPrivateFieldGet(this, _utils).setPrintMode(false);\r\n            }\r\n        }\r\n    }\r\n}\r\n_listener = new WeakMap(), _utils = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _red, _green, _blue, _alpha, _colorStr, _colorStr_1;\r\nimport { getRangeValue, is, isInRange, } from \"../utils/functions\";\r\nimport { CuiColorError } from \"./errors\";\r\nexport class CuiColor {\r\n    constructor(red, green, blue, alpha) {\r\n        _red.set(this, void 0);\r\n        _green.set(this, void 0);\r\n        _blue.set(this, void 0);\r\n        _alpha.set(this, void 0);\r\n        __classPrivateFieldSet(this, _red, 0);\r\n        __classPrivateFieldSet(this, _blue, 0);\r\n        __classPrivateFieldSet(this, _green, 0);\r\n        __classPrivateFieldSet(this, _alpha, 0);\r\n        this.set(red, green, blue, alpha);\r\n    }\r\n    static create(colorStr) {\r\n        if (!is(colorStr)) {\r\n            throw new CuiColorError(`Given color value is not in a valid format`);\r\n        }\r\n        let parser;\r\n        if (colorStr.startsWith(\"#\")) {\r\n            parser = new HexColorParser(colorStr);\r\n        }\r\n        else if (colorStr.startsWith(\"rgb\")) {\r\n            parser = new RgbColorParser(colorStr);\r\n        }\r\n        else {\r\n            throw new CuiColorError(\"Unknown color string format\");\r\n        }\r\n        let res = parser.parse();\r\n        if (!res) {\r\n            throw new CuiColorError(\"Color was not parsed\");\r\n        }\r\n        return res;\r\n    }\r\n    set(red, green, blue, alpha) {\r\n        __classPrivateFieldSet(this, _alpha, getRangeValue(alpha !== null && alpha !== void 0 ? alpha : 1, 0, 1));\r\n        __classPrivateFieldSet(this, _blue, getRangeValue(blue, 0, 255));\r\n        __classPrivateFieldSet(this, _red, getRangeValue(red, 0, 255));\r\n        __classPrivateFieldSet(this, _green, getRangeValue(green, 0, 255));\r\n    }\r\n    setRed(red) {\r\n        __classPrivateFieldSet(this, _red, getRangeValue(red, 0, 255));\r\n    }\r\n    setGreen(green) {\r\n        __classPrivateFieldSet(this, _green, getRangeValue(green, 0, 255));\r\n    }\r\n    setBlue(blue) {\r\n        __classPrivateFieldSet(this, _blue, getRangeValue(blue, 0, 255));\r\n    }\r\n    opacity(val) {\r\n        __classPrivateFieldSet(this, _alpha, getRangeValue(val, 0, 1));\r\n        return this;\r\n    }\r\n    lighten(amount) {\r\n        this.shade(amount);\r\n        return this;\r\n    }\r\n    darken(amount) {\r\n        this.shade(-amount);\r\n        return this;\r\n    }\r\n    invert() {\r\n        __classPrivateFieldSet(this, _blue, 255 - __classPrivateFieldGet(this, _blue));\r\n        __classPrivateFieldSet(this, _red, 255 - __classPrivateFieldGet(this, _red));\r\n        __classPrivateFieldSet(this, _green, 255 - __classPrivateFieldGet(this, _green));\r\n        return this;\r\n    }\r\n    getColorValue(type) {\r\n        const t = type ? type.toLowerCase() : '#';\r\n        switch (type) {\r\n            case 'red':\r\n                return __classPrivateFieldGet(this, _red);\r\n            case 'green':\r\n                return __classPrivateFieldGet(this, _green);\r\n            case 'blue':\r\n                return __classPrivateFieldGet(this, _blue);\r\n            case 'alpha':\r\n                return __classPrivateFieldGet(this, _alpha);\r\n        }\r\n        return -1;\r\n    }\r\n    toCssString() {\r\n        return `rgba(${__classPrivateFieldGet(this, _red)}, ${__classPrivateFieldGet(this, _green)}, ${__classPrivateFieldGet(this, _blue)}, ${__classPrivateFieldGet(this, _alpha)})`;\r\n    }\r\n    shade(percent, self = true) {\r\n        __classPrivateFieldSet(this, _red, this.shadeSingle(__classPrivateFieldGet(this, _red), percent, self));\r\n        __classPrivateFieldSet(this, _green, this.shadeSingle(__classPrivateFieldGet(this, _green), percent, self));\r\n        __classPrivateFieldSet(this, _blue, this.shadeSingle(__classPrivateFieldGet(this, _blue), percent, self));\r\n    }\r\n    shadeSingle(val, percent, self = true) {\r\n        let rel = self ? val : 255;\r\n        let prop = (rel * percent) / 100;\r\n        let newVal = val + Math.round(prop);\r\n        return getRangeValue(newVal, 0, 255);\r\n    }\r\n    clone() {\r\n        return new CuiColor(__classPrivateFieldGet(this, _red), __classPrivateFieldGet(this, _green), __classPrivateFieldGet(this, _blue), __classPrivateFieldGet(this, _alpha));\r\n    }\r\n}\r\n_red = new WeakMap(), _green = new WeakMap(), _blue = new WeakMap(), _alpha = new WeakMap();\r\nexport class HexColorParser {\r\n    constructor(colorStr) {\r\n        _colorStr.set(this, void 0);\r\n        __classPrivateFieldSet(this, _colorStr, colorStr);\r\n    }\r\n    trim() {\r\n        __classPrivateFieldSet(this, _colorStr, __classPrivateFieldGet(this, _colorStr) ? __classPrivateFieldGet(this, _colorStr).trim() : \"\");\r\n        return;\r\n    }\r\n    isValid() {\r\n        return is(__classPrivateFieldGet(this, _colorStr)) && __classPrivateFieldGet(this, _colorStr).startsWith(\"#\");\r\n    }\r\n    parse() {\r\n        let red = 0;\r\n        let blue = 0;\r\n        let green = 0;\r\n        let alpha = 1;\r\n        let length = __classPrivateFieldGet(this, _colorStr).length;\r\n        if (__classPrivateFieldGet(this, _colorStr).length === 4) {\r\n            red = parseInt(__classPrivateFieldGet(this, _colorStr)[1] + __classPrivateFieldGet(this, _colorStr)[1], 16);\r\n            green = parseInt(__classPrivateFieldGet(this, _colorStr)[2] + __classPrivateFieldGet(this, _colorStr)[2], 16);\r\n            blue = parseInt(__classPrivateFieldGet(this, _colorStr)[3] + __classPrivateFieldGet(this, _colorStr)[3], 16);\r\n        }\r\n        else {\r\n            red = parseInt(__classPrivateFieldGet(this, _colorStr)[1] + __classPrivateFieldGet(this, _colorStr)[2], 16);\r\n            green = parseInt(__classPrivateFieldGet(this, _colorStr)[3] + __classPrivateFieldGet(this, _colorStr)[4], 16);\r\n            blue = parseInt(__classPrivateFieldGet(this, _colorStr)[5] + __classPrivateFieldGet(this, _colorStr)[6], 16);\r\n            if (length > 7) {\r\n                let alphaHex = parseInt(__classPrivateFieldGet(this, _colorStr)[7] + __classPrivateFieldGet(this, _colorStr)[8], 16);\r\n                alpha = parseFloat((alphaHex / 255).toFixed(2));\r\n            }\r\n        }\r\n        return new CuiColor(red, green, blue, alpha);\r\n    }\r\n}\r\n_colorStr = new WeakMap();\r\nexport class RgbColorParser {\r\n    constructor(colorStr) {\r\n        _colorStr_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _colorStr_1, colorStr);\r\n    }\r\n    trim() {\r\n        __classPrivateFieldSet(this, _colorStr_1, is(__classPrivateFieldGet(this, _colorStr_1)) ? __classPrivateFieldGet(this, _colorStr_1).trim() : \"\");\r\n    }\r\n    isValid() {\r\n        return is(__classPrivateFieldGet(this, _colorStr_1)) && __classPrivateFieldGet(this, _colorStr_1).startsWith(\"rgb\");\r\n    }\r\n    parse() {\r\n        let len = __classPrivateFieldGet(this, _colorStr_1).length;\r\n        let str = __classPrivateFieldGet(this, _colorStr_1).startsWith(\"rgba\") ? __classPrivateFieldGet(this, _colorStr_1).substring(5, len - 1) : __classPrivateFieldGet(this, _colorStr_1).substring(4, len - 1);\r\n        let split = str.split(\",\");\r\n        if (!isInRange(split.length, 3, 4)) {\r\n            return undefined;\r\n        }\r\n        let red = parseInt(split[0]);\r\n        let green = parseInt(split[1]);\r\n        let blue = parseInt(split[2]);\r\n        let alpha = split.length === 4 ? parseFloat(split[3]) : 1;\r\n        return new CuiColor(red, green, blue, alpha);\r\n    }\r\n}\r\n_colorStr_1 = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _set, _setter, _setter_1, _set_1;\r\nimport { CSS_VARIABLES } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst baseColorSets = {\r\n    \"light\": {\r\n        background: CSS_VARIABLES.colorLightBackground,\r\n        base: CSS_VARIABLES.colorLightBase,\r\n        active: CSS_VARIABLES.colorLightActive,\r\n        muted: CSS_VARIABLES.colorLightMuted,\r\n    },\r\n    \"dark\": {\r\n        background: CSS_VARIABLES.colorDarkBackground,\r\n        base: CSS_VARIABLES.colorDarkBase,\r\n        active: CSS_VARIABLES.colorDarkActive,\r\n        muted: CSS_VARIABLES.colorDarkMuted,\r\n    }\r\n};\r\nconst themeColors = {\r\n    'accent': {\r\n        base: CSS_VARIABLES.colorAccent,\r\n        muted: CSS_VARIABLES.colorAccentMuted,\r\n        active: CSS_VARIABLES.colorAccentActive,\r\n        shade: CSS_VARIABLES.colorAccentShade,\r\n        shadeDark: CSS_VARIABLES.colorAccentShadeDark\r\n    },\r\n    'secondary': {\r\n        base: CSS_VARIABLES.colorSecondary,\r\n        muted: CSS_VARIABLES.colorSecondaryMuted,\r\n        active: CSS_VARIABLES.colorSecondaryActive,\r\n        shade: CSS_VARIABLES.colorSecondaryShade,\r\n        shadeDark: CSS_VARIABLES.colorSecondaryShadeDark\r\n    },\r\n    'error': {\r\n        base: CSS_VARIABLES.colorError,\r\n        muted: CSS_VARIABLES.colorErrorMuted,\r\n        active: CSS_VARIABLES.colorErrorActive,\r\n        shade: CSS_VARIABLES.colorErrorShade,\r\n        shadeDark: CSS_VARIABLES.colorErrorShadeDark\r\n    },\r\n    'warning': {\r\n        base: CSS_VARIABLES.colorWarning,\r\n        muted: CSS_VARIABLES.colorWarningMuted,\r\n        active: CSS_VARIABLES.colorWarningActive,\r\n        shade: CSS_VARIABLES.colorWarningShade,\r\n        shadeDark: CSS_VARIABLES.colorWarningShadeDark\r\n    },\r\n    'success': {\r\n        base: CSS_VARIABLES.colorSuccess,\r\n        muted: CSS_VARIABLES.colorSuccessMuted,\r\n        active: CSS_VARIABLES.colorSuccessActive,\r\n        shade: CSS_VARIABLES.colorSuccessShade,\r\n        shadeDark: CSS_VARIABLES.colorSuccessShadeDark\r\n    }\r\n};\r\nexport class CuiBaseColorsSetter {\r\n    constructor(colorSet, setter) {\r\n        _set.set(this, void 0);\r\n        _setter.set(this, void 0);\r\n        __classPrivateFieldSet(this, _set, baseColorSets[colorSet]);\r\n        __classPrivateFieldSet(this, _setter, setter);\r\n    }\r\n    setBackgroundColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set).background, color);\r\n    }\r\n    setBaseColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set).base, color);\r\n    }\r\n    setActiveColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set).active, color);\r\n    }\r\n    setMutedColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set).muted, color);\r\n    }\r\n    setBaseColors(colors) {\r\n        if (!__classPrivateFieldGet(this, _set)) {\r\n            return;\r\n        }\r\n        let set = {};\r\n        set[__classPrivateFieldGet(this, _set).background] = colors.background ? colors.background.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set).active] = colors.active ? colors.active.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set).muted] = colors.muted ? colors.muted.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set).base] = colors.base ? colors.base.toCssString() : \"\";\r\n        __classPrivateFieldGet(this, _setter).setProperties(set);\r\n    }\r\n    setColor(color, value) {\r\n        __classPrivateFieldGet(this, _setter).setProperty(color, value.toCssString());\r\n    }\r\n}\r\n_set = new WeakMap(), _setter = new WeakMap();\r\nexport class CuiThemeColorsSetter {\r\n    constructor(set, setter) {\r\n        _setter_1.set(this, void 0);\r\n        _set_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _setter_1, setter);\r\n        __classPrivateFieldSet(this, _set_1, themeColors[set]);\r\n    }\r\n    setBaseColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set_1).base, color);\r\n    }\r\n    setMutedColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set_1).muted, color);\r\n    }\r\n    setActiveColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set_1).active, color);\r\n    }\r\n    setShadeColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set_1).shade, color);\r\n    }\r\n    setShadeDarkColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set_1).shadeDark, color);\r\n    }\r\n    setColors(colors) {\r\n        if (!__classPrivateFieldGet(this, _set_1)) {\r\n            return;\r\n        }\r\n        let set = {};\r\n        set[__classPrivateFieldGet(this, _set_1).shade] = colors.shade ? colors.shade.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set_1).shadeDark] = colors.shadeDark ? colors.shadeDark.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set_1).active] = colors.active ? colors.active.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set_1).muted] = colors.muted ? colors.muted.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set_1).base] = colors.base ? colors.base.toCssString() : \"\";\r\n        __classPrivateFieldGet(this, _setter_1).setProperties(set);\r\n    }\r\n    setAutoColors(base) {\r\n        let set = {};\r\n        set[__classPrivateFieldGet(this, _set_1).base] = base.toCssString();\r\n        set[__classPrivateFieldGet(this, _set_1).shade] = base.lighten(30).toCssString();\r\n        set[__classPrivateFieldGet(this, _set_1).shadeDark] = base.darken(30).toCssString();\r\n        set[__classPrivateFieldGet(this, _set_1).active] = base.darken(10).toCssString();\r\n        set[__classPrivateFieldGet(this, _set_1).muted] = base.lighten(10).toCssString();\r\n        __classPrivateFieldGet(this, _setter_1).setProperties(set);\r\n    }\r\n    setColor(color, value) {\r\n        __classPrivateFieldGet(this, _setter_1).setProperty(color, value.toCssString());\r\n    }\r\n}\r\n_setter_1 = new WeakMap(), _set_1 = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _utils;\r\nimport { are, is } from \"cui-light-core/dist/esm/utils/functions\";\r\nexport class PropertySetter {\r\n    constructor(utils) {\r\n        _utils.set(this, void 0);\r\n        __classPrivateFieldSet(this, _utils, utils);\r\n    }\r\n    setProperty(property, value) {\r\n        if (!are(property, value)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _utils).interactions.mutate(() => {\r\n            __classPrivateFieldGet(this, _utils).setProperty(property, value);\r\n        }, null);\r\n    }\r\n    setProperties(set) {\r\n        if (!is(set)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _utils).interactions.mutate(() => {\r\n            for (let property in set) {\r\n                if (is(set[property]))\r\n                    __classPrivateFieldGet(this, _utils).setProperty(property, set[property]);\r\n            }\r\n        }, null);\r\n    }\r\n}\r\n_utils = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _setter;\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CSS_VARIABLES } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { CuiBaseColorsSetter, CuiThemeColorsSetter } from \"./colors\";\r\nimport { PropertySetter } from \"./setter\";\r\nexport class CuiPropertiesHandler {\r\n    constructor(utils) {\r\n        _setter.set(this, void 0);\r\n        __classPrivateFieldSet(this, _setter, new PropertySetter(utils));\r\n    }\r\n    /**\r\n     * Sets main font size\r\n     * @param {number} value numeric value\r\n     * @param {string} unit optional - size unit, px if not provided\r\n     */\r\n    setBaseFontSize(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.fontSize, value, unit);\r\n    }\r\n    /**\r\n     * Sets base animation time\r\n     * @param {number} value - time value\r\n     * @param {string} unit  - optional - ms is passed when no provided\r\n     */\r\n    setAnimationTime(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.animationTime, value, unit !== null && unit !== void 0 ? unit : 'ms');\r\n    }\r\n    /**\r\n    * Sets long animation time\r\n    * @param {number} value - time value\r\n    * @param {string} unit  - optional - ms is passed when no provided\r\n    */\r\n    setAnimationTimeLong(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.setAnimationTimeLong, value, unit !== null && unit !== void 0 ? unit : 'ms');\r\n    }\r\n    /**\r\n    * Sets short animation time\r\n    * @param {number} value - time value\r\n    * @param {string} unit  - optional - ms is passed when no provided\r\n    */\r\n    setAnimationTimeShort(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.setAnimationTimeShort, value, unit !== null && unit !== void 0 ? unit : 'ms');\r\n    }\r\n    /**\r\n    * Sets main line size\r\n    * @param {number} value numeric value\r\n    * @param {string} unit optional - size unit, px if not provided\r\n    */\r\n    setBaseLineHeight(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.lineHeight, value, unit);\r\n    }\r\n    /**\r\n     * Sets base margin value\r\n     * @param {number} value - margin value\r\n     * @param {string} unit - optional - margin unit (px default)\r\n     */\r\n    setBaseMargin(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.margin, value, unit);\r\n    }\r\n    /**\r\n    * Sets base padding value\r\n    * @param {number} value - padding value\r\n    * @param {string} unit - optional - padding unit (px default)\r\n    */\r\n    setBasePadding(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.padding, value, unit);\r\n    }\r\n    /**\r\n    * Sets base border radius\r\n    * @param {number} value - border value\r\n    * @param {string} unit - optional - border unit (px default)\r\n    */\r\n    setBaseBorderRadius(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.borderRadius, value, unit);\r\n    }\r\n    /**\r\n   * Sets component space\r\n   * @param {number} value - space value\r\n   * @param {string} unit - optional - space unit (px default)\r\n   */\r\n    setComponentSpace(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.componentSpace, value, unit);\r\n    }\r\n    /**\r\n     * Sets new accordion chevron icon\r\n     * @param value A SVG formatted to be replaced default value\r\n     */\r\n    setAccordionIcon(value) {\r\n        if (!is(value)) {\r\n            return;\r\n        }\r\n        this.setCSSVariable(CSS_VARIABLES.accordionIcon, value);\r\n    }\r\n    /**\r\n    * Sets a scrollbar width\r\n    * @param value A SVG formatted to be replaced default value\r\n    */\r\n    setScrollbarWidth(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.scrollbarWidth, value, unit);\r\n    }\r\n    /**\r\n     * Sets app viewport light background color\r\n     * @param color color to be set\r\n     */\r\n    setAppBackgroundColor(color) {\r\n        if (!is(color)) {\r\n            return;\r\n        }\r\n        this.setCSSVariable(CSS_VARIABLES.colorLightAppBackground, color.toCssString());\r\n    }\r\n    /**\r\n    * Sets app viewport dark background color\r\n    * @param color color to be set\r\n    */\r\n    setDarkAppBackgroundColor(color) {\r\n        if (!is(color)) {\r\n            return;\r\n        }\r\n        this.setCSSVariable(CSS_VARIABLES.colorDarkAppBackground, color.toCssString());\r\n    }\r\n    getBaseColorsSetter() {\r\n        return new CuiBaseColorsSetter(\"light\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    getDarkBaseColorsSetter() {\r\n        return new CuiBaseColorsSetter(\"dark\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    getAccentThemeColorsSetter() {\r\n        return new CuiThemeColorsSetter(\"accent\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    getSecondaryThemeColorsSetter() {\r\n        return new CuiThemeColorsSetter(\"secondary\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    getErrorThemeColorsSetter() {\r\n        return new CuiThemeColorsSetter(\"error\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    getWarningThemeColorsSetter() {\r\n        return new CuiThemeColorsSetter(\"warning\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    getSuccessThemeColorsSetter() {\r\n        return new CuiThemeColorsSetter(\"success\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    /**\r\n     * Sets property in interactive way\r\n     * @param {string} name property name - value of {prefix} is replaced by current prefix\r\n     * @param {string} value - property value\r\n     */\r\n    setCSSVariable(name, value) {\r\n        __classPrivateFieldGet(this, _setter).setProperty(name, value);\r\n    }\r\n    /**\r\n     * Sets unit type CSS variable property\r\n     * @param name Variable name\r\n     * @param value numeric value\r\n     * @param unit unit - optional - px is default value\r\n     */\r\n    setBaseUnitValue(name, value, unit) {\r\n        if (!is(value)) {\r\n            return;\r\n        }\r\n        let strVal = `${value}${unit !== null && unit !== void 0 ? unit : \"px\"}`;\r\n        this.setCSSVariable(name, strVal);\r\n    }\r\n}\r\n_setter = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _log;\r\nimport { CuiColor } from \"cui-light-core/dist/esm/models/colors\";\r\nimport { CuiLoggerFactory } from \"cui-light-core/dist/esm/factories/logger\";\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiPropertiesHandler } from \"./handler\";\r\nexport class CuiCSSVariablesPlugin {\r\n    constructor(keySetup) {\r\n        this.name = 'css-variables-plugin';\r\n        _log.set(this, void 0);\r\n        this.description = \"CuiCSSVariablesPlugin\";\r\n        this.setup = keySetup;\r\n        __classPrivateFieldSet(this, _log, CuiLoggerFactory.get(\"CuiCSSVariablesPlugin\"));\r\n        this.handler = undefined;\r\n    }\r\n    init(utils) {\r\n        this.handler = new CuiPropertiesHandler(utils);\r\n        utils.bus.on(\"csschange\", this.onCssChange.bind(this));\r\n    }\r\n    destroy() {\r\n    }\r\n    onCssChange(event) {\r\n        if (!this.handler) {\r\n            return;\r\n        }\r\n        let setter = null;\r\n        let accentSetter = null;\r\n        switch (event.method) {\r\n            case \"baseFontSize\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setBaseFontSize(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"baseLineHeight\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setBaseLineHeight(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"animationTime\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setAnimationTime(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"animationTimeLong\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setAnimationTimeLong(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"animationTimeShort\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setAnimationTimeShort(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"margin\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setBaseMargin(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"padding\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setBasePadding(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"borderRadius\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setBaseBorderRadius(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"componentSpace\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setComponentSpace(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"scrollbarWidth\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setScrollbarWidth(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"accordionIcon\":\r\n                if (!is(event.arg))\r\n                    return;\r\n                this.handler.setAccordionIcon(event.arg);\r\n                break;\r\n            case \"appLightBackground\":\r\n                if (!is(event.arg))\r\n                    return;\r\n                this.handler.setAppBackgroundColor(CuiColor.create(event.arg));\r\n                break;\r\n            case \"appDarkBackground\":\r\n                if (!is(event.arg))\r\n                    return;\r\n                this.handler.setDarkAppBackgroundColor(CuiColor.create(event.arg));\r\n                break;\r\n            case \"appDarkBackground\":\r\n                if (!is(event.arg))\r\n                    return;\r\n                this.handler.setDarkAppBackgroundColor(CuiColor.create(event.arg));\r\n                break;\r\n            case \"mainColorBackground\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                setter = this.getBaseColorSetter(event.arg.palette);\r\n                if (setter)\r\n                    setter.setBackgroundColor(CuiColor.create(event.arg.color));\r\n                break;\r\n            case \"mainColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                setter = this.getBaseColorSetter(event.arg.palette);\r\n                if (setter)\r\n                    setter.setBaseColor(CuiColor.create(event.arg.color));\r\n                break;\r\n            case \"mainColorMuted\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                setter = this.getBaseColorSetter(event.arg.palette);\r\n                if (setter)\r\n                    setter.setMutedColor(CuiColor.create(event.arg.color));\r\n                break;\r\n            case \"mainColorActive\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                setter = this.getBaseColorSetter(event.arg.palette);\r\n                if (setter)\r\n                    setter.setActiveColor(CuiColor.create(event.arg.color));\r\n                break;\r\n            case \"themeAutoColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setAutoColors(CuiColor.create(event.arg.color));\r\n            case \"themeBaseColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setAutoColors(CuiColor.create(event.arg.color));\r\n            case \"themeMutedColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setMutedColor(CuiColor.create(event.arg.color));\r\n            case \"themeActiveColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setActiveColor(CuiColor.create(event.arg.color));\r\n            case \"themeShadeColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setShadeColor(CuiColor.create(event.arg.color));\r\n            case \"themeShadeDarkColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setShadeDarkColor(CuiColor.create(event.arg.color));\r\n            default:\r\n                __classPrivateFieldGet(this, _log).warning(\"Unknown event method\", \"onCssChange\");\r\n        }\r\n    }\r\n    isArgNumber(arg) {\r\n        return is(arg) && is(arg.value);\r\n    }\r\n    isArgColor(arg) {\r\n        return is(arg) && is(arg.palette) && is(arg.color);\r\n    }\r\n    getBaseColorSetter(pallete) {\r\n        if (!this.handler) {\r\n            return undefined;\r\n        }\r\n        let prerp = pallete.trim().toLowerCase();\r\n        switch (prerp) {\r\n            case \"light\":\r\n                return this.handler.getBaseColorsSetter();\r\n            case \"dark\":\r\n                return this.handler.getDarkBaseColorsSetter();\r\n        }\r\n    }\r\n    getAccentColorSetter(pallete) {\r\n        if (!this.handler) {\r\n            return undefined;\r\n        }\r\n        let prerp = pallete.trim().toLowerCase();\r\n        switch (prerp) {\r\n            case \"accent\":\r\n                return this.handler.getAccentThemeColorsSetter();\r\n            case \"secondary\":\r\n                return this.handler.getSecondaryThemeColorsSetter();\r\n            case \"error\":\r\n                return this.handler.getErrorThemeColorsSetter();\r\n            case \"warning\":\r\n                return this.handler.getWarningThemeColorsSetter();\r\n            case \"success\":\r\n                return this.handler.getSuccessThemeColorsSetter();\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n}\r\n_log = new WeakMap();\r\n","import { CuiWindowClickPlugin } from \"./click/click\";\r\nimport { CuiKeysObserverPlugin } from \"./keys/keys\";\r\nimport { CuiAutoLightModePlugin } from \"./light/light\";\r\nimport { CuiAutoPrintModePlugin } from \"./print/print\";\r\nimport { CuiCSSVariablesPlugin } from \"./properties/properties\";\r\nexport function GetPlugins(init) {\r\n    let light = init ? init.autoLight : true;\r\n    let print = init ? init.autoPrint : true;\r\n    return [\r\n        new CuiAutoLightModePlugin({ autoLight: light }),\r\n        new CuiAutoPrintModePlugin({ autoPrint: print }),\r\n        new CuiKeysObserverPlugin({}),\r\n        new CuiWindowClickPlugin(),\r\n        new CuiCSSVariablesPlugin({})\r\n    ];\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _writes, _reads, _raf, _isScheduled, _limit, _reportCallback;\r\nexport class FastDom {\r\n    constructor() {\r\n        _writes.set(this, void 0);\r\n        _reads.set(this, void 0);\r\n        _raf.set(this, void 0);\r\n        _isScheduled.set(this, false);\r\n        _limit.set(this, void 0);\r\n        _reportCallback.set(this, void 0);\r\n        __classPrivateFieldSet(this, _raf, window.requestAnimationFrame.bind(window));\r\n        __classPrivateFieldSet(this, _writes, []);\r\n        __classPrivateFieldSet(this, _reads, []);\r\n        __classPrivateFieldSet(this, _limit, 5);\r\n        __classPrivateFieldSet(this, _reportCallback, undefined);\r\n    }\r\n    onError(callback) {\r\n        __classPrivateFieldSet(this, _reportCallback, callback);\r\n    }\r\n    mutate(callback, ctx, ...args) {\r\n        __classPrivateFieldGet(this, _reads).push(this.createTask(callback, ctx, ...args));\r\n        this.schedule();\r\n    }\r\n    fetch(callback, ctx, ...args) {\r\n        __classPrivateFieldGet(this, _writes).push(this.createTask(callback, ctx, ...args));\r\n        this.schedule();\r\n    }\r\n    createTask(callback, ctx, ...args) {\r\n        return ctx || args ? callback.bind(ctx, ...args) : callback;\r\n    }\r\n    run(tasks) {\r\n        let task = null;\r\n        while (task = tasks.shift()) {\r\n            task();\r\n        }\r\n    }\r\n    schedule(recursion) {\r\n        if (!__classPrivateFieldGet(this, _isScheduled)) {\r\n            __classPrivateFieldSet(this, _isScheduled, true);\r\n            if (recursion && recursion >= __classPrivateFieldGet(this, _limit)) {\r\n                throw new Error(\"Fast Dom limit reached\");\r\n            }\r\n            else {\r\n                __classPrivateFieldGet(this, _raf).call(this, this.flush.bind(this, recursion));\r\n            }\r\n        }\r\n    }\r\n    flush(recursion) {\r\n        let rec = recursion !== null && recursion !== void 0 ? recursion : 0;\r\n        let error = null;\r\n        let writes = __classPrivateFieldGet(this, _writes);\r\n        let reads = __classPrivateFieldGet(this, _reads);\r\n        try {\r\n            this.run(reads);\r\n            this.run(writes);\r\n        }\r\n        catch (e) {\r\n            if (__classPrivateFieldGet(this, _reportCallback)) {\r\n                __classPrivateFieldGet(this, _reportCallback).call(this, e);\r\n            }\r\n            else {\r\n                console.error(`An error has been captured in interactions: ${e.message}`);\r\n                //console.error(e)\r\n            }\r\n            error = e;\r\n        }\r\n        __classPrivateFieldSet(this, _isScheduled, false);\r\n        if (error || __classPrivateFieldGet(this, _writes).length || __classPrivateFieldGet(this, _reads).length) {\r\n            this.schedule(rec + 1);\r\n        }\r\n    }\r\n}\r\n_writes = new WeakMap(), _reads = new WeakMap(), _raf = new WeakMap(), _isScheduled = new WeakMap(), _limit = new WeakMap(), _reportCallback = new WeakMap();\r\nexport class SyncInteractions {\r\n    constructor() {\r\n        this.isRunning = false;\r\n        this.tasks = [];\r\n        this.raf = window.requestAnimationFrame.bind(window);\r\n    }\r\n    mutate(callback, ctx, ...args) {\r\n        this.tasks.push(this.createTask(callback, ctx, ...args));\r\n        this.schedule();\r\n    }\r\n    fetch(callback, ctx, ...args) {\r\n        this.tasks.push(this.createTask(callback, ctx, ...args));\r\n        this.schedule();\r\n    }\r\n    schedule() {\r\n        if (!this.isRunning) {\r\n            this.isRunning = true;\r\n            this.raf(this.flush.bind(this));\r\n        }\r\n    }\r\n    flush() {\r\n        let task = null;\r\n        while (task = this.tasks.shift()) {\r\n            try {\r\n                task();\r\n            }\r\n            catch (e) {\r\n            }\r\n        }\r\n        this.isRunning = false;\r\n    }\r\n    createTask(callback, ctx, ...args) {\r\n        return ctx || args ? callback.bind(ctx, ...args) : callback;\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _keys, _values;\r\nimport { ItemNotFoundError, ArgumentError } from \"../models/errors\";\r\nimport { is } from \"./functions\";\r\nexport class CuiDictionary {\r\n    constructor(init) {\r\n        _keys.set(this, void 0);\r\n        _values.set(this, void 0);\r\n        __classPrivateFieldSet(this, _keys, []);\r\n        __classPrivateFieldSet(this, _values, []);\r\n        if (init) {\r\n            init.forEach(x => {\r\n                if (!is(x.key)) {\r\n                    __classPrivateFieldSet(this, _keys, []);\r\n                    __classPrivateFieldSet(this, _values, []);\r\n                    throw new ArgumentError(\"Key is empty\");\r\n                }\r\n                this.add(x.key, x.value);\r\n            });\r\n        }\r\n    }\r\n    add(key, value) {\r\n        this.throwOnEmptyKey(key);\r\n        if (this.containsKey(key))\r\n            throw new Error(\"Key already exists\");\r\n        __classPrivateFieldGet(this, _keys).push(key);\r\n        __classPrivateFieldGet(this, _values).push(value);\r\n    }\r\n    remove(key) {\r\n        if (!is(key)) {\r\n            return;\r\n        }\r\n        let index = __classPrivateFieldGet(this, _keys).indexOf(key);\r\n        if (index >= 0) {\r\n            __classPrivateFieldGet(this, _keys).splice(index, 1);\r\n            __classPrivateFieldGet(this, _values).splice(index, 1);\r\n        }\r\n    }\r\n    get(key) {\r\n        this.throwOnEmptyKey(key);\r\n        let index = this.indexOf(key);\r\n        if (index < 0) {\r\n            return undefined;\r\n        }\r\n        return __classPrivateFieldGet(this, _values)[index];\r\n    }\r\n    containsKey(key) {\r\n        return is(key) && this.indexOf(key) >= 0;\r\n    }\r\n    keys() {\r\n        return __classPrivateFieldGet(this, _keys);\r\n    }\r\n    values() {\r\n        return __classPrivateFieldGet(this, _values);\r\n    }\r\n    indexOf(key) {\r\n        return is(key) ? __classPrivateFieldGet(this, _keys).indexOf(key) : -1;\r\n    }\r\n    update(key, value) {\r\n        this.throwOnEmptyKey(key);\r\n        let index = this.indexOf(key);\r\n        if (index < 0) {\r\n            throw new ItemNotFoundError(`Item with key [${key}] not found`);\r\n        }\r\n        __classPrivateFieldGet(this, _values)[index] = value;\r\n    }\r\n    clear() {\r\n        __classPrivateFieldSet(this, _values, []);\r\n        __classPrivateFieldSet(this, _keys, []);\r\n    }\r\n    throwOnEmptyKey(key) {\r\n        if (!is(key)) {\r\n            throw new ArgumentError(\"Key is empty\");\r\n        }\r\n    }\r\n}\r\n_keys = new WeakMap(), _values = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _cache, _maxSize;\r\nimport { CuiDictionary } from \"../utils/dictionary\";\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiCacheManager {\r\n    constructor(maxSize) {\r\n        _cache.set(this, void 0);\r\n        _maxSize.set(this, void 0);\r\n        __classPrivateFieldSet(this, _cache, new CuiDictionary());\r\n        __classPrivateFieldSet(this, _maxSize, maxSize !== null && maxSize !== void 0 ? maxSize : 500);\r\n    }\r\n    put(key, element) {\r\n        if (!is(key))\r\n            return;\r\n        if (this.has(key)) {\r\n            __classPrivateFieldGet(this, _cache).update(key, element);\r\n            return;\r\n        }\r\n        this.clean();\r\n        __classPrivateFieldGet(this, _cache).add(key, element);\r\n    }\r\n    get(key) {\r\n        if (!this.has(key))\r\n            return undefined;\r\n        let item = __classPrivateFieldGet(this, _cache).get(key);\r\n        if (item && item.refresh()) {\r\n            return item;\r\n        }\r\n        __classPrivateFieldGet(this, _cache).remove(key);\r\n        return undefined;\r\n    }\r\n    has(key) {\r\n        return is(key) ? __classPrivateFieldGet(this, _cache).containsKey(key) : false;\r\n    }\r\n    remove(key) {\r\n        if (!is(key))\r\n            return false;\r\n        if (this.has(key)) {\r\n            __classPrivateFieldGet(this, _cache).remove(key);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    clear() {\r\n        __classPrivateFieldGet(this, _cache).clear();\r\n    }\r\n    clean() {\r\n        if (__classPrivateFieldGet(this, _cache).keys().length >= __classPrivateFieldGet(this, _maxSize)) {\r\n            __classPrivateFieldGet(this, _cache).remove(__classPrivateFieldGet(this, _cache).keys()[0]);\r\n        }\r\n    }\r\n}\r\n_cache = new WeakMap(), _maxSize = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _log, _executor, _executor_1;\r\nimport { is } from \"../utils/functions\";\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\nclass EmitHandlerBase {\r\n    constructor() {\r\n        this.queue = [];\r\n        this.isBusy = false;\r\n    }\r\n    idMatches(emitId, handleId) {\r\n        return !is(emitId) || (is(emitId) && emitId == handleId);\r\n    }\r\n}\r\nexport class SimpleEventEmitHandler extends EmitHandlerBase {\r\n    constructor(executor) {\r\n        super();\r\n        _log.set(this, void 0);\r\n        _executor.set(this, void 0);\r\n        __classPrivateFieldSet(this, _executor, executor);\r\n        __classPrivateFieldSet(this, _log, CuiLoggerFactory.get(\"SimpleEventEmitHandler\"));\r\n    }\r\n    handle(events, cuid, args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(events)) {\r\n                __classPrivateFieldGet(this, _log).warning(\"No events provided\");\r\n                return;\r\n            }\r\n            this.queue.push({\r\n                events: events,\r\n                cuid: cuid,\r\n                args: args\r\n            });\r\n            if (!this.isBusy) {\r\n                if (!this.isBusy) {\r\n                    this.isBusy = true;\r\n                    this.perform();\r\n                    if (this.queue.length > 0) {\r\n                        yield this.perform();\r\n                    }\r\n                    this.isBusy = false;\r\n                }\r\n            }\r\n            return;\r\n        });\r\n    }\r\n    perform() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let task = this.queue.shift();\r\n            if (!task) {\r\n                return;\r\n            }\r\n            for (let id in task.events) {\r\n                let event = task.events[id];\r\n                try {\r\n                    if (this.idMatches(task.cuid, event.$cuid))\r\n                        yield __classPrivateFieldGet(this, _executor).execute(event.callback, task.args);\r\n                }\r\n                catch (e) {\r\n                    __classPrivateFieldGet(this, _log).error(e);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n_log = new WeakMap(), _executor = new WeakMap();\r\nexport class TaskedEventEmitHandler extends EmitHandlerBase {\r\n    constructor(executor) {\r\n        super();\r\n        _executor_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _executor_1, executor);\r\n    }\r\n    handle(events, cuid, args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(events)) {\r\n                return;\r\n            }\r\n            this.queue.push({\r\n                events: events,\r\n                cuid: cuid,\r\n                args: args\r\n            });\r\n            if (!this.isBusy) {\r\n                this.isBusy = true;\r\n                this.perform();\r\n                if (this.queue.length > 0) {\r\n                    this.perform();\r\n                }\r\n                this.isBusy = false;\r\n            }\r\n            return;\r\n        });\r\n    }\r\n    perform() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let task = this.queue.shift();\r\n            let promises = [];\r\n            if (!task) {\r\n                return Promise.all(promises);\r\n            }\r\n            for (let id in task.events) {\r\n                let event = task.events[id];\r\n                if (this.idMatches(task.cuid, event.$cuid))\r\n                    promises.push(__classPrivateFieldGet(this, _executor_1).execute(event.callback, task.args));\r\n            }\r\n            return Promise.all(promises);\r\n        });\r\n    }\r\n}\r\n_executor_1 = new WeakMap();\r\nexport class CuiEventEmitHandlerFactory {\r\n    static get(name, executor) {\r\n        switch (name) {\r\n            case \"tasked\":\r\n                return new TaskedEventEmitHandler(executor);\r\n            default:\r\n                return new SimpleEventEmitHandler(executor);\r\n        }\r\n    }\r\n}\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nexport class CuiCallbackExecutor {\r\n    execute(callback, args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            args = args !== null && args !== void 0 ? args : [];\r\n            callback(...args);\r\n            return;\r\n        });\r\n    }\r\n}\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _events, _log, _eventHandler, _name, _events_1, _log_1, _buses, _last, _isOn, _statistics;\r\nimport { is, are, generateRandomString, enumerateObject } from \"../utils/functions\";\r\nimport { ArgumentError } from \"../models/errors\";\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\nimport { CuiEventEmitHandlerFactory, TaskedEventEmitHandler } from \"./handlers\";\r\nimport { CuiCallbackExecutor } from \"./executors\";\r\nexport class CuiEventBus {\r\n    constructor(emitHandler, name) {\r\n        _events.set(this, void 0);\r\n        _log.set(this, void 0);\r\n        _eventHandler.set(this, void 0);\r\n        _name.set(this, void 0);\r\n        __classPrivateFieldSet(this, _events, {});\r\n        __classPrivateFieldSet(this, _eventHandler, emitHandler);\r\n        __classPrivateFieldSet(this, _name, name !== null && name !== void 0 ? name : \"CuiEventBus\");\r\n        __classPrivateFieldSet(this, _log, CuiLoggerFactory.get(__classPrivateFieldGet(this, _name)));\r\n    }\r\n    /**\r\n     * Attaches event to event bus\r\n     *\r\n     * @param {string} name - Event name\r\n     * @param {any} callback - callback function\r\n     * @param {CuiContext} ctx - callback context with id\r\n     * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n     */\r\n    on(name, callback, cui) {\r\n        if (!are(name, callback)) {\r\n            throw new ArgumentError(\"Missing argument\");\r\n        }\r\n        // When context is not provided (e.g. anonymous function) then generate random\r\n        let id = __classPrivateFieldGet(this, _name) + \"-\" + generateRandomString();\r\n        if (!__classPrivateFieldGet(this, _events)[name]) {\r\n            __classPrivateFieldGet(this, _events)[name] = {};\r\n        }\r\n        if (this.isAttached(__classPrivateFieldGet(this, _events)[name], id, cui)) {\r\n            return null;\r\n        }\r\n        __classPrivateFieldGet(this, _log).debug(`Attaching new event: [${name}] for: [${id}]`);\r\n        __classPrivateFieldGet(this, _events)[name][id] = { callback: callback, $cuid: this.getCuid(cui) };\r\n        return id;\r\n    }\r\n    /**\r\n    * Detaches specific event from event bus\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {CuiContext} ctx - callback context with id\r\n    * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n    */\r\n    detach(name, id) {\r\n        if (!are(name, id)) {\r\n            throw new ArgumentError(\"Missing argument\");\r\n        }\r\n        let ev = __classPrivateFieldGet(this, _events)[name];\r\n        __classPrivateFieldGet(this, _log).debug(`Detaching item: [${id}] from [${name}]`);\r\n        if (this.isAttached(ev, id)) {\r\n            delete ev[id];\r\n        }\r\n    }\r\n    /**\r\n    * Detaches all callbacks from event\r\n    *\r\n    * @param {string} name - Event name\r\n    */\r\n    detachAll(name) {\r\n        if (is(name) && __classPrivateFieldGet(this, _events)[name]) {\r\n            delete __classPrivateFieldGet(this, _events)[name];\r\n        }\r\n        else {\r\n            __classPrivateFieldGet(this, _log).error(`Event name is missing or incorrect`, \"detachAll\");\r\n        }\r\n    }\r\n    /**\r\n    * Emits event call to event bus\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {string} cuid - id of component which emits the event\r\n    * @param {any[]} args  - event arguments\r\n    */\r\n    emit(event, cuid, ...args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(event)) {\r\n                throw new ArgumentError(\"Event name is incorrect\");\r\n            }\r\n            let callbacks = __classPrivateFieldGet(this, _events)[event];\r\n            if (is(callbacks)) {\r\n                __classPrivateFieldGet(this, _log).debug(`Emit: [${event}]`);\r\n                yield __classPrivateFieldGet(this, _eventHandler).handle(__classPrivateFieldGet(this, _events)[event], cuid, args);\r\n            }\r\n            return true;\r\n        });\r\n    }\r\n    /**\r\n    * Checks whether given context is already attached to specific event\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {CuiContext} ctx - callback context with id\r\n    * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n    */\r\n    isSubscribing(name, id, cui) {\r\n        let ev = __classPrivateFieldGet(this, _events)[name];\r\n        return this.isAttached(ev, id, cui);\r\n    }\r\n    /**\r\n     * Detaches callbacks by component cuid - this is used to clean up attachments on component deletion\r\n     * @param {string} event - event name\r\n     * @param {string} cuid - cuid of the component\r\n     */\r\n    detachByCuid(event, cuid) {\r\n        if (!are(event, cuid)) {\r\n            return;\r\n        }\r\n        let ev = __classPrivateFieldGet(this, _events)[event];\r\n        if (!is(ev)) {\r\n            return;\r\n        }\r\n        enumerateObject(Object.assign({}, ev), (evId, evValue) => {\r\n            if (evValue.$cuid === cuid) {\r\n                delete ev[evId];\r\n            }\r\n        });\r\n    }\r\n    isAttached(ev, id, cui) {\r\n        if (is(cui)) {\r\n            // @ts-ignore\r\n            return is(ev) && is(id) && is(ev[id]) && ev[id].$cuid == cui.$cuid;\r\n        }\r\n        return is(ev) && is(id) && is(ev[id]);\r\n    }\r\n    getCuid(cui) {\r\n        // @ts-ignore\r\n        return is(cui) ? cui.$cuid : null;\r\n    }\r\n}\r\n_events = new WeakMap(), _log = new WeakMap(), _eventHandler = new WeakMap(), _name = new WeakMap();\r\nexport class CuiEventExtBus {\r\n    constructor(setup) {\r\n        _events_1.set(this, void 0);\r\n        _log_1.set(this, void 0);\r\n        _buses.set(this, void 0);\r\n        _last.set(this, void 0);\r\n        __classPrivateFieldSet(this, _log_1, CuiLoggerFactory.get(\"CuiEventBus\"));\r\n        __classPrivateFieldSet(this, _buses, []);\r\n        __classPrivateFieldSet(this, _events_1, {});\r\n        __classPrivateFieldSet(this, _last, 0);\r\n        if (is(setup)) {\r\n            __classPrivateFieldGet(this, _log_1).debug(\"Initiating buses\");\r\n            let sorted = setup.length === 1 ? setup : setup.sort((first, second) => {\r\n                return first.priority - second.priority;\r\n            });\r\n            sorted.forEach((item, index) => {\r\n                __classPrivateFieldGet(this, _buses).push(this.initBusInstance(item.name, item.handler));\r\n                __classPrivateFieldSet(this, _events_1, Object.assign(Object.assign({}, __classPrivateFieldGet(this, _events_1)), this.mapEvents(item.eventsDef, index)));\r\n                __classPrivateFieldGet(this, _log_1).debug(`Bus ${item.name} has been initialized with number: ${index}`);\r\n            });\r\n            __classPrivateFieldGet(this, _buses).push(this.initBusInstance(\"DefaultEventBus\", 'tasked'));\r\n            __classPrivateFieldSet(this, _last, __classPrivateFieldGet(this, _buses).length - 1);\r\n            __classPrivateFieldGet(this, _log_1).debug(`Bus initialization finished`);\r\n        }\r\n    }\r\n    /**\r\n     * Attaches event to event bus\r\n     *\r\n     * @param {string} name - Event name\r\n     * @param {any} callback - callback function\r\n     * @param {CuiContext} ctx - callback context with id\r\n     * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n     */\r\n    on(name, callback, cui) {\r\n        if (!are(name, callback)) {\r\n            throw new ArgumentError(\"Missing argument\");\r\n        }\r\n        return this.get(name).on(name, callback, cui);\r\n    }\r\n    /**\r\n    * Detaches specific event from event bus\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {CuiContext} ctx - callback context with id\r\n    * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n    */\r\n    detach(name, id, cui) {\r\n        if (!are(name, id)) {\r\n            throw new ArgumentError(\"Missing argument\");\r\n        }\r\n        this.get(name).detach(name, id, cui);\r\n    }\r\n    /**\r\n    * Detaches all callbacks from event\r\n    *\r\n    * @param {string} name - Event name\r\n    */\r\n    detachAll(name) {\r\n        this.get(name).detachAll(name);\r\n    }\r\n    /**\r\n    * Emits event call to event bus\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {string} cuid - id of component which emits the event\r\n    * @param {any[]} args  - event arguments\r\n    */\r\n    emit(event, cuid, ...args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(event)) {\r\n                throw new ArgumentError(\"Event name is incorrect\");\r\n            }\r\n            return this.get(event).emit(event, cuid, ...args);\r\n        });\r\n    }\r\n    /**\r\n    * Checks whether given context is already attached to specific event\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {CuiContext} ctx - callback context with id\r\n    * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n    */\r\n    isSubscribing(name, id, cui) {\r\n        return this.get(name).isSubscribing(name, id, cui);\r\n    }\r\n    /**\r\n    * Detaches callbacks by component cuid - this is used to clean up attachments on component deletion\r\n    * @param {string} event - event name\r\n    * @param {string} cuid - cuid of the component\r\n    */\r\n    detachByCuid(event, cuid) {\r\n        if (!are(event, cuid)) {\r\n            return;\r\n        }\r\n        this.get(event).detachByCuid(event, cuid);\r\n    }\r\n    /**\r\n     * Creates and initializes event bus instance\r\n     * @param busName Event bus name for logger\r\n     * @param handlerName handler name to create proper handler instance\r\n     */\r\n    initBusInstance(busName, handlerName) {\r\n        if (!are(busName, handlerName)) {\r\n            throw new ArgumentError(\"Bus name or handler name is incorrect\");\r\n        }\r\n        let executor = new CuiCallbackExecutor();\r\n        let handler = CuiEventEmitHandlerFactory.get(handlerName, executor);\r\n        return new CuiEventBus(handler, busName);\r\n    }\r\n    /**\r\n     * Creates mapping object from events array\r\n     * @param events events array\r\n     * @param index queue number\r\n     */\r\n    mapEvents(events, index) {\r\n        return events.reduce((result, current) => {\r\n            if (!result[current]) {\r\n                return Object.assign(Object.assign({}, result), { [current]: index });\r\n            }\r\n            return result;\r\n        }, {});\r\n    }\r\n    /**\r\n     * Retrives porper event bus based on event name\r\n     * @param event\r\n     */\r\n    get(event) {\r\n        let idx = __classPrivateFieldGet(this, _events_1)[event];\r\n        return __classPrivateFieldGet(this, _buses)[idx !== null && idx !== void 0 ? idx : __classPrivateFieldGet(this, _last)];\r\n    }\r\n}\r\n_events_1 = new WeakMap(), _log_1 = new WeakMap(), _buses = new WeakMap(), _last = new WeakMap();\r\nexport class CuiEventBusFactory {\r\n    static get(setup) {\r\n        //@ts-ignore - setup is underfined check is perfromed\r\n        return is(setup) ? new CuiEventExtBus(setup) : new CuiEventBus(new TaskedEventEmitHandler(new CuiCallbackExecutor));\r\n    }\r\n}\r\nexport class CuiBusExtStatisticsHandler {\r\n    constructor(gather, queueCount) {\r\n        _isOn.set(this, void 0);\r\n        _statistics.set(this, void 0);\r\n        __classPrivateFieldSet(this, _isOn, gather);\r\n        __classPrivateFieldSet(this, _statistics, {\r\n            queueCount: queueCount,\r\n            events: {}\r\n        });\r\n    }\r\n    addEvent(event, queueNumber, emitCount) {\r\n        __classPrivateFieldGet(this, _statistics).events[event] = {\r\n            name: event,\r\n            queueNumber: queueNumber,\r\n            emits: emitCount !== null && emitCount !== void 0 ? emitCount : 0\r\n        };\r\n    }\r\n    addQueue() {\r\n        __classPrivateFieldGet(this, _statistics).queueCount += 1;\r\n    }\r\n    addEmit(event, queueNumber) {\r\n        if (!__classPrivateFieldGet(this, _isOn)) {\r\n            return;\r\n        }\r\n        if (__classPrivateFieldGet(this, _statistics).events[event]) {\r\n            __classPrivateFieldGet(this, _statistics).events[event].emits += 1;\r\n        }\r\n        else {\r\n            this.addEvent(event, queueNumber !== null && queueNumber !== void 0 ? queueNumber : -1, 1);\r\n        }\r\n    }\r\n    getStatistics() {\r\n        return __classPrivateFieldGet(this, _statistics);\r\n    }\r\n}\r\n_isOn = new WeakMap(), _statistics = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar _interactions;\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiDocumentStyleAppender {\r\n    constructor(interactions) {\r\n        _interactions.set(this, void 0);\r\n        __classPrivateFieldSet(this, _interactions, interactions);\r\n    }\r\n    append(style) {\r\n        if (is(style)) {\r\n            const head = document.head || document.getElementsByTagName('head')[0];\r\n            const node = document.createElement('style');\r\n            const text = document.createTextNode(style);\r\n            node.type = 'text/css';\r\n            node.appendChild(text);\r\n            head.appendChild(node);\r\n        }\r\n        return true;\r\n    }\r\n}\r\n_interactions = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _root, _interactions, _LIGHTEN_FACTOR, _DARKEN_FACTOR;\r\nimport { is, getRangeValue, are } from \"../utils/functions\";\r\nimport { CSS_APP_BACKGROUND_COLORS, CSS_COMPONENT_BACKGROUND_COLORS, CSS_COMPONENT_BORDER_COLORS, CSS_THEMES } from \"../utils/statics\";\r\nexport class CuiInstanceColorHandler {\r\n    constructor(interactions) {\r\n        _root.set(this, void 0);\r\n        _interactions.set(this, void 0);\r\n        _LIGHTEN_FACTOR.set(this, 15);\r\n        _DARKEN_FACTOR.set(this, 15);\r\n        __classPrivateFieldSet(this, _root, document.documentElement);\r\n        __classPrivateFieldSet(this, _interactions, interactions);\r\n    }\r\n    setAppBackground(light, dark) {\r\n        this.setPropertyIn(CSS_APP_BACKGROUND_COLORS.light, light.toCssString());\r\n        this.setPropertyIn(CSS_APP_BACKGROUND_COLORS.dark, dark.toCssString());\r\n    }\r\n    setComponentBackground(light, dark) {\r\n        this.setPropertyIn(CSS_COMPONENT_BACKGROUND_COLORS.light, light.toCssString());\r\n        this.setPropertyIn(CSS_COMPONENT_BACKGROUND_COLORS.dark, dark.toCssString());\r\n    }\r\n    setBordersColors(light, dark) {\r\n        this.setPropertyIn(CSS_COMPONENT_BORDER_COLORS.light, light.toCssString());\r\n        this.setPropertyIn(CSS_COMPONENT_BORDER_COLORS.dark, dark.toCssString());\r\n    }\r\n    setColor(type, set) {\r\n        var _a, _b;\r\n        const colors = CSS_THEMES[type];\r\n        const baseColor = set.base;\r\n        if (!is(colors) || !is(baseColor)) {\r\n            return;\r\n        }\r\n        const mutedColor = (_a = set.muted) !== null && _a !== void 0 ? _a : baseColor.clone().lighten(__classPrivateFieldGet(this, _LIGHTEN_FACTOR));\r\n        const activeColor = (_b = set.active) !== null && _b !== void 0 ? _b : baseColor.clone().darken(__classPrivateFieldGet(this, _DARKEN_FACTOR));\r\n        __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n            this.setProperty(colors.base, baseColor.toCssString());\r\n            this.setProperty(colors.active, activeColor.toCssString());\r\n            this.setProperty(colors.muted, mutedColor.toCssString());\r\n        }, this);\r\n    }\r\n    setLightenFactor(factor) {\r\n        __classPrivateFieldSet(this, _LIGHTEN_FACTOR, getRangeValue(factor, 0, 100));\r\n    }\r\n    setDarkenFactor(factor) {\r\n        __classPrivateFieldSet(this, _DARKEN_FACTOR, getRangeValue(factor, 0, 100));\r\n    }\r\n    setProperty(propertyName, value) {\r\n        __classPrivateFieldGet(this, _root).style.setProperty(propertyName, value);\r\n    }\r\n    setPropertyIn(propertyName, value) {\r\n        if (!are(value, propertyName)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _interactions).mutate(this.setProperty, this, propertyName, value);\r\n    }\r\n}\r\n_root = new WeakMap(), _interactions = new WeakMap(), _LIGHTEN_FACTOR = new WeakMap(), _DARKEN_FACTOR = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _items, _promises, _prevYValue, _inProgress, _previousSize, _threshold, _bus, _listenerBoundCall;\r\nimport { calcWindowSize, calcWindowSize2 } from \"../utils/functions\";\r\nimport { EVENTS } from \"../utils/statics\";\r\nexport class CuiResizeObserver {\r\n    constructor(bus, threshold) {\r\n        _items.set(this, void 0);\r\n        _promises.set(this, void 0);\r\n        _prevYValue.set(this, void 0);\r\n        _inProgress.set(this, void 0);\r\n        _previousSize.set(this, void 0);\r\n        _threshold.set(this, void 0);\r\n        _bus.set(this, void 0);\r\n        _listenerBoundCall.set(this, void 0);\r\n        __classPrivateFieldSet(this, _items, []);\r\n        __classPrivateFieldSet(this, _promises, []);\r\n        __classPrivateFieldSet(this, _prevYValue, window.innerWidth);\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n        __classPrivateFieldSet(this, _previousSize, calcWindowSize(window.innerWidth));\r\n        __classPrivateFieldSet(this, _threshold, threshold !== null && threshold !== void 0 ? threshold : 0);\r\n        __classPrivateFieldSet(this, _bus, bus);\r\n        __classPrivateFieldSet(this, _listenerBoundCall, this.listener.bind(this));\r\n    }\r\n    observe(target) {\r\n        let idx = __classPrivateFieldGet(this, _items).findIndex(x => x === target);\r\n        if (idx < 0) {\r\n            __classPrivateFieldGet(this, _items).push(target);\r\n        }\r\n    }\r\n    unobserve(target) {\r\n        let idx = __classPrivateFieldGet(this, _items).findIndex(x => x === target);\r\n        if (idx >= 0) {\r\n            __classPrivateFieldGet(this, _items).splice(idx, 1);\r\n        }\r\n    }\r\n    connect() {\r\n        window.addEventListener('resize', __classPrivateFieldGet(this, _listenerBoundCall));\r\n    }\r\n    disconnect() {\r\n        window.removeEventListener('resize', __classPrivateFieldGet(this, _listenerBoundCall));\r\n    }\r\n    pushUpdateToItems(resizeData) {\r\n        if (__classPrivateFieldGet(this, _items).length < 1) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _promises, []);\r\n        __classPrivateFieldGet(this, _items).forEach(x => {\r\n            __classPrivateFieldGet(this, _promises).push(x.resize(resizeData));\r\n        });\r\n        Promise.all(__classPrivateFieldGet(this, _promises));\r\n        __classPrivateFieldSet(this, _promises, []);\r\n    }\r\n    listener(ev) {\r\n        if (__classPrivateFieldGet(this, _inProgress)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _inProgress, true);\r\n        const diff = window.innerWidth - __classPrivateFieldGet(this, _prevYValue);\r\n        if (Math.abs(diff) >= __classPrivateFieldGet(this, _threshold)) {\r\n            const currentSize = calcWindowSize2(window.innerWidth);\r\n            if (currentSize !== __classPrivateFieldGet(this, _previousSize)) {\r\n                const resizeData = {\r\n                    current: currentSize,\r\n                    previous: __classPrivateFieldGet(this, _previousSize),\r\n                    width: window.innerWidth,\r\n                    height: window.innerHeight,\r\n                    timestamp: Date.now()\r\n                };\r\n                __classPrivateFieldGet(this, _bus).emit(EVENTS.RESIZE, \"\", resizeData);\r\n                this.pushUpdateToItems(resizeData);\r\n                __classPrivateFieldSet(this, _previousSize, currentSize);\r\n            }\r\n        }\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n    }\r\n}\r\n_items = new WeakMap(), _promises = new WeakMap(), _prevYValue = new WeakMap(), _inProgress = new WeakMap(), _previousSize = new WeakMap(), _threshold = new WeakMap(), _bus = new WeakMap(), _listenerBoundCall = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _tool;\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiDevelopmentToolManager {\r\n    constructor(tool) {\r\n        _tool.set(this, void 0);\r\n        __classPrivateFieldSet(this, _tool, tool);\r\n    }\r\n    pushState(cuid, component, type, message, functionName) {\r\n        this.checkAndCall(() => {\r\n            // @ts-ignore - tool already checked\r\n            __classPrivateFieldGet(this, _tool).pushState(cuid, component, type, message, functionName);\r\n        });\r\n    }\r\n    registerElement(element, cuid, component) {\r\n        this.checkAndCall(() => {\r\n            // @ts-ignore - tool already checked\r\n            __classPrivateFieldGet(this, _tool).registerElement(element, cuid, component);\r\n        });\r\n    }\r\n    unregisterElement(cuid, component) {\r\n        this.checkAndCall(() => {\r\n            // @ts-ignore - tool already checked\r\n            __classPrivateFieldGet(this, _tool).unregisterElement(cuid, component);\r\n        });\r\n    }\r\n    setProperty(cuid, component, name, t) {\r\n        this.checkAndCall(() => {\r\n            // @ts-ignore - tool already checked\r\n            __classPrivateFieldGet(this, _tool).setProperty(cuid, component, name, t);\r\n        });\r\n    }\r\n    log(type, message, functionName) {\r\n        this.checkAndCall(() => {\r\n            // @ts-ignore - tool already checked\r\n            __classPrivateFieldGet(this, _tool).log(type, message, functionName);\r\n        });\r\n    }\r\n    checkAndCall(callback) {\r\n        if (!is(__classPrivateFieldGet(this, _tool))) {\r\n            return;\r\n        }\r\n        callback();\r\n    }\r\n}\r\n_tool = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _resizeObserver;\r\nimport { CuiSetup } from \"./setup\";\r\nimport { CuiInteractionsFactory } from \"../factories/interactions\";\r\nimport { CuiCacheManager } from \"../managers/cache\";\r\nimport { CuiEventBusFactory } from \"../bus/bus\";\r\nimport { are, getName, replacePrefix } from \"../utils/functions\";\r\nimport { CLASSES } from \"../utils/statics\";\r\nimport { CuiDocumentStyleAppender } from \"../styles/appender\";\r\nimport { CuiInstanceColorHandler } from \"../handlers/colors\";\r\nimport { CuiResizeObserver } from \"../observers/resize\";\r\nimport { CSSVariableError } from \"./errors\";\r\nimport { CuiDevelopmentToolManager } from \"../managers/development\";\r\nexport class CuiUtils {\r\n    constructor(initialSetup) {\r\n        _resizeObserver.set(this, void 0);\r\n        this.setup = new CuiSetup().fromInit(initialSetup);\r\n        this.interactions = CuiInteractionsFactory.get(initialSetup.interaction, this.onInteractionError.bind(this));\r\n        this.cache = new CuiCacheManager(this.setup.cacheSize);\r\n        this.bus = CuiEventBusFactory.get(initialSetup.busSetup);\r\n        this.colors = new CuiInstanceColorHandler(this.interactions);\r\n        this.development = new CuiDevelopmentToolManager(initialSetup.development);\r\n        this.styleAppender = new CuiDocumentStyleAppender(this.interactions);\r\n        __classPrivateFieldSet(this, _resizeObserver, new CuiResizeObserver(this.bus, this.setup.resizeThreshold));\r\n        __classPrivateFieldGet(this, _resizeObserver).connect();\r\n    }\r\n    setLightMode(mode) {\r\n        const name = getName(this.setup.prefix, CLASSES.dark);\r\n        const classes = document.body.classList;\r\n        if (mode === 'dark' && !classes.contains(name)) {\r\n            this.interactions.mutate(() => {\r\n                classes.add(name);\r\n            }, this);\r\n        }\r\n        else if (mode === 'light' && classes.contains(name)) {\r\n            this.interactions.mutate(() => {\r\n                classes.remove(name);\r\n            }, this);\r\n        }\r\n    }\r\n    getLightMode() {\r\n        const name = getName(this.setup.prefix, CLASSES.dark);\r\n        return document.body.classList.contains(name) ? 'dark' : 'light';\r\n    }\r\n    setPrintMode(flag) {\r\n        const name = getName(this.setup.prefix, CLASSES.print);\r\n        const classes = document.body.classList;\r\n        if (flag && !classes.contains(name)) {\r\n            classes.add(name);\r\n        }\r\n        else if (!flag && classes.contains(name)) {\r\n            classes.remove(name);\r\n        }\r\n    }\r\n    isPrintMode() {\r\n        const name = getName(this.setup.prefix, CLASSES.print);\r\n        return document.body.classList.contains(name);\r\n    }\r\n    setProperty(name, value) {\r\n        if (!are(name, value)) {\r\n            throw new CSSVariableError(\"Property or value was not provided\");\r\n        }\r\n        let prop = replacePrefix(name, this.setup.prefix);\r\n        document.documentElement.style.setProperty(prop, value);\r\n    }\r\n    onInteractionError(e) {\r\n        console.error(\"An error has been captured from interactions\");\r\n        console.error(e);\r\n    }\r\n}\r\n_resizeObserver = new WeakMap();\r\n","import { FastDom, SyncInteractions } from \"../utils/interactions\";\r\nexport class CuiInteractionsFactory {\r\n    /**\r\n     * Gets new instance of component focused logger\r\n     * @param type - Interactions type\r\n     */\r\n    static get(type, errorReport) {\r\n        const interactionType = type;\r\n        switch (interactionType) {\r\n            case 'async':\r\n                const fastDom = new FastDom();\r\n                if (errorReport)\r\n                    fastDom.onError(errorReport);\r\n                return fastDom;\r\n            default:\r\n                return new SyncInteractions();\r\n        }\r\n    }\r\n}\r\n"],"sourceRoot":""}