{"version":3,"sources":["webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/functions.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/statics.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/actions.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/models/errors.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/logger.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/factories/logger.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/builders/element.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/animation/definitions.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/listeners/move.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/models/setup.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/observers/mutations.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/helpers/helpers.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/index.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/index.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/index.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/aria.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/handlers/base.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/accordion/accordion.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/animation/animators.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/animation/engine.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/banner/banner.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/builders/icon.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/circle/circle.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/close/close.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/cover/cover.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/dialog/dialog.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/listeners/hover.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/position/evaluator.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/position/calculator.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/task.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/drop/drop.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/float/helpers.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/float/float.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/icon/icon.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/observers/intersection.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/intersection/intersection.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/offcanvas/offcanvas.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/models/elements.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/listeners/scroll.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/offset/modes.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/offset/offset.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/open/open.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/resize/resize.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/scroll/scroll.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/intersection/intersection.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/scrollspy/mode.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/scrollspy/scrollspy.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/handlers/drag/detectors.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/handlers/drag/drag.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/sortable/sortable.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/spinner/spinner.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/switch/slider.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/switch/switch.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/switch/switcher.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/toggle/toggle.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/tooltip/tooltip.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/module.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/click/click.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/listeners/keys.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/keys/observer.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/keys/keys.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/listeners/media.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/light/light.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/print/print.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/models/colors.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/properties/colors.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/properties/setter.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/properties/handler.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/properties/properties.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/module.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/interactions.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/dictionary.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/managers/cache.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/bus/handlers.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/bus/executors.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/bus/bus.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/styles/appender.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/handlers/colors.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/observers/resize.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/managers/development.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/models/utils.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/factories/interactions.js"],"names":["is","val","typecheck","length","Array","isArray","isEmpty","getName","prefix","name","sleep","timeout","Promise","resolve","setTimeout","createElementFromString","htmlString","template","document","createElement","innerHTML","content","children","getRangeValue","value","min","max","getRangeValueOrDefault","def","isNaN","clone","object","Object","assign","joinAttributesForQuery","attributes","join","getSystemLightMode","window","matchMedia","matches","getSystemPrintMode","are","c","i","calcWindowSize","width","calcWindowSize2","size","parseAttributeString","attribute","ret","out","startsWith","endsWith","JSON","parse","jsonify","e","console","error","message","component","functionName","Date","toLocaleString","parseJsonString","trim","includes","split","forEach","sp","len","tag","undefined","shift","replace","getOffsetTop","element","offsetTop","parseInt","getStyleValue","getIntOrDefault","integer","target","property","currentStyle","getComputedStyle","getPropertyValue","isInRange","getActiveClass","parseAttribute","getAttribute","isStringTrue","toLowerCase","boolStringOrDefault","prop","getStringOrDefault","isString","replacePrefix","generateRandomString","rand","getRandomInt","rand2","Math","floor","random","ceil","registerCuiElement","node","components","utils","$handlers","matching","hasAttribute","filter","a","getMatchingAttributes","$cuid","next","generateCUID","tagName","setAttribute","match","find","styleAppender","append","getStyle","handler","get","handle","attr","addCuiArgument","cuiArg","args","argArr","enumerateObject","arg","push","counter","idx","getParentCuiElement","parent","parentElement","getChildrenHeight","height","from","child","getBoundingClientRect","callback","hasOwnProperty","calculateNextIndex","currentIndex","totalLength","getFirstMatching","array","count","CUID_ATTRIBUTE","CLASSES","dark","animProgress","print","active","swipingOn","selectionOff","ICONS","close","accordion","special_menu","special_fail","special_success","CSS_APP_BACKGROUND_COLORS","light","CSS_COMPONENT_BACKGROUND_COLORS","CSS_COMPONENT_BORDER_COLORS","CSS_THEMES","base","muted","accent","secondary","success","warning","SCOPE_SELECTOR","CSS_VARIABLES","fontSize","lineHeight","animationTime","animationTimeLong","animationTimeShort","colorLightAppBackground","colorLightBackground","colorLightBorder","colorLightBase","colorLightActive","colorLightMuted","colorDarkAppBackground","colorDarkBackground","colorDarkBorder","colorDarkBase","colorDarkActive","colorDarkMuted","colorAccent","colorAccentActive","colorAccentMuted","colorAccentShade","colorAccentShadeDark","colorSecondary","colorSecondaryActive","colorSecondaryMuted","colorSecondaryShade","colorSecondaryShadeDark","colorWarning","colorWarningActive","colorWarningMuted","colorWarningShade","colorWarningShadeDark","colorSuccess","colorSuccessActive","colorSuccessMuted","colorSuccessShade","colorSuccessShadeDark","colorError","colorErrorActive","colorErrorMuted","colorErrorShade","colorErrorShadeDark","inputBackground","colorShade","colorShadeDarker","colorShadeLight","colorShadeLighter","outline","borderRadius","padding","margin","scrollbarWidth","componentSpace","accordionIcon","STATICS","logLevel","EVENTS","INSTANCE_INITIALIZED","INSTANCE_FINISHED","RESIZE","OPEN","OPENED","CLOSE","CLOSED","TOGGLE","TOGGLED","SWITCH","SWITCHED","ON_SCROLL","TARGET_CHANGE","INTERSECTION","KEYDOWN","SCROLLBY","WINDOW_CLICK","OFFSET","PROGRESS_CHANGE","PROGRESS_CHANGED","CHANGE","CHANGED","GLOBAL_MOVE","MOVE_LOCK","PAUSE","PAUSED","SORTED","SORT_START","COMPONENTS_COUNTER","_class","_name","_attributeName","_attributeValue","__classPrivateFieldSet","receiver","privateMap","has","TypeError","set","__classPrivateFieldGet","CuiClassAction","className","this","classList","contains","add","remove","WeakMap","CuiInboundAction","setLightMode","setDarkMode","getLightMode","AttributeAction","_a","_b","_c","removeAttribute","DummyAction","CuiActionsListFactory","map","single","substring","ErrorBase","Error","super","setPrototypeOf","prototype","ItemNotFoundError","ArgumentError","CuiInstanceInitError","RegisterElementError","AnimatorError","CSSVariableError","CuiColorError","CuiPositionError","CuiLogger","level","id","log","prepString","warn","stack","start","now","_id","_classes","_attributes","_tag","ElementBuilder","SWIPE_ANIMATIONS_DEFINITIONS","current","left","transform","translateX","to","unit","right","previous","fade","opacity","_element","_onEvent","_isLocked","_isAttached","_preventDefault","_target","CuiMoveEventListener","body","onMouseDown","bind","onMouseUp","onMouseMove","onTouchStart","onTouchEnd","onTouchMove","flag","addEventListener","passive","removeEventListener","ev","publishMouseEvent","publishTouchEvent","type","cancelable","preventDefault","call","x","clientX","y","clientY","moveX","movementX","moveY","movementY","event","touch","touches","changedTouches","CuiSetup","autoLightMode","scrollThreshold","resizeThreshold","plugins","init","cacheSize","CuiSetupInit","app","interaction","root","busSetup","development","_observer","_options","_components","_utils","_queryString","_isObserving","_observer_1","_element_1","_disabled","_options_1","CuiMutationObserver","_log","subtree","childList","attributeFilter","debug","MutationObserver","mutationCallback","observe","disconnect","mutations","observer","mutation","item","attributeName","refresh","handleChildListMutation","onMutation","then","addedLen","addedNodes","removedLen","removedNodes","handleAddedNodes","handleRemovedNodes","nodes","childrens","hasChildNodes","querySelectorAll","exception","destroySingleElement","destroy","CuiComponentMutationHandler","unobserve","_interactions","__awaiter","thisArg","_arguments","P","generator","reject","fulfilled","step","rejected","result","done","apply","CuiActionsHelper","interactions","action","mutate","actions","inTarget","outTarget","inAction","outAction","onFinish","CUI_LIGHT_COMPONENTS_VERSION","CUI_LIGHT_PLUGINS_VERSION","CUI_CORE_VERSION","AriaAttributes","label","_emittedEvents","_attribute","_openEventId","_closeEventId","_keyCloseEventId","_openAct","_closeAct","_mutionHandler","cls","setClasses","classes","removeClasses","style","componentName","cuid","isLocked","setId","activeClassName","setup","helper","fetch","data","bus","emit","on","detach","fName","detachByCuid","registerElement","unregisterElement","setProperty","pushState","actionsHelper","prevArgs","isInitialized","logInfo","logWarning","registerInDebug","onHandle","pushDebugState","onRefresh","logError","onRemove","detachEmiitedEvents","removeFromDebug","CuiHandler","onInit","onUpdate","onDestroy","performActions","onEvent","openFromEvent","closeFromEvent","openAct","closeAct","detachEvent","checkLockAndWarn","isActive","escClose","keyClose","onKeyClose","onBeforeOpen","performAction","onActionFinish","onAfterOpen","setClass","setAria","onBeforeClose","onAfterClose","removeClass","open","emitEvent","timestamp","state","key","records","reduce","added","removed","_defTitleSelector","_defItemsSelector","_defTimeout","_prefix","_items","_targets","_switchEventId","animation","selector","items","CuiAccordionComponent","isValid","initTargets","onSwitch","index","queryItems","hasClass","removeClassesAs","closeAllExcept","setClassesAs","currentTarget","switch","t","setListener","listener","_unit","rtl","abs","progress","factor","createValue","props","cur","diff","buildSingle","build","_onFinishCallback","_animators","_lock","_animStartStamp","_cleanOnFinish","_errorOccured","_factory_1","_onError_1","_animators_1","_animationEngine","_factory_2","_onError_2","cleanOnFinish","animators","animator","reportError","revert","animationProgress","shouldCalcRevert","requestAnimationFrame","animateAsync","initialProgress","pr","currProgress","callUpdate","endAnimation","reverted","perform","shouldCleanOnFinish","setOnError","update","setElement","setAnimators","animate","_prefix_1","_swipeEngine","_isTracking","_startX","_ratio","_swipeAnimation","_moveEventId","swipe","CuiBanerComponent","setOnFinish","onSwipeFinish","onMove","absRatio","back","finish","newRatio","offsetWidth","setProps","_scale","_appender","svgString","scale","created","toString","_factor","_full","_path","_attr","_progressEventId","iconSvg","svg","querySelector","appendChild","getTotalLength","readStyle","onSetProgress","strokeDashoffset","updateStyle","_eventId","prevent","CuiCloseComponent","onClick","onClose","getTarget","run","catch","finally","cuiId","removeActiveClass","removeActiveClassAsync","shouldEmit","emitClose","_bodyClass","_scrollY","defTimeout","CuiCoverComponent","isAnyActive","pageYOffset","top","scrollTo","_prefix_2","_windowClickEventId","outClose","CuiDialogComponent","onWindowClick","container","_callback","_inProgress","_isHovering","_onOverBound","_onMoveBound","_onOutBound","onMouseOut","onMouseOver","mouseEvent","force","invoke","isHovering","_box","_targetWidth","_targetHeight","_margin","box","targetBox","getTopPosition","getBottomPosition","getMiddlePosition","getLeftPosition","getRightPosition","getCenterPosition","initial","innerHeight","number","getVerticalPosition","innerWidth","getHorizontalPosition","throwIfNotValid","method","validate","_static","_preferred","_evaluator","evaluator","setMargin","position","elementBox","setElementBox","setTarget","vertical","horizontal","outVNum","outVPos","getAutoVerticalPosition","outHNum","outHPos","getAutoHorizontalPosition","_taskId","_autoRenew","autoRenew","canRun","stop","clearTimeout","_defOpenAct","_triggerHoverListener","_hoverListener","_trigger","_positionCalculator","_posClass","_autoTask","_actions","mode","trigger","autoClose","pos","CuiDropComponenet","setCallback","onElementHover","onTriggerClick","setPreferred","acquireTrigger","setTriggerEvent","setStatic","isAttached","findAndCloseOpenedDrop","onOpen","toggleActions","calculate","attach","runAutoCloseTask","opened","onHoverEvent","toggle","BasePositionCalculator","diffX","diffY","BaseResizeCalculator","offsetLeft","_isMoving","_isResizing","_prevX","_prevY","_moveListener","_resizeCalculator","_resizeBtn","_moveBtn","CuiFloatComponent","move","resize","peform","newWidth","newHeight","fitsWindow","newX","newY","offsetHeight","_currentIcon","icon","CuiIconComponent","addIcon","iconStr","setScale","childNodes","insertBefore","iconElement","firstChild","_root","_threshold","CuiIntersectionObserver","threshold","IntersectionObserver","rootMargin","offset","isRoot","parseFloat","CuiIntersectionComponent","parseArguments","onIntersection","connect","el","entries","entry","isIntersecting","intersectionRatio","addActions","removeActions","emitIntersection","getDefaultOpenClass","getDefaultCloseClass","CuiOffCanvasComponent","setPositionLeft","scrollY","CuiElementBoxFactory","Window","WindowElementBox","HTMLElement","HTMLElementBox","ElementBox","scrollHeight","scrollWidth","scrollTop","scrollLeft","pageXOffset","_task","_listener","onScrollFinish","source","getScrollLeft","getScrollTop","passedThreshold","scrolling","_pointLeft","_pointTop","_prevDiffY","_prevDiffX","_wasTriggeredX","_wasTriggeredY","CuiOffsetStaticMode","offsetX","offsetY","CuiOffsetDynamicMode","fitsOffsetY","fitsOffsetX","_matched","_action","_modeHandler","CuiOffsetComponent","onScroll","checkAndPerformActions","getRoot","matchesOffset","act","callEvent","calcaRatio","exceededThreshold","ratioX","ratioY","ratY","clientHeight","toFixed","ratX","clientWidth","CuiOpenComponent","activateTarget","setActiveClass","setActiveClassAsync","emitOpen","_intersectionObserver","_currentSize","_currentValue","_lastValue","_isIntersecting","_timeoutToken","default","small","medium","large","xlarge","delay","_d","s","m","l","xl","CuiResizeComponent","documentElement","isInViewport","setNewValue","updateElement","newValue","isSmartMode","getSmartValue","getValue","rect","bottom","_parent","_onClickBound","behavior","setTargets","by","scrollBy","_scrollListener","_children","options","setThreshold","isInProgress","prepareCallbackResult","currentTop","currentBottom","childBottom","ratio","currentLeft","currentRight","childRight","parentBottom","getHeight","parentRight","getWidth","verticalRatio","calcChildVerticalRatio","horizontalRatio","calcChildHorizontalRatio","CuiScrollSpyModeHandlerFactory","elements","forEachAction","links","linksActions","getMatching","last","changed","lastElement","intersecting","_links","_linkActions","_rootBox","link","linkAction","CuiScrollspyComponent","updateAttributes","updateResult","targets","queryAll","setChildren","setParent","_elements","_count","found","isInBounds","_moveHandler","_onDragStart","_onDragOver","_onDragEnd","_timeoutId","cancelTimeout","_dragHandler","_triggers","_currentTarget","_currentIdx","_preview","_movingCls","_detector","_currentBefore","_animation","_previewCls","CuiSortableComponent","sutils","onDragStart","onDragOver","onDragEnd","stopMovementPrep","getTargetsAndTrggers","setLongPressTimeout","setElements","getPressedElementIdx","startMovementPrep","getFinishAnimation","findIndex","createPreview","setPreviewPosition","setCurrentPosition","removePreview","detected","detect","insertElement","destination","_pauseEventId","_animationPauseClass","spinner","onPause","removeIfAnyExisists","svgIcon","addSpinner","existing","_swipeRatio","_nextIdx","_nextElement","_ratioThreshold","_currSlider","_nextSlider","_animationDef","_targetsCount","autoTimeout","loop","CuiSliderComponent","onAnimationFinish","onPushSwitch","getTargets","getLinks","getActiveIndex","setLinkActive","setStyle","getElementHeight","startTask","record","nextIdx","adjustMoveRatio","errorOccured","_switches","_actionsIn","_actionsOut","in","CuiSwitchComponent","getSwitches","setSwitchesActive","nextItem","performSwitchAction","switches","sw","emitLinkSwitch","_targetId","_isList","_listeners","CuiSwitcherComponent","onClickEvent","setEvents","removeEvents","list","onListItemClick","_toggleEventId","CuiToggleComponent","_defAct","_tooltip","_tooltipDataCls","CuiTooltipComponent","onHover","getDataFromArgs","removeTooltip","createTooltip","textContent","maxWidth","toolbox","GetComponents","_bus","_boundClick","description","_keys","_singleEmit","_onKeyDownBound","_onKeyUpBound","singleEmit","keys","onKeyDown","onKeyUp","code","_keysObserver","keySetup","_mediaQuery","_isInitialized","_onEventBound","CuiMediaQueryListener","mediaQuery","autoLightInit","autoLight","onChange","autoLightSetup","autoPrintInit","autoPrint","setPrintMode","_red","_green","_blue","_alpha","_colorStr","_colorStr_1","red","green","blue","alpha","colorStr","parser","res","amount","shade","percent","self","shadeSingle","newVal","round","alphaHex","_set","_setter","_setter_1","_set_1","baseColorSets","background","themeColors","shadeDark","CuiBaseColorsSetter","colorSet","setter","color","setColor","colors","toCssString","setProperties","CuiThemeColorsSetter","lighten","darken","setBaseUnitValue","setAnimationTimeLong","setAnimationTimeShort","setCSSVariable","strVal","onCssChange","accentSetter","isArgNumber","setBaseFontSize","setBaseLineHeight","setAnimationTime","setBaseMargin","setBasePadding","setBaseBorderRadius","setComponentSpace","setScrollbarWidth","setAccordionIcon","setAppBackgroundColor","create","setDarkAppBackgroundColor","isArgColor","getBaseColorSetter","palette","setBackgroundColor","setBaseColor","setMutedColor","setActiveColor","getAccentColorSetter","setAutoColors","setShadeColor","setShadeDarkColor","pallete","getBaseColorsSetter","getDarkBaseColorsSetter","getAccentThemeColorsSetter","getSecondaryThemeColorsSetter","getErrorThemeColorsSetter","getWarningThemeColorsSetter","getSuccessThemeColorsSetter","GetPlugins","_writes","_reads","_raf","_isScheduled","_limit","_reportCallback","FastDom","ctx","createTask","schedule","tasks","task","recursion","flush","rec","writes","reads","SyncInteractions","isRunning","raf","_values","throwOnEmptyKey","containsKey","indexOf","splice","_cache","_maxSize","maxSize","clean","clear","_executor","_executor_1","queue","isBusy","emitId","handleId","executor","events","idMatches","execute","promises","all","CuiCallbackExecutor","_events","_eventHandler","_events_1","_log_1","_buses","_last","emitHandler","cui","getCuid","callbacks","evId","evValue","sort","first","second","priority","initBusInstance","mapEvents","eventsDef","detachAll","isSubscribing","busName","handlerName","head","getElementsByTagName","text","createTextNode","_LIGHTEN_FACTOR","_DARKEN_FACTOR","setPropertyIn","baseColor","mutedColor","activeColor","propertyName","_promises","_prevYValue","_previousSize","_listenerBoundCall","resizeData","currentSize","pushUpdateToItems","_tool","tool","checkAndCall","_resizeObserver","initialSetup","fromInit","errorReport","fastDom","onError","onInteractionError","cache"],"mappings":"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","file":"vendors~index.min.js","sourcesContent":["import { ArgumentError, RegisterElementError } from \"../models/errors\";\r\nimport { COMPONENTS_COUNTER, CUID_ATTRIBUTE } from \"./statics\";\r\n/**\r\n * Checks if value is defined an is not null\r\n * Additionally with type check it can check value if it is not empty string or collection or object\r\n *\r\n * @param val - value\r\n * @param typecheck - default true - additional check whether value is not empty (string, collection, object)\r\n * @returns whether value passed all conditions\r\n */\r\nexport function is(val, typecheck = true) {\r\n    if (typeof val !== 'undefined' && val !== null) {\r\n        if (!typecheck) {\r\n            return true;\r\n        }\r\n        else {\r\n            return !isEmpty(val);\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Checks if value is empty string, array or object\r\n *\r\n *\r\n * @param val - value\r\n * @returns whether value passed all conditions\r\n */\r\nexport function isEmpty(val) {\r\n    if (typeof val === \"string\") {\r\n        return val.length === 0;\r\n    }\r\n    if (typeof val === \"boolean\") {\r\n        return val;\r\n    }\r\n    else if (Array.isArray(val)) {\r\n        return val.length === 0;\r\n    }\r\n    return false;\r\n}\r\nexport function getName(prefix, name) {\r\n    if (!is(prefix) || !is(name)) {\r\n        throw new ArgumentError(\"Missing argument value\");\r\n    }\r\n    return `${prefix}-${name}`;\r\n}\r\nexport function sleep(timeout) {\r\n    return new Promise(resolve => setTimeout(() => {\r\n        resolve(true);\r\n    }, timeout));\r\n}\r\n/**\r\n * Creates proper html element from given string\r\n * @param htmlString - string containing html\r\n */\r\nexport function createElementFromString(htmlString) {\r\n    if (!is(htmlString)) {\r\n        return null;\r\n    }\r\n    let template = document.createElement('template');\r\n    template.innerHTML = htmlString;\r\n    return template.content.children.length > 0 ? template.content.children[0] : null;\r\n}\r\nexport function getMatchingAttribute(element, attributes) {\r\n    let attr = null;\r\n    let len = attributes.length;\r\n    for (let i = 0; i < len; i++) {\r\n        let attribute = attributes[i];\r\n        if (element.hasAttribute(attribute)) {\r\n            attr = attribute;\r\n            break;\r\n        }\r\n    }\r\n    return attr;\r\n}\r\nexport function getMatchingAttributes(element, attributes) {\r\n    if (!element || !is(element.hasAttribute)) {\r\n        return [];\r\n    }\r\n    return attributes.filter(a => {\r\n        return element.hasAttribute(a);\r\n    });\r\n}\r\nexport function getRangeValue(value, min, max) {\r\n    if (value < min) {\r\n        return min;\r\n    }\r\n    else if (value > max) {\r\n        return max;\r\n    }\r\n    return value;\r\n}\r\nexport function getRangeValueOrDefault(value, min, max, def) {\r\n    if (value === null || typeof value === 'undefined' || isNaN(value)) {\r\n        return def;\r\n    }\r\n    return getRangeValue(value, min, max);\r\n}\r\nexport function increaseValue(value, amount) {\r\n    return amount < 0 || amount > 1 ? 0 : value + (value * amount);\r\n}\r\nexport function decreaseValue(value, amount) {\r\n    return amount < 0 || amount > 1 ? 0 : value - (value * amount);\r\n}\r\nexport function clone(object) {\r\n    if (!is(object)) {\r\n        return null;\r\n    }\r\n    return Object.assign({}, object);\r\n}\r\nexport function getSingleColorRatio(first, second, max) {\r\n    return Math.abs(((first - second) / max) * 100);\r\n}\r\n/**\r\n * Creates string containg css selector for array of attributes\r\n * @param attributes - attributes values\r\n */\r\nexport function joinAttributesForQuery(attributes) {\r\n    if (!is(attributes)) {\r\n        return \"\";\r\n    }\r\n    return `[${attributes.join('],[')}]`;\r\n}\r\n/**\r\n * Checks light system light mode\r\n * @returns Light Mode - dark/light\r\n */\r\nexport function getSystemLightMode() {\r\n    return window.matchMedia &&\r\n        window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\r\n}\r\n/**\r\n * Check print mode in the browser window\r\n * @returns true if window is displayed in print mode\r\n */\r\nexport function getSystemPrintMode() {\r\n    return window.matchMedia &&\r\n        window.matchMedia('print').matches;\r\n}\r\n/**\r\n * Verifies whether attributes exist and have some values\r\n * @param attributes attributes list\r\n */\r\nexport function are(...attributes) {\r\n    if (!is(attributes)) {\r\n        return false;\r\n    }\r\n    let c = attributes.length;\r\n    for (let i = 0; i < c; i++) {\r\n        if (!is(attributes[i])) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nexport function calcWindowSize(width) {\r\n    if (width <= 640) {\r\n        return 'small';\r\n    }\r\n    else if (width > 640 && width <= 960) {\r\n        return \"medium\";\r\n    }\r\n    else if (width > 960 && width <= 1200) {\r\n        return \"large\";\r\n    }\r\n    return 'xlarge';\r\n}\r\nexport function calcWindowSize2(width) {\r\n    let size = \"none\";\r\n    if (width >= 640) {\r\n        size = 'small';\r\n    }\r\n    if (width >= 960) {\r\n        size = \"medium\";\r\n    }\r\n    if (width >= 1200) {\r\n        size = \"large\";\r\n    }\r\n    if (width >= 1600) {\r\n        size = 'xlarge';\r\n    }\r\n    return size;\r\n}\r\n/**\r\n * Creates object from string.\r\n * Supported syntaxes are:\r\n * - JSON\r\n * - single value\r\n * - key:value,value;key=value\r\n *\r\n * @param attribute - attribute value\r\n */\r\nexport function parseAttributeString(attribute) {\r\n    let ret = {};\r\n    if (!is(attribute)) {\r\n        return ret;\r\n    }\r\n    //@ts-ignore - null already checked\r\n    ret = parseJsonString(attribute.trim());\r\n    if (!is(ret)) {\r\n        //@ts-ignore - null already checked\r\n        if (!attribute.includes(';') && !attribute.includes(':')) {\r\n            ret = attribute;\r\n        }\r\n        else {\r\n            ret = {};\r\n            //@ts-ignore - null already checked\r\n            attribute.split(';').forEach(val => {\r\n                let sp = val.split(':');\r\n                let len = sp.length;\r\n                let tag = undefined;\r\n                let value = \"\";\r\n                if (len < 2) {\r\n                    return;\r\n                }\r\n                if (len === 2) {\r\n                    tag = sp[0].trim();\r\n                    value = sp[1].trim();\r\n                }\r\n                else if (len > 2) {\r\n                    tag = sp.shift();\r\n                    value = sp.join(\":\").trim();\r\n                }\r\n                if (tag)\r\n                    ret[tag] = value.replace('U+0003B', ';');\r\n            });\r\n        }\r\n    }\r\n    return ret;\r\n}\r\n/**\r\n * Creates object from JSON string\r\n* String must start with { and end with }\r\n *\r\n * @param attribute - attribute value\r\n * @returns object if string passes test, null otherwise\r\n */\r\nexport function parseJsonString(attribute) {\r\n    let out = null;\r\n    if (is(attribute) && attribute.startsWith('{') && attribute.endsWith('}')) {\r\n        try {\r\n            out = jsonify(attribute);\r\n        }\r\n        catch (e) {\r\n            console.error(prepLogString(\"An exception occured\", 'Functions', 'parseJsonString'), e);\r\n        }\r\n        return out;\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Creates object from JSON string\r\n * @param attribute - JSON string\r\n */\r\nexport function jsonify(attribute) {\r\n    return attribute && attribute.length > 0 ? JSON.parse(attribute) : {};\r\n}\r\nexport function getOffsetTop(element) {\r\n    if (!is(element)) {\r\n        return -1;\r\n    }\r\n    let val = element.offsetTop - parseInt(getStyleValue(element, 'margin-top')) - parseInt(getStyleValue(element, 'padding-top')) - parseInt(getStyleValue(element, 'border-top-width'));\r\n    return val < 0 ? element.offsetTop : val;\r\n}\r\nexport function getOffsetLeft(element) {\r\n    if (!is(element)) {\r\n        return -1;\r\n    }\r\n    let val = element.offsetLeft - parseInt(getStyleValue(element, 'margin-left')) - parseInt(getStyleValue(element, 'padding-left')) - parseInt(getStyleValue(element, 'border-left-width'));\r\n    return val < 0 ? element.offsetLeft : val;\r\n}\r\nexport function getIntOrDefault(value, def) {\r\n    let integer = parseInt(value);\r\n    return isNaN(integer) ? def : integer;\r\n}\r\nexport function getStyleValue(target, property) {\r\n    if (!is(target) || !is(property)) {\r\n        return null;\r\n    }\r\n    if (target.currentStyle) {\r\n        return target.currentStyle[property];\r\n    }\r\n    else if (window.getComputedStyle) {\r\n        return window.getComputedStyle(target, null).getPropertyValue(property);\r\n    }\r\n    return null;\r\n}\r\nexport function prepLogString(message, component, functionName) {\r\n    return `[${new Date().toLocaleString()}][${component !== null && component !== void 0 ? component : \"-\"}][${functionName !== null && functionName !== void 0 ? functionName : '-'}][${message}]`;\r\n}\r\nexport function isInRange(value, min, max) {\r\n    return is(value) && value >= min && value <= max;\r\n}\r\nexport function getActiveClass(prefix) {\r\n    return `${prefix !== null && prefix !== void 0 ? prefix : \"\"}-active`;\r\n}\r\nexport function parseAttribute(element, attribute) {\r\n    return are(element, attribute) ? parseAttributeString(element.getAttribute(attribute)) : null;\r\n}\r\n/**\r\n *  Checks whether string value contains synonym of true\r\n * @param value - string to check\r\n */\r\nexport function isStringTrue(value) {\r\n    return is(value) ? ['y', 't', 'true', 'yes'].includes(value.toLowerCase()) : false;\r\n}\r\nexport function boolStringOrDefault(prop, def) {\r\n    return is(prop) ? isStringTrue(prop) : def;\r\n}\r\nexport function getStringOrDefault(value, def) {\r\n    return is(value) ? value.toLowerCase() : def;\r\n}\r\n/**\r\n * Checks whether device supports touch\r\n */\r\nexport function isTouchSupported() {\r\n    return ('ontouchstart' in window) ||\r\n        (navigator.maxTouchPoints > 0) ||\r\n        (navigator.msMaxTouchPoints > 0);\r\n}\r\n/**\r\n * Checks whether value is type of string\r\n * @param {any} value - value to be checked\r\n */\r\nexport function isString(value) {\r\n    return typeof value === 'string';\r\n}\r\n/**\r\n * Replaces mask {prefix} with actual value in the string\r\n * @param {string} value - text containg a mask\r\n * @param {string} prefix - value to be put in place of mask\r\n */\r\nexport function replacePrefix(value, prefix) {\r\n    return !is(value) ? value : value.replace(\"{prefix}\", prefix !== null && prefix !== void 0 ? prefix : \"\");\r\n}\r\n/**\r\n * Generates identifier for Cui element\r\n *\r\n * @param element - Cui element selector\r\n * @returns generated identifier\r\n */\r\nexport function generateCUID(element) {\r\n    let starter = is(element) ? element : \"cui-element\";\r\n    return `${starter}-${COMPONENTS_COUNTER.next().value}`;\r\n}\r\n/**\r\n * Generates random string\r\n */\r\nexport function generateRandomString() {\r\n    let rand = getRandomInt(1, 1000);\r\n    let rand2 = getRandomInt(1, 100);\r\n    return `${Math.floor(Math.random() * rand2)}-${Math.floor(rand)}`;\r\n}\r\n/**\r\n * Generates random integer\r\n * @param min - min number\r\n * @param max - max number\r\n * @returns random integer\r\n */\r\nexport function getRandomInt(min, max) {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n/**\r\n * Registers Element as Cui element, initializes handlers, sets component style to document header and sets $cuid\r\n * @param {any} node - document node\r\n * @param {ICuiComponent[]} components -supported components array\r\n * @param {string[]} attributes - supported attributes array\r\n * @param {CuiUtils} utils - Cui Utils instance\r\n */\r\nexport function registerCuiElement(node, components, attributes, utils) {\r\n    let element = node;\r\n    element.$handlers = {};\r\n    let matching = getMatchingAttributes(node, attributes);\r\n    if (is(matching)) {\r\n        element.$cuid = node.hasAttribute(CUID_ATTRIBUTE) ? node.getAttribute(CUID_ATTRIBUTE) : generateCUID(node.tagName);\r\n        node.setAttribute(CUID_ATTRIBUTE, element.$cuid);\r\n        matching.forEach(match => {\r\n            let component = components.find(c => { return c.attribute === match; });\r\n            if (!is(component)) {\r\n                return;\r\n            }\r\n            try {\r\n                //@ts-ignore - component already checked agains undefined\r\n                utils.styleAppender.append(component.getStyle());\r\n                //@ts-ignore - component already checked agains undefined\r\n                let handler = component.get(node, utils);\r\n                //@ts-ignore - component already checked agains undefined\r\n                element.$handlers[component.attribute] = handler;\r\n                //@ts-ignore - component already checked agains undefined\r\n                element.$handlers[component.attribute].handle(parseAttribute(node, component.attribute));\r\n            }\r\n            catch (e) {\r\n                let attr = matching ? matching.join(\", \") : \"\";\r\n                throw new RegisterElementError(`An error occured during [${attr}] initialization: ${e.message}`);\r\n            }\r\n        });\r\n    }\r\n}\r\nexport function addCuiArgument(element, cuiArg, args) {\r\n    if (!are(cuiArg, args, element)) {\r\n        return false;\r\n    }\r\n    if (element.hasAttribute(cuiArg)) {\r\n        return false;\r\n    }\r\n    let argArr = [];\r\n    enumerateObject(args, (arg, value) => {\r\n        argArr.push(`${arg}: ${value}`);\r\n    });\r\n    element.setAttribute(cuiArg, argArr.join(\"; \"));\r\n    return true;\r\n}\r\nexport function* counter() {\r\n    let idx = 0;\r\n    while (true) {\r\n        let reset = yield idx++;\r\n        if (reset || idx > 200000) {\r\n            idx = 0;\r\n        }\r\n    }\r\n}\r\nexport function getHandlerExtendingOrNull(target, fName) {\r\n    if (!is(target.$handlers)) {\r\n        return null;\r\n    }\r\n    for (let handler in target.$handlers) {\r\n        if (target.$handlers.hasOwnProperty(handler)) {\r\n            let h = target.$handlers[handler];\r\n            if (hasFunction(h, fName))\r\n                return h;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Checks whether property exists on the object and it is a function\r\n * @param obj - object\r\n * @param fName - property name\r\n */\r\nexport function hasFunction(obj, fName) {\r\n    return is(obj[fName]) && typeof obj[fName] === 'function';\r\n}\r\n/**\r\n * Gets closest parent element which is a cUI element\r\n * @param element\r\n */\r\nexport function getParentCuiElement(element) {\r\n    if (!is(element)) {\r\n        return undefined;\r\n    }\r\n    let parent = element.parentElement;\r\n    return is(parent) && is(parent.$cuid) ? parent : getParentCuiElement(parent);\r\n}\r\n/**\r\n * Calculates element height by calculating childerns heights\r\n * @param element\r\n */\r\nexport function getChildrenHeight(element) {\r\n    let height = 0;\r\n    if (!element) {\r\n        return -1;\r\n    }\r\n    Array.from(element.children).forEach((child) => {\r\n        height += child.getBoundingClientRect().height;\r\n    });\r\n    return height > 0 ? height + 4 : height;\r\n}\r\nexport function enumerateObject(object, callback) {\r\n    if (!are(object, callback)) {\r\n        return;\r\n    }\r\n    for (let prop in object) {\r\n        if (object.hasOwnProperty(prop)) {\r\n            callback(prop, object[prop]);\r\n        }\r\n    }\r\n}\r\nexport function round(value, decimalPlaces) {\r\n    const multiplier = Math.pow(10, decimalPlaces);\r\n    return Math.floor(value) / multiplier;\r\n}\r\nexport function calculateNextIndex(val, currentIndex, totalLength) {\r\n    let idx = -1;\r\n    switch (val) {\r\n        case 'prev':\r\n            idx = currentIndex <= 0 ? totalLength - 1 : currentIndex - 1;\r\n            break;\r\n        case 'next':\r\n            idx = currentIndex < totalLength - 1 ? currentIndex + 1 : 0;\r\n            break;\r\n        case 'first':\r\n            idx = 0;\r\n            break;\r\n        case 'last':\r\n            idx = totalLength - 1;\r\n        default:\r\n            idx = getIntOrDefault(val, -1);\r\n            break;\r\n    }\r\n    return idx;\r\n}\r\nexport function getFirstMatching(array, callback) {\r\n    let count = array.length;\r\n    if (!array || count === 0) {\r\n        return undefined;\r\n    }\r\n    for (let idx = 0; idx < count; idx++) {\r\n        if (callback(array[idx], idx)) {\r\n            return array[idx];\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexport function mapObject(input, callback) {\r\n    return callback(input);\r\n}\r\nexport function mapObjectArray(input, callback) {\r\n    return input.map((item) => {\r\n        return mapObject(item, callback);\r\n    });\r\n}\r\n/**\r\n * Delays callback execution by specific time. Callback cannot be called again until previous execution finishes or was cancelled\r\n * @param callback - callback to execute\r\n * @param delayTime - time in ms that execution shall be delayed by\r\n * @returns Cancel callback\r\n */\r\nexport function delay(callback, delayTime) {\r\n    if (!are(callback, delayTime)) {\r\n        throw new Error(\"[delay]: Input arguments are not correct\");\r\n    }\r\n    let id = null;\r\n    return function (...args) {\r\n        if (id === null) {\r\n            id = setTimeout(() => {\r\n                callback(...args);\r\n                id = null;\r\n            }, delayTime);\r\n        }\r\n        return function () {\r\n            if (id !== null) {\r\n                clearTimeout(id);\r\n                id = null;\r\n            }\r\n        };\r\n    };\r\n}\r\n","import { counter } from \"./functions\";\r\nexport const CUID_ATTRIBUTE = \"cuid\";\r\nexport const CLASSES = {\r\n    dark: 'dark',\r\n    animProgress: 'animation-progress',\r\n    print: 'print',\r\n    active: 'active',\r\n    swipingOn: \"swiping-on\",\r\n    selectionOff: \"selection-off\",\r\n};\r\nexport const ICONS = {\r\n    close: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M 1.9999999,1.9999999 18,18\\\"></path><path d=\\\"M 18,1.9999999 1.9999999,18\\\"></path></svg>\",\r\n    accordion: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M 5.0000475,7.4490018 10.000024,12.551028 15,7.4490018\\\"></path></svg>\",\r\n    special_menu: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path class=\\\"menu_handle_2\\\" d=\\\"M 1,10 H 19\\\"></path><path class=\\\"menu_handle_1\\\" d=\\\"M 1,4.8571429 H 19\\\"></path><path  class=\\\"menu_handle_3\\\" d=\\\"M 1,15.142857 H 19\\\"></path></svg>\",\r\n    special_fail: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"special-fail\\\" viewBox=\\\"0 0 100 100\\\" width=\\\"100\\\" height=\\\"100\\\"><path class=\\\"circle\\\" d=\\\"M 50,7.000001 A 43,43 0 0 1 92.999999,50 43,43 0 0 1 50,92.999999 43,43 0 0 1 7.0000011,50 43,43 0 0 1 50,7.000001 Z\\\"></path><path class=\\\"arm_1\\\" d=\\\"M 28.536809,28.536809 71.342023,71.342023\\\"></path><path class=\\\"arm_2\\\" d=\\\"M 71.342023,28.536809 28.536809,71.342023\\\"></path></svg>\",\r\n    special_success: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"special-success\\\" viewBox=\\\"0 0 100 100\\\" width=\\\"100\\\" height=\\\"100\\\"><path class=\\\"circle\\\" d=\\\"M 50,7 A 43,43 0 0 1 93,50 43,43 0 0 1 50,93 43,43 0 0 1 7,50 43,43 0 0 1 50,7 Z\\\"></path><path class=\\\"arm\\\" d=\\\"M 22.988405,48.234784 36.946233,72.410453 75.516456,33.84023\\\"></path></svg>\",\r\n};\r\nexport const COLORS = ['red', 'green', 'blue', 'alpha'];\r\nexport const CSS_APP_BACKGROUND_COLORS = {\r\n    light: '--cui-color-light-app-background',\r\n    dark: '--cui-color-dark-app-background'\r\n};\r\nexport const CSS_COMPONENT_BACKGROUND_COLORS = {\r\n    light: '--cui-color-light-background',\r\n    dark: '--cui-color-dark-background '\r\n};\r\nexport const CSS_COMPONENT_BORDER_COLORS = {\r\n    light: '--cui-color-light-border',\r\n    dark: '--cui-color-dark-border'\r\n};\r\nexport const CSS_THEMES = {\r\n    light: {\r\n        base: '--cui-color-light-base',\r\n        muted: '--cui-color-light-muted',\r\n        active: '--cui-color-light-active'\r\n    },\r\n    dark: {\r\n        base: '--cui-color-dark-base',\r\n        muted: '--cui-color-dark-muted',\r\n        active: '--cui-color-dark-active'\r\n    },\r\n    accent: {\r\n        base: '--cui-color-primary',\r\n        muted: '--cui-color-primary-muted',\r\n        active: '--cui-color-primary-active'\r\n    },\r\n    secondary: {\r\n        base: '--cui-color-secondary',\r\n        muted: '--cui-color-secondary-muted',\r\n        active: '--cui-color-secondary-active'\r\n    },\r\n    success: {\r\n        base: '--cui-color-success',\r\n        muted: '--cui-color-success-muted',\r\n        active: '--cui-color-success-active'\r\n    },\r\n    warning: {\r\n        base: '--cui-color-warning',\r\n        muted: '--cui-color-warning-muted',\r\n        active: '--cui-color-warning-active'\r\n    },\r\n    error: {\r\n        base: '--cui-color-error',\r\n        muted: '--cui-color-error-muted',\r\n        active: '--cui-color-error-active'\r\n    }\r\n};\r\nexport const SCOPE_SELECTOR = \":scope \";\r\nexport const CSS_VARIABLES = {\r\n    fontSize: \"--{prefix}-font-size\",\r\n    lineHeight: \"--{prefix}-line-height\",\r\n    animationTime: \"--{prefix}-animation-time\",\r\n    animationTimeLong: \"--{prefix}-animation-time-long\",\r\n    animationTimeShort: \"--{prefix}-animation-time-short\",\r\n    colorLightAppBackground: \"--{prefix}-color-light-app-background\",\r\n    colorLightBackground: \"--{prefix}-color-light-background\",\r\n    colorLightBorder: \"--{prefix}-color-light-border\",\r\n    colorLightBase: \"--{prefix}-color-light-base\",\r\n    colorLightActive: \"--{prefix}-color-light-active\",\r\n    colorLightMuted: \"--{prefix}-color-light-muted\",\r\n    colorDarkAppBackground: \"--{prefix}-color-dark-app-background\",\r\n    colorDarkBackground: \"--{prefix}-color-dark-background\",\r\n    colorDarkBorder: \"--{prefix}-color-dark-border\",\r\n    colorDarkBase: \"--{prefix}-color-dark-base\",\r\n    colorDarkActive: \"--{prefix}-color-dark-active\",\r\n    colorDarkMuted: \"--{prefix}-color-dark-muted\",\r\n    colorAccent: \"--{prefix}-color-primary\",\r\n    colorAccentActive: \"--{prefix}-color-primary-active\",\r\n    colorAccentMuted: \"--{prefix}-color-primary-muted\",\r\n    colorAccentShade: \"--{prefix}-color-primary-shade\",\r\n    colorAccentShadeDark: \"--{prefix}-color-primary-shade-dark\",\r\n    colorSecondary: \"--{prefix}-color-secondary\",\r\n    colorSecondaryActive: \"--{prefix}-color-secondary-active\",\r\n    colorSecondaryMuted: \"--{prefix}-color-secondary-muted\",\r\n    colorSecondaryShade: \"--{prefix}-color-secondary-shade\",\r\n    colorSecondaryShadeDark: \"--{prefix}-color-secondary-shade-dark\",\r\n    colorWarning: \"--{prefix}-color-warning\",\r\n    colorWarningActive: \"--{prefix}-color-warning-active\",\r\n    colorWarningMuted: \"--{prefix}-color-warning-muted\",\r\n    colorWarningShade: \"--{prefix}-color-warning-shade\",\r\n    colorWarningShadeDark: \"--{prefix}-color-warning-shade-dark\",\r\n    colorSuccess: \"--{prefix}-color-success\",\r\n    colorSuccessActive: \"--{prefix}-color-success-active\",\r\n    colorSuccessMuted: \"--{prefix}-color-success-muted\",\r\n    colorSuccessShade: \"--{prefix}-color-success-shade\",\r\n    colorSuccessShadeDark: \"--{prefix}-color-success-shade-dark\",\r\n    colorError: \"--{prefix}-color-error\",\r\n    colorErrorActive: \"--{prefix}-color-error-active\",\r\n    colorErrorMuted: \"--{prefix}-color-error-muted\",\r\n    colorErrorShade: \"--{prefix}-color-error-shade\",\r\n    colorErrorShadeDark: \"--{prefix}-color-error-shade-dark\",\r\n    inputBackground: \"--{prefix}-input-background-color\",\r\n    colorShade: \"--{prefix}-color-shade\",\r\n    colorShadeDarker: \"--{prefix}-color-shade-darker\",\r\n    colorShadeLight: \"--{prefix}-color-shade-light\",\r\n    colorShadeLighter: \"--{prefix}-color-shade-light-lighter\",\r\n    outline: \"--{prefix}-outline\",\r\n    borderRadius: \"--{prefix}-border-radius\",\r\n    padding: \"--{prefix}-padding\",\r\n    margin: \"--{prefix}-margin\",\r\n    scrollbarWidth: \"--{prefix}-scrollbar-width\",\r\n    componentSpace: \"--{prefix}-component-space\",\r\n    accordionIcon: \"--{prefix}-accordion-icon\"\r\n};\r\nexport class STATICS {\r\n}\r\nSTATICS.logLevel = 'none';\r\nSTATICS.prefix = 'cui';\r\nexport const EVENTS = {\r\n    INSTANCE_INITIALIZED: 'instance-initialized',\r\n    INSTANCE_FINISHED: 'instance-finished',\r\n    RESIZE: \"resize\",\r\n    OPEN: \"open\",\r\n    OPENED: \"opened\",\r\n    CLOSE: \"close\",\r\n    CLOSED: \"closed\",\r\n    TOGGLE: \"toggle\",\r\n    TOGGLED: 'toggled',\r\n    SWITCH: \"switch\",\r\n    SWITCHED: \"switched\",\r\n    ON_SCROLL: \"scroll\",\r\n    TARGET_CHANGE: 'targetchange',\r\n    INTERSECTION: 'intersection',\r\n    KEYDOWN: 'keydown',\r\n    SCROLLBY: 'scrollby',\r\n    WINDOW_CLICK: 'windowclick',\r\n    OFFSET: 'offset',\r\n    PROGRESS_CHANGE: \"progresschange\",\r\n    PROGRESS_CHANGED: \"progresschanged\",\r\n    CHANGE: \"change\",\r\n    CHANGED: \"changed\",\r\n    GLOBAL_MOVE: \"globalmove\",\r\n    MOVE_LOCK: \"movelock\",\r\n    PAUSE: \"pause\",\r\n    PAUSED: \"paused\",\r\n    SORTED: \"sorted\",\r\n    SORT_START: \"sortstart\"\r\n};\r\nexport const OBSERVABLE_SCROLL = \"SCROLL\";\r\nexport const OBSERVABLE_INTERSECTION = \"INTERSECTION\";\r\nexport const COMPONENTS_COUNTER = counter();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _class, _name, _attributeName, _attributeValue;\r\nimport { is, are } from \"./functions\";\r\nexport class CuiClassAction {\r\n    constructor(className) {\r\n        _class.set(this, void 0);\r\n        __classPrivateFieldSet(this, _class, className);\r\n    }\r\n    add(element, utils) {\r\n        if (are(element, __classPrivateFieldGet(this, _class)) && !element.classList.contains(__classPrivateFieldGet(this, _class))) {\r\n            element.classList.add(__classPrivateFieldGet(this, _class));\r\n        }\r\n    }\r\n    remove(element, utils) {\r\n        if (are(element, __classPrivateFieldGet(this, _class)) && element.classList.contains(__classPrivateFieldGet(this, _class))) {\r\n            element.classList.remove(__classPrivateFieldGet(this, _class));\r\n        }\r\n    }\r\n    toggle(element, utils) {\r\n        if (are(element, __classPrivateFieldGet(this, _class))) {\r\n            if (element.classList.contains(__classPrivateFieldGet(this, _class))) {\r\n                element.classList.remove(__classPrivateFieldGet(this, _class));\r\n            }\r\n            else {\r\n                element.classList.add(__classPrivateFieldGet(this, _class));\r\n            }\r\n        }\r\n    }\r\n}\r\n_class = new WeakMap();\r\nexport class CuiInboundAction {\r\n    constructor(name) {\r\n        _name.set(this, void 0);\r\n        __classPrivateFieldSet(this, _name, name);\r\n    }\r\n    add(element, utils) {\r\n        if (!utils) {\r\n            return;\r\n        }\r\n        switch (__classPrivateFieldGet(this, _name)) {\r\n            case 'dark-mode':\r\n                utils.setLightMode('dark');\r\n                break;\r\n            case 'light-mode':\r\n                utils.setLightMode('light');\r\n                break;\r\n        }\r\n    }\r\n    remove(element, utils) {\r\n        if (!utils) {\r\n            return;\r\n        }\r\n        switch (__classPrivateFieldGet(this, _name)) {\r\n            case 'dark-mode':\r\n                utils.setLightMode('light');\r\n                break;\r\n            case 'light-mode':\r\n                utils.setLightMode('dark');\r\n                break;\r\n        }\r\n    }\r\n    toggle(element, utils) {\r\n        if (!utils) {\r\n            return;\r\n        }\r\n        switch (__classPrivateFieldGet(this, _name)) {\r\n            case 'dark-mode':\r\n                this.setDarkMode(utils);\r\n                break;\r\n            case 'light-mode':\r\n                this.setDarkMode(utils);\r\n                break;\r\n        }\r\n    }\r\n    setDarkMode(utils) {\r\n        if (utils.getLightMode() === 'dark') {\r\n            utils.setLightMode('light');\r\n        }\r\n        else {\r\n            utils.setLightMode('dark');\r\n        }\r\n    }\r\n}\r\n_name = new WeakMap();\r\nexport class AttributeAction {\r\n    constructor(attribute) {\r\n        var _a, _b;\r\n        _attributeName.set(this, void 0);\r\n        _attributeValue.set(this, void 0);\r\n        _a = this, _b = this, [({ set value(_c) { __classPrivateFieldSet(_a, _attributeName, _c); } }).value, ({ set value(_c) { __classPrivateFieldSet(_b, _attributeValue, _c); } }).value] = attribute.split(',');\r\n    }\r\n    add(element, utils) {\r\n        if (!are(element, __classPrivateFieldGet(this, _attributeName), __classPrivateFieldGet(this, _attributeValue))) {\r\n            return;\r\n        }\r\n        element.setAttribute(__classPrivateFieldGet(this, _attributeName), __classPrivateFieldGet(this, _attributeValue));\r\n    }\r\n    remove(element, utils) {\r\n        if (!are(element, __classPrivateFieldGet(this, _attributeName), __classPrivateFieldGet(this, _attributeValue))) {\r\n            return;\r\n        }\r\n        if (element.hasAttribute(__classPrivateFieldGet(this, _attributeName))) {\r\n            element.removeAttribute(__classPrivateFieldGet(this, _attributeName));\r\n        }\r\n    }\r\n    toggle(element, utils) {\r\n        if (!are(element, __classPrivateFieldGet(this, _attributeName), __classPrivateFieldGet(this, _attributeValue))) {\r\n            return;\r\n        }\r\n        if (element.hasAttribute(__classPrivateFieldGet(this, _attributeName))) {\r\n            element.removeAttribute(__classPrivateFieldGet(this, _attributeName));\r\n        }\r\n        else {\r\n            element.setAttribute(__classPrivateFieldGet(this, _attributeName), __classPrivateFieldGet(this, _attributeValue));\r\n        }\r\n    }\r\n}\r\n_attributeName = new WeakMap(), _attributeValue = new WeakMap();\r\nexport class DummyAction {\r\n    constructor() {\r\n    }\r\n    add(element, utils) {\r\n    }\r\n    remove(element, utils) {\r\n    }\r\n    toggle(element, utils) {\r\n    }\r\n}\r\nexport class CuiActionsFatory {\r\n    static get(value) {\r\n        if (!is(value)) {\r\n            return new DummyAction();\r\n        }\r\n        let indicator = value[0];\r\n        switch (indicator) {\r\n            case '.':\r\n                return new CuiClassAction(value.substring(1));\r\n            case '~':\r\n                return new CuiInboundAction(value.substring(1));\r\n            case \"&\":\r\n                return new AttributeAction(value.substring(1));\r\n            default:\r\n                return new CuiClassAction(value);\r\n        }\r\n    }\r\n}\r\nexport class CuiActionsListFactory {\r\n    static get(value) {\r\n        if (!is(value)) {\r\n            return [];\r\n        }\r\n        const split = value.split(',');\r\n        return split.map(single => {\r\n            return CuiActionsFatory.get(single.trim());\r\n        });\r\n    }\r\n}\r\n","export class ErrorBase extends Error {\r\n    constructor(name, message) {\r\n        super(message);\r\n        Object.setPrototypeOf(this, new.target.prototype);\r\n        this.name = name;\r\n    }\r\n}\r\nexport class ItemNotFoundError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"ItemNotFoundError\", message);\r\n    }\r\n}\r\nexport class ArgumentError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"ArgumentError\", message);\r\n    }\r\n}\r\nexport class CuiBusError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"ArgumentError\", message);\r\n    }\r\n}\r\nexport class CuiInstanceInitError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"CuiInstanceInitError\", message);\r\n    }\r\n}\r\nexport class CuiScrollSpyOutOfRangeError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"CuiScrollSpyOutOfRangeError\", message);\r\n    }\r\n}\r\nexport class RegisterElementError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"RegisterElementError\", message);\r\n    }\r\n}\r\nexport class AnimatorError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"AnimatorError\", message);\r\n    }\r\n}\r\nexport class CSSVariableError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"CSSVariableError\", message);\r\n    }\r\n}\r\nexport class CuiColorError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"CuiColorError\", message);\r\n    }\r\n}\r\nexport class CuiPositionError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"CuiPositionError\", message);\r\n    }\r\n}\r\n","export class CuiLogger {\r\n    constructor(name, level) {\r\n        this.level = level;\r\n        this.component = name;\r\n        this.id = \"-\";\r\n    }\r\n    setLevel(level) {\r\n        this.level = level;\r\n    }\r\n    setId(id) {\r\n        this.id = id;\r\n    }\r\n    debug(message, functionName) {\r\n        if (this.level === 'debug') {\r\n            console.log(this.prepString(message, \"debug\", functionName));\r\n        }\r\n    }\r\n    error(message, functionName) {\r\n        if (this.level === 'error' || this.level === 'debug' || this.level === 'warning')\r\n            console.error(this.prepString(message, \"error\", functionName));\r\n    }\r\n    warning(message, functionName) {\r\n        if (this.level === 'warning' || this.level === 'debug')\r\n            console.warn(this.prepString(message, \"warning\", functionName));\r\n    }\r\n    exception(e, functionName) {\r\n        console.error(this.prepString(`An exception occured: ${e.name}: ${e.message}`, \"exception\", functionName));\r\n        if (this.level === 'debug')\r\n            console.error(e.stack);\r\n    }\r\n    performance(callback, functionName) {\r\n        if (this.level !== 'debug') {\r\n            return;\r\n        }\r\n        let start = Date.now();\r\n        callback();\r\n        console.log(this.prepString(`Performance measure: ${Date.now() - start}ms`, \"performance\", functionName));\r\n    }\r\n    prepString(message, level, functionName) {\r\n        return `[${new Date().toLocaleString()}][${level}][${this.component}][${functionName !== null && functionName !== void 0 ? functionName : '-'}][${this.id}][${message}]`;\r\n    }\r\n}\r\n","import { CuiLogger } from \"../utils/logger\";\r\nimport { STATICS } from \"../utils/statics\";\r\n/**\r\n *\r\n */\r\nexport class CuiLoggerFactory {\r\n    /**\r\n     * Gets new instance of component focused logger\r\n     * @param name - component name\r\n     */\r\n    static get(name, logLevel) {\r\n        return new CuiLogger(name, logLevel !== null && logLevel !== void 0 ? logLevel : STATICS.logLevel);\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _id, _classes, _attributes, _tag;\r\nimport { is, enumerateObject } from \"../utils/functions\";\r\nexport class ElementBuilder {\r\n    constructor(tag) {\r\n        _id.set(this, void 0);\r\n        _classes.set(this, void 0);\r\n        _attributes.set(this, void 0);\r\n        _tag.set(this, void 0);\r\n        __classPrivateFieldSet(this, _tag, tag);\r\n        __classPrivateFieldSet(this, _classes, []);\r\n        __classPrivateFieldSet(this, _attributes, undefined);\r\n        __classPrivateFieldSet(this, _id, undefined);\r\n    }\r\n    setId(id) {\r\n        __classPrivateFieldSet(this, _id, id);\r\n        return this;\r\n    }\r\n    setClasses(...classList) {\r\n        __classPrivateFieldSet(this, _classes, classList);\r\n        return this;\r\n    }\r\n    setAttributes(attributes) {\r\n        __classPrivateFieldSet(this, _attributes, attributes);\r\n        return this;\r\n    }\r\n    build(innerHTML) {\r\n        let element = document.createElement(__classPrivateFieldGet(this, _tag));\r\n        if (is(__classPrivateFieldGet(this, _id))) {\r\n            // @ts-ignore id is checked\r\n            element.id = __classPrivateFieldGet(this, _id);\r\n        }\r\n        if (is(__classPrivateFieldGet(this, _classes))) {\r\n            element.classList.add(...__classPrivateFieldGet(this, _classes));\r\n        }\r\n        if (is(__classPrivateFieldGet(this, _attributes))) {\r\n            // @ts-ignore attributes are checked\r\n            enumerateObject(__classPrivateFieldGet(this, _attributes), (attr, value) => {\r\n                element.setAttribute(attr, value);\r\n            });\r\n        }\r\n        if (is(innerHTML)) {\r\n            // @ts-ignore innerHTML checked already\r\n            element.innerHTML = innerHTML;\r\n        }\r\n        return element;\r\n    }\r\n}\r\n_id = new WeakMap(), _classes = new WeakMap(), _attributes = new WeakMap(), _tag = new WeakMap();\r\n","export const SWIPE_ANIMATIONS_DEFINITIONS = {\r\n    \"slide\": {\r\n        current: {\r\n            left: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 0,\r\n                        to: -100,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            },\r\n            right: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 0,\r\n                        to: 100,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        previous: {\r\n            left: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 100,\r\n                        to: 0,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            },\r\n            right: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: -100,\r\n                        to: 0,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    fade: {\r\n        current: {\r\n            left: {\r\n                opacity: {\r\n                    from: 1,\r\n                    to: 0\r\n                }\r\n            },\r\n            right: {\r\n                opacity: {\r\n                    from: 1,\r\n                    to: 0\r\n                }\r\n            }\r\n        },\r\n        previous: {\r\n            left: {\r\n                opacity: {\r\n                    from: 0,\r\n                    to: 1\r\n                }\r\n            },\r\n            right: {\r\n                opacity: {\r\n                    from: 0,\r\n                    to: 1\r\n                }\r\n            }\r\n        }\r\n    },\r\n    push: {\r\n        current: {\r\n            left: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 0,\r\n                        to: -10,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            },\r\n            right: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 0,\r\n                        to: 10,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        previous: {\r\n            left: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 100,\r\n                        to: 0,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            },\r\n            right: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: -100,\r\n                        to: 0,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _element, _onEvent, _isLocked, _isAttached, _preventDefault, _target;\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiMoveEventListener {\r\n    constructor(element) {\r\n        _element.set(this, void 0);\r\n        _onEvent.set(this, void 0);\r\n        _isLocked.set(this, void 0);\r\n        _isAttached.set(this, void 0);\r\n        _preventDefault.set(this, void 0);\r\n        _target.set(this, void 0);\r\n        __classPrivateFieldSet(this, _isLocked, false);\r\n        __classPrivateFieldSet(this, _element, element !== null && element !== void 0 ? element : document.body);\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n        __classPrivateFieldSet(this, _preventDefault, false);\r\n        __classPrivateFieldSet(this, _onEvent, undefined);\r\n        __classPrivateFieldSet(this, _target, undefined);\r\n        this.onMouseDown = this.onMouseDown.bind(this);\r\n        this.onMouseUp = this.onMouseUp.bind(this);\r\n        this.onMouseMove = this.onMouseMove.bind(this);\r\n        this.onTouchStart = this.onTouchStart.bind(this);\r\n        this.onTouchEnd = this.onTouchEnd.bind(this);\r\n        this.onTouchMove = this.onTouchMove.bind(this);\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _onEvent, callback);\r\n    }\r\n    setTarget(element) {\r\n        __classPrivateFieldSet(this, _target, element);\r\n    }\r\n    isInProgress() {\r\n        return __classPrivateFieldGet(this, _isLocked);\r\n    }\r\n    preventDefault(flag) {\r\n        __classPrivateFieldSet(this, _preventDefault, flag);\r\n    }\r\n    attach() {\r\n        if (__classPrivateFieldGet(this, _isAttached)) {\r\n            return;\r\n        }\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).addEventListener('mousedown', this.onMouseDown, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).addEventListener('mouseup', this.onMouseUp, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).addEventListener('mousemove', this.onMouseMove, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).addEventListener('touchstart', this.onTouchStart, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).addEventListener('touchend', this.onTouchEnd, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).addEventListener('touchmove', this.onTouchMove, { passive: false });\r\n        __classPrivateFieldSet(this, _isAttached, true);\r\n    }\r\n    detach() {\r\n        console.log(\"On detach\");\r\n        if (!__classPrivateFieldGet(this, _isAttached)) {\r\n            return;\r\n        }\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).removeEventListener('mousedown', this.onMouseDown, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).removeEventListener('mouseup', this.onMouseUp, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).removeEventListener('mousemove', this.onMouseMove, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).removeEventListener('touchstart', this.onTouchStart, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).removeEventListener('touchend', this.onTouchEnd, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).removeEventListener('touchmove', this.onTouchMove, { passive: false });\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n    }\r\n    isAttached() {\r\n        return __classPrivateFieldGet(this, _isAttached);\r\n    }\r\n    onMouseDown(ev) {\r\n        if (__classPrivateFieldGet(this, _isLocked)) {\r\n            return;\r\n        }\r\n        if (__classPrivateFieldGet(this, _target) && !__classPrivateFieldGet(this, _target).contains(ev.target)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _isLocked, true);\r\n        this.publishMouseEvent(\"down\", ev);\r\n    }\r\n    onMouseUp(ev) {\r\n        if (!__classPrivateFieldGet(this, _isLocked)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _isLocked, false);\r\n        this.publishMouseEvent(\"up\", ev);\r\n    }\r\n    onMouseMove(ev) {\r\n        if (__classPrivateFieldGet(this, _isLocked)) {\r\n            this.publishMouseEvent(\"move\", ev);\r\n        }\r\n    }\r\n    onTouchStart(ev) {\r\n        if (__classPrivateFieldGet(this, _isLocked)) {\r\n            return;\r\n        }\r\n        if (__classPrivateFieldGet(this, _target) && !__classPrivateFieldGet(this, _target).contains(ev.target)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _isLocked, true);\r\n        this.publishTouchEvent('down', ev);\r\n    }\r\n    onTouchEnd(ev) {\r\n        if (!__classPrivateFieldGet(this, _isLocked)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _isLocked, false);\r\n        this.publishTouchEvent('up', ev);\r\n    }\r\n    onTouchMove(ev) {\r\n        if (__classPrivateFieldGet(this, _isLocked)) {\r\n            this.publishTouchEvent('move', ev);\r\n        }\r\n    }\r\n    publishMouseEvent(type, ev) {\r\n        if (__classPrivateFieldGet(this, _preventDefault) && ev.cancelable) {\r\n            ev.preventDefault();\r\n        }\r\n        if (!is(__classPrivateFieldGet(this, _onEvent))) {\r\n            return;\r\n        }\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _onEvent).call(this, {\r\n            type: type,\r\n            x: ev.clientX,\r\n            y: ev.clientY,\r\n            moveX: ev.movementX,\r\n            moveY: ev.movementY,\r\n            target: ev.target,\r\n            event: ev\r\n        });\r\n    }\r\n    publishTouchEvent(type, ev) {\r\n        if (__classPrivateFieldGet(this, _preventDefault) && ev.cancelable)\r\n            ev.preventDefault();\r\n        if (!is(__classPrivateFieldGet(this, _onEvent))) {\r\n            return;\r\n        }\r\n        let touch = null;\r\n        if (ev.touches.length > 0) {\r\n            touch = ev.touches[0];\r\n        }\r\n        else if (ev.changedTouches.length > 0) {\r\n            touch = ev.changedTouches[0];\r\n        }\r\n        // @ts-ignore - already checked\r\n        __classPrivateFieldGet(this, _onEvent).call(this, {\r\n            event: ev,\r\n            type: type,\r\n            target: ev.target,\r\n            //@ts-ignore\r\n            x: is(touch) ? touch.clientX : -1,\r\n            //@ts-ignore\r\n            y: is(touch) ? touch.clientY : -1,\r\n            moveX: -1,\r\n            moveY: -1\r\n        });\r\n    }\r\n}\r\n_element = new WeakMap(), _onEvent = new WeakMap(), _isLocked = new WeakMap(), _isAttached = new WeakMap(), _preventDefault = new WeakMap(), _target = new WeakMap();\r\n","export class CuiSetup {\r\n    constructor() {\r\n        this.autoLightMode = false;\r\n        this.scrollThreshold = 20;\r\n        this.resizeThreshold = 20;\r\n        this.prefix = \"cui\";\r\n        this.plugins = {};\r\n    }\r\n    fromInit(init) {\r\n        var _a;\r\n        this.prefix = (_a = init.prefix) !== null && _a !== void 0 ? _a : \"cui\";\r\n        this.logLevel = init.logLevel;\r\n        this.cacheSize = init.cacheSize;\r\n        this.autoLightMode = init.autoLightMode;\r\n        this.animationTime = init.animationTime;\r\n        this.animationTimeShort = init.animationTimeShort;\r\n        this.animationTimeLong = init.animationTimeLong;\r\n        this.scrollThreshold = init.scrollThreshold;\r\n        this.resizeThreshold = init.resizeThreshold;\r\n        return this;\r\n    }\r\n}\r\nexport class CuiSetupInit {\r\n    constructor() {\r\n        this.prefix = 'cui';\r\n        this.app = '$cui';\r\n        this.logLevel = 'warning';\r\n        this.interaction = 'async';\r\n        this.animationTime = 300;\r\n        this.animationTimeShort = 150;\r\n        this.animationTimeLong = 500;\r\n        this.cacheSize = 500;\r\n        this.autoLightMode = false;\r\n        this.scrollThreshold = 20;\r\n        this.resizeThreshold = 20;\r\n        this.root = document.body;\r\n        this.busSetup = undefined;\r\n        this.development = undefined;\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _observer, _options, _element, _components, _attributes, _utils, _queryString, _isObserving, _observer_1, _element_1, _disabled, _options_1;\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\nimport { is, are, registerCuiElement, joinAttributesForQuery, parseAttribute } from \"../utils/functions\";\r\nexport class CuiMutationObserver {\r\n    constructor(element, utils) {\r\n        _observer.set(this, void 0);\r\n        _options.set(this, void 0);\r\n        _element.set(this, void 0);\r\n        _components.set(this, void 0);\r\n        _attributes.set(this, void 0);\r\n        _utils.set(this, void 0);\r\n        _queryString.set(this, void 0);\r\n        __classPrivateFieldSet(this, _observer, undefined);\r\n        this.plugins = undefined;\r\n        __classPrivateFieldSet(this, _options, undefined);\r\n        __classPrivateFieldSet(this, _element, element);\r\n        this._log = CuiLoggerFactory.get('CuiMutationObserver');\r\n        __classPrivateFieldSet(this, _components, []);\r\n        __classPrivateFieldSet(this, _attributes, []);\r\n        __classPrivateFieldSet(this, _utils, utils);\r\n        __classPrivateFieldSet(this, _queryString, \"\");\r\n    }\r\n    setPlugins(plugins) {\r\n        this.plugins = plugins;\r\n        return this;\r\n    }\r\n    setComponents(components) {\r\n        __classPrivateFieldSet(this, _components, components);\r\n        return this;\r\n    }\r\n    setAttributes(attributes) {\r\n        __classPrivateFieldSet(this, _options, {\r\n            attributes: true,\r\n            subtree: true,\r\n            childList: true,\r\n            attributeFilter: attributes\r\n        });\r\n        __classPrivateFieldSet(this, _attributes, attributes);\r\n        __classPrivateFieldSet(this, _queryString, joinAttributesForQuery(attributes));\r\n        return this;\r\n    }\r\n    start() {\r\n        this._log.debug(\"Starting\");\r\n        if (!__classPrivateFieldGet(this, _options)) {\r\n            this._log.error(\"Cannot start - options are not defined\");\r\n            return this;\r\n        }\r\n        __classPrivateFieldSet(this, _observer, new MutationObserver(this.mutationCallback.bind(this)));\r\n        __classPrivateFieldGet(this, _observer).observe(__classPrivateFieldGet(this, _element), __classPrivateFieldGet(this, _options));\r\n        this._log.debug(\"Started\");\r\n        return this;\r\n    }\r\n    stop() {\r\n        this._log.debug(\"Stopping\");\r\n        if (!__classPrivateFieldGet(this, _observer)) {\r\n            this._log.debug(\"Observer not available\");\r\n            return this;\r\n        }\r\n        __classPrivateFieldGet(this, _observer).disconnect();\r\n        __classPrivateFieldSet(this, _observer, undefined);\r\n        this._log.debug(\"Stopped\");\r\n        return this;\r\n    }\r\n    mutationCallback(mutations, observer) {\r\n        mutations.forEach((mutation) => {\r\n            switch (mutation.type) {\r\n                case 'attributes':\r\n                    const item = mutation.target;\r\n                    if (are(mutation.attributeName, item)) {\r\n                        // @ts-ignore - attribute name is checked\r\n                        if (are(item.$handlers, item.$handlers[mutation.attributeName])) {\r\n                            // @ts-ignore - attribute name is checked\r\n                            item.$handlers[mutation.attributeName].refresh(parseAttribute(item, mutation.attributeName));\r\n                        }\r\n                    }\r\n                    else {\r\n                        this._log.error(\"Mutation attribute doesn't not exisist\");\r\n                    }\r\n                    break;\r\n                case 'childList':\r\n                    this.handleChildListMutation(mutation);\r\n                    break;\r\n            }\r\n            if (is(this.plugins)) {\r\n                // @ts-ignore plugins is defined here\r\n                this.plugins.onMutation(mutation).then(() => {\r\n                    //\r\n                });\r\n            }\r\n        });\r\n    }\r\n    handleChildListMutation(mutation) {\r\n        const addedLen = mutation.addedNodes.length;\r\n        const removedLen = mutation.removedNodes.length;\r\n        if (addedLen > 0) {\r\n            this._log.debug(\"Registering added nodes: \" + addedLen);\r\n            this.handleAddedNodes(mutation.addedNodes);\r\n        }\r\n        else if (removedLen > 0) {\r\n            this._log.debug(\"Removing nodes: \" + removedLen);\r\n            this.handleRemovedNodes(mutation.removedNodes);\r\n        }\r\n    }\r\n    handleAddedNodes(nodes) {\r\n        nodes.forEach((node) => {\r\n            try {\r\n                registerCuiElement(node, __classPrivateFieldGet(this, _components), __classPrivateFieldGet(this, _attributes), __classPrivateFieldGet(this, _utils));\r\n                let childrens = node.hasChildNodes() ? node.querySelectorAll(__classPrivateFieldGet(this, _queryString)) : null;\r\n                if (is(childrens)) {\r\n                    childrens.forEach((child) => {\r\n                        registerCuiElement(child, __classPrivateFieldGet(this, _components), __classPrivateFieldGet(this, _attributes), __classPrivateFieldGet(this, _utils));\r\n                    });\r\n                }\r\n            }\r\n            catch (e) {\r\n                this._log.exception(e);\r\n            }\r\n        });\r\n    }\r\n    handleRemovedNodes(nodes) {\r\n        nodes.forEach((node) => {\r\n            this.destroySingleElement(node);\r\n            let childrens = node.hasChildNodes() ? node.querySelectorAll(__classPrivateFieldGet(this, _queryString)) : null;\r\n            if (is(childrens)) {\r\n                childrens.forEach((child) => {\r\n                    this.destroySingleElement(child);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    destroySingleElement(node) {\r\n        let element = node;\r\n        if (element.$handlers) {\r\n            for (let name in element.$handlers) {\r\n                if (element.$handlers.hasOwnProperty(name)) {\r\n                    try {\r\n                        element.$handlers[name].destroy();\r\n                    }\r\n                    catch (e) {\r\n                        this._log.exception(e, 'remove - ' + name);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n_observer = new WeakMap(), _options = new WeakMap(), _element = new WeakMap(), _components = new WeakMap(), _attributes = new WeakMap(), _utils = new WeakMap(), _queryString = new WeakMap();\r\nexport class CuiComponentMutationHandler {\r\n    constructor(target) {\r\n        _isObserving.set(this, void 0);\r\n        _observer_1.set(this, void 0);\r\n        _element_1.set(this, void 0);\r\n        _disabled.set(this, void 0);\r\n        _options_1.set(this, {\r\n            childList: true,\r\n            subtree: true\r\n        });\r\n        __classPrivateFieldSet(this, _observer_1, undefined);\r\n        __classPrivateFieldSet(this, _disabled, false);\r\n        __classPrivateFieldSet(this, _isObserving, false);\r\n        __classPrivateFieldSet(this, _element_1, target);\r\n    }\r\n    observe() {\r\n        if (!__classPrivateFieldGet(this, _isObserving) && !__classPrivateFieldGet(this, _disabled) && __classPrivateFieldGet(this, _observer_1)) {\r\n            __classPrivateFieldGet(this, _observer_1).observe(__classPrivateFieldGet(this, _element_1), __classPrivateFieldGet(this, _options_1));\r\n            __classPrivateFieldSet(this, _isObserving, true);\r\n        }\r\n    }\r\n    unobserve() {\r\n        if (__classPrivateFieldGet(this, _isObserving) && __classPrivateFieldGet(this, _observer_1)) {\r\n            __classPrivateFieldGet(this, _observer_1).disconnect();\r\n            __classPrivateFieldSet(this, _isObserving, false);\r\n        }\r\n    }\r\n    isObserving() {\r\n        return __classPrivateFieldGet(this, _isObserving);\r\n    }\r\n    disable(flag) {\r\n        __classPrivateFieldSet(this, _disabled, flag);\r\n        if (__classPrivateFieldGet(this, _disabled)) {\r\n            this.unobserve();\r\n        }\r\n    }\r\n    onMutation(callback) {\r\n        if (__classPrivateFieldGet(this, _isObserving))\r\n            this.unobserve();\r\n        __classPrivateFieldSet(this, _observer_1, new MutationObserver(callback));\r\n    }\r\n}\r\n_isObserving = new WeakMap(), _observer_1 = new WeakMap(), _element_1 = new WeakMap(), _disabled = new WeakMap(), _options_1 = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _interactions;\r\nimport { CLASSES } from \"../utils/statics\";\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiActionsHelper {\r\n    constructor(interactions) {\r\n        _interactions.set(this, void 0);\r\n        __classPrivateFieldSet(this, _interactions, interactions);\r\n    }\r\n    performAction(target, action, timeout, callback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise((resolve) => {\r\n                __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                    action.add(target);\r\n                    target.classList.add(CLASSES.animProgress);\r\n                    setTimeout(() => {\r\n                        __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                            action.remove(target);\r\n                            target.classList.remove(CLASSES.animProgress);\r\n                            if (callback)\r\n                                callback();\r\n                            resolve(true);\r\n                        }, null);\r\n                    }, timeout);\r\n                }, null);\r\n            });\r\n        });\r\n    }\r\n    performActions(target, actions, timeout, callback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise((resolve) => {\r\n                __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                    actions.forEach(x => x.add(target));\r\n                    target.classList.add(CLASSES.animProgress);\r\n                    setTimeout(() => {\r\n                        __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                            actions.forEach(x => x.remove(target));\r\n                            target.classList.remove(CLASSES.animProgress);\r\n                            if (callback)\r\n                                callback();\r\n                            resolve(true);\r\n                        }, null);\r\n                    }, timeout);\r\n                }, null);\r\n            });\r\n        });\r\n    }\r\n    performSwitchAction(inTarget, outTarget, inAction, outAction, onFinish, timeout) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise((resolve) => {\r\n                __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                    inAction.forEach(x => x.add(inTarget));\r\n                    inTarget.classList.add(CLASSES.animProgress);\r\n                    if (is(outTarget)) {\r\n                        //@ts-ignore\r\n                        outAction.forEach(x => x.add(outTarget));\r\n                        //@ts-ignore\r\n                        outTarget.classList.add(CLASSES.animProgress);\r\n                    }\r\n                    setTimeout(() => {\r\n                        __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                            inAction.forEach(x => x.remove(inTarget));\r\n                            inTarget.classList.remove(CLASSES.animProgress);\r\n                            if (is(outTarget)) {\r\n                                //@ts-ignore\r\n                                outAction.forEach(x => x.remove(outTarget));\r\n                                //@ts-ignore\r\n                                outTarget.classList.remove(CLASSES.animProgress);\r\n                            }\r\n                            onFinish();\r\n                            resolve(true);\r\n                        }, null);\r\n                    }, timeout);\r\n                }, null);\r\n            });\r\n        });\r\n    }\r\n}\r\n_interactions = new WeakMap();\r\n","export const CUI_LIGHT_COMPONENTS_VERSION = \"0.2.6\";\r\n","export const CUI_LIGHT_PLUGINS_VERSION = \"0.2.5\";\r\n","export const CUI_CORE_VERSION = \"0.2.7\";\r\n","export class AriaAttributes {\r\n    static setLabel(element, label) {\r\n        if (!element.hasAttribute('aria-label')) {\r\n            element.setAttribute('aria-label', label);\r\n        }\r\n    }\r\n    static setAria(element, attr, value) {\r\n        if (!element.hasAttribute(attr)) {\r\n            element.setAttribute(attr, value);\r\n        }\r\n    }\r\n    static removeAria(element, attr) {\r\n        if (element.hasAttribute(attr)) {\r\n            element.removeAttribute(attr);\r\n        }\r\n    }\r\n}\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _interactions, _emittedEvents, _attribute, _openEventId, _closeEventId, _keyCloseEventId, _openAct, _closeAct, _mutionHandler;\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\nimport { CuiComponentMutationHandler } from \"../observers/mutations\";\r\nimport { AriaAttributes } from \"../utils/aria\";\r\nimport { CuiActionsHelper } from \"../helpers/helpers\";\r\nimport { CuiActionsListFactory } from \"../utils/actions\";\r\nimport { is, getActiveClass, clone } from \"../utils/functions\";\r\nimport { EVENTS } from \"../utils/statics\";\r\nexport class ComponentHelper {\r\n    constructor(interactions) {\r\n        _interactions.set(this, void 0);\r\n        __classPrivateFieldSet(this, _interactions, interactions);\r\n    }\r\n    hasClass(cls, element) {\r\n        return cls && element.classList.contains(cls) ? true : false;\r\n    }\r\n    setClass(cls, element) {\r\n        this.setClasses([cls], element);\r\n    }\r\n    setClasses(classes, element) {\r\n        if (element) {\r\n            element.classList.add(...classes);\r\n        }\r\n    }\r\n    setClassesAs(element, ...classes) {\r\n        __classPrivateFieldGet(this, _interactions).mutate(this.setClasses, this, classes, element);\r\n    }\r\n    removeClass(cls, element) {\r\n        this.removeClasses([cls], element);\r\n    }\r\n    removeClasses(classes, element) {\r\n        if (element) {\r\n            element.classList.remove(...classes);\r\n        }\r\n    }\r\n    removeClassesAs(element, ...classes) {\r\n        __classPrivateFieldGet(this, _interactions).mutate(this.removeClasses, this, classes, element);\r\n    }\r\n    removeAttribute(attributeName, element) {\r\n        if (element && element.hasAttribute(attributeName))\r\n            element.removeAttribute(attributeName);\r\n    }\r\n    setStyle(element, property, value) {\r\n        if (element && element[\"style\"] && is(value)) {\r\n            element.style[property] = value;\r\n        }\r\n    }\r\n}\r\n_interactions = new WeakMap();\r\nexport class CuiComponentBase {\r\n    constructor(componentName, element, utils) {\r\n        _emittedEvents.set(this, void 0);\r\n        this._log = CuiLoggerFactory.get(componentName);\r\n        this.utils = utils;\r\n        this.element = element;\r\n        this.cuid = element.$cuid;\r\n        this.isLocked = false;\r\n        this._log.setId(this.cuid);\r\n        this.activeClassName = getActiveClass(utils.setup.prefix);\r\n        this.helper = new ComponentHelper(utils.interactions);\r\n        __classPrivateFieldSet(this, _emittedEvents, []);\r\n        this.componentName = componentName;\r\n    }\r\n    mutate(callback, ...args) {\r\n        this.utils.interactions.mutate(callback, this, ...args);\r\n    }\r\n    fetch(callback, ...args) {\r\n        this.utils.interactions.fetch(callback, this, ...args);\r\n    }\r\n    getEventName(name) {\r\n        return [name, this.cuid].join('-');\r\n    }\r\n    /**\r\n     * Emits event using passed data and cuid of the element\r\n     * NOTE: Don't use it to emit global events\r\n     * @param event Event name\r\n     * @param data Data to emit\r\n     */\r\n    emitEvent(event, ...data) {\r\n        if (!__classPrivateFieldGet(this, _emittedEvents).includes(event))\r\n            __classPrivateFieldGet(this, _emittedEvents).push(event);\r\n        this.utils.bus.emit(event, this.cuid, ...data);\r\n    }\r\n    onEvent(event, callback) {\r\n        return this.utils.bus.on(event, callback, this.element);\r\n    }\r\n    detachEvent(event, id) {\r\n        if (id != null) {\r\n            this.utils.bus.detach(event, id);\r\n            id = \"\";\r\n        }\r\n    }\r\n    getId() {\r\n        return this.cuid;\r\n    }\r\n    checkLockAndWarn(fName) {\r\n        if (this.isLocked) {\r\n            this._log.warning(\"Component is locked\", fName);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Helper which checks whether element has an active flag set\r\n     */\r\n    isActive() {\r\n        return this.element.classList.contains(this.activeClassName);\r\n    }\r\n    detachEmiitedEvents() {\r\n        __classPrivateFieldGet(this, _emittedEvents).forEach(event => {\r\n            this.utils.bus.detachByCuid(event, this.cuid);\r\n            this._log.debug(\"Detaching event: \" + event + \" on component delete\");\r\n        });\r\n    }\r\n    registerInDebug() {\r\n        this.utils.development.registerElement(this.element, this.cuid, this.componentName);\r\n    }\r\n    removeFromDebug() {\r\n        this.utils.development.unregisterElement(this.cuid, this.componentName);\r\n    }\r\n    setDebugProperty(name, value) {\r\n        this.utils.development.setProperty(this.cuid, this.componentName, name, value);\r\n    }\r\n    logInfo(message, functionName) {\r\n        this._log.debug(message, functionName);\r\n        this.utils.development.pushState(this.cuid, this.componentName, \"info\", message, functionName);\r\n    }\r\n    logWarning(message, functionName) {\r\n        this._log.warning(message, functionName);\r\n        this.utils.development.pushState(this.cuid, this.componentName, \"warning\", message, functionName);\r\n    }\r\n    pushDebugState(type, message, functionName) {\r\n        this.utils.development.pushState(this.cuid, this.componentName, type, message, functionName);\r\n    }\r\n    logError(message, functionName, error) {\r\n        this._log.error(message, functionName);\r\n        if (error) {\r\n            this._log.exception(error, functionName);\r\n        }\r\n        this.utils.development.pushState(this.cuid, this.componentName, \"error\", message, functionName);\r\n    }\r\n}\r\n_emittedEvents = new WeakMap();\r\nexport class CuiHandlerBase extends CuiComponentBase {\r\n    constructor(componentName, element, attribute, args, utils) {\r\n        super(componentName, element, utils);\r\n        _attribute.set(this, void 0);\r\n        this.args = args;\r\n        this.actionsHelper = new CuiActionsHelper(utils.interactions);\r\n        this.prevArgs = undefined;\r\n        this.isInitialized = false;\r\n        __classPrivateFieldSet(this, _attribute, attribute);\r\n    }\r\n    handle(args) {\r\n        this.logInfo(\"Init\", 'handle');\r\n        if (this.isInitialized) {\r\n            this.logWarning(\"Trying to initialize component again\", 'handle');\r\n            return;\r\n        }\r\n        this.args.parse(args);\r\n        if (!this.element.classList.contains(__classPrivateFieldGet(this, _attribute))) {\r\n            this.element.classList.add(__classPrivateFieldGet(this, _attribute));\r\n        }\r\n        this.registerInDebug();\r\n        this.onHandle();\r\n        this.isInitialized = true;\r\n    }\r\n    refresh(args) {\r\n        this.logInfo(\"Update\", 'refresh');\r\n        if (!this.isInitialized) {\r\n            this.logError(\"Cannot update not initialized component\", 'refresh');\r\n            return;\r\n        }\r\n        this.prevArgs = clone(this.args);\r\n        this.args.parse(args);\r\n        this.pushDebugState(\"info\", \"Component update\", 'refresh');\r\n        this.onRefresh();\r\n    }\r\n    destroy() {\r\n        this.logInfo(\"Destroy\", \"destroy\");\r\n        this.onRemove();\r\n        this.detachEmiitedEvents();\r\n        this.removeFromDebug();\r\n        this.isInitialized = false;\r\n    }\r\n}\r\n_attribute = new WeakMap();\r\nexport class CuiHandler extends CuiHandlerBase {\r\n    constructor(componentName, element, attribute, args, utils) {\r\n        super(componentName, element, attribute, args, utils);\r\n    }\r\n    onHandle() {\r\n        this.onInit();\r\n    }\r\n    onRefresh() {\r\n        this.onUpdate();\r\n    }\r\n    onRemove() {\r\n        this.onDestroy();\r\n    }\r\n    /**\r\n     * Helper created for elements that animate - perfroms an action *add*, after timeout it performs *remove*.\r\n     *\r\n     * @param action - action to perfrom\r\n     * @param timeout - timeout specified for action removal\r\n     * @param onFinish - callback to be performed after action is finished after removal\r\n     * @param callback - optional - callback to be executed in mutation on action removal, e.g. additional DOM changes on element\r\n     */\r\n    performAction(actions, timeout, onFinish, callback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (yield this.actionsHelper.performActions(this.element, actions, timeout, callback)) {\r\n                onFinish();\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n    }\r\n}\r\nexport class CuiInteractableHandler extends CuiHandlerBase {\r\n    constructor(componentName, element, attribute, args, utils) {\r\n        super(componentName, element, attribute, args, utils);\r\n        _openEventId.set(this, void 0);\r\n        _closeEventId.set(this, void 0);\r\n        _keyCloseEventId.set(this, void 0);\r\n        _openAct.set(this, void 0);\r\n        _closeAct.set(this, void 0);\r\n        __classPrivateFieldSet(this, _openEventId, null);\r\n        __classPrivateFieldSet(this, _closeEventId, null);\r\n        __classPrivateFieldSet(this, _keyCloseEventId, null);\r\n        __classPrivateFieldSet(this, _closeAct, []);\r\n        __classPrivateFieldSet(this, _openAct, []);\r\n    }\r\n    onHandle() {\r\n        __classPrivateFieldSet(this, _openEventId, this.onEvent(EVENTS.OPEN, this.openFromEvent.bind(this)));\r\n        __classPrivateFieldSet(this, _closeEventId, this.onEvent(EVENTS.CLOSE, this.closeFromEvent.bind(this)));\r\n        __classPrivateFieldSet(this, _openAct, CuiActionsListFactory.get(this.args.openAct));\r\n        __classPrivateFieldSet(this, _closeAct, CuiActionsListFactory.get(this.args.closeAct));\r\n        this.onInit();\r\n    }\r\n    onRefresh() {\r\n        if (!this.prevArgs || this.args.openAct !== this.prevArgs.openAct) {\r\n            __classPrivateFieldSet(this, _openAct, CuiActionsListFactory.get(this.args.openAct));\r\n        }\r\n        if (!this.prevArgs || this.args.closeAct !== this.prevArgs.closeAct) {\r\n            __classPrivateFieldSet(this, _closeAct, CuiActionsListFactory.get(this.args.closeAct));\r\n        }\r\n        this.onUpdate();\r\n    }\r\n    onRemove() {\r\n        this.detachEvent(EVENTS.CLOSE, __classPrivateFieldGet(this, _closeEventId));\r\n        this.detachEvent(EVENTS.OPEN, __classPrivateFieldGet(this, _openEventId));\r\n        this.onDestroy();\r\n    }\r\n    open(args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.checkLockAndWarn(\"open\")) {\r\n                return false;\r\n            }\r\n            if (this.isActive()) {\r\n                this.logWarning(\"Component is already opened\");\r\n                return false;\r\n            }\r\n            if (this.args.escClose || is(this.args.keyClose)) {\r\n                __classPrivateFieldSet(this, _keyCloseEventId, this.onEvent(EVENTS.KEYDOWN, this.onKeyClose.bind(this)));\r\n            }\r\n            if (!this.onBeforeOpen()) {\r\n                return false;\r\n            }\r\n            this.isLocked = true;\r\n            return this.performAction(__classPrivateFieldGet(this, _openAct), this.args.timeout, this.onActionFinish.bind(this, this.onAfterOpen.bind(this), EVENTS.OPENED, args), () => {\r\n                this.helper.setClass(this.activeClassName, this.element);\r\n                AriaAttributes.setAria(this.element, 'aria-expanded', 'true');\r\n            });\r\n            ;\r\n        });\r\n    }\r\n    close(args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.checkLockAndWarn(\"close\")) {\r\n                return false;\r\n            }\r\n            if (!this.isActive()) {\r\n                this.logWarning(\"Component is already closed\");\r\n                return false;\r\n            }\r\n            this.detachEvent(EVENTS.KEYDOWN, __classPrivateFieldGet(this, _keyCloseEventId));\r\n            if (!this.onBeforeClose()) {\r\n                return false;\r\n            }\r\n            this.isLocked = true;\r\n            return this.performAction(__classPrivateFieldGet(this, _closeAct), this.args.timeout, this.onActionFinish.bind(this, this.onAfterClose.bind(this), EVENTS.CLOSED, args), () => {\r\n                this.helper.removeClass(this.activeClassName, this.element);\r\n                AriaAttributes.setAria(this.element, 'aria-expanded', 'false');\r\n            });\r\n            ;\r\n        });\r\n    }\r\n    /**\r\n     * Helper created for elements that animate - perfroms an action *add*, after timeout it performs *remove*.\r\n     *\r\n     * @param action - action to perfrom\r\n     * @param timeout - timeout specified for action removal\r\n     * @param onFinish - callback to be performed after action is finished after removal\r\n     * @param callback - optional - callback to be executed in mutation on action removal, e.g. additional DOM changes on element\r\n     */\r\n    performAction(actions, timeout, onFinish, callback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (yield this.actionsHelper.performActions(this.element, actions, timeout, callback)) {\r\n                onFinish();\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n    }\r\n    openFromEvent(args) {\r\n        this.open(args);\r\n    }\r\n    closeFromEvent(args) {\r\n        this.close(args);\r\n    }\r\n    onActionFinish(callback, event, args) {\r\n        callback();\r\n        this.emitEvent(event, {\r\n            timestamp: Date.now(),\r\n            state: args\r\n        });\r\n        this.isLocked = false;\r\n    }\r\n    onKeyClose(ev) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.args.escClose && ev.event.key === \"Escape\" || is(this.args.keyClose) && ev.event.key === this.args.keyClose) {\r\n                yield this.close('Closed by key');\r\n            }\r\n        });\r\n    }\r\n}\r\n_openEventId = new WeakMap(), _closeEventId = new WeakMap(), _keyCloseEventId = new WeakMap(), _openAct = new WeakMap(), _closeAct = new WeakMap();\r\nexport class CuiMutableHandler extends CuiHandlerBase {\r\n    constructor(componentName, element, attribute, args, utils) {\r\n        super(componentName, element, attribute, args, utils);\r\n        _mutionHandler.set(this, void 0);\r\n        __classPrivateFieldSet(this, _mutionHandler, new CuiComponentMutationHandler(element));\r\n        __classPrivateFieldGet(this, _mutionHandler).onMutation(this.mutation.bind(this));\r\n    }\r\n    onHandle() {\r\n        this.onInit();\r\n        __classPrivateFieldGet(this, _mutionHandler).observe();\r\n    }\r\n    onRefresh() {\r\n        __classPrivateFieldGet(this, _mutionHandler).unobserve();\r\n        this.onUpdate();\r\n        __classPrivateFieldGet(this, _mutionHandler).observe();\r\n    }\r\n    onRemove() {\r\n        __classPrivateFieldGet(this, _mutionHandler).unobserve();\r\n        this.onDestroy();\r\n    }\r\n    /**\r\n     * Callback attached to mutation observer set on root element\r\n     *\r\n     * @param record - mutation records\r\n     */\r\n    mutation(records) {\r\n        this._log.debug(\"Element mutation\", \"mutation\");\r\n        this.onMutation(records.reduce((result, item) => {\r\n            if (item.type !== \"childList\") {\r\n                return result;\r\n            }\r\n            if (item.addedNodes.length > 0) {\r\n                result.added.push(...item.addedNodes);\r\n            }\r\n            if (item.removedNodes.length > 0) {\r\n                result.removed.push(...item.removedNodes);\r\n            }\r\n            return result;\r\n        }, {\r\n            added: [],\r\n            removed: []\r\n        }));\r\n    }\r\n}\r\n_mutionHandler = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTitleSelector, _defItemsSelector, _defTimeout, _prefix, _items, _targets, _switchEventId;\r\nimport { CuiMutableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { getIntOrDefault, is, isStringTrue, replacePrefix, getStringOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS, SCOPE_SELECTOR } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst ACCORDION_TITLE_CLS = '> * > .{prefix}-accordion-title';\r\nconst ACCORDION_ITEMS_CLS = '> *';\r\nexport class CuiAccordionArgs {\r\n    constructor(prefix, timeout) {\r\n        _defTitleSelector.set(this, void 0);\r\n        _defItemsSelector.set(this, void 0);\r\n        _defTimeout.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTitleSelector, replacePrefix(ACCORDION_TITLE_CLS, prefix));\r\n        __classPrivateFieldSet(this, _defItemsSelector, replacePrefix(ACCORDION_ITEMS_CLS, prefix));\r\n        this.animation = false;\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        this.single = false;\r\n        this.selector = SCOPE_SELECTOR + __classPrivateFieldGet(this, _defTitleSelector);\r\n        this.items = SCOPE_SELECTOR + __classPrivateFieldGet(this, _defItemsSelector);\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n    }\r\n    parse(args) {\r\n        if (is(args)) {\r\n            this.single = isStringTrue(args.single);\r\n            this.selector = SCOPE_SELECTOR + getStringOrDefault(args.selector, __classPrivateFieldGet(this, _defTitleSelector));\r\n            this.items = SCOPE_SELECTOR + getStringOrDefault(args.content, __classPrivateFieldGet(this, _defItemsSelector));\r\n            this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n            this.animation = isStringTrue(args.animation);\r\n            return;\r\n        }\r\n    }\r\n    isValid() {\r\n        return true;\r\n    }\r\n}\r\n_defTitleSelector = new WeakMap(), _defItemsSelector = new WeakMap(), _defTimeout = new WeakMap();\r\nexport class CuiAccordionComponent {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix)}-accordion`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiAccordionHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiAccordionHandler extends CuiMutableHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiAccordionHandler\", element, attribute, new CuiAccordionArgs(prefix, utils.setup.animationTime), utils);\r\n        _items.set(this, void 0);\r\n        _targets.set(this, void 0);\r\n        _switchEventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _switchEventId, null);\r\n        __classPrivateFieldSet(this, _items, []);\r\n        __classPrivateFieldSet(this, _targets, []);\r\n        __classPrivateFieldSet(this, _switchEventId, null);\r\n    }\r\n    onInit() {\r\n        if (this.args.isValid()) {\r\n            try {\r\n                this.initTargets();\r\n                __classPrivateFieldSet(this, _switchEventId, this.onEvent(EVENTS.SWITCH, this.onSwitch.bind(this)));\r\n            }\r\n            catch (e) {\r\n                this._log.exception(e, 'handle');\r\n            }\r\n            this._log.debug(\"Initialized\", \"handle\");\r\n        }\r\n    }\r\n    onUpdate() {\r\n        try {\r\n            this.initTargets();\r\n        }\r\n        catch (e) {\r\n            this._log.exception(e, 'handle');\r\n        }\r\n    }\r\n    onDestroy() {\r\n        this.detachEvent(EVENTS.SWITCH, __classPrivateFieldGet(this, _switchEventId));\r\n    }\r\n    onMutation(mutations) {\r\n        if (mutations.added.length > 0 || mutations.removed.length > 0)\r\n            this.initTargets();\r\n    }\r\n    switch(index) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this._log.debug(\"Switch to: \" + index);\r\n            if (index < 0 || this.isLocked || !this.isInitialized) {\r\n                return false;\r\n            }\r\n            __classPrivateFieldSet(this, _items, this.queryItems());\r\n            if (__classPrivateFieldGet(this, _items).length <= index) {\r\n                return false;\r\n            }\r\n            this.isLocked = true;\r\n            const current = __classPrivateFieldGet(this, _items)[index];\r\n            if (this.helper.hasClass(this.activeClassName, current)) {\r\n                this.helper.removeClassesAs(current, this.activeClassName);\r\n            }\r\n            else {\r\n                if (this.args.single) {\r\n                    this.closeAllExcept(index);\r\n                }\r\n                this.helper.setClassesAs(current, this.activeClassName);\r\n            }\r\n            this.emitEvent(EVENTS.SWITCHED, {\r\n                index: index,\r\n                currentTarget: current,\r\n                timestamp: Date.now()\r\n            });\r\n            this.isLocked = false;\r\n            return true;\r\n        });\r\n    }\r\n    onSwitch(index) {\r\n        this.switch(getIntOrDefault(index, -1)).then(() => {\r\n            this._log.debug(\"Switch from event to \" + index);\r\n        });\r\n    }\r\n    initTargets() {\r\n        __classPrivateFieldSet(this, _items, this.queryItems());\r\n        const t = this.element.querySelectorAll(this.args.selector);\r\n        __classPrivateFieldSet(this, _targets, []);\r\n        t.forEach((item, index) => {\r\n            let target = { element: item };\r\n            this.setListener(target, index);\r\n            __classPrivateFieldGet(this, _targets).push(target);\r\n        });\r\n    }\r\n    closeAllExcept(current) {\r\n        this.mutate(() => {\r\n            __classPrivateFieldGet(this, _items).forEach((item, index) => {\r\n                if (current !== index && this.helper.hasClass(this.activeClassName, item)) {\r\n                    item.classList.remove(this.activeClassName);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    setListener(target, index) {\r\n        target.listener = () => {\r\n            this.switch(index);\r\n        };\r\n        target.element.addEventListener('click', target.listener);\r\n    }\r\n    removeListener(target) {\r\n        if (target.listener) {\r\n            target.element.removeEventListener('click', target.listener);\r\n        }\r\n    }\r\n    queryItems() {\r\n        return [...this.element.querySelectorAll(this.args.items)];\r\n    }\r\n}\r\n_items = new WeakMap(), _targets = new WeakMap(), _switchEventId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _unit;\r\nimport { AnimatorError } from \"../models/errors\";\r\nimport { is } from \"../utils/functions\";\r\n/**\r\n * Changes the opacity of the element from 0 to 1\r\n */\r\nexport class OpacityAnimator {\r\n    constructor() {\r\n        this.length = this.to = this.from = -1;\r\n        this.rtl = false;\r\n    }\r\n    setProperty(prop) {\r\n        if (!prop || !is(prop.from) || !is(prop.to)) {\r\n            throw new AnimatorError(\"[OpacityAnimator] Property has incorrect format\");\r\n        }\r\n        this.from = prop.from;\r\n        this.to = prop.to;\r\n        this.length = Math.abs(this.to - this.from);\r\n        this.rtl = this.from > this.to;\r\n    }\r\n    perform(element, progress, factor) {\r\n        if (this.to < 0) {\r\n            return;\r\n        }\r\n        let current = this.length * progress;\r\n        if (element[\"style\"]) {\r\n            element.style.opacity = this.rtl ? Math.max(this.from - current, 0) : Math.min(this.from + current, 1);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Changes any style property of the element\r\n */\r\nexport class PropertyAnimator {\r\n    constructor(property) {\r\n        _unit.set(this, void 0);\r\n        if (!is(property)) {\r\n            throw new AnimatorError(\"[PropertyAnimator] Valid property is required\");\r\n        }\r\n        this.property = property;\r\n        this.length = this.to = this.from = -1;\r\n        this.rtl = false;\r\n        __classPrivateFieldSet(this, _unit, \"\");\r\n    }\r\n    setProperty(prop) {\r\n        if (!prop || !is(prop.from) || !is(prop.to)) {\r\n            throw new AnimatorError(\"[PropertyAnimator] Property has incorrect format\");\r\n        }\r\n        this.from = prop.from;\r\n        this.to = prop.to;\r\n        this.length = Math.abs(this.to - this.from);\r\n        this.rtl = this.from > this.to;\r\n        __classPrivateFieldSet(this, _unit, prop.unit);\r\n    }\r\n    perform(element, progress, factor) {\r\n        if (!this.property) {\r\n            return;\r\n        }\r\n        let current = this.length * progress;\r\n        if (element[\"style\"]) {\r\n            element.style[this.property] = this.createValue(this.rtl ? this.from - current : this.from + current, __classPrivateFieldGet(this, _unit));\r\n        }\r\n    }\r\n    createValue(value, unit) {\r\n        return `${value}${unit !== null && unit !== void 0 ? unit : \"\"}`;\r\n    }\r\n}\r\n_unit = new WeakMap();\r\n/**\r\n * Changes transform property of the element. Supports mulitple properties at the time\r\n */\r\nexport class TransformAnimator {\r\n    constructor() {\r\n        this.prop = undefined;\r\n    }\r\n    setProperty(prop) {\r\n        if (!prop) {\r\n            throw new AnimatorError(\"[TransformAnimator] Property has incorrect format\");\r\n        }\r\n        this.prop = prop;\r\n    }\r\n    build(progress) {\r\n        let props = [];\r\n        for (let name in this.prop) {\r\n            let cur = this.prop[name];\r\n            let diff = Math.abs(cur.to - cur.from);\r\n            let rtl = cur.from > cur.to;\r\n            let val = rtl ? cur.from - (diff * progress) : cur.from + (diff * progress);\r\n            props.push(this.buildSingle(name, val, cur.unit));\r\n        }\r\n        return props.join(\" \");\r\n    }\r\n    buildSingle(name, value, unit) {\r\n        return `${name}(${value}${unit})`;\r\n    }\r\n    perform(element, progress) {\r\n        if (!this.prop) {\r\n            return;\r\n        }\r\n        if (element[\"style\"]) {\r\n            element.style.transform = this.build(progress);\r\n        }\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _engine, _timeout, _factory, _onError, _onFinishCallback, _animators, _lock, _animStartStamp, _element, _cleanOnFinish, _errorOccured, _factory_1, _onError_1, _element_1, _animators_1, _animationEngine, _factory_2, _onError_2;\r\nimport { is } from \"../utils/functions\";\r\nimport { OpacityAnimator, TransformAnimator, PropertyAnimator } from \"./animators\";\r\nexport class CuiAnimation {\r\n    constructor(element) {\r\n        _engine.set(this, void 0);\r\n        _timeout.set(this, void 0);\r\n        _factory.set(this, void 0);\r\n        _onError.set(this, void 0);\r\n        __classPrivateFieldSet(this, _engine, new CuiAnimationEngine(true));\r\n        __classPrivateFieldSet(this, _onError, undefined);\r\n        __classPrivateFieldSet(this, _timeout, 0);\r\n        __classPrivateFieldSet(this, _factory, new AnimatorFactory());\r\n        if (element) {\r\n            __classPrivateFieldGet(this, _engine).setElement(element);\r\n        }\r\n    }\r\n    setElement(element) {\r\n        __classPrivateFieldGet(this, _engine).setElement(element);\r\n    }\r\n    setTimeout(timeout) {\r\n        __classPrivateFieldSet(this, _timeout, timeout);\r\n    }\r\n    onError(callback) {\r\n        __classPrivateFieldSet(this, _onError, callback);\r\n        __classPrivateFieldGet(this, _engine).setOnError(callback);\r\n    }\r\n    onFinish(callback) {\r\n        __classPrivateFieldGet(this, _engine).onFinish(callback);\r\n    }\r\n    perform(props, timeout, factor) {\r\n        if (!is(props)) {\r\n            this.reportError(new Error(\"Animation property cannot be empty\"));\r\n            return;\r\n        }\r\n        let animators = [];\r\n        try {\r\n            for (let prop in props) {\r\n                let animator = __classPrivateFieldGet(this, _factory).get(prop);\r\n                if (!animator)\r\n                    return;\r\n                animator.setProperty(props[prop]);\r\n                animators.push(animator);\r\n                __classPrivateFieldGet(this, _engine).setAnimators(animators);\r\n                __classPrivateFieldGet(this, _engine).animate(timeout !== null && timeout !== void 0 ? timeout : __classPrivateFieldGet(this, _timeout));\r\n            }\r\n        }\r\n        catch (e) {\r\n            this.reportError(e);\r\n            return;\r\n        }\r\n    }\r\n    reportError(e) {\r\n        if (__classPrivateFieldGet(this, _onError)) {\r\n            __classPrivateFieldGet(this, _onError).call(this, e);\r\n        }\r\n        else {\r\n            console.error(e);\r\n        }\r\n    }\r\n}\r\n_engine = new WeakMap(), _timeout = new WeakMap(), _factory = new WeakMap(), _onError = new WeakMap();\r\nclass AnimatorFactory {\r\n    get(id) {\r\n        if (!is(id)) {\r\n            return undefined;\r\n        }\r\n        switch (id) {\r\n            case \"opacity\":\r\n                return new OpacityAnimator();\r\n            case \"transform\":\r\n                return new TransformAnimator();\r\n            default:\r\n                return new PropertyAnimator(id);\r\n        }\r\n    }\r\n}\r\nexport class CuiAnimationEngine {\r\n    constructor(cleanOnFinish) {\r\n        _onFinishCallback.set(this, void 0);\r\n        _animators.set(this, void 0);\r\n        _lock.set(this, void 0);\r\n        // Needed in animation perform - set on first animation exec, cleaned on end\r\n        _animStartStamp.set(this, void 0);\r\n        _element.set(this, void 0);\r\n        _cleanOnFinish.set(this, void 0);\r\n        _errorOccured.set(this, void 0);\r\n        _factory_1.set(this, void 0);\r\n        _onError_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _animators, []);\r\n        __classPrivateFieldSet(this, _element, undefined);\r\n        __classPrivateFieldSet(this, _animStartStamp, undefined);\r\n        __classPrivateFieldSet(this, _cleanOnFinish, cleanOnFinish !== null && cleanOnFinish !== void 0 ? cleanOnFinish : false);\r\n        __classPrivateFieldSet(this, _factory_1, new AnimatorFactory());\r\n        __classPrivateFieldSet(this, _lock, false);\r\n        __classPrivateFieldSet(this, _onFinishCallback, undefined);\r\n        __classPrivateFieldSet(this, _errorOccured, false);\r\n        __classPrivateFieldSet(this, _onError_1, undefined);\r\n    }\r\n    onFinish(callback) {\r\n        __classPrivateFieldSet(this, _onFinishCallback, callback);\r\n    }\r\n    setAnimators(animators) {\r\n        __classPrivateFieldSet(this, _animators, animators);\r\n    }\r\n    setProps(props) {\r\n        if (!is(props)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _animators, []);\r\n        try {\r\n            for (let prop in props) {\r\n                let animator = __classPrivateFieldGet(this, _factory_1).get(prop);\r\n                if (!animator)\r\n                    return;\r\n                animator.setProperty(props[prop]);\r\n                __classPrivateFieldGet(this, _animators).push(animator);\r\n            }\r\n        }\r\n        catch (e) {\r\n            this.reportError(e);\r\n        }\r\n    }\r\n    setElement(element) {\r\n        __classPrivateFieldSet(this, _element, element);\r\n    }\r\n    setOnError(callback) {\r\n        __classPrivateFieldSet(this, _onError_1, callback);\r\n    }\r\n    animate(timeout, progress, revert) {\r\n        if (__classPrivateFieldGet(this, _lock)) {\r\n            return;\r\n        }\r\n        if (!__classPrivateFieldGet(this, _element) || __classPrivateFieldGet(this, _animators).length === 0) {\r\n            this.reportError(new Error(\"Animation cannot be performed: element or animators are not set\"));\r\n            return;\r\n        }\r\n        let animationProgress = progress !== null && progress !== void 0 ? progress : 0;\r\n        let shouldCalcRevert = revert ? revert : false;\r\n        __classPrivateFieldSet(this, _lock, true);\r\n        requestAnimationFrame(this.animateAsync.bind(this, timeout, animationProgress, shouldCalcRevert));\r\n    }\r\n    isLocked() {\r\n        return __classPrivateFieldGet(this, _lock);\r\n    }\r\n    animateAsync(timeout, initialProgress, revert, timestamp) {\r\n        if (!__classPrivateFieldGet(this, _animStartStamp)) {\r\n            __classPrivateFieldSet(this, _animStartStamp, timestamp);\r\n        }\r\n        let pr = timestamp - __classPrivateFieldGet(this, _animStartStamp);\r\n        let animationProgress = pr / timeout;\r\n        let currProgress = 0;\r\n        if (initialProgress === 0) {\r\n            currProgress = animationProgress;\r\n        }\r\n        else {\r\n            currProgress = revert ? initialProgress - (animationProgress * initialProgress) : initialProgress + (animationProgress * initialProgress);\r\n        }\r\n        this.callUpdate(revert ? Math.max(currProgress, 0) : Math.min(currProgress, 1), 1);\r\n        if (pr < timeout && !__classPrivateFieldGet(this, _errorOccured)) {\r\n            requestAnimationFrame(this.animateAsync.bind(this, timeout, initialProgress, revert));\r\n        }\r\n        else {\r\n            this.endAnimation(revert);\r\n        }\r\n    }\r\n    endAnimation(reverted) {\r\n        if (__classPrivateFieldGet(this, _cleanOnFinish) && __classPrivateFieldGet(this, _element)) {\r\n            __classPrivateFieldGet(this, _element).removeAttribute(\"style\");\r\n        }\r\n        if (__classPrivateFieldGet(this, _onFinishCallback)) {\r\n            __classPrivateFieldGet(this, _onFinishCallback).call(this, __classPrivateFieldGet(this, _element), reverted, __classPrivateFieldGet(this, _errorOccured));\r\n        }\r\n        __classPrivateFieldSet(this, _errorOccured, false);\r\n        __classPrivateFieldSet(this, _animStartStamp, undefined);\r\n        __classPrivateFieldSet(this, _lock, false);\r\n    }\r\n    callUpdate(progress, factor) {\r\n        try {\r\n            __classPrivateFieldGet(this, _animators).forEach(animator => animator.perform(__classPrivateFieldGet(this, _element), progress, factor));\r\n        }\r\n        catch (e) {\r\n            this.reportError(e);\r\n            __classPrivateFieldSet(this, _errorOccured, true);\r\n        }\r\n    }\r\n    reportError(e) {\r\n        if (__classPrivateFieldGet(this, _onError_1)) {\r\n            __classPrivateFieldGet(this, _onError_1).call(this, e);\r\n        }\r\n        else {\r\n            console.error(\"An error occured in CuiAnimtionEngine\");\r\n            console.error(e);\r\n        }\r\n    }\r\n}\r\n_onFinishCallback = new WeakMap(), _animators = new WeakMap(), _lock = new WeakMap(), _animStartStamp = new WeakMap(), _element = new WeakMap(), _cleanOnFinish = new WeakMap(), _errorOccured = new WeakMap(), _factory_1 = new WeakMap(), _onError_1 = new WeakMap();\r\nexport class CuiSwipeAnimationEngine {\r\n    constructor(shouldCleanOnFinish) {\r\n        _element_1.set(this, void 0);\r\n        _animators_1.set(this, void 0);\r\n        _animationEngine.set(this, void 0);\r\n        _factory_2.set(this, void 0);\r\n        _onError_2.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element_1, undefined);\r\n        __classPrivateFieldSet(this, _animators_1, []);\r\n        __classPrivateFieldSet(this, _animationEngine, new CuiAnimationEngine(shouldCleanOnFinish));\r\n        __classPrivateFieldSet(this, _factory_2, new AnimatorFactory());\r\n        __classPrivateFieldSet(this, _onError_2, undefined);\r\n    }\r\n    setElement(element) {\r\n        __classPrivateFieldSet(this, _element_1, element);\r\n    }\r\n    setOnFinish(callback) {\r\n        __classPrivateFieldGet(this, _animationEngine).onFinish(callback);\r\n    }\r\n    setOnError(callback) {\r\n        __classPrivateFieldSet(this, _onError_2, callback);\r\n        __classPrivateFieldGet(this, _animationEngine).setOnError(callback);\r\n    }\r\n    setProps(props) {\r\n        if (!is(props)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _animators_1, []);\r\n        try {\r\n            for (let prop in props) {\r\n                let animator = __classPrivateFieldGet(this, _factory_2).get(prop);\r\n                if (!animator)\r\n                    return;\r\n                animator.setProperty(props[prop]);\r\n                __classPrivateFieldGet(this, _animators_1).push(animator);\r\n            }\r\n        }\r\n        catch (e) {\r\n            this.reportError(e);\r\n        }\r\n    }\r\n    /**\r\n     * Perform single update on animators\r\n     * @param progress - progress value to be set to animators 0..1\r\n     */\r\n    update(progress) {\r\n        if (!__classPrivateFieldGet(this, _element_1) || __classPrivateFieldGet(this, _animators_1).length === 0) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _animators_1).forEach(animator => animator.perform(__classPrivateFieldGet(this, _element_1), Math.min(progress, 1), 1));\r\n    }\r\n    /**\r\n     * Perform single update on animators in RAF\r\n     * @param progress - progress value to be set to animators 0..1\r\n     */\r\n    updateAsync(progress) {\r\n        requestAnimationFrame(this.update.bind(this, progress));\r\n    }\r\n    /**\r\n     * Finish swipe animation using animation engine\r\n     * @param progress - initial progress value 0..1\r\n     * @param timeout - time for animation to perform\r\n     * @param revert - whether animation should return back to 0 or progress to the end\r\n     */\r\n    finish(progress, timeout, revert) {\r\n        if (__classPrivateFieldGet(this, _element_1))\r\n            __classPrivateFieldGet(this, _animationEngine).setElement(__classPrivateFieldGet(this, _element_1));\r\n        __classPrivateFieldGet(this, _animationEngine).setAnimators(__classPrivateFieldGet(this, _animators_1));\r\n        __classPrivateFieldGet(this, _animationEngine).animate(timeout, progress, revert);\r\n    }\r\n    reportError(e) {\r\n        if (__classPrivateFieldGet(this, _onError_2)) {\r\n            __classPrivateFieldGet(this, _onError_2).call(this, e);\r\n        }\r\n        else {\r\n            console.log(e);\r\n        }\r\n    }\r\n}\r\n_element_1 = new WeakMap(), _animators_1 = new WeakMap(), _animationEngine = new WeakMap(), _factory_2 = new WeakMap(), _onError_2 = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTimeout, _prefix, _prefix_1, _swipeEngine, _isTracking, _startX, _ratio, _swipeAnimation, _moveEventId;\r\nimport { SWIPE_ANIMATIONS_DEFINITIONS } from \"cui-light-core/dist/esm/animation/definitions\";\r\nimport { CuiInteractableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiSwipeAnimationEngine } from \"cui-light-core/dist/esm/animation/engine\";\r\nimport { AriaAttributes } from \"cui-light-core/dist/esm/utils/aria\";\r\nimport { boolStringOrDefault, getIntOrDefault, getStringOrDefault, replacePrefix } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS, CLASSES } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst BANNER_OPEN_ANIMATION = \".{prefix}-animation-fade-in\";\r\nconst BANNER_CLOSE_ANIMATION = \".{prefix}-animation-fade-out\";\r\nexport class CuiBannerArgs {\r\n    constructor(prefix, timeout) {\r\n        _defTimeout.set(this, void 0);\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        this.escClose = false;\r\n        this.keyClose = \"\";\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n        this.swipe = false;\r\n        this.openAct = \"\";\r\n        this.closeAct = \"\";\r\n    }\r\n    parse(args) {\r\n        this.swipe = boolStringOrDefault(args.swipe, false);\r\n        this.escClose = false;\r\n        this.keyClose = \"\";\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.openAct = getStringOrDefault(args.openAct, replacePrefix(BANNER_OPEN_ANIMATION, __classPrivateFieldGet(this, _prefix)));\r\n        this.closeAct = getStringOrDefault(args.closeAct, replacePrefix(BANNER_CLOSE_ANIMATION, __classPrivateFieldGet(this, _prefix)));\r\n    }\r\n}\r\n_defTimeout = new WeakMap(), _prefix = new WeakMap();\r\nexport class CuiBanerComponent {\r\n    constructor(prefix) {\r\n        _prefix_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix_1, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix_1)}-banner`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiBannerHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix_1));\r\n    }\r\n}\r\n_prefix_1 = new WeakMap();\r\nexport class CuiBannerHandler extends CuiInteractableHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiBannerHandler\", element, attribute, new CuiBannerArgs(prefix, utils.setup.animationTime), utils);\r\n        _swipeEngine.set(this, void 0);\r\n        _isTracking.set(this, void 0);\r\n        _startX.set(this, void 0);\r\n        _ratio.set(this, void 0);\r\n        _swipeAnimation.set(this, void 0);\r\n        _moveEventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _swipeEngine, new CuiSwipeAnimationEngine(true));\r\n        __classPrivateFieldGet(this, _swipeEngine).setOnFinish(this.onSwipeFinish.bind(this));\r\n        __classPrivateFieldGet(this, _swipeEngine).setElement(this.element);\r\n        __classPrivateFieldSet(this, _startX, -1);\r\n        __classPrivateFieldSet(this, _ratio, 0);\r\n        __classPrivateFieldSet(this, _swipeAnimation, SWIPE_ANIMATIONS_DEFINITIONS[\"fade\"]);\r\n        __classPrivateFieldSet(this, _moveEventId, null);\r\n        __classPrivateFieldSet(this, _isTracking, false);\r\n    }\r\n    onInit() {\r\n        //   this.#moveEventId = this.onEvent(EVENTS.GLOBAL_MOVE, this.onMove.bind(this));\r\n        if (!this.isActive()) {\r\n            this.open();\r\n        }\r\n    }\r\n    onUpdate() {\r\n    }\r\n    onDestroy() {\r\n        this.detachEvent(EVENTS.GLOBAL_MOVE, __classPrivateFieldGet(this, _moveEventId));\r\n    }\r\n    onBeforeOpen() {\r\n        return true;\r\n    }\r\n    onAfterOpen() {\r\n        if (this.args.swipe) {\r\n            __classPrivateFieldSet(this, _moveEventId, this.onEvent(EVENTS.GLOBAL_MOVE, this.onMove.bind(this)));\r\n        }\r\n    }\r\n    onAfterClose() {\r\n        this.detachEvent(EVENTS.GLOBAL_MOVE, __classPrivateFieldGet(this, _moveEventId));\r\n    }\r\n    onBeforeClose() {\r\n        return true;\r\n    }\r\n    onMove(data) {\r\n        if (this.isLocked) {\r\n            return;\r\n        }\r\n        let current = this.element;\r\n        switch (data.type) {\r\n            case \"down\":\r\n                if (__classPrivateFieldGet(this, _isTracking) || !current.contains(data.target)) {\r\n                    return;\r\n                }\r\n                __classPrivateFieldSet(this, _isTracking, true);\r\n                __classPrivateFieldSet(this, _startX, data.x);\r\n                this.helper.setClassesAs(document.body, CLASSES.swipingOn);\r\n                data.event.preventDefault();\r\n                break;\r\n            case \"up\":\r\n                if (!__classPrivateFieldGet(this, _isTracking) && __classPrivateFieldGet(this, _ratio) == 0) {\r\n                    break;\r\n                }\r\n                let absRatio = Math.abs(__classPrivateFieldGet(this, _ratio));\r\n                let timeout = absRatio * this.args.timeout;\r\n                let back = absRatio <= 0.4;\r\n                // Lock component until animation is finished\r\n                this.isLocked = true;\r\n                __classPrivateFieldGet(this, _swipeEngine).finish(absRatio, timeout, back);\r\n                this.helper.removeClassesAs(document.body, CLASSES.swipingOn);\r\n                __classPrivateFieldSet(this, _isTracking, false);\r\n                break;\r\n            case \"move\":\r\n                if (__classPrivateFieldGet(this, _isTracking)) {\r\n                    let newRatio = (data.x - __classPrivateFieldGet(this, _startX)) / current.offsetWidth;\r\n                    if (__classPrivateFieldGet(this, _ratio) >= 0 && newRatio <= 0 || __classPrivateFieldGet(this, _ratio) <= 0 && newRatio > 0) {\r\n                        __classPrivateFieldGet(this, _swipeEngine).setProps(newRatio > 0 ? __classPrivateFieldGet(this, _swipeAnimation).current.right : __classPrivateFieldGet(this, _swipeAnimation).current.left);\r\n                    }\r\n                    __classPrivateFieldSet(this, _ratio, newRatio);\r\n                    this.mutate(() => {\r\n                        __classPrivateFieldGet(this, _swipeEngine).update(Math.abs(__classPrivateFieldGet(this, _ratio)));\r\n                    });\r\n                    data.event.preventDefault();\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    onSwipeFinish(element, reverted, error) {\r\n        this.isLocked = false;\r\n        if (!reverted) {\r\n            this.helper.removeClass(this.activeClassName, this.element);\r\n            AriaAttributes.setAria(this.element, 'aria-expanded', 'false');\r\n        }\r\n        __classPrivateFieldSet(this, _ratio, 0);\r\n        __classPrivateFieldSet(this, _startX, 0);\r\n    }\r\n}\r\n_swipeEngine = new WeakMap(), _isTracking = new WeakMap(), _startX = new WeakMap(), _ratio = new WeakMap(), _swipeAnimation = new WeakMap(), _moveEventId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _element, _scale, _appender;\r\nimport { createElementFromString, getIntOrDefault, is } from \"../utils/functions\";\r\nexport class IconBuilder {\r\n    constructor(svgString) {\r\n        _element.set(this, void 0);\r\n        _scale.set(this, void 0);\r\n        _appender.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element, svgString);\r\n        __classPrivateFieldSet(this, _scale, 1);\r\n        __classPrivateFieldSet(this, _appender, new IconScaleAppender());\r\n    }\r\n    setScale(scale) {\r\n        __classPrivateFieldSet(this, _scale, scale);\r\n        return this;\r\n    }\r\n    build() {\r\n        let created = createElementFromString(__classPrivateFieldGet(this, _element));\r\n        if (is(created) && __classPrivateFieldGet(this, _scale)) {\r\n            // @ts-ignore created is checked already\r\n            __classPrivateFieldGet(this, _appender).append(created, __classPrivateFieldGet(this, _scale));\r\n        }\r\n        return created;\r\n    }\r\n}\r\n_element = new WeakMap(), _scale = new WeakMap(), _appender = new WeakMap();\r\nexport class IconScaleAppender {\r\n    append(element, value) {\r\n        let width = getIntOrDefault(element.getAttribute(\"width\"), 20);\r\n        let height = getIntOrDefault(element.getAttribute(\"height\"), 20);\r\n        element.setAttribute(\"width\", (width * value).toString());\r\n        element.setAttribute(\"height\", (height * value).toString());\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _factor, _full, _path, _attr, _progressEventId;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { is, getRangeValue, isString, getIntOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { ICONS, EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { IconBuilder } from \"cui-light-core/dist/esm/builders/icon\";\r\nexport class CuiCircleArgs {\r\n    constructor() {\r\n        this.progress = 0;\r\n    }\r\n    parse(val) {\r\n        if (!is(val)) {\r\n            this.progress = 0;\r\n        }\r\n        else if (isString(val)) {\r\n            this.progress = getIntOrDefault(val, 0);\r\n        }\r\n        else {\r\n            this.progress = getIntOrDefault(val.progress, 0);\r\n        }\r\n    }\r\n}\r\nexport class CuiCircleComponent {\r\n    constructor(prefix) {\r\n        this.attribute = (prefix !== null && prefix !== void 0 ? prefix : 'cui') + '-circle-progress';\r\n        ICONS['special_circle_progress'] = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"  class=\\\"circle-progress\\\" viewBox=\\\"0 0 100 100\\\" width=\\\"100\\\" height=\\\"100\\\"><path class=\\\"circle-progress-path\\\" d=\\\"M 50,5.3660047 A 44.867708,44.633994 0 0 1 94.867709,49.999997 44.867708,44.633994 0 0 1 50,94.633995 44.867708,44.633994 0 0 1 5.1322908,50.000001 44.867708,44.633994 0 0 1 50,5.3660047\\\"></path></svg>\";\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiCircleHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiCircleHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiCircleHandler\", element, attribute, new CuiCircleArgs(), utils);\r\n        _factor.set(this, void 0);\r\n        _full.set(this, void 0);\r\n        _path.set(this, void 0);\r\n        _attr.set(this, void 0);\r\n        _progressEventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _factor, __classPrivateFieldSet(this, _full, 0));\r\n        __classPrivateFieldSet(this, _path, null);\r\n        __classPrivateFieldSet(this, _attr, attribute);\r\n        __classPrivateFieldSet(this, _progressEventId, null);\r\n    }\r\n    onInit() {\r\n        const iconSvg = new IconBuilder(ICONS['special_circle_progress']).build();\r\n        if (!is(iconSvg)) {\r\n            this.logError(\"SVG circle was not created\", \"onInit\");\r\n            return;\r\n        }\r\n        const svg = this.element.querySelector('svg');\r\n        if (is(svg)) {\r\n            //@ts-ignore svg checked\r\n            svg.remove();\r\n        }\r\n        //@ts-ignore iconSvg checked\r\n        this.element.appendChild(iconSvg);\r\n        __classPrivateFieldSet(this, _path, this.element.querySelector('.circle-progress-path'));\r\n        __classPrivateFieldSet(this, _full, __classPrivateFieldGet(this, _path).getTotalLength());\r\n        __classPrivateFieldSet(this, _factor, __classPrivateFieldGet(this, _full) / 100);\r\n        this.fetch(this.readStyle);\r\n        __classPrivateFieldSet(this, _progressEventId, this.onEvent(EVENTS.PROGRESS_CHANGE, this.onSetProgress.bind(this)));\r\n    }\r\n    onUpdate() {\r\n        this.fetch(this.readStyle);\r\n        this.emitEvent(EVENTS.PROGRESS_CHANGED, {\r\n            timestamp: Date.now(),\r\n            progress: this.args.progress\r\n        });\r\n    }\r\n    onDestroy() {\r\n        this.detachEvent(EVENTS.PROGRESS_CHANGE, __classPrivateFieldGet(this, _progressEventId));\r\n    }\r\n    onSetProgress(val) {\r\n        if (is(val)) {\r\n            this.element.setAttribute(__classPrivateFieldGet(this, _attr), val);\r\n        }\r\n    }\r\n    updateStyle(value) {\r\n        __classPrivateFieldGet(this, _path).style.strokeDashoffset = value;\r\n    }\r\n    readStyle() {\r\n        if (this.prevArgs && this.args.progress === this.prevArgs.progress) {\r\n            return;\r\n        }\r\n        const progress = getRangeValue(this.args.progress, 0, 100);\r\n        this.mutate(this.updateStyle, __classPrivateFieldGet(this, _full) - __classPrivateFieldGet(this, _factor) * progress);\r\n    }\r\n}\r\n_factor = new WeakMap(), _full = new WeakMap(), _path = new WeakMap(), _attr = new WeakMap(), _progressEventId = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTimeout, _prefix, _eventId;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { getStringOrDefault, getIntOrDefault, is, isString, isStringTrue, getParentCuiElement, are } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nexport class CuiCloseArgs {\r\n    constructor(timeout) {\r\n        _defTimeout.set(this, void 0);\r\n        this.target = \"\";\r\n        this.action = \"\";\r\n        this.prevent = false;\r\n        this.state = \"\";\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n    }\r\n    parse(args) {\r\n        if (is(args) && isString(args)) {\r\n            this.target = args;\r\n            this.action = \"\";\r\n            this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n            this.prevent = false;\r\n            this.state = \"\";\r\n            return;\r\n        }\r\n        this.target = getStringOrDefault(args.target, \"\");\r\n        this.action = args.action;\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.prevent = args.prevent && isStringTrue(args.prevent);\r\n        this.state = args.state;\r\n    }\r\n}\r\n_defTimeout = new WeakMap();\r\nexport class CuiCloseComponent {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix)}-close`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiCloseHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiCloseHandler extends CuiHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiCloseHandler\", element, attribute, new CuiCloseArgs(utils.setup.animationTime), utils);\r\n        _eventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _eventId, null);\r\n        this.onClick = this.onClick.bind(this);\r\n    }\r\n    onInit() {\r\n        this.element.addEventListener('click', this.onClick);\r\n        __classPrivateFieldSet(this, _eventId, this.onEvent(EVENTS.CLOSE, this.onClose.bind(this)));\r\n    }\r\n    onUpdate() {\r\n        //\r\n    }\r\n    onDestroy() {\r\n        this.element.removeEventListener('click', this.onClick);\r\n        this.detachEvent(EVENTS.CLOSE, __classPrivateFieldGet(this, _eventId));\r\n    }\r\n    onClick(ev) {\r\n        this.onClose(ev);\r\n        if (this.args.prevent)\r\n            ev.preventDefault();\r\n    }\r\n    onClose(ev) {\r\n        if (this.isLocked) {\r\n            return;\r\n        }\r\n        const target = this.getTarget();\r\n        if (!is(target)) {\r\n            this._log.warning(`Target ${this.args.target} not found`, 'onClick');\r\n            return;\r\n        }\r\n        this.isLocked = true;\r\n        //@ts-ignore target is checked\r\n        this.run(target).then((result) => {\r\n            this.onActionFinish(ev, result);\r\n        }).catch((e) => {\r\n            this._log.exception(e);\r\n        }).finally(() => {\r\n            this.isLocked = false;\r\n        });\r\n    }\r\n    run(target) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let cuiId = target.$cuid;\r\n            if (is(cuiId)) {\r\n                yield this.utils.bus.emit(EVENTS.CLOSE, cuiId, this.args.state);\r\n                return false;\r\n            }\r\n            else if (are(this.args.action, this.args.timeout)) {\r\n                let actions = CuiActionsListFactory.get(this.args.action);\r\n                return this.actionsHelper.performActions(target, actions, this.args.timeout, () => {\r\n                    this.removeActiveClass(target);\r\n                });\r\n            }\r\n            else {\r\n                this.removeActiveClassAsync(target);\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n    removeActiveClass(target) {\r\n        if (is(target) && this.helper.hasClass(this.activeClassName, target)) {\r\n            this.helper.removeClass(this.activeClassName, target);\r\n        }\r\n    }\r\n    removeActiveClassAsync(target) {\r\n        this.fetch(() => {\r\n            if (is(target) && this.helper.hasClass(this.activeClassName, target)) {\r\n                this.helper.removeClassesAs(target, this.activeClassName);\r\n            }\r\n        });\r\n    }\r\n    onActionFinish(ev, shouldEmit) {\r\n        if (shouldEmit)\r\n            this.emitClose(ev);\r\n    }\r\n    getTarget() {\r\n        var _a;\r\n        if (!is(this.args.target)) {\r\n            return getParentCuiElement(this.element);\r\n        }\r\n        return (_a = document.querySelector(this.args.target)) !== null && _a !== void 0 ? _a : getParentCuiElement(this.element);\r\n    }\r\n    emitClose(ev) {\r\n        this.emitEvent(EVENTS.CLOSED, {\r\n            timestamp: Date.now(),\r\n            state: this.args.state,\r\n            event: ev\r\n        });\r\n    }\r\n}\r\n_eventId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTimeout, _prefix, _prefix_1, _bodyClass, _scrollY;\r\nimport { replacePrefix, isStringTrue, getStringOrDefault, getIntOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { AriaAttributes } from \"cui-light-core/dist/esm/utils/aria\";\r\nimport { CuiInteractableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nconst COVER_OPEN_ANIMATION_CLASS = '.{prefix}-dialog-default-in';\r\nconst COVER_CLOSE_ANIMATION_CLASS = '.{prefix}-dialog-default-out';\r\nconst bodyClass = '{prefix}-cover-open';\r\nexport class CuiCoverArgs {\r\n    constructor(prefix, defTimeout) {\r\n        _defTimeout.set(this, void 0);\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTimeout, defTimeout !== null && defTimeout !== void 0 ? defTimeout : 300);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        this.escClose = false;\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n        this.openAct = \"\";\r\n        this.closeAct = \"\";\r\n        this.keyClose = \"\";\r\n    }\r\n    parse(args) {\r\n        this.escClose = isStringTrue(args.escClose);\r\n        this.keyClose = args.keyClose;\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.openAct = getStringOrDefault(args.openAct, replacePrefix(COVER_OPEN_ANIMATION_CLASS, __classPrivateFieldGet(this, _prefix)));\r\n        this.closeAct = getStringOrDefault(args.closeAct, replacePrefix(COVER_CLOSE_ANIMATION_CLASS, __classPrivateFieldGet(this, _prefix)));\r\n    }\r\n}\r\n_defTimeout = new WeakMap(), _prefix = new WeakMap();\r\nexport class CuiCoverComponent {\r\n    constructor(prefix) {\r\n        _prefix_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix_1, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix_1)}-cover`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiCoverHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix_1));\r\n    }\r\n}\r\n_prefix_1 = new WeakMap();\r\nexport class CuiCoverHandler extends CuiInteractableHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiDialogHandler\", element, attribute, new CuiCoverArgs(prefix, utils.setup.animationTimeLong), utils);\r\n        _bodyClass.set(this, void 0);\r\n        _scrollY.set(this, void 0);\r\n        __classPrivateFieldSet(this, _bodyClass, replacePrefix(bodyClass, prefix));\r\n        __classPrivateFieldSet(this, _scrollY, 0);\r\n    }\r\n    onInit() {\r\n        AriaAttributes.setAria(this.element, 'aria-modal', \"\");\r\n    }\r\n    onUpdate() {\r\n    }\r\n    onDestroy() {\r\n    }\r\n    onBeforeOpen() {\r\n        if (this.isAnyActive()) {\r\n            return false;\r\n        }\r\n        __classPrivateFieldSet(this, _scrollY, window.pageYOffset);\r\n        return true;\r\n    }\r\n    onAfterOpen() {\r\n        this.helper.setClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n        document.body.style.top = `-${__classPrivateFieldGet(this, _scrollY)}px`;\r\n        AriaAttributes.setAria(this.element, 'aria-hidden', \"false\");\r\n    }\r\n    onAfterClose() {\r\n        document.body.style.top = '';\r\n        window.scrollTo(0, (__classPrivateFieldGet(this, _scrollY) || 0) * -1);\r\n        __classPrivateFieldSet(this, _scrollY, 0);\r\n        this.helper.removeClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n        AriaAttributes.setAria(this.element, 'aria-hidden', \"true\");\r\n    }\r\n    onBeforeClose() {\r\n        return true;\r\n    }\r\n    isAnyActive() {\r\n        return this.helper.hasClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n    }\r\n}\r\n_bodyClass = new WeakMap(), _scrollY = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTimeout, _prefix, _prefix_1, _prefix_2, _bodyClass, _scrollY, _windowClickEventId;\r\nimport { replacePrefix, isStringTrue, getStringOrDefault, getIntOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { AriaAttributes } from \"cui-light-core/dist/esm/utils/aria\";\r\nimport { CuiInteractableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nconst DIALOG_OPEN_ANIMATION_CLASS = '.{prefix}-dialog-default-in';\r\nconst DIALOG_CLOSE_ANIMATION_CLASS = '.{prefix}-dialog-default-out';\r\nconst bodyClass = '{prefix}-dialog-open';\r\nconst CONTAINER = '.{prefix}-dialog-container';\r\nexport class CuiDialogArgs {\r\n    constructor(prefix, defTimeout) {\r\n        _defTimeout.set(this, void 0);\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTimeout, defTimeout !== null && defTimeout !== void 0 ? defTimeout : 300);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        this.escClose = false;\r\n        this.outClose = false;\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n        this.openAct = \"\";\r\n        this.closeAct = \"\";\r\n        this.keyClose = \"\";\r\n    }\r\n    parse(args) {\r\n        this.escClose = isStringTrue(args.escClose);\r\n        this.outClose = isStringTrue(args.outClose);\r\n        this.keyClose = args.keyClose;\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.openAct = getStringOrDefault(args.openAct, replacePrefix(DIALOG_OPEN_ANIMATION_CLASS, __classPrivateFieldGet(this, _prefix)));\r\n        this.closeAct = getStringOrDefault(args.closeAct, replacePrefix(DIALOG_CLOSE_ANIMATION_CLASS, __classPrivateFieldGet(this, _prefix)));\r\n    }\r\n}\r\n_defTimeout = new WeakMap(), _prefix = new WeakMap();\r\nexport class CuiDialogComponent {\r\n    constructor(prefix) {\r\n        _prefix_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix_1, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix_1)}-dialog`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiDialogHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix_1));\r\n    }\r\n}\r\n_prefix_1 = new WeakMap();\r\nexport class CuiDialogHandler extends CuiInteractableHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiDialogHandler\", element, attribute, new CuiDialogArgs(prefix, utils.setup.animationTimeLong), utils);\r\n        _prefix_2.set(this, void 0);\r\n        _bodyClass.set(this, void 0);\r\n        _scrollY.set(this, void 0);\r\n        _windowClickEventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _bodyClass, replacePrefix(bodyClass, prefix));\r\n        __classPrivateFieldSet(this, _prefix_2, prefix);\r\n        __classPrivateFieldSet(this, _scrollY, 0);\r\n        __classPrivateFieldSet(this, _windowClickEventId, null);\r\n    }\r\n    onInit() {\r\n        AriaAttributes.setAria(this.element, 'aria-modal', \"\");\r\n    }\r\n    onUpdate() {\r\n    }\r\n    onDestroy() {\r\n    }\r\n    onBeforeOpen() {\r\n        if (this.isAnyActive()) {\r\n            return false;\r\n        }\r\n        __classPrivateFieldSet(this, _scrollY, window.pageYOffset);\r\n        return true;\r\n    }\r\n    onAfterOpen() {\r\n        if (this.args.outClose) {\r\n            __classPrivateFieldSet(this, _windowClickEventId, this.onEvent(EVENTS.WINDOW_CLICK, this.onWindowClick.bind(this)));\r\n        }\r\n        this.helper.setClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n        document.body.style.top = `-${__classPrivateFieldGet(this, _scrollY)}px`;\r\n    }\r\n    onAfterClose() {\r\n        document.body.style.top = '';\r\n        window.scrollTo(0, (__classPrivateFieldGet(this, _scrollY) || 0) * -1);\r\n        __classPrivateFieldSet(this, _scrollY, 0);\r\n        this.helper.removeClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n        this.detachEvent(EVENTS.WINDOW_CLICK, __classPrivateFieldGet(this, _windowClickEventId));\r\n    }\r\n    onBeforeClose() {\r\n        return true;\r\n    }\r\n    isAnyActive() {\r\n        return this.helper.hasClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n    }\r\n    onWindowClick(ev) {\r\n        let container = this.element.querySelector(replacePrefix(CONTAINER, __classPrivateFieldGet(this, _prefix_2)));\r\n        if (container && !container.contains(ev.target)) {\r\n            this.close('out').then(() => {\r\n                this._log.debug(\"Closed by click outside\");\r\n            });\r\n        }\r\n    }\r\n}\r\n_prefix_2 = new WeakMap(), _bodyClass = new WeakMap(), _scrollY = new WeakMap(), _windowClickEventId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _target, _callback, _inProgress, _isHovering, _isAttached, _onOverBound, _onMoveBound, _onOutBound;\r\nimport { are } from \"../utils/functions\";\r\nexport class CuiHoverListener {\r\n    constructor(target) {\r\n        _target.set(this, void 0);\r\n        _callback.set(this, void 0);\r\n        _inProgress.set(this, void 0);\r\n        _isHovering.set(this, void 0);\r\n        _isAttached.set(this, void 0);\r\n        _onOverBound.set(this, void 0);\r\n        _onMoveBound.set(this, void 0);\r\n        _onOutBound.set(this, void 0);\r\n        __classPrivateFieldSet(this, _target, target);\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n        __classPrivateFieldSet(this, _isHovering, false);\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n        __classPrivateFieldSet(this, _callback, undefined);\r\n        __classPrivateFieldSet(this, _onMoveBound, this.onMouseMove.bind(this));\r\n        __classPrivateFieldSet(this, _onOutBound, this.onMouseOut.bind(this));\r\n        __classPrivateFieldSet(this, _onOverBound, this.onMouseOver.bind(this));\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    isInProgress() {\r\n        return __classPrivateFieldGet(this, _inProgress);\r\n    }\r\n    attach() {\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _target).addEventListener(\"mouseover\", __classPrivateFieldGet(this, _onOverBound));\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _target).addEventListener(\"mousemove\", __classPrivateFieldGet(this, _onMoveBound));\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _target).addEventListener(\"mouseout\", __classPrivateFieldGet(this, _onOutBound));\r\n        __classPrivateFieldSet(this, _isAttached, true);\r\n    }\r\n    detach() {\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _target).removeEventListener(\"mouseover\", __classPrivateFieldGet(this, _onOverBound));\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _target).removeEventListener(\"mousemove\", __classPrivateFieldGet(this, _onMoveBound));\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _target).removeEventListener(\"mouseout\", __classPrivateFieldGet(this, _onOutBound));\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n    }\r\n    emit(mouseEvent, force) {\r\n        if (!are(__classPrivateFieldGet(this, _callback))) {\r\n            return;\r\n        }\r\n        if (!force && __classPrivateFieldGet(this, _inProgress)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _inProgress, true);\r\n        window.requestAnimationFrame(this.invoke.bind(this, {\r\n            isHovering: __classPrivateFieldGet(this, _isHovering),\r\n            event: mouseEvent,\r\n            timestamp: Date.now()\r\n        }));\r\n    }\r\n    isAttached() {\r\n        return __classPrivateFieldGet(this, _isAttached);\r\n    }\r\n    invoke(ev) {\r\n        if (__classPrivateFieldGet(this, _callback))\r\n            __classPrivateFieldGet(this, _callback).call(this, ev);\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n    }\r\n    onMouseOver(ev) {\r\n        __classPrivateFieldSet(this, _isHovering, true);\r\n        this.emit(ev, true);\r\n    }\r\n    onMouseOut(ev) {\r\n        __classPrivateFieldSet(this, _isHovering, false);\r\n        this.emit(ev, true);\r\n    }\r\n    onMouseMove(ev) {\r\n        this.emit(ev, false);\r\n    }\r\n}\r\n_target = new WeakMap(), _callback = new WeakMap(), _inProgress = new WeakMap(), _isHovering = new WeakMap(), _isAttached = new WeakMap(), _onOverBound = new WeakMap(), _onMoveBound = new WeakMap(), _onOutBound = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _box, _targetWidth, _targetHeight, _margin;\r\nimport { CuiPositionError } from \"../models/errors\";\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiBasePositionEvaluator {\r\n    constructor() {\r\n        _box.set(this, void 0);\r\n        _targetWidth.set(this, void 0);\r\n        _targetHeight.set(this, void 0);\r\n        _margin.set(this, void 0);\r\n        __classPrivateFieldSet(this, _targetHeight, -1);\r\n        __classPrivateFieldSet(this, _targetWidth, -1);\r\n        __classPrivateFieldSet(this, _box, undefined);\r\n        __classPrivateFieldSet(this, _margin, 0);\r\n    }\r\n    setElementBox(box) {\r\n        __classPrivateFieldSet(this, _box, box);\r\n    }\r\n    setTarget(targetBox) {\r\n        __classPrivateFieldSet(this, _targetWidth, targetBox.width);\r\n        __classPrivateFieldSet(this, _targetHeight, targetBox.height);\r\n    }\r\n    setMargin(value) {\r\n        __classPrivateFieldSet(this, _margin, value);\r\n    }\r\n    getVerticalPosition(value) {\r\n        switch (value) {\r\n            case 'top':\r\n                return this.getTopPosition();\r\n            case \"bottom\":\r\n                return this.getBottomPosition();\r\n            case \"middle\":\r\n                return this.getMiddlePosition();\r\n            default:\r\n                return -1;\r\n        }\r\n    }\r\n    getHorizontalPosition(value) {\r\n        switch (value) {\r\n            case 'left':\r\n                return this.getLeftPosition();\r\n            case \"right\":\r\n                return this.getRightPosition();\r\n            case \"center\":\r\n                return this.getCenterPosition();\r\n            default:\r\n                return -1;\r\n        }\r\n    }\r\n    getAutoVerticalPosition(initial) {\r\n        let innerHeight = window.innerHeight;\r\n        let number = this.getVerticalPosition(initial);\r\n        if ((initial === 'top' || initial === \"middle\") && number < 0) {\r\n            return [this.getVerticalPosition(\"bottom\"), \"bottom\"];\r\n        }\r\n        else if ((initial === \"bottom\" || initial === \"middle\") && number + __classPrivateFieldGet(this, _targetHeight) > innerHeight) {\r\n            return [this.getVerticalPosition(\"top\"), \"top\"];\r\n        }\r\n        return [number, initial];\r\n    }\r\n    getAutoHorizontalPosition(initial) {\r\n        let innerWidth = window.innerWidth;\r\n        let number = this.getHorizontalPosition(initial);\r\n        if ((initial === 'right' || initial === \"center\") && number < 0) {\r\n            return [this.getHorizontalPosition(\"left\"), \"left\"];\r\n        }\r\n        else if ((initial === 'left' || initial === \"center\") && number + __classPrivateFieldGet(this, _targetWidth) > innerWidth) {\r\n            return [this.getHorizontalPosition(\"right\"), \"right\"];\r\n        }\r\n        return [number, initial];\r\n    }\r\n    getTopPosition() {\r\n        this.throwIfNotValid(\"getTopPosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return __classPrivateFieldGet(this, _box).top - __classPrivateFieldGet(this, _margin) - __classPrivateFieldGet(this, _targetHeight);\r\n    }\r\n    getBottomPosition() {\r\n        this.throwIfNotValid(\"getBottomPosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return __classPrivateFieldGet(this, _box).top + __classPrivateFieldGet(this, _box).height + __classPrivateFieldGet(this, _margin);\r\n    }\r\n    getMiddlePosition() {\r\n        this.throwIfNotValid(\"getMiddlePosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return (__classPrivateFieldGet(this, _box).top + __classPrivateFieldGet(this, _box).height / 2) - __classPrivateFieldGet(this, _targetHeight) / 2;\r\n    }\r\n    getLeftPosition() {\r\n        this.throwIfNotValid(\"getLeftPosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return __classPrivateFieldGet(this, _box).left;\r\n    }\r\n    getRightPosition() {\r\n        this.throwIfNotValid(\"getRightPosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return __classPrivateFieldGet(this, _box).left + __classPrivateFieldGet(this, _box).width - __classPrivateFieldGet(this, _targetWidth);\r\n    }\r\n    getCenterPosition() {\r\n        this.throwIfNotValid(\"getCenterPosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return (__classPrivateFieldGet(this, _box).left + __classPrivateFieldGet(this, _box).width / 2) - __classPrivateFieldGet(this, _targetWidth) / 2;\r\n    }\r\n    validate() {\r\n        return is(__classPrivateFieldGet(this, _box)) && __classPrivateFieldGet(this, _targetHeight) > 0 && __classPrivateFieldGet(this, _targetWidth) > 0;\r\n    }\r\n    throwIfNotValid(method) {\r\n        if (!this.validate()) {\r\n            throw new CuiPositionError(`[${method}] Position cannot be calculated: missing data [width: ${__classPrivateFieldGet(this, _targetWidth)}][height: ${__classPrivateFieldGet(this, _targetHeight)}]`);\r\n        }\r\n    }\r\n}\r\n_box = new WeakMap(), _targetWidth = new WeakMap(), _targetHeight = new WeakMap(), _margin = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _static, _preferred, _evaluator, _log;\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\nimport { is } from \"../utils/functions\";\r\nimport { CuiBasePositionEvaluator } from \"./evaluator\";\r\nexport class CuiBasePositionCalculator {\r\n    constructor(evaluator) {\r\n        _static.set(this, void 0);\r\n        _preferred.set(this, void 0);\r\n        _evaluator.set(this, void 0);\r\n        _log.set(this, void 0);\r\n        __classPrivateFieldSet(this, _preferred, \"top-center\");\r\n        __classPrivateFieldSet(this, _static, \"\");\r\n        __classPrivateFieldSet(this, _evaluator, evaluator !== null && evaluator !== void 0 ? evaluator : new CuiBasePositionEvaluator());\r\n        __classPrivateFieldSet(this, _log, CuiLoggerFactory.get(\"CuiBasePositionCalculator\"));\r\n    }\r\n    setMargin(value) {\r\n        __classPrivateFieldGet(this, _evaluator).setMargin(value);\r\n    }\r\n    setPreferred(position) {\r\n        __classPrivateFieldSet(this, _preferred, position);\r\n    }\r\n    setStatic(position) {\r\n        __classPrivateFieldSet(this, _static, position);\r\n    }\r\n    //targetWidth: number, targetHeight: number\r\n    calculate(elementBox, targetBox) {\r\n        __classPrivateFieldGet(this, _evaluator).setElementBox(elementBox);\r\n        __classPrivateFieldGet(this, _evaluator).setTarget(targetBox);\r\n        if (is(__classPrivateFieldGet(this, _static))) {\r\n            __classPrivateFieldGet(this, _log).debug(\"Evaluating static position\");\r\n            const [vertical, horizontal] = this.parse(__classPrivateFieldGet(this, _static));\r\n            return [__classPrivateFieldGet(this, _evaluator).getHorizontalPosition(horizontal), __classPrivateFieldGet(this, _evaluator).getVerticalPosition(vertical), __classPrivateFieldGet(this, _static)];\r\n        }\r\n        let [vertical, horizontal] = [\"\", \"\"];\r\n        if (is(__classPrivateFieldGet(this, _preferred))) {\r\n            __classPrivateFieldGet(this, _log).debug(\"Evaluating auto position\");\r\n            [vertical, horizontal] = this.parse(__classPrivateFieldGet(this, _preferred));\r\n        }\r\n        vertical = vertical !== null && vertical !== void 0 ? vertical : \"top\";\r\n        horizontal = horizontal !== null && horizontal !== void 0 ? horizontal : \"center\";\r\n        __classPrivateFieldGet(this, _log).debug(\"Calculating position: \" + vertical + \"-\" + horizontal);\r\n        const [outVNum, outVPos] = __classPrivateFieldGet(this, _evaluator).getAutoVerticalPosition(vertical);\r\n        const [outHNum, outHPos] = __classPrivateFieldGet(this, _evaluator).getAutoHorizontalPosition(horizontal);\r\n        __classPrivateFieldGet(this, _log).debug(\"Calculated position: \" + outVPos + \"-\" + outHPos);\r\n        return [outHNum, outVNum, outVPos + \"-\" + outHPos];\r\n    }\r\n    parse(position) {\r\n        return position.split(\"-\");\r\n    }\r\n}\r\n_static = new WeakMap(), _preferred = new WeakMap(), _evaluator = new WeakMap(), _log = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _taskId, _autoRenew, _timeout, _callback;\r\nimport { is } from \"./functions\";\r\nexport class CuiTaskRunner {\r\n    constructor(timeout, autoRenew, callback) {\r\n        _taskId.set(this, void 0);\r\n        _autoRenew.set(this, void 0);\r\n        _timeout.set(this, void 0);\r\n        _callback.set(this, void 0);\r\n        __classPrivateFieldSet(this, _autoRenew, autoRenew);\r\n        __classPrivateFieldSet(this, _timeout, timeout);\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    start() {\r\n        if (!this.canRun()) {\r\n            return;\r\n        }\r\n        this.stop();\r\n        __classPrivateFieldSet(this, _taskId, setTimeout(() => {\r\n            //@ts-ignore - already checked in canRun\r\n            __classPrivateFieldGet(this, _callback).call(this);\r\n            __classPrivateFieldSet(this, _taskId, null);\r\n            if (__classPrivateFieldGet(this, _autoRenew)) {\r\n                this.start();\r\n            }\r\n        }, __classPrivateFieldGet(this, _timeout)));\r\n    }\r\n    stop() {\r\n        if (__classPrivateFieldGet(this, _taskId)) {\r\n            clearTimeout(__classPrivateFieldGet(this, _taskId));\r\n            __classPrivateFieldSet(this, _taskId, null);\r\n        }\r\n    }\r\n    getId() {\r\n        return __classPrivateFieldGet(this, _taskId);\r\n    }\r\n    canRun() {\r\n        return is(__classPrivateFieldGet(this, _callback)) && __classPrivateFieldGet(this, _timeout) > 0;\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    setTimeout(timeout) {\r\n        __classPrivateFieldSet(this, _timeout, timeout);\r\n    }\r\n}\r\n_taskId = new WeakMap(), _autoRenew = new WeakMap(), _timeout = new WeakMap(), _callback = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defOpenAct, _prefix, _prefix_1, _bodyClass, _attribute, _triggerHoverListener, _hoverListener, _trigger, _windowClickEventId, _openEventId, _closeEventId, _positionCalculator, _posClass, _autoTask, _actions;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { is, replacePrefix, isStringTrue, getStringOrDefault, getIntOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS, SCOPE_SELECTOR } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { AriaAttributes } from \"cui-light-core/dist/esm/utils/aria\";\r\nimport { CuiHoverListener } from \"cui-light-core/dist/esm/listeners/hover\";\r\nimport { CuiBasePositionCalculator } from \"cui-light-core/dist/esm/position/calculator\";\r\nimport { CuiTaskRunner } from \"cui-light-core/dist/esm/utils/task\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nconst bodyClass = '{prefix}-drop-open';\r\nconst DROP_POSITION = \"{prefix}-drop-position-\";\r\nconst DROP_TRIGGER = \"{prefix}-drop-trigger\";\r\nconst DROP_DEFAULT_TRIGGER = \"> a, button\";\r\nconst DROP_DEFAULT_ANIMATION_CLS = '{prefix}-drop-animation-in';\r\nexport class CuiDropArgs {\r\n    constructor(prefix) {\r\n        _defOpenAct.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defOpenAct, replacePrefix(DROP_DEFAULT_ANIMATION_CLS, prefix));\r\n        this.mode = \"click\";\r\n        this.trigger = DROP_DEFAULT_TRIGGER;\r\n        this.autoClose = false;\r\n        this.outClose = false;\r\n        this.prevent = false;\r\n        this.pos = \"\";\r\n        this.action = __classPrivateFieldGet(this, _defOpenAct);\r\n        this.timeout = 3000;\r\n        this.margin = 8;\r\n    }\r\n    parse(args) {\r\n        this.mode = getStringOrDefault(args.mode, 'click').toLowerCase();\r\n        this.trigger = SCOPE_SELECTOR + getStringOrDefault(args.trigger, DROP_DEFAULT_TRIGGER);\r\n        this.prevent = isStringTrue(args.prevent);\r\n        this.autoClose = isStringTrue(args.autoClose);\r\n        this.outClose = args.outClose ? isStringTrue(args.outClose) : true;\r\n        this.pos = getStringOrDefault(args.pos, \"\");\r\n        this.action = getStringOrDefault(args.action, __classPrivateFieldGet(this, _defOpenAct));\r\n        this.timeout = getIntOrDefault(args.timeout, 3000);\r\n        this.margin = getIntOrDefault(args.margin, 8);\r\n    }\r\n}\r\n_defOpenAct = new WeakMap();\r\nexport class CuiDropComponenet {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix)}-drop`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiDropHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiDropHandler extends CuiHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuidropHandler\", element, attribute, new CuiDropArgs(prefix), utils);\r\n        _prefix_1.set(this, void 0);\r\n        _bodyClass.set(this, void 0);\r\n        _attribute.set(this, void 0);\r\n        _triggerHoverListener.set(this, void 0);\r\n        _hoverListener.set(this, void 0);\r\n        _trigger.set(this, void 0);\r\n        _windowClickEventId.set(this, void 0);\r\n        _openEventId.set(this, void 0);\r\n        _closeEventId.set(this, void 0);\r\n        _positionCalculator.set(this, void 0);\r\n        _posClass.set(this, void 0);\r\n        _autoTask.set(this, void 0);\r\n        _actions.set(this, void 0);\r\n        __classPrivateFieldSet(this, _attribute, attribute);\r\n        __classPrivateFieldSet(this, _prefix_1, prefix);\r\n        __classPrivateFieldSet(this, _bodyClass, replacePrefix(bodyClass, prefix));\r\n        __classPrivateFieldSet(this, _hoverListener, new CuiHoverListener(this.element));\r\n        __classPrivateFieldGet(this, _hoverListener).setCallback(this.onElementHover.bind(this));\r\n        __classPrivateFieldSet(this, _windowClickEventId, null);\r\n        __classPrivateFieldSet(this, _openEventId, null);\r\n        __classPrivateFieldSet(this, _closeEventId, null);\r\n        this.onTriggerClick = this.onTriggerClick.bind(this);\r\n        __classPrivateFieldSet(this, _positionCalculator, new CuiBasePositionCalculator());\r\n        __classPrivateFieldGet(this, _positionCalculator).setMargin(8);\r\n        __classPrivateFieldGet(this, _positionCalculator).setPreferred(\"bottom-left\");\r\n        __classPrivateFieldSet(this, _posClass, \"\");\r\n        __classPrivateFieldSet(this, _triggerHoverListener, undefined);\r\n        __classPrivateFieldSet(this, _trigger, this.element);\r\n        __classPrivateFieldSet(this, _actions, []);\r\n        __classPrivateFieldSet(this, _autoTask, new CuiTaskRunner(this.args.timeout, false, this.close.bind(this)));\r\n        ;\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldSet(this, _trigger, this.acquireTrigger());\r\n        __classPrivateFieldSet(this, _triggerHoverListener, new CuiHoverListener(__classPrivateFieldGet(this, _trigger)));\r\n        this.setTriggerEvent();\r\n        __classPrivateFieldSet(this, _openEventId, this.onEvent(EVENTS.OPEN, this.open.bind(this)));\r\n        __classPrivateFieldSet(this, _closeEventId, this.onEvent(EVENTS.CLOSE, this.close.bind(this)));\r\n        __classPrivateFieldGet(this, _positionCalculator).setStatic(this.args.pos);\r\n        __classPrivateFieldGet(this, _positionCalculator).setMargin(this.args.margin);\r\n        __classPrivateFieldSet(this, _autoTask, new CuiTaskRunner(this.args.timeout, false, this.close.bind(this)));\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n        this.mutate(() => {\r\n            AriaAttributes.setAria(this.element, 'aria-dropdown', \"\");\r\n        });\r\n        this._log.debug(\"Initialized\", \"handle\");\r\n    }\r\n    onUpdate() {\r\n        if (__classPrivateFieldGet(this, _triggerHoverListener) && __classPrivateFieldGet(this, _triggerHoverListener).isAttached()) {\r\n            __classPrivateFieldGet(this, _triggerHoverListener).detach();\r\n        }\r\n        else if (this.prevArgs && this.prevArgs.mode === 'click') {\r\n            //@ts-ignore \r\n            __classPrivateFieldGet(this, _trigger).removeEventListener('click', this.onTriggerClick);\r\n        }\r\n        __classPrivateFieldSet(this, _trigger, this.acquireTrigger());\r\n        __classPrivateFieldSet(this, _triggerHoverListener, new CuiHoverListener(__classPrivateFieldGet(this, _trigger)));\r\n        this.setTriggerEvent();\r\n        __classPrivateFieldGet(this, _positionCalculator).setStatic(this.args.pos);\r\n        __classPrivateFieldGet(this, _positionCalculator).setMargin(this.args.margin);\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n        __classPrivateFieldGet(this, _autoTask).setTimeout(this.args.timeout);\r\n    }\r\n    onDestroy() {\r\n        this.detachEvent(EVENTS.OPEN, __classPrivateFieldGet(this, _openEventId));\r\n        this.detachEvent(EVENTS.CLOSE, __classPrivateFieldGet(this, _closeEventId));\r\n    }\r\n    /**\r\n    * Api Method open\r\n    */\r\n    open() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.checkLockAndWarn('open')) {\r\n                return false;\r\n            }\r\n            if (this.isActive()) {\r\n                return this.close();\r\n            }\r\n            if (this.isAnyActive()) {\r\n                yield this.findAndCloseOpenedDrop();\r\n            }\r\n            this.isLocked = true;\r\n            this._log.debug(`Drop ${this.cuid}`, 'open');\r\n            this.onOpen();\r\n            this.isLocked = false;\r\n            return true;\r\n        });\r\n    }\r\n    /**\r\n     * Api Method close\r\n     */\r\n    close() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.checkLockAndWarn(\"close\") || !this.isActive()) {\r\n                return false;\r\n            }\r\n            this.isLocked = true;\r\n            this.logInfo(`Drop ${this.cuid}`, 'close');\r\n            this.onClose();\r\n            this.detachEvent(EVENTS.WINDOW_CLICK, __classPrivateFieldGet(this, _windowClickEventId));\r\n            this.emitEvent(EVENTS.CLOSED, {\r\n                timestamp: Date.now()\r\n            });\r\n            __classPrivateFieldGet(this, _hoverListener).detach();\r\n            this.isLocked = false;\r\n            return true;\r\n        });\r\n    }\r\n    onClose() {\r\n        this.mutate(() => {\r\n            this.helper.removeClass(this.activeClassName, this.element);\r\n            this.helper.removeClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n            this.toggleActions();\r\n            this.helper.removeClass(__classPrivateFieldGet(this, _posClass), this.element);\r\n            AriaAttributes.setAria(this.element, 'aria-expanded', 'false');\r\n        });\r\n    }\r\n    onOpen() {\r\n        this.helper.setClass(this.activeClassName, this.element);\r\n        this.mutate(() => {\r\n            const box = __classPrivateFieldGet(this, _trigger).getBoundingClientRect();\r\n            try {\r\n                const [x, y, pos] = __classPrivateFieldGet(this, _positionCalculator).calculate(box, this.element.getBoundingClientRect());\r\n                this.element.style.top = `${y - box.top}px`;\r\n                this.element.style.left = `${x - box.left}px`;\r\n                __classPrivateFieldSet(this, _posClass, replacePrefix(DROP_POSITION + pos, __classPrivateFieldGet(this, _prefix_1)));\r\n                this.toggleActions();\r\n                this.helper.setClass(__classPrivateFieldGet(this, _posClass), this.element);\r\n                this.helper.setClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n                this.emitEvent(EVENTS.OPENED, {\r\n                    timestamp: Date.now()\r\n                });\r\n                __classPrivateFieldGet(this, _hoverListener).attach();\r\n                this.runAutoCloseTask();\r\n                if (this.args.outClose) {\r\n                    __classPrivateFieldSet(this, _windowClickEventId, this.onEvent(EVENTS.WINDOW_CLICK, this.onWindowClick.bind(this)));\r\n                }\r\n                AriaAttributes.setAria(this.element, 'aria-expanded', 'true');\r\n            }\r\n            catch (e) {\r\n                this._log.exception(e);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Event invoked when window is clicked\r\n     * @param ev\r\n     */\r\n    onWindowClick(ev) {\r\n        if (!this.element.contains(ev.target)) {\r\n            this.close();\r\n        }\r\n    }\r\n    isAnyActive() {\r\n        return this.helper.hasClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n    }\r\n    /**\r\n     * Finds and opens other active drop element\r\n     */\r\n    findAndCloseOpenedDrop() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const opened = document.querySelector(`[${__classPrivateFieldGet(this, _attribute)}].${this.activeClassName}`);\r\n            if (!is(opened)) {\r\n                this._log.warning(\"Opened drop was not found\");\r\n                return false;\r\n            }\r\n            //@ts-ignore opened checked\r\n            const handler = opened.$handlers[__classPrivateFieldGet(this, _attribute)];\r\n            if (!is(handler)) {\r\n                this._log.warning(\"Drop handler was not found in the element\");\r\n                return false;\r\n            }\r\n            return handler.close();\r\n        });\r\n    }\r\n    /**\r\n     * Invoked when trigger button is clicked\r\n     * @param ev\r\n     */\r\n    onTriggerClick(ev) {\r\n        if (this.isActive()) {\r\n            this.close();\r\n        }\r\n        else {\r\n            this.open();\r\n        }\r\n        if (this.args.prevent) {\r\n            ev.preventDefault();\r\n        }\r\n    }\r\n    /**\r\n    * Invoked when trigger button is hovered on\r\n    * @param ev\r\n    */\r\n    onHoverEvent(ev) {\r\n        if (ev.isHovering && !this.isActive()) {\r\n            this.open();\r\n        }\r\n        if (this.args.prevent) {\r\n            ev.event.preventDefault();\r\n        }\r\n    }\r\n    /**\r\n     * Method triggered when opened element is hovered on\r\n     * @param ev\r\n     */\r\n    onElementHover(ev) {\r\n        if (ev.isHovering) {\r\n            __classPrivateFieldGet(this, _autoTask).stop();\r\n        }\r\n        else if (!ev.isHovering && this.args.autoClose) {\r\n            this.runAutoCloseTask();\r\n        }\r\n    }\r\n    /**\r\n     * Sets event on trigger button\r\n     */\r\n    setTriggerEvent() {\r\n        if (this.args.mode === 'hover' && __classPrivateFieldGet(this, _triggerHoverListener)) {\r\n            __classPrivateFieldGet(this, _triggerHoverListener).setCallback(this.onHoverEvent.bind(this));\r\n            __classPrivateFieldGet(this, _triggerHoverListener).attach();\r\n        }\r\n        else {\r\n            //@ts-ignore\r\n            __classPrivateFieldGet(this, _trigger).addEventListener('click', this.onTriggerClick);\r\n        }\r\n    }\r\n    /**\r\n     * Runs auto-close task on opened element\r\n     */\r\n    runAutoCloseTask() {\r\n        if (!this.args.autoClose) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _autoTask).start();\r\n    }\r\n    toggleActions() {\r\n        __classPrivateFieldGet(this, _actions).forEach(action => {\r\n            action.toggle(this.element);\r\n        });\r\n    }\r\n    acquireTrigger() {\r\n        let ret = null;\r\n        if (!this.element.parentElement) {\r\n            ret = document.querySelector(this.args.trigger);\r\n        }\r\n        else\r\n            ret = this.element.parentElement.querySelector(this.args.trigger);\r\n        return ret !== null && ret !== void 0 ? ret : this.element;\r\n    }\r\n}\r\n_prefix_1 = new WeakMap(), _bodyClass = new WeakMap(), _attribute = new WeakMap(), _triggerHoverListener = new WeakMap(), _hoverListener = new WeakMap(), _trigger = new WeakMap(), _windowClickEventId = new WeakMap(), _openEventId = new WeakMap(), _closeEventId = new WeakMap(), _positionCalculator = new WeakMap(), _posClass = new WeakMap(), _autoTask = new WeakMap(), _actions = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _element, _element_1, _element_2;\r\nexport class BasePositionCalculator {\r\n    calculate(x, y, diffX, diffY) {\r\n        return [x, y];\r\n    }\r\n}\r\nexport class OptionalPositionCalculator {\r\n    constructor(element) {\r\n        _element.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element, element);\r\n    }\r\n    calculate(x, y, diffX, diffY) {\r\n        let newX = __classPrivateFieldGet(this, _element).offsetLeft + diffX;\r\n        let newY = __classPrivateFieldGet(this, _element).offsetTop + diffY;\r\n        return [newX, newY];\r\n    }\r\n}\r\n_element = new WeakMap();\r\nexport class BaseResizeCalculator {\r\n    constructor(element) {\r\n        _element_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element_1, element);\r\n    }\r\n    calculate(x, y, diffX, diffY) {\r\n        let width = x - __classPrivateFieldGet(this, _element_1).offsetLeft;\r\n        let height = y - __classPrivateFieldGet(this, _element_1).offsetTop;\r\n        return [width, height];\r\n    }\r\n}\r\n_element_1 = new WeakMap();\r\nexport class OptionalResizeCalculator {\r\n    constructor(element) {\r\n        _element_2.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element_2, element);\r\n    }\r\n    calculate(x, y, diffX, diffY) {\r\n        let width = __classPrivateFieldGet(this, _element_2).offsetWidth + diffX;\r\n        let height = __classPrivateFieldGet(this, _element_2).offsetHeight + diffY;\r\n        return [width, height];\r\n    }\r\n}\r\n_element_2 = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTimeout, _prefix, _prefix_1, _isMoving, _isResizing, _prevX, _prevY, _prefix_2, _moveListener, _positionCalculator, _resizeCalculator, _resizeBtn, _moveBtn;\r\nimport { replacePrefix, isStringTrue, is, getIntOrDefault, getStringOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { AriaAttributes } from \"cui-light-core/dist/esm/utils/aria\";\r\nimport { CuiInteractableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiMoveEventListener } from \"cui-light-core/dist/esm/listeners/move\";\r\nimport { BasePositionCalculator, BaseResizeCalculator } from \"./helpers\";\r\nimport { CLASSES, EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst FLOAT_OPEN_ANIMATION_CLASS = '.{prefix}-float-default-in';\r\nconst FLOAT_CLOSE_ANIMATION_CLASS = '.{prefix}-float-default-out';\r\nconst MOVE = '.{prefix}-float-move';\r\nconst RESIZE = '.{prefix}-float-resize';\r\nexport class CuiFloatArgs {\r\n    constructor(prefix, defTimeout) {\r\n        _defTimeout.set(this, void 0);\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTimeout, defTimeout !== null && defTimeout !== void 0 ? defTimeout : 300);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        this.escClose = false;\r\n        this.keyClose = \"\";\r\n        this.openAct = \"\";\r\n        this.closeAct = \"\";\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n    }\r\n    parse(args) {\r\n        this.escClose = isStringTrue(args.escClose);\r\n        this.keyClose = args.keyClose;\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.openAct = getStringOrDefault(args.openAct, replacePrefix(FLOAT_OPEN_ANIMATION_CLASS, __classPrivateFieldGet(this, _prefix)));\r\n        this.closeAct = getStringOrDefault(args.closeAct, replacePrefix(FLOAT_CLOSE_ANIMATION_CLASS, __classPrivateFieldGet(this, _prefix)));\r\n    }\r\n}\r\n_defTimeout = new WeakMap(), _prefix = new WeakMap();\r\nexport class CuiFloatComponent {\r\n    constructor(prefix) {\r\n        _prefix_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix_1, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix_1)}-float`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiFloatHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix_1));\r\n    }\r\n}\r\n_prefix_1 = new WeakMap();\r\nexport class CuiFloatHandler extends CuiInteractableHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiFloatHandler\", element, attribute, new CuiFloatArgs(prefix, utils.setup.animationTime), utils);\r\n        _isMoving.set(this, void 0);\r\n        _isResizing.set(this, void 0);\r\n        _prevX.set(this, void 0);\r\n        _prevY.set(this, void 0);\r\n        _prefix_2.set(this, void 0);\r\n        _moveListener.set(this, void 0);\r\n        _positionCalculator.set(this, void 0);\r\n        _resizeCalculator.set(this, void 0);\r\n        _resizeBtn.set(this, void 0);\r\n        _moveBtn.set(this, void 0);\r\n        __classPrivateFieldSet(this, _isMoving, false);\r\n        __classPrivateFieldSet(this, _isResizing, false);\r\n        __classPrivateFieldSet(this, _prevX, 0);\r\n        __classPrivateFieldSet(this, _prevY, 0);\r\n        __classPrivateFieldSet(this, _moveListener, new CuiMoveEventListener());\r\n        __classPrivateFieldGet(this, _moveListener).preventDefault(false);\r\n        __classPrivateFieldSet(this, _positionCalculator, new BasePositionCalculator());\r\n        __classPrivateFieldSet(this, _resizeCalculator, new BaseResizeCalculator(element));\r\n        __classPrivateFieldSet(this, _prefix_2, prefix);\r\n        this.move = this.move.bind(this);\r\n        this.resize = this.resize.bind(this);\r\n        __classPrivateFieldSet(this, _moveBtn, null);\r\n        __classPrivateFieldSet(this, _resizeBtn, null);\r\n    }\r\n    onInit() {\r\n        AriaAttributes.setAria(this.element, 'aria-modal', \"\");\r\n        __classPrivateFieldSet(this, _moveBtn, this.element.querySelector(replacePrefix(MOVE, __classPrivateFieldGet(this, _prefix_2))));\r\n        __classPrivateFieldSet(this, _resizeBtn, this.element.querySelector(replacePrefix(RESIZE, __classPrivateFieldGet(this, _prefix_2))));\r\n        __classPrivateFieldGet(this, _moveListener).setCallback(this.onMove.bind(this));\r\n    }\r\n    onUpdate() {\r\n    }\r\n    onDestroy() {\r\n    }\r\n    onBeforeOpen() {\r\n        return true;\r\n    }\r\n    onAfterOpen() {\r\n        __classPrivateFieldGet(this, _moveListener).attach();\r\n    }\r\n    onAfterClose() {\r\n        __classPrivateFieldGet(this, _moveListener).detach();\r\n    }\r\n    onBeforeClose() {\r\n        return true;\r\n    }\r\n    onMove(ev) {\r\n        switch (ev.type) {\r\n            case 'down':\r\n                this.onMouseDown(ev);\r\n                break;\r\n            case 'up':\r\n                this.onMouseUp(ev);\r\n                break;\r\n            case 'move':\r\n                this.onMouseMove(ev);\r\n                break;\r\n        }\r\n    }\r\n    onMouseDown(ev) {\r\n        if (ev.target === __classPrivateFieldGet(this, _moveBtn)) {\r\n            __classPrivateFieldSet(this, _isMoving, true);\r\n            ev.event.preventDefault();\r\n        }\r\n        else if (ev.target === __classPrivateFieldGet(this, _resizeBtn)) {\r\n            __classPrivateFieldSet(this, _isResizing, true);\r\n            ev.event.preventDefault();\r\n            //this.helper.setClass(\"cui-float-resize-shadow\")\r\n        }\r\n        __classPrivateFieldSet(this, _prevX, ev.x);\r\n        __classPrivateFieldSet(this, _prevY, ev.y);\r\n        this.helper.setClassesAs(document.body, CLASSES.swipingOn);\r\n        // Lock global move handler\r\n        this.utils.bus.emit(EVENTS.MOVE_LOCK, null, true);\r\n    }\r\n    onMouseMove(ev) {\r\n        if (__classPrivateFieldGet(this, _isMoving)) {\r\n            this.peform(ev, this.move);\r\n        }\r\n        else if (__classPrivateFieldGet(this, _isResizing)) {\r\n            this.peform(ev, this.resize);\r\n        }\r\n    }\r\n    onMouseUp(ev) {\r\n        __classPrivateFieldSet(this, _isMoving, false);\r\n        __classPrivateFieldSet(this, _isResizing, false);\r\n        this.helper.removeClassesAs(document.body, CLASSES.swipingOn);\r\n        // Unlock global handler\r\n        this.utils.bus.emit(EVENTS.MOVE_LOCK, null, false);\r\n    }\r\n    peform(ev, callback) {\r\n        this.mutate(() => {\r\n            if (is(callback))\r\n                callback(this.element, ev.x, ev.y, (ev.x - __classPrivateFieldGet(this, _prevX)), (ev.y - __classPrivateFieldGet(this, _prevY)));\r\n            __classPrivateFieldSet(this, _prevX, ev.x);\r\n            __classPrivateFieldSet(this, _prevY, ev.y);\r\n        });\r\n        ev.event.preventDefault();\r\n    }\r\n    resize(element, x, y, diffX, diffY) {\r\n        let [newWidth, newHeight] = __classPrivateFieldGet(this, _resizeCalculator).calculate(x, y, diffX, diffY);\r\n        if (this.fitsWindow(element.offsetTop, element.offsetLeft, newWidth, newHeight)) {\r\n            this.mutate(() => {\r\n                element.style.width = newWidth + \"px\";\r\n                element.style.height = newHeight + \"px\";\r\n            });\r\n        }\r\n    }\r\n    move(element, x, y, diffX, diffY) {\r\n        let [newX, newY] = __classPrivateFieldGet(this, _positionCalculator).calculate(x, y, diffX, diffY);\r\n        if (this.fitsWindow(newY, newX, element.offsetWidth, element.offsetHeight)) {\r\n            this.mutate(() => {\r\n                element.style.left = newX + \"px\";\r\n                element.style.top = newY + \"px\";\r\n            });\r\n        }\r\n    }\r\n    fitsWindow(top, left, width, height) {\r\n        return (top + height < window.innerHeight - 10) &&\r\n            (top > 10) && (left > 10) &&\r\n            (left + width < window.innerWidth - 10);\r\n    }\r\n}\r\n_isMoving = new WeakMap(), _isResizing = new WeakMap(), _prevX = new WeakMap(), _prevY = new WeakMap(), _prefix_2 = new WeakMap(), _moveListener = new WeakMap(), _positionCalculator = new WeakMap(), _resizeCalculator = new WeakMap(), _resizeBtn = new WeakMap(), _moveBtn = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _currentIcon;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { ICONS } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { is, isString, getStringOrDefault, getIntOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { IconBuilder } from \"cui-light-core/dist/esm/builders/icon\";\r\nexport class CuiIconArgs {\r\n    constructor() {\r\n        this.icon = \"\";\r\n        this.scale = 1;\r\n    }\r\n    parse(val) {\r\n        if (isString(val)) {\r\n            this.icon = getStringOrDefault(val, \"\");\r\n        }\r\n        else {\r\n            this.icon = getStringOrDefault(val.icon, \"\");\r\n            this.scale = getIntOrDefault(val.scale, 1);\r\n        }\r\n    }\r\n}\r\nexport class CuiIconComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-icon`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiIconHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiIconHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiIconHandler\", element, attribute, new CuiIconArgs(), utils);\r\n        _currentIcon.set(this, void 0);\r\n        __classPrivateFieldSet(this, _currentIcon, null);\r\n    }\r\n    onInit() {\r\n        if (__classPrivateFieldGet(this, _currentIcon) !== null) {\r\n            this._log.debug(\"Icon already initialized\");\r\n            return;\r\n        }\r\n        this.addIcon(this.args.icon);\r\n        __classPrivateFieldSet(this, _currentIcon, this.args.icon);\r\n    }\r\n    onUpdate() {\r\n        if (this.args.icon === __classPrivateFieldGet(this, _currentIcon)) {\r\n            return;\r\n        }\r\n        this.addIcon(this.args.icon);\r\n        __classPrivateFieldSet(this, _currentIcon, this.args.icon);\r\n    }\r\n    onDestroy() {\r\n        const svg = this.element.querySelector('svg');\r\n        if (is(svg)) {\r\n            //@ts-ignore checked\r\n            svg.remove();\r\n        }\r\n        __classPrivateFieldSet(this, _currentIcon, null);\r\n    }\r\n    addIcon(icon) {\r\n        const iconStr = icon ? ICONS[icon] : null;\r\n        if (!iconStr) {\r\n            return;\r\n        }\r\n        const iconSvg = new IconBuilder(iconStr).setScale(this.args.scale).build();\r\n        const svg = this.element.querySelector('svg');\r\n        if (is(svg)) {\r\n            //@ts-ignore checked\r\n            svg.remove();\r\n        }\r\n        if (this.element.childNodes.length > 0) {\r\n            this.mutate(this.insertBefore, iconSvg);\r\n        }\r\n        else {\r\n            this.mutate(this.appendChild, iconSvg);\r\n        }\r\n    }\r\n    insertBefore(iconElement) {\r\n        this.element.insertBefore(iconElement, this.element.firstChild);\r\n    }\r\n    appendChild(iconElement) {\r\n        this.element.appendChild(iconElement);\r\n    }\r\n}\r\n_currentIcon = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _observer, _root, _threshold, _callback;\r\nexport class CuiIntersectionEntry {\r\n    constructor() {\r\n        this.isInView = false;\r\n        this.ratio = 0;\r\n    }\r\n}\r\n/**\r\n * Creates a wrapper for intersection observer\r\n * Constructor gets a root element for observer and optional array of threshold values [0...1]\r\n */\r\nexport class CuiIntersectionObserver {\r\n    constructor(root, threshold) {\r\n        _observer.set(this, void 0);\r\n        _root.set(this, void 0);\r\n        _threshold.set(this, void 0);\r\n        _callback.set(this, void 0);\r\n        __classPrivateFieldSet(this, _root, root);\r\n        __classPrivateFieldSet(this, _threshold, threshold !== null && threshold !== void 0 ? threshold : [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1]);\r\n        __classPrivateFieldSet(this, _callback, undefined);\r\n        __classPrivateFieldSet(this, _observer, undefined);\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    connect() {\r\n        if (!__classPrivateFieldGet(this, _callback)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _observer, new IntersectionObserver(__classPrivateFieldGet(this, _callback), {\r\n            root: __classPrivateFieldGet(this, _root),\r\n            rootMargin: '0px',\r\n            threshold: __classPrivateFieldGet(this, _threshold)\r\n        }));\r\n    }\r\n    observe(target) {\r\n        if (__classPrivateFieldGet(this, _observer))\r\n            __classPrivateFieldGet(this, _observer).observe(target);\r\n    }\r\n    unobserve(target) {\r\n        if (__classPrivateFieldGet(this, _observer))\r\n            __classPrivateFieldGet(this, _observer).unobserve(target);\r\n    }\r\n    disconnect() {\r\n        if (__classPrivateFieldGet(this, _observer))\r\n            __classPrivateFieldGet(this, _observer).disconnect();\r\n    }\r\n}\r\n_observer = new WeakMap(), _root = new WeakMap(), _threshold = new WeakMap(), _callback = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _observer, _targets, _actions;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiIntersectionObserver } from \"cui-light-core/dist/esm/observers/intersection\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { is, getRangeValueOrDefault, getStringOrDefault, isStringTrue } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS, SCOPE_SELECTOR } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst DEFAULT_SELCTOR = \"> *\";\r\n/**\r\n * Intersection\r\n * Toggles action in/out when target is intersecting with the screen\r\n *\r\n * Set this on scrollable element\r\n * target - children selector\r\n * offset - 0...1 - tells how much target must intersecting with the screen\r\n * action - action to trigger\r\n */\r\nexport class CuiIntersectionAttributes {\r\n    constructor() {\r\n        this.target = \"div\";\r\n        this.action = \"\";\r\n        this.offset = 0;\r\n        this.isRoot = false;\r\n    }\r\n    parse(args) {\r\n        this.target = is(args.target) ? SCOPE_SELECTOR + args.target : SCOPE_SELECTOR + DEFAULT_SELCTOR;\r\n        this.action = getStringOrDefault(args.action, \"\");\r\n        this.offset = getRangeValueOrDefault(parseFloat(args.offset), 0, 1, 0);\r\n        this.isRoot = isStringTrue(args.isRoot);\r\n    }\r\n}\r\nexport class CuiIntersectionComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-intersection`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiIntersectionHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiIntersectionHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiIntersectionHandler\", element, attribute, new CuiIntersectionAttributes(), utils);\r\n        _observer.set(this, void 0);\r\n        _targets.set(this, void 0);\r\n        _actions.set(this, void 0);\r\n        __classPrivateFieldSet(this, _observer, new CuiIntersectionObserver(this.element));\r\n        __classPrivateFieldSet(this, _targets, []);\r\n        __classPrivateFieldSet(this, _actions, []);\r\n    }\r\n    onInit() {\r\n        this.parseArguments();\r\n        __classPrivateFieldGet(this, _observer).setCallback(this.onIntersection.bind(this));\r\n        __classPrivateFieldGet(this, _observer).connect();\r\n        __classPrivateFieldGet(this, _targets).forEach(target => {\r\n            __classPrivateFieldGet(this, _observer).observe(target);\r\n        });\r\n    }\r\n    onUpdate() {\r\n        this.parseArguments();\r\n    }\r\n    onDestroy() {\r\n        __classPrivateFieldGet(this, _observer).disconnect();\r\n    }\r\n    parseArguments() {\r\n        // @ts-ignore prevArgs is correct\r\n        if (!is(this.prevArgs) || (this.prevArgs.target !== this.args.target)) {\r\n            let el = this.args.isRoot ? document.body : this.element;\r\n            __classPrivateFieldSet(this, _targets, [...el.querySelectorAll(this.args.target)]);\r\n        }\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n    }\r\n    onIntersection(entries, observer) {\r\n        if (!is(__classPrivateFieldGet(this, _targets))) {\r\n            return;\r\n        }\r\n        entries.forEach(entry => {\r\n            if (entry.isIntersecting && entry.intersectionRatio >= this.args.offset) {\r\n                this.addActions(entry.target);\r\n            }\r\n            else {\r\n                this.removeActions(entry.target);\r\n            }\r\n            this.emitIntersection(entry);\r\n        });\r\n    }\r\n    emitIntersection(entry) {\r\n        this.emitEvent(EVENTS.INTERSECTION, {\r\n            entry: entry,\r\n            offset: this.args.offset,\r\n            timestamp: Date.now()\r\n        });\r\n    }\r\n    addActions(element) {\r\n        __classPrivateFieldGet(this, _actions).forEach(action => action.add(element));\r\n    }\r\n    removeActions(element) {\r\n        __classPrivateFieldGet(this, _actions).forEach(action => action.remove(element));\r\n    }\r\n}\r\n_observer = new WeakMap(), _targets = new WeakMap(), _actions = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _prefix, _defTimeout, _prefix_1, _prefix_2, _bodyClass, _scrollY, _windowClickEventId;\r\nimport { CuiInteractableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { AriaAttributes } from \"cui-light-core/dist/esm/utils/aria\";\r\nimport { is, isStringTrue, getStringOrDefault, getIntOrDefault, replacePrefix, getName } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst OFFCANVAS_RIGHT_ANIM_DEFAULT_IN = \".{prefix}-offcanvas-default-right-in\";\r\nconst OFFCANVAS_RIGHT_ANIM_DEFAULT_OUT = \".{prefix}-offcanvas-default-right-out\";\r\nconst OFFCANVAS_LEFT_ANIM_DEFAULT_IN = \".{prefix}-offcanvas-default-left-in\";\r\nconst OFFCANVAS_LEFT_ANIM_DEFAULT_OUT = \".{prefix}-offcanvas-default-left-out\";\r\nconst OFFCANVAS_BODY = \"{prefix}-off-canvas-open\";\r\nconst OFFCANVAS_CONTAINER_CLS = '.{prefix}-off-canvas-container';\r\nexport class CuiOffCanvasArgs {\r\n    constructor(prefix, timeout) {\r\n        _prefix.set(this, void 0);\r\n        _defTimeout.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        this.escClose = false;\r\n        this.position = 'right';\r\n        this.openAct = this.getDefaultOpenClass();\r\n        this.closeAct = this.getDefaultCloseClass();\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n        this.outClose = false;\r\n        this.keyClose = \"\";\r\n    }\r\n    parse(args) {\r\n        if (is(args)) {\r\n            this.escClose = isStringTrue(args.escClose);\r\n            this.outClose = isStringTrue(args.outClose);\r\n            this.position = getStringOrDefault(args.position, 'right');\r\n            this.openAct = getStringOrDefault(args.openAct, this.getDefaultOpenClass());\r\n            this.closeAct = getStringOrDefault(args.closeAct, this.getDefaultCloseClass());\r\n            this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n            this.keyClose = args.keyClose;\r\n        }\r\n    }\r\n    getDefaultOpenClass() {\r\n        return replacePrefix(this.position === 'right' ? OFFCANVAS_RIGHT_ANIM_DEFAULT_IN : OFFCANVAS_LEFT_ANIM_DEFAULT_IN, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n    getDefaultCloseClass() {\r\n        return replacePrefix(this.position === 'right' ? OFFCANVAS_RIGHT_ANIM_DEFAULT_OUT : OFFCANVAS_LEFT_ANIM_DEFAULT_OUT, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap(), _defTimeout = new WeakMap();\r\nexport class CuiOffCanvasComponent {\r\n    constructor(prefix) {\r\n        _prefix_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix_1, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix_1)}-off-canvas`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiOffCanvasHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix_1));\r\n    }\r\n}\r\n_prefix_1 = new WeakMap();\r\nexport class CuiOffCanvasHandler extends CuiInteractableHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiOffCanvasHandler\", element, attribute, new CuiOffCanvasArgs(prefix, utils.setup.animationTime), utils);\r\n        _prefix_2.set(this, void 0);\r\n        _bodyClass.set(this, void 0);\r\n        _scrollY.set(this, void 0);\r\n        _windowClickEventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix_2, prefix);\r\n        __classPrivateFieldSet(this, _bodyClass, replacePrefix(OFFCANVAS_BODY, prefix));\r\n        __classPrivateFieldSet(this, _windowClickEventId, null);\r\n        __classPrivateFieldSet(this, _scrollY, 0);\r\n    }\r\n    onInit() {\r\n        this.mutate(() => {\r\n            this.setPositionLeft();\r\n            AriaAttributes.setAria(this.element, 'aria-modal', \"\");\r\n        });\r\n    }\r\n    onUpdate() {\r\n        this.setPositionLeft();\r\n    }\r\n    onDestroy() {\r\n    }\r\n    onBeforeOpen() {\r\n        if (this.isAnyActive()) {\r\n            return false;\r\n        }\r\n        __classPrivateFieldSet(this, _scrollY, window.pageYOffset);\r\n        return true;\r\n    }\r\n    onAfterOpen() {\r\n        if (this.args.outClose) {\r\n            __classPrivateFieldSet(this, _windowClickEventId, this.onEvent(EVENTS.WINDOW_CLICK, this.onWindowClick.bind(this)));\r\n        }\r\n        this.helper.setClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n        document.body.style.top = `-${scrollY}px`;\r\n    }\r\n    onAfterClose() {\r\n        this.detachEvent(EVENTS.WINDOW_CLICK, __classPrivateFieldGet(this, _windowClickEventId));\r\n        this.helper.removeClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n        document.body.style.top = '';\r\n        window.scrollTo(0, __classPrivateFieldGet(this, _scrollY) * -1);\r\n    }\r\n    onBeforeClose() {\r\n        return true;\r\n    }\r\n    onWindowClick(ev) {\r\n        const container = this.element.querySelector(replacePrefix(OFFCANVAS_CONTAINER_CLS, __classPrivateFieldGet(this, _prefix_2)));\r\n        if (container && !container.contains(ev.target)) {\r\n            this.close();\r\n        }\r\n    }\r\n    isAnyActive() {\r\n        return this.helper.hasClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n    }\r\n    setPositionLeft() {\r\n        let cls = getName(__classPrivateFieldGet(this, _prefix_2), 'left');\r\n        if (this.args.position === 'left' && !this.helper.hasClass(cls, this.element)) {\r\n            this.helper.setClass(cls, this.element);\r\n        }\r\n        else if (this.args.position == 'right' && this.helper.hasClass(cls, this.element)) {\r\n            this.helper.removeClass(cls, this.element);\r\n        }\r\n    }\r\n}\r\n_prefix_2 = new WeakMap(), _bodyClass = new WeakMap(), _scrollY = new WeakMap(), _windowClickEventId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _box, _element, _element_1;\r\nexport class CuiElementBoxFactory {\r\n    static get(element) {\r\n        if (element instanceof Window) {\r\n            return new WindowElementBox();\r\n        }\r\n        else if (element instanceof HTMLElement) {\r\n            return new HTMLElementBox(element);\r\n        }\r\n        return new ElementBox(element);\r\n    }\r\n}\r\nexport class ElementBox {\r\n    constructor(element) {\r\n        _box.set(this, void 0);\r\n        _element.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element, element);\r\n        __classPrivateFieldSet(this, _box, element.getBoundingClientRect());\r\n    }\r\n    getHeight() {\r\n        return __classPrivateFieldGet(this, _box).height;\r\n    }\r\n    getWidth() {\r\n        return __classPrivateFieldGet(this, _box).width;\r\n    }\r\n    getTop() {\r\n        return __classPrivateFieldGet(this, _box).top;\r\n    }\r\n    getLeft() {\r\n        return __classPrivateFieldGet(this, _box).left;\r\n    }\r\n    getScrollHeight() {\r\n        return __classPrivateFieldGet(this, _element).scrollHeight;\r\n    }\r\n    getScrollWidth() {\r\n        return __classPrivateFieldGet(this, _element).scrollWidth;\r\n    }\r\n    getScrollTop() {\r\n        return __classPrivateFieldGet(this, _element).scrollTop;\r\n    }\r\n    getScrollLeft() {\r\n        return __classPrivateFieldGet(this, _element).scrollLeft;\r\n    }\r\n    queryAll(selector) {\r\n        return [...__classPrivateFieldGet(this, _element).querySelectorAll(selector)];\r\n    }\r\n}\r\n_box = new WeakMap(), _element = new WeakMap();\r\nexport class HTMLElementBox {\r\n    constructor(element) {\r\n        _element_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element_1, element);\r\n    }\r\n    getHeight() {\r\n        return __classPrivateFieldGet(this, _element_1).offsetHeight;\r\n    }\r\n    getWidth() {\r\n        return __classPrivateFieldGet(this, _element_1).offsetWidth;\r\n    }\r\n    getTop() {\r\n        return __classPrivateFieldGet(this, _element_1).offsetTop;\r\n    }\r\n    getLeft() {\r\n        return __classPrivateFieldGet(this, _element_1).offsetLeft;\r\n    }\r\n    getScrollHeight() {\r\n        return __classPrivateFieldGet(this, _element_1).scrollHeight;\r\n    }\r\n    getScrollWidth() {\r\n        return __classPrivateFieldGet(this, _element_1).scrollWidth;\r\n    }\r\n    getScrollTop() {\r\n        return __classPrivateFieldGet(this, _element_1).scrollTop;\r\n    }\r\n    getScrollLeft() {\r\n        return __classPrivateFieldGet(this, _element_1).scrollLeft;\r\n    }\r\n    queryAll(selector) {\r\n        return [...__classPrivateFieldGet(this, _element_1).querySelectorAll(selector)];\r\n    }\r\n}\r\n_element_1 = new WeakMap();\r\nexport class WindowElementBox {\r\n    getHeight() {\r\n        return window.innerHeight;\r\n    }\r\n    getWidth() {\r\n        return window.innerWidth;\r\n    }\r\n    getTop() {\r\n        return 0;\r\n    }\r\n    getLeft() {\r\n        return 0;\r\n    }\r\n    getScrollHeight() {\r\n        return window.innerHeight;\r\n    }\r\n    getScrollWidth() {\r\n        return window.innerWidth;\r\n    }\r\n    getScrollTop() {\r\n        return window.pageYOffset;\r\n    }\r\n    getScrollLeft() {\r\n        return window.pageXOffset;\r\n    }\r\n    queryAll(selector) {\r\n        return [...document.querySelectorAll(selector)];\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _target, _inProgress, _threshold, _prevX, _prevY, _callback, _isAttached, _box, _task, _listener;\r\nimport { CuiElementBoxFactory } from \"../models/elements\";\r\nimport { getRangeValueOrDefault, is } from \"../utils/functions\";\r\nimport { CuiTaskRunner } from \"../utils/task\";\r\nconst DEFAULT_SCROLL_END_TIMEOUT = 50;\r\nexport class CuiScrollListener {\r\n    constructor(target, threshold) {\r\n        _target.set(this, void 0);\r\n        _inProgress.set(this, void 0);\r\n        _threshold.set(this, void 0);\r\n        _prevX.set(this, void 0);\r\n        _prevY.set(this, void 0);\r\n        _callback.set(this, void 0);\r\n        _isAttached.set(this, void 0);\r\n        _box.set(this, void 0);\r\n        _task.set(this, void 0);\r\n        _listener.set(this, void 0);\r\n        __classPrivateFieldSet(this, _target, target);\r\n        __classPrivateFieldSet(this, _box, CuiElementBoxFactory.get(target));\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n        __classPrivateFieldSet(this, _threshold, getRangeValueOrDefault(threshold, 0, 100, 0));\r\n        __classPrivateFieldSet(this, _prevX, __classPrivateFieldSet(this, _prevY, 0));\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n        __classPrivateFieldSet(this, _callback, undefined);\r\n        __classPrivateFieldSet(this, _task, new CuiTaskRunner(DEFAULT_SCROLL_END_TIMEOUT, false, this.onScrollFinish.bind(this)));\r\n        __classPrivateFieldSet(this, _listener, this.listener.bind(this));\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    attach() {\r\n        __classPrivateFieldGet(this, _target).addEventListener('scroll', __classPrivateFieldGet(this, _listener));\r\n        __classPrivateFieldSet(this, _isAttached, true);\r\n        this.listener(undefined, true, \"init\");\r\n    }\r\n    detach() {\r\n        __classPrivateFieldGet(this, _target).removeEventListener('scroll', __classPrivateFieldGet(this, _listener));\r\n        __classPrivateFieldGet(this, _task).stop();\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n    }\r\n    setTarget(target) {\r\n        if (target !== __classPrivateFieldGet(this, _target)) {\r\n            this.detach();\r\n            __classPrivateFieldSet(this, _target, target);\r\n            this.attach();\r\n        }\r\n    }\r\n    setThreshold(threshold) {\r\n        __classPrivateFieldSet(this, _threshold, getRangeValueOrDefault(threshold, 0, 100, 0));\r\n    }\r\n    isInProgress() {\r\n        return __classPrivateFieldGet(this, _inProgress);\r\n    }\r\n    isAttached() {\r\n        return __classPrivateFieldGet(this, _isAttached);\r\n    }\r\n    listener(ev, initial, source) {\r\n        if (!is(__classPrivateFieldGet(this, _callback))) {\r\n            return;\r\n        }\r\n        let left = __classPrivateFieldGet(this, _box).getScrollLeft();\r\n        let top = __classPrivateFieldGet(this, _box).getScrollTop();\r\n        __classPrivateFieldSet(this, _prevX, __classPrivateFieldGet(this, _prevX) + left);\r\n        __classPrivateFieldSet(this, _prevY, __classPrivateFieldGet(this, _prevY) + top);\r\n        if (__classPrivateFieldGet(this, _inProgress) || (!this.passedThreshold() && is(ev))) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _inProgress, true);\r\n        // @ts-ignore - callback already checked\r\n        __classPrivateFieldGet(this, _callback).call(this, {\r\n            base: ev,\r\n            top: top,\r\n            left: left,\r\n            initial: initial !== null && initial !== void 0 ? initial : false,\r\n            scrolling: is(ev),\r\n            source: source !== null && source !== void 0 ? source : \"event\"\r\n        });\r\n        if (is(ev))\r\n            __classPrivateFieldGet(this, _task).start();\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n        __classPrivateFieldSet(this, _prevX, 0);\r\n        __classPrivateFieldSet(this, _prevY, 0);\r\n    }\r\n    passedThreshold() {\r\n        return __classPrivateFieldGet(this, _threshold) <= 0 || (__classPrivateFieldGet(this, _prevX) >= __classPrivateFieldGet(this, _threshold) || __classPrivateFieldGet(this, _prevY) >= __classPrivateFieldGet(this, _threshold));\r\n    }\r\n    onScrollFinish() {\r\n        this.listener(undefined, false, \"task\");\r\n    }\r\n}\r\n_target = new WeakMap(), _inProgress = new WeakMap(), _threshold = new WeakMap(), _prevX = new WeakMap(), _prevY = new WeakMap(), _callback = new WeakMap(), _isAttached = new WeakMap(), _box = new WeakMap(), _task = new WeakMap(), _listener = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _pointLeft, _pointTop, _prevDiffY, _prevDiffX, _wasTriggeredX, _wasTriggeredY, _threshold;\r\nexport class CuiOffsetStaticMode {\r\n    matches(top, left, offsetX, offsetY) {\r\n        return (offsetX > 0 && left >= offsetX) ||\r\n            (offsetY > 0 && top >= offsetY);\r\n    }\r\n}\r\n/**\r\n * Dynamically calculates whether to trigger or untrigger an action.\r\n * If current value exceedes offset and threshold action is triggered.\r\n * If action was triggered and current move is lower than threshold action is untriggered\r\n *\r\n * Example: If offsetY is 100, then first after 100 action is set on. It is kept when scrolling down.\r\n * If user decides to scroll up and difference between turning point and current is bigger than threshold then action is set off.\r\n *\r\n * Example usage is with navbar - it shall disappear after offset and return back when user scrolls up.\r\n */\r\nexport class CuiOffsetDynamicMode {\r\n    constructor() {\r\n        _pointLeft.set(this, void 0);\r\n        _pointTop.set(this, void 0);\r\n        _prevDiffY.set(this, void 0);\r\n        _prevDiffX.set(this, void 0);\r\n        _wasTriggeredX.set(this, void 0);\r\n        _wasTriggeredY.set(this, void 0);\r\n        _threshold.set(this, void 0);\r\n        __classPrivateFieldSet(this, _pointLeft, 0);\r\n        __classPrivateFieldSet(this, _pointTop, 0);\r\n        __classPrivateFieldSet(this, _prevDiffX, 0);\r\n        __classPrivateFieldSet(this, _prevDiffY, 0);\r\n        __classPrivateFieldSet(this, _threshold, 100);\r\n        __classPrivateFieldSet(this, _wasTriggeredX, false);\r\n        __classPrivateFieldSet(this, _wasTriggeredY, false);\r\n    }\r\n    matches(top, left, offsetX, offsetY) {\r\n        return this.fitsOffsetY(top, offsetY) || this.fitsOffsetX(left, offsetX);\r\n    }\r\n    fitsOffsetX(left, offsetX) {\r\n        if (offsetX <= 0)\r\n            return false;\r\n        let diffX = left - __classPrivateFieldGet(this, _pointLeft);\r\n        if (left >= offsetX && diffX > __classPrivateFieldGet(this, _threshold)) {\r\n            __classPrivateFieldSet(this, _wasTriggeredX, true);\r\n        }\r\n        else if (__classPrivateFieldGet(this, _wasTriggeredX) && diffX < -__classPrivateFieldGet(this, _threshold)) {\r\n            __classPrivateFieldSet(this, _wasTriggeredX, false);\r\n        }\r\n        if (diffX < 0 && __classPrivateFieldGet(this, _prevDiffX) < diffX || diffX >= 0 && __classPrivateFieldGet(this, _prevDiffX) > diffX) {\r\n            __classPrivateFieldSet(this, _pointLeft, left);\r\n        }\r\n        __classPrivateFieldSet(this, _prevDiffX, diffX);\r\n        return __classPrivateFieldGet(this, _wasTriggeredX);\r\n    }\r\n    fitsOffsetY(top, offsetY) {\r\n        if (offsetY <= 0) {\r\n            return false;\r\n        }\r\n        let diffY = top - __classPrivateFieldGet(this, _pointTop);\r\n        if (top >= offsetY && diffY > __classPrivateFieldGet(this, _threshold)) {\r\n            __classPrivateFieldSet(this, _wasTriggeredY, true);\r\n        }\r\n        else if (__classPrivateFieldGet(this, _wasTriggeredY) && diffY < -__classPrivateFieldGet(this, _threshold)) {\r\n            __classPrivateFieldSet(this, _wasTriggeredY, false);\r\n        }\r\n        if (diffY < 0 && __classPrivateFieldGet(this, _prevDiffY) < diffY || diffY >= 0 && __classPrivateFieldGet(this, _prevDiffY) > diffY) {\r\n            __classPrivateFieldSet(this, _pointTop, top);\r\n        }\r\n        __classPrivateFieldSet(this, _prevDiffY, diffY);\r\n        return __classPrivateFieldGet(this, _wasTriggeredY);\r\n    }\r\n}\r\n_pointLeft = new WeakMap(), _pointTop = new WeakMap(), _prevDiffY = new WeakMap(), _prevDiffX = new WeakMap(), _wasTriggeredX = new WeakMap(), _wasTriggeredY = new WeakMap(), _threshold = new WeakMap();\r\nexport class CuiOffsetModeFactory {\r\n    static get(mode) {\r\n        if (mode === 'dynamic') {\r\n            return new CuiOffsetDynamicMode();\r\n        }\r\n        return new CuiOffsetStaticMode();\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _listener, _target, _utils, _matched, _action, _prevX, _prevY, _threshold, _root, _modeHandler;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiScrollListener } from \"cui-light-core/dist/esm/listeners/scroll\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { are, getIntOrDefault, getRangeValue, getStringOrDefault, is, isStringTrue } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiOffsetModeFactory } from \"./modes\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nexport class CuiOffsetArgs {\r\n    constructor() {\r\n        this.offsetX = 0;\r\n        this.offsetY = 0;\r\n        this.target = \"\";\r\n        this.root = false;\r\n        this.action = \"\";\r\n        this.mode = 'static';\r\n    }\r\n    parse(args) {\r\n        this.target = args.target;\r\n        this.action = args.action;\r\n        this.offsetX = getIntOrDefault(args.offsetX, -1);\r\n        this.offsetY = getIntOrDefault(args.offsetY, -1);\r\n        this.root = isStringTrue(args.root);\r\n        this.mode = getStringOrDefault(args.mode, 'static');\r\n    }\r\n}\r\nexport class CuiOffsetComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-offset`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiOffsetHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiOffsetHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiOffsetHandler\", element, attribute, new CuiOffsetArgs(), utils);\r\n        _listener.set(this, void 0);\r\n        _target.set(this, void 0);\r\n        _utils.set(this, void 0);\r\n        _matched.set(this, void 0);\r\n        _action.set(this, void 0);\r\n        _prevX.set(this, void 0);\r\n        _prevY.set(this, void 0);\r\n        _threshold.set(this, void 0);\r\n        _root.set(this, void 0);\r\n        _modeHandler.set(this, void 0);\r\n        this.element = element;\r\n        __classPrivateFieldSet(this, _target, this.element);\r\n        __classPrivateFieldSet(this, _utils, utils);\r\n        __classPrivateFieldSet(this, _matched, false);\r\n        __classPrivateFieldSet(this, _action, []);\r\n        __classPrivateFieldSet(this, _prevX, 0);\r\n        __classPrivateFieldSet(this, _prevY, 0);\r\n        __classPrivateFieldSet(this, _threshold, 20);\r\n        __classPrivateFieldSet(this, _root, this.element);\r\n        __classPrivateFieldSet(this, _modeHandler, null);\r\n        __classPrivateFieldSet(this, _listener, undefined);\r\n    }\r\n    onInit() {\r\n        this.parseAttribute();\r\n        __classPrivateFieldSet(this, _listener, new CuiScrollListener(this.args.root ? window : this.element, this.utils.setup.scrollThreshold));\r\n        __classPrivateFieldGet(this, _listener).setCallback(this.onScroll.bind(this));\r\n        __classPrivateFieldGet(this, _listener).attach();\r\n    }\r\n    onUpdate() {\r\n        this.parseAttribute();\r\n    }\r\n    onDestroy() {\r\n        if (__classPrivateFieldGet(this, _listener))\r\n            __classPrivateFieldGet(this, _listener).detach();\r\n    }\r\n    onScroll(ev) {\r\n        this.checkAndPerformActions(ev);\r\n    }\r\n    parseAttribute() {\r\n        __classPrivateFieldSet(this, _root, this.getRoot());\r\n        __classPrivateFieldSet(this, _target, this.getTarget());\r\n        __classPrivateFieldSet(this, _action, CuiActionsListFactory.get(this.args.action));\r\n        __classPrivateFieldSet(this, _modeHandler, CuiOffsetModeFactory.get(this.args.mode));\r\n    }\r\n    checkAndPerformActions(ev) {\r\n        if (!is(__classPrivateFieldGet(this, _modeHandler))) {\r\n            this.logError(\"Cannot perform - mode handler not initialized\", \"checkAndPerformActions\");\r\n        }\r\n        // @ts-ignore modehandler\r\n        let matchesOffset = __classPrivateFieldGet(this, _modeHandler).matches(ev.top, ev.left, this.args.offsetX, this.args.offsetY);\r\n        /**\r\n         * Act and emit event when offset has been reached\r\n         */\r\n        if (matchesOffset !== __classPrivateFieldGet(this, _matched)) {\r\n            this.act(matchesOffset);\r\n            __classPrivateFieldSet(this, _matched, matchesOffset);\r\n            this.callEvent(__classPrivateFieldGet(this, _matched), ev.left, ev.top, ev.scrolling, ev.source, ...this.calcaRatio(ev.left, ev.top));\r\n            return;\r\n        }\r\n        /**\r\n         * Emit event periodically\r\n         */\r\n        if (this.exceededThreshold(ev.left, ev.top)) {\r\n            this.callEvent(__classPrivateFieldGet(this, _matched), ev.left, ev.top, ev.scrolling, ev.source, ...this.calcaRatio(ev.left, ev.top));\r\n            __classPrivateFieldSet(this, _prevX, ev.left);\r\n            __classPrivateFieldSet(this, _prevY, ev.top);\r\n        }\r\n    }\r\n    act(matching) {\r\n        if (!are(__classPrivateFieldGet(this, _action), __classPrivateFieldGet(this, _target))) {\r\n            return;\r\n        }\r\n        this.isLocked = true;\r\n        __classPrivateFieldGet(this, _action).forEach(action => {\r\n            if (matching) {\r\n                action.add(__classPrivateFieldGet(this, _target), __classPrivateFieldGet(this, _utils));\r\n            }\r\n            else {\r\n                action.remove(__classPrivateFieldGet(this, _target), __classPrivateFieldGet(this, _utils));\r\n            }\r\n        });\r\n        this.isLocked = false;\r\n    }\r\n    callEvent(matches, x, y, scrolling, source, ratioX, ratioY) {\r\n        this.emitEvent(EVENTS.OFFSET, {\r\n            matches: __classPrivateFieldGet(this, _matched),\r\n            offsetX: x,\r\n            offsetY: y,\r\n            ratioX: ratioX,\r\n            ratioY: ratioY,\r\n            scrolling: scrolling,\r\n            source: source,\r\n            timestamp: Date.now()\r\n        });\r\n    }\r\n    getRoot() {\r\n        return this.args.root ? document.body : this.element;\r\n    }\r\n    exceededThreshold(x, y) {\r\n        return Math.abs(x - __classPrivateFieldGet(this, _prevX)) > __classPrivateFieldGet(this, _threshold) || Math.abs(y - __classPrivateFieldGet(this, _prevY)) > __classPrivateFieldGet(this, _threshold);\r\n    }\r\n    calcaRatio(x, y) {\r\n        let ratY = parseFloat(((__classPrivateFieldGet(this, _root).clientHeight + y) / __classPrivateFieldGet(this, _root).scrollHeight).toFixed(2));\r\n        let ratX = parseFloat(((__classPrivateFieldGet(this, _root).clientWidth + x) / __classPrivateFieldGet(this, _root).scrollWidth).toFixed(2));\r\n        return [getRangeValue(ratX, 0, 1), getRangeValue(ratY, 0, 1)];\r\n    }\r\n    getTarget() {\r\n        let target = this.args.target ? __classPrivateFieldGet(this, _root).querySelector(this.args.target) : null;\r\n        return target !== null && target !== void 0 ? target : this.element;\r\n    }\r\n}\r\n_listener = new WeakMap(), _target = new WeakMap(), _utils = new WeakMap(), _matched = new WeakMap(), _action = new WeakMap(), _prevX = new WeakMap(), _prevY = new WeakMap(), _threshold = new WeakMap(), _root = new WeakMap(), _modeHandler = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTimeout, _prefix, _eventId;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { getStringOrDefault, getIntOrDefault, is, isString, isStringTrue, are, getFirstMatching } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { CUID_ATTRIBUTE, EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nexport class CuiOpenArgs {\r\n    constructor(timeout) {\r\n        _defTimeout.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        this.target = \"\";\r\n        this.action = \"\";\r\n        this.timeout = 0;\r\n        this.prevent = false;\r\n        this.state = \"\";\r\n    }\r\n    parse(args) {\r\n        if (is(args) && isString(args)) {\r\n            this.target = args;\r\n            this.action = \"\";\r\n            this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n            this.prevent = false;\r\n            this.state = \"\";\r\n            return;\r\n        }\r\n        this.target = getStringOrDefault(args.target, \"\");\r\n        this.action = args.action;\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.prevent = isStringTrue(args.prevent);\r\n        this.state = args.state;\r\n    }\r\n}\r\n_defTimeout = new WeakMap();\r\nexport class CuiOpenComponent {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix)}-open`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiOpenHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiOpenHandler extends CuiHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiOpenHandler\", element, attribute, new CuiOpenArgs(utils.setup.animationTime), utils);\r\n        _eventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _eventId, null);\r\n        this.onClick = this.onClick.bind(this);\r\n    }\r\n    onInit() {\r\n        this.element.addEventListener('click', this.onClick);\r\n        __classPrivateFieldSet(this, _eventId, this.onEvent(EVENTS.OPEN, this.onOpen.bind(this)));\r\n    }\r\n    onUpdate() {\r\n        //\r\n    }\r\n    onDestroy() {\r\n        this.element.removeEventListener('click', this.onClick);\r\n        this.detachEvent(EVENTS.OPEN, __classPrivateFieldGet(this, _eventId));\r\n    }\r\n    onClick(ev) {\r\n        this.onOpen(ev);\r\n        if (this.args.prevent) {\r\n            ev.preventDefault();\r\n        }\r\n    }\r\n    onOpen(ev) {\r\n        if (this.isLocked) {\r\n            return;\r\n        }\r\n        const target = this.getTarget(this.args.target);\r\n        if (!is(target)) {\r\n            this._log.warning(`Target ${this.args.target} not found`, 'onClick');\r\n            return;\r\n        }\r\n        this.isLocked = true;\r\n        //@ts-ignore - target checked\r\n        this.run(target).then((result) => {\r\n            //@ts-ignore - target checked\r\n            this.activateTarget(ev, target, result);\r\n        }).catch((e) => {\r\n            this._log.exception(e);\r\n        }).finally(() => {\r\n            this.isLocked = false;\r\n        });\r\n    }\r\n    /**\r\n     * Emits open event or performs an opening action\r\n     * @param target target element\r\n     * @returns whether event opened shall be emitted\r\n     */\r\n    run(target) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let cuiId = target.$cuid;\r\n            if (is(cuiId)) {\r\n                this._log.debug(\"Open cUI component\");\r\n                yield this.utils.bus.emit(EVENTS.OPEN, cuiId, this.args.state);\r\n                return false;\r\n            }\r\n            else {\r\n                this._log.debug(\"Open html component\");\r\n                if (are(this.args.timeout, this.args.action)) {\r\n                    this._log.debug(\"Perfrom an action\");\r\n                    let actions = CuiActionsListFactory.get(this.args.action);\r\n                    yield this.actionsHelper.performActions(target, actions, this.args.timeout, () => {\r\n                        this.setActiveClass(target);\r\n                    });\r\n                    return true;\r\n                }\r\n                this.setActiveClassAsync(target);\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n    setActiveClass(target) {\r\n        if (is(target) && !this.helper.hasClass(this.activeClassName, target)) {\r\n            this.helper.setClass(this.activeClassName, target);\r\n        }\r\n    }\r\n    setActiveClassAsync(target) {\r\n        this.fetch(() => {\r\n            if (is(target) && !this.helper.hasClass(this.activeClassName, target)) {\r\n                this.helper.setClassesAs(target, this.activeClassName);\r\n            }\r\n        });\r\n    }\r\n    activateTarget(ev, target, shouldEmit) {\r\n        if (is(target) && !this.helper.hasClass(this.activeClassName, target)) {\r\n            this.helper.setClassesAs(target, this.activeClassName);\r\n        }\r\n        if (shouldEmit)\r\n            this.emitOpen(ev);\r\n    }\r\n    emitOpen(ev) {\r\n        this.emitEvent(EVENTS.OPENED, {\r\n            event: ev,\r\n            state: this.args.state,\r\n            timestamp: Date.now()\r\n        });\r\n    }\r\n    getTarget(target) {\r\n        if (is(target)) {\r\n            //@ts-ignore - target checked\r\n            return document.querySelector(target);\r\n        }\r\n        let parent = this.element.parentElement;\r\n        //@ts-ignore - parent checked\r\n        let result = is(parent) ? parent.querySelectorAll(`[${CUID_ATTRIBUTE}]`) : undefined;\r\n        if (!result || result.length < 2) {\r\n            return undefined;\r\n        }\r\n        return getFirstMatching([...result], (el) => {\r\n            return el !== this.element;\r\n        });\r\n    }\r\n}\r\n_eventId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _prefix, _eventId, _intersectionObserver, _currentSize, _currentValue, _lastValue, _isIntersecting, _timeoutToken;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { are, calcWindowSize2, getIntOrDefault, getStringOrDefault, is } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiIntersectionObserver } from \"cui-light-core/dist/esm/observers/intersection\";\r\nexport class CuiResizeArgs {\r\n    constructor() {\r\n        this.mode = \"simple\";\r\n        this.attribute = \"\";\r\n        this.default = \"\";\r\n        this.small = this.medium = this.large = this.xlarge = undefined;\r\n        this.delay = 0;\r\n    }\r\n    parse(args) {\r\n        var _a, _b, _c, _d;\r\n        this.attribute = getStringOrDefault(args.attribute, \"\");\r\n        this.default = getStringOrDefault(args.default, \"\");\r\n        this.small = (_a = args.small) !== null && _a !== void 0 ? _a : args.s;\r\n        this.medium = (_b = args.medium) !== null && _b !== void 0 ? _b : args.m;\r\n        this.large = (_c = args.large) !== null && _c !== void 0 ? _c : args.l;\r\n        this.xlarge = (_d = args.xlarge) !== null && _d !== void 0 ? _d : args.xl;\r\n        this.mode = args.mode === 'smart' ? \"smart\" : \"simple\";\r\n        this.delay = getIntOrDefault(args.delay, 0);\r\n    }\r\n}\r\nexport class CuiResizeComponent {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix)}-resize`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiResizeHandler(element, utils, this.attribute);\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiResizeHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiResizeHandler\", element, attribute, new CuiResizeArgs(), utils);\r\n        _eventId.set(this, void 0);\r\n        _intersectionObserver.set(this, void 0);\r\n        _currentSize.set(this, void 0);\r\n        _currentValue.set(this, void 0);\r\n        _lastValue.set(this, void 0);\r\n        _isIntersecting.set(this, void 0);\r\n        _timeoutToken.set(this, void 0);\r\n        __classPrivateFieldSet(this, _eventId, null);\r\n        __classPrivateFieldSet(this, _intersectionObserver, new CuiIntersectionObserver(document.documentElement, [0, 0.1]));\r\n        __classPrivateFieldGet(this, _intersectionObserver).setCallback(this.onIntersection.bind(this));\r\n        __classPrivateFieldSet(this, _lastValue, \"\");\r\n        __classPrivateFieldSet(this, _currentValue, \"\");\r\n        __classPrivateFieldSet(this, _currentSize, \"none\");\r\n        __classPrivateFieldSet(this, _isIntersecting, false);\r\n        __classPrivateFieldSet(this, _timeoutToken, undefined);\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldSet(this, _eventId, this.utils.bus.on(EVENTS.RESIZE, this.resize.bind(this)));\r\n        __classPrivateFieldGet(this, _intersectionObserver).connect();\r\n        __classPrivateFieldGet(this, _intersectionObserver).observe(this.element);\r\n        __classPrivateFieldSet(this, _currentSize, calcWindowSize2(window.innerWidth));\r\n        __classPrivateFieldSet(this, _isIntersecting, this.isInViewport(this.element));\r\n        this.setNewValue();\r\n        this.updateElement();\r\n    }\r\n    onUpdate() {\r\n        this.setNewValue();\r\n        this.updateElement();\r\n    }\r\n    onDestroy() {\r\n        if (__classPrivateFieldGet(this, _eventId) !== null) {\r\n            this.utils.bus.detach(EVENTS.RESIZE, __classPrivateFieldGet(this, _eventId));\r\n            __classPrivateFieldSet(this, _eventId, null);\r\n        }\r\n        __classPrivateFieldGet(this, _intersectionObserver).unobserve(this.element);\r\n        __classPrivateFieldGet(this, _intersectionObserver).disconnect();\r\n    }\r\n    resize(data) {\r\n        __classPrivateFieldSet(this, _currentSize, data.current);\r\n        this.setNewValue();\r\n        this.updateElement();\r\n    }\r\n    onIntersection(entries) {\r\n        if (entries.length > 0) {\r\n            __classPrivateFieldSet(this, _isIntersecting, entries[0].isIntersecting);\r\n        }\r\n        this.updateElement();\r\n    }\r\n    setNewValue() {\r\n        let newValue = this.isSmartMode() ? this.getSmartValue(__classPrivateFieldGet(this, _currentSize)) : this.getValue(__classPrivateFieldGet(this, _currentSize), true);\r\n        console.log(\"New value: \" + newValue);\r\n        if (newValue && newValue !== __classPrivateFieldGet(this, _currentValue)) {\r\n            __classPrivateFieldSet(this, _currentValue, newValue);\r\n        }\r\n    }\r\n    getValue(size, replace) {\r\n        let value = undefined;\r\n        switch (size) {\r\n            case \"xlarge\":\r\n                value = this.args.xlarge;\r\n                break;\r\n            case \"large\":\r\n                value = this.args.large;\r\n                break;\r\n            case \"medium\":\r\n                value = this.args.medium;\r\n                break;\r\n            case \"small\":\r\n                value = this.args.small;\r\n                break;\r\n            default:\r\n                value = this.args.default;\r\n        }\r\n        return (replace && !value) ? this.args.default : value;\r\n    }\r\n    getSmartValue(size) {\r\n        var _a, _b, _c, _d;\r\n        let value = this.args.default;\r\n        if (size === 'none') {\r\n            return value;\r\n        }\r\n        value = (_a = this.args.small) !== null && _a !== void 0 ? _a : value;\r\n        if (size === 'small') {\r\n            return value;\r\n        }\r\n        value = (_b = this.args.medium) !== null && _b !== void 0 ? _b : value;\r\n        if (size === 'medium') {\r\n            return value;\r\n        }\r\n        value = (_c = this.args.large) !== null && _c !== void 0 ? _c : value;\r\n        if (size === 'large') {\r\n            return value;\r\n        }\r\n        return (_d = this.args.xlarge) !== null && _d !== void 0 ? _d : value;\r\n    }\r\n    updateElement() {\r\n        if (!__classPrivateFieldGet(this, _isIntersecting) && this.isSmartMode()) {\r\n            this.logInfo(\"Not intersecting\");\r\n            return;\r\n        }\r\n        if (!are(this.args.attribute, __classPrivateFieldGet(this, _currentValue))) {\r\n            this.logWarning(\"Not eligible to set value: \" + this.args.attribute + \", \" + __classPrivateFieldGet(this, _currentValue));\r\n            return;\r\n        }\r\n        if (__classPrivateFieldGet(this, _lastValue) !== __classPrivateFieldGet(this, _currentValue)) {\r\n            this.run(() => {\r\n                if (this.args.attribute === 'class') {\r\n                    this.mutate(() => {\r\n                        if (is(__classPrivateFieldGet(this, _lastValue))) {\r\n                            this.element.classList.remove(__classPrivateFieldGet(this, _lastValue));\r\n                        }\r\n                        //@ts-ignore already checked\r\n                        this.element.classList.add(__classPrivateFieldGet(this, _currentValue));\r\n                        //@ts-ignore already checked\r\n                        __classPrivateFieldSet(this, _lastValue, __classPrivateFieldGet(this, _currentValue));\r\n                    });\r\n                }\r\n                else {\r\n                    this.mutate(() => {\r\n                        //@ts-ignore already checked\r\n                        this.element.setAttribute(this.args.attribute, __classPrivateFieldGet(this, _currentValue));\r\n                        //@ts-ignore already checked\r\n                        __classPrivateFieldSet(this, _lastValue, __classPrivateFieldGet(this, _currentValue));\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n    isSmartMode() {\r\n        return this.args.mode === 'smart';\r\n    }\r\n    isInViewport(element) {\r\n        const rect = element.getBoundingClientRect();\r\n        return (rect.top >= 0 &&\r\n            rect.left >= 0 &&\r\n            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\r\n            rect.right <= (window.innerWidth || document.documentElement.clientWidth));\r\n    }\r\n    run(callback) {\r\n        if (__classPrivateFieldGet(this, _timeoutToken)) {\r\n            clearTimeout(__classPrivateFieldGet(this, _timeoutToken));\r\n            __classPrivateFieldSet(this, _timeoutToken, undefined);\r\n        }\r\n        __classPrivateFieldSet(this, _timeoutToken, setTimeout(() => {\r\n            callback();\r\n            __classPrivateFieldSet(this, _timeoutToken, undefined);\r\n        }, this.args.delay));\r\n    }\r\n}\r\n_eventId = new WeakMap(), _intersectionObserver = new WeakMap(), _currentSize = new WeakMap(), _currentValue = new WeakMap(), _lastValue = new WeakMap(), _isIntersecting = new WeakMap(), _timeoutToken = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _parent, _target, _onClickBound;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { is, getOffsetTop, getStringOrDefault, are } from \"cui-light-core/dist/esm/utils/functions\";\r\n/**\r\n * Component scrolls to specified target in the document\r\n * Arguments:\r\n * target - selector to target element where page should be scrolled to.\r\n * parent - set parent selector if parent should be different than html parent\r\n * behavior - auto/smooth - choose between step and smooth scrolling\r\n *\r\n */\r\nexport class CuiScrollComponent {\r\n    constructor(prefix) {\r\n        this.attribute = is(prefix) ? prefix + 'scroll' : 'cui-scroll';\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiScrollHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiScrollArgs {\r\n    constructor() {\r\n        this.target = \"\";\r\n        this.parent = \"\";\r\n        this.behavior = 'auto';\r\n    }\r\n    parse(val) {\r\n        this.target = getStringOrDefault(val.target, \"\");\r\n        this.parent = getStringOrDefault(val.parent, \"\");\r\n        this.behavior = is(val.behavior) && val.behavior.toLowerCase() === 'smooth' ? 'smooth' : 'auto';\r\n    }\r\n}\r\nexport class CuiScrollHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiScrollHandler\", element, attribute, new CuiScrollArgs(), utils);\r\n        _parent.set(this, void 0);\r\n        _target.set(this, void 0);\r\n        _onClickBound.set(this, void 0);\r\n        this.element = element;\r\n        __classPrivateFieldSet(this, _parent, null);\r\n        __classPrivateFieldSet(this, _target, null);\r\n        __classPrivateFieldSet(this, _onClickBound, this.onClick.bind(this));\r\n    }\r\n    onInit() {\r\n        this.element.addEventListener('click', __classPrivateFieldGet(this, _onClickBound));\r\n        this.setTargets();\r\n    }\r\n    onUpdate() {\r\n        this.setTargets();\r\n    }\r\n    onDestroy() {\r\n        this.element.removeEventListener('click', __classPrivateFieldGet(this, _onClickBound));\r\n    }\r\n    onClick(ev) {\r\n        if (!are(__classPrivateFieldGet(this, _target), __classPrivateFieldGet(this, _parent))) {\r\n            return;\r\n        }\r\n        //@ts-ignore\r\n        let to = getOffsetTop(__classPrivateFieldGet(this, _target)) - __classPrivateFieldGet(this, _parent).offsetTop;\r\n        //@ts-ignore\r\n        let from = __classPrivateFieldGet(this, _parent).scrollTop;\r\n        let by = to - from;\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _parent).scrollBy({\r\n            top: by,\r\n            behavior: this.args.behavior\r\n        });\r\n        this.emitEvent(EVENTS.ON_SCROLL, {\r\n            to: to,\r\n            by: by,\r\n            //@ts-ignore\r\n            target: __classPrivateFieldGet(this, _target),\r\n            //@ts-ignore\r\n            parent: __classPrivateFieldGet(this, _parent),\r\n            timestamp: Date.now(),\r\n        });\r\n        ev.preventDefault();\r\n    }\r\n    setTargets() {\r\n        __classPrivateFieldSet(this, _target, document.querySelector(this.args.target));\r\n        if (is(__classPrivateFieldGet(this, _target))) {\r\n            __classPrivateFieldSet(this, _parent, is(this.args.parent) ? document.querySelector(this.args.parent) : __classPrivateFieldGet(this, _target).parentElement);\r\n        }\r\n    }\r\n}\r\n_parent = new WeakMap(), _target = new WeakMap(), _onClickBound = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _scrollListener, _callback, _children, _box;\r\nimport { CuiScrollListener } from \"../listeners/scroll\";\r\nimport { CuiElementBoxFactory } from \"../models/elements\";\r\nimport { are, getRangeValue } from \"../utils/functions\";\r\nconst DEFAULT_OPTION_THRESHOLD = 0;\r\nexport class CuiIntersectionListener {\r\n    constructor(element, options) {\r\n        var _a;\r\n        _scrollListener.set(this, void 0);\r\n        _callback.set(this, void 0);\r\n        _children.set(this, void 0);\r\n        _box.set(this, void 0);\r\n        __classPrivateFieldSet(this, _box, CuiElementBoxFactory.get(element));\r\n        __classPrivateFieldSet(this, _scrollListener, new CuiScrollListener(element, (_a = options === null || options === void 0 ? void 0 : options.threshold) !== null && _a !== void 0 ? _a : DEFAULT_OPTION_THRESHOLD));\r\n        __classPrivateFieldGet(this, _scrollListener).setCallback(this.onScroll.bind(this));\r\n        __classPrivateFieldSet(this, _children, []);\r\n        __classPrivateFieldSet(this, _callback, undefined);\r\n    }\r\n    /**\r\n     * Sets child elements - ratio is calcutalated based on them\r\n     * @param children\r\n     */\r\n    setChildren(children) {\r\n        __classPrivateFieldSet(this, _children, children);\r\n    }\r\n    setThreshold(threshold) {\r\n        __classPrivateFieldGet(this, _scrollListener).setThreshold(threshold);\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    setParent(target) {\r\n        __classPrivateFieldSet(this, _box, CuiElementBoxFactory.get(target));\r\n        __classPrivateFieldGet(this, _scrollListener).setTarget(target);\r\n    }\r\n    isInProgress() {\r\n        return __classPrivateFieldGet(this, _scrollListener).isInProgress();\r\n    }\r\n    attach() {\r\n        if (this.isAttached()) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _scrollListener).attach();\r\n    }\r\n    detach() {\r\n        if (!this.isAttached()) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _scrollListener).detach();\r\n    }\r\n    isAttached() {\r\n        return __classPrivateFieldGet(this, _scrollListener) && __classPrivateFieldGet(this, _scrollListener).isAttached();\r\n    }\r\n    onScroll(ev) {\r\n        if (!are(__classPrivateFieldGet(this, _children), __classPrivateFieldGet(this, _callback))) {\r\n            return;\r\n        }\r\n        if (__classPrivateFieldGet(this, _callback))\r\n            __classPrivateFieldGet(this, _callback).call(this, this.prepareCallbackResult(ev));\r\n    }\r\n    calcChildVerticalRatio(child, currentTop, currentBottom) {\r\n        let childBottom = child.offsetTop + child.offsetHeight;\r\n        // Simulated top if view top is outside of parent then takes parent top\r\n        let symTop = currentTop > child.offsetTop ? currentTop : child.offsetTop;\r\n        // Simulated bottom if view bottom is outside of parent then takes parent bottom\r\n        let symBottom = currentBottom < childBottom ? currentBottom : childBottom;\r\n        // Calculates amount of pixels that are in view\r\n        let diff = symBottom - symTop;\r\n        // Calculates ratio - how much of a child is in parent view\r\n        let ratio = diff / child.offsetHeight;\r\n        return getRangeValue(ratio, 0, 1);\r\n    }\r\n    calcChildHorizontalRatio(child, currentLeft, currentRight) {\r\n        let childRight = child.offsetLeft + child.offsetWidth;\r\n        // Simulated top if view left is outside of parent then takes parent left\r\n        let symLeft = currentLeft > child.offsetLeft ? currentLeft : child.offsetLeft;\r\n        // Simulated bottom if view right is outside of parent then takes parent right\r\n        let symRight = currentRight < childRight ? currentRight : childRight;\r\n        // Calculates amount of pixels that are in view\r\n        let diff = symRight - symLeft;\r\n        // Calculates ratio - how much of a child is in parent view\r\n        let ratio = diff / child.offsetWidth;\r\n        return getRangeValue(ratio, 0, 1);\r\n    }\r\n    prepareCallbackResult(ev) {\r\n        var _a, _b;\r\n        let parentBottom = ev.top + __classPrivateFieldGet(this, _box).getHeight();\r\n        let parentRight = ev.left + __classPrivateFieldGet(this, _box).getWidth();\r\n        let result = {\r\n            ev: ev.base,\r\n            top: ev.top,\r\n            left: ev.left,\r\n            scrolling: (_a = ev.scrolling) !== null && _a !== void 0 ? _a : false,\r\n            initial: (_b = ev.initial) !== null && _b !== void 0 ? _b : false,\r\n            source: ev.source,\r\n            items: __classPrivateFieldGet(this, _children).map((child, index) => {\r\n                let verticalRatio = this.calcChildVerticalRatio(child, ev.top, parentBottom);\r\n                let horizontalRatio = this.calcChildHorizontalRatio(child, ev.left, parentRight);\r\n                return {\r\n                    verticalRatio: verticalRatio,\r\n                    horizontalRatio: horizontalRatio,\r\n                    element: child\r\n                };\r\n            })\r\n        };\r\n        return result;\r\n    }\r\n}\r\n_scrollListener = new WeakMap(), _callback = new WeakMap(), _children = new WeakMap(), _box = new WeakMap();\r\n","import { are, is } from \"cui-light-core/dist/esm/utils/functions\";\r\nexport class CuiScrollSpyModeHandlerFactory {\r\n    static get(mode) {\r\n        if (mode === \"multi\") {\r\n            return new CuiMultiModeHandler();\r\n        }\r\n        return new CuiSingleModeHandler();\r\n    }\r\n}\r\nclass CuiModeHandlerBase {\r\n    constructor(init) {\r\n        this.previous = init;\r\n    }\r\n    getMatching(ratio, items) {\r\n        return items.reduce((result, item, index) => {\r\n            if (item.verticalRatio > ratio) {\r\n                result.push(index);\r\n            }\r\n            return result;\r\n        }, []);\r\n    }\r\n    addActions(actions, ...elements) {\r\n        this.forEachAction(actions, elements, (action, element) => {\r\n            action.add(element);\r\n        });\r\n    }\r\n    removeActions(actions, ...elements) {\r\n        this.forEachAction(actions, elements, (action, element) => {\r\n            action.remove(element);\r\n        });\r\n    }\r\n    forEachAction(actions, elements, callback) {\r\n        if (!are(actions, elements, callback)) {\r\n            return;\r\n        }\r\n        actions.forEach(action => {\r\n            elements.forEach(element => {\r\n                if (is(element))\r\n                    callback(action, element);\r\n            });\r\n        });\r\n    }\r\n}\r\nexport class CuiSingleModeHandler extends CuiModeHandlerBase {\r\n    constructor() {\r\n        super(-1);\r\n    }\r\n    update(items, ratio, actions, links, linksActions) {\r\n        let matching = this.getMatching(ratio, items);\r\n        let len = matching.length;\r\n        let last = len > 0 ? matching[len - 1] : -1;\r\n        let result = {\r\n            changed: false\r\n        };\r\n        if (!this.matches(last)) {\r\n            if (this.previous > -1)\r\n                this.removeActions(actions, items[this.previous].element);\r\n            if (last > -1) {\r\n                let lastElement = items[last].element;\r\n                result.intersecting = [lastElement];\r\n                this.addActions(actions, lastElement);\r\n            }\r\n            if (are(links, linksActions)) {\r\n                if (this.previous > -1)\r\n                    this.removeActions(linksActions, links[this.previous]);\r\n                if (last > -1)\r\n                    this.addActions(linksActions, links[last]);\r\n            }\r\n            this.previous = last;\r\n            result.changed = true;\r\n            result.intersecting = [];\r\n            return result;\r\n        }\r\n        return result;\r\n    }\r\n    matches(item) {\r\n        return item === this.previous;\r\n    }\r\n}\r\nexport class CuiMultiModeHandler extends CuiModeHandlerBase {\r\n    constructor() {\r\n        super([]);\r\n    }\r\n    update(items, ratio, actions, links, linksActions) {\r\n        let matching = this.getMatching(ratio, items);\r\n        let result = {\r\n            changed: false\r\n        };\r\n        if (!this.matches(matching)) {\r\n            let intersecting = matching.map(idx => { return items[idx].element; });\r\n            this.removeActions(actions, ...this.previous.map(idx => { return items[idx].element; }));\r\n            this.addActions(actions, ...intersecting);\r\n            result.intersecting = intersecting;\r\n            if (are(links, linksActions)) {\r\n                this.removeActions(linksActions, ...this.previous.map(idx => { return links[idx]; }));\r\n                this.addActions(linksActions, ...matching.map(idx => { return links[idx]; }));\r\n            }\r\n            this.previous = matching;\r\n            result.changed = true;\r\n            return result;\r\n        }\r\n        return result;\r\n    }\r\n    matches(item) {\r\n        let len = item.length;\r\n        if (len !== this.previous.length) {\r\n            return false;\r\n        }\r\n        let i = 0;\r\n        for (i = 0; i < len; i++) {\r\n            if (!this.previous.includes(item[i])) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _listener, _links, _actions, _linkActions, _root, _rootBox, _modeHandler;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { getRangeValueOrDefault, getStringOrDefault, isStringTrue, getIntOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS, SCOPE_SELECTOR } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { CuiIntersectionListener } from \"cui-light-core/dist/esm/intersection/intersection\";\r\nimport { CuiElementBoxFactory } from \"cui-light-core/dist/esm/models/elements\";\r\nimport { CuiScrollSpyModeHandlerFactory } from \"./mode\";\r\nconst DEFAULT_SELECTOR = \"> *\";\r\nexport class CuiScrollSpyArgs {\r\n    constructor() {\r\n        this.ratio = 0;\r\n        this.mode = \"single\";\r\n        this.threshold = -1;\r\n        this.selector = \"\";\r\n        this.action = \"\";\r\n        this.isRoot = false;\r\n        this.link = \"\";\r\n        this.linkAction = \"\";\r\n    }\r\n    parse(args) {\r\n        var _a;\r\n        this.selector = `${SCOPE_SELECTOR}${(_a = args.selector) !== null && _a !== void 0 ? _a : DEFAULT_SELECTOR}`;\r\n        this.action = getStringOrDefault(args.action, \"\");\r\n        this.link = getStringOrDefault(args.link, \"\");\r\n        this.linkAction = getStringOrDefault(args.linkAction, \"\");\r\n        this.ratio = getRangeValueOrDefault(parseFloat(args.ratio), 0, 1, 0);\r\n        this.isRoot = isStringTrue(args.isRoot);\r\n        this.mode = (args === null || args === void 0 ? void 0 : args.mode) === 'multi' ? \"multi\" : \"single\";\r\n        this.threshold = getIntOrDefault(args.threshold, -1);\r\n    }\r\n}\r\nexport class CuiScrollspyComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-scrollspy`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiScrollspyHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiScrollspyHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiScrollspyHandler\", element, attribute, new CuiScrollSpyArgs(), utils);\r\n        _listener.set(this, void 0);\r\n        _links.set(this, void 0);\r\n        _actions.set(this, void 0);\r\n        _linkActions.set(this, void 0);\r\n        _root.set(this, void 0);\r\n        _rootBox.set(this, void 0);\r\n        _modeHandler.set(this, void 0);\r\n        this.element = element;\r\n        __classPrivateFieldSet(this, _listener, new CuiIntersectionListener(this.element, { threshold: this.utils.setup.scrollThreshold }));\r\n        __classPrivateFieldSet(this, _links, []);\r\n        __classPrivateFieldSet(this, _actions, []);\r\n        __classPrivateFieldSet(this, _linkActions, []);\r\n        __classPrivateFieldSet(this, _root, undefined);\r\n        __classPrivateFieldSet(this, _rootBox, undefined);\r\n        __classPrivateFieldSet(this, _modeHandler, undefined);\r\n    }\r\n    onInit() {\r\n        this.parseAttribute();\r\n        __classPrivateFieldGet(this, _listener).setCallback(this.onIntersection.bind(this));\r\n        __classPrivateFieldGet(this, _listener).attach();\r\n    }\r\n    onUpdate() {\r\n        this.updateAttributes();\r\n    }\r\n    onDestroy() {\r\n        __classPrivateFieldGet(this, _listener).detach();\r\n    }\r\n    onIntersection(ev) {\r\n        if (!__classPrivateFieldGet(this, _modeHandler)) {\r\n            this.logError(\"Cannot perform - mode handler not initialized\", \"OnIntersection\");\r\n            return;\r\n        }\r\n        let timestamp = Date.now();\r\n        this.mutate(() => {\r\n            //@ts-ignore - modeHandler checked\r\n            let updateResult = __classPrivateFieldGet(this, _modeHandler).update(ev.items, this.args.ratio, __classPrivateFieldGet(this, _actions), __classPrivateFieldGet(this, _links), __classPrivateFieldGet(this, _linkActions));\r\n            if (updateResult.changed) {\r\n                this.emitEvent(EVENTS.TARGET_CHANGE, {\r\n                    intersecting: updateResult.intersecting,\r\n                    timestamp: timestamp\r\n                });\r\n            }\r\n        });\r\n        this.emitEvent(EVENTS.ON_SCROLL, {\r\n            top: ev.top,\r\n            left: ev.left,\r\n            scrolling: ev.scrolling,\r\n            initial: ev.initial,\r\n            source: ev.source,\r\n            timestamp: timestamp,\r\n        });\r\n    }\r\n    parseAttribute() {\r\n        __classPrivateFieldSet(this, _root, this.args.isRoot ? window : this.element);\r\n        __classPrivateFieldSet(this, _rootBox, CuiElementBoxFactory.get(__classPrivateFieldGet(this, _root)));\r\n        let targets = this.args.selector ? __classPrivateFieldGet(this, _rootBox).queryAll(this.args.selector) : [];\r\n        __classPrivateFieldGet(this, _listener).setChildren(targets);\r\n        __classPrivateFieldGet(this, _listener).setThreshold(this.args.threshold);\r\n        __classPrivateFieldSet(this, _links, this.args.link ? [...document.querySelectorAll(this.args.link)] : []);\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n        __classPrivateFieldSet(this, _linkActions, CuiActionsListFactory.get(this.args.linkAction));\r\n        __classPrivateFieldSet(this, _modeHandler, CuiScrollSpyModeHandlerFactory.get(this.args.mode));\r\n    }\r\n    updateAttributes() {\r\n        if (this.prevArgs && this.args.isRoot !== this.prevArgs.isRoot) {\r\n            __classPrivateFieldSet(this, _root, this.args.isRoot ? window : this.element);\r\n            __classPrivateFieldSet(this, _rootBox, CuiElementBoxFactory.get(__classPrivateFieldGet(this, _root)));\r\n            __classPrivateFieldGet(this, _listener).setParent(__classPrivateFieldGet(this, _root));\r\n        }\r\n        if (this.prevArgs && __classPrivateFieldGet(this, _rootBox) && this.args.selector !== this.prevArgs.selector) {\r\n            let targets = this.args.selector ? __classPrivateFieldGet(this, _rootBox).queryAll(this.args.selector) : [];\r\n            __classPrivateFieldGet(this, _listener).setChildren(targets);\r\n        }\r\n        __classPrivateFieldGet(this, _listener).setThreshold(this.args.threshold);\r\n        __classPrivateFieldSet(this, _links, this.args.link ? [...document.querySelectorAll(this.args.link)] : []);\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n        __classPrivateFieldSet(this, _linkActions, CuiActionsListFactory.get(this.args.linkAction));\r\n        __classPrivateFieldSet(this, _modeHandler, CuiScrollSpyModeHandlerFactory.get(this.args.mode));\r\n    }\r\n}\r\n_listener = new WeakMap(), _links = new WeakMap(), _actions = new WeakMap(), _linkActions = new WeakMap(), _root = new WeakMap(), _rootBox = new WeakMap(), _modeHandler = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _elements, _count, _threshold;\r\nimport { is } from \"../../utils/functions\";\r\nexport class CuiSimpleDragOverDetector {\r\n    constructor() {\r\n        _elements.set(this, void 0);\r\n        _count.set(this, void 0);\r\n        _threshold.set(this, void 0);\r\n        __classPrivateFieldSet(this, _elements, []);\r\n        __classPrivateFieldSet(this, _count, 0);\r\n        __classPrivateFieldSet(this, _threshold, 5);\r\n    }\r\n    setElements(elements) {\r\n        __classPrivateFieldSet(this, _elements, elements);\r\n        __classPrivateFieldSet(this, _count, __classPrivateFieldGet(this, _elements).length);\r\n    }\r\n    setThreshold(value) {\r\n        __classPrivateFieldSet(this, _threshold, value);\r\n    }\r\n    detect(x, y) {\r\n        if (!is(__classPrivateFieldGet(this, _elements))) {\r\n            return [-1, undefined];\r\n        }\r\n        let idx = -1;\r\n        let found = undefined;\r\n        for (let i = 0; i < __classPrivateFieldGet(this, _count); i++) {\r\n            if (this.isInBounds(__classPrivateFieldGet(this, _elements)[i], x, y)) {\r\n                if (i === 0) {\r\n                    idx = i;\r\n                    found = __classPrivateFieldGet(this, _elements)[i];\r\n                    //break;\r\n                }\r\n                else if (i < __classPrivateFieldGet(this, _count) - 1) {\r\n                    idx = i + 1;\r\n                    found = __classPrivateFieldGet(this, _elements)[i + 1];\r\n                    //break;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        return [idx, found];\r\n    }\r\n    isInBounds(element, x, y) {\r\n        const box = element.getBoundingClientRect();\r\n        if (box.width === 0) {\r\n            console.log(element);\r\n        }\r\n        return x > box.left - __classPrivateFieldGet(this, _threshold) && x < box.left + box.width + __classPrivateFieldGet(this, _threshold) &&\r\n            y > box.top - __classPrivateFieldGet(this, _threshold) && y < box.top + box.height + __classPrivateFieldGet(this, _threshold);\r\n    }\r\n}\r\n_elements = new WeakMap(), _count = new WeakMap(), _threshold = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _root, _moveHandler, _onDragStart, _onDragOver, _onDragEnd, _timeout, _isTracking, _timeoutId;\r\nimport { CuiMoveEventListener } from \"../../listeners/move\";\r\nexport class CuiDragHandler {\r\n    constructor(root) {\r\n        _root.set(this, void 0);\r\n        _moveHandler.set(this, void 0);\r\n        _onDragStart.set(this, void 0);\r\n        _onDragOver.set(this, void 0);\r\n        _onDragEnd.set(this, void 0);\r\n        _timeout.set(this, void 0);\r\n        _isTracking.set(this, void 0);\r\n        _timeoutId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _root, root);\r\n        __classPrivateFieldSet(this, _moveHandler, new CuiMoveEventListener());\r\n        __classPrivateFieldSet(this, _timeout, 150);\r\n        __classPrivateFieldSet(this, _isTracking, false);\r\n        __classPrivateFieldSet(this, _timeoutId, undefined);\r\n        __classPrivateFieldGet(this, _moveHandler).setTarget(__classPrivateFieldGet(this, _root));\r\n        __classPrivateFieldGet(this, _moveHandler).preventDefault(false);\r\n        __classPrivateFieldGet(this, _moveHandler).setCallback(this.onMove.bind(this));\r\n        __classPrivateFieldSet(this, _onDragStart, undefined);\r\n        __classPrivateFieldSet(this, _onDragOver, undefined);\r\n        __classPrivateFieldSet(this, _onDragEnd, undefined);\r\n    }\r\n    setLongPressTimeout(timeout) {\r\n        __classPrivateFieldSet(this, _timeout, timeout);\r\n    }\r\n    onDragStart(callback) {\r\n        __classPrivateFieldSet(this, _onDragStart, callback);\r\n    }\r\n    onDragOver(callback) {\r\n        __classPrivateFieldSet(this, _onDragOver, callback);\r\n    }\r\n    onDragEnd(callback) {\r\n        __classPrivateFieldSet(this, _onDragEnd, callback);\r\n    }\r\n    attach() {\r\n        __classPrivateFieldGet(this, _moveHandler).attach();\r\n    }\r\n    detach() {\r\n        __classPrivateFieldGet(this, _moveHandler).detach();\r\n    }\r\n    onMove(data) {\r\n        switch (data.type) {\r\n            case \"down\":\r\n                if (__classPrivateFieldGet(this, _isTracking)) {\r\n                    return;\r\n                }\r\n                __classPrivateFieldSet(this, _timeoutId, setTimeout(() => {\r\n                    if (__classPrivateFieldGet(this, _onDragStart) && __classPrivateFieldGet(this, _onDragStart).call(this, data)) {\r\n                        __classPrivateFieldSet(this, _isTracking, true);\r\n                    }\r\n                }, __classPrivateFieldGet(this, _timeout)));\r\n                break;\r\n            case \"move\":\r\n                this.cancelTimeout();\r\n                if (!__classPrivateFieldGet(this, _isTracking)) {\r\n                    return;\r\n                }\r\n                if (__classPrivateFieldGet(this, _onDragOver)) {\r\n                    __classPrivateFieldGet(this, _onDragOver).call(this, data);\r\n                }\r\n                break;\r\n            case \"up\":\r\n                this.cancelTimeout();\r\n                if (!__classPrivateFieldGet(this, _isTracking)) {\r\n                    return;\r\n                }\r\n                if (__classPrivateFieldGet(this, _onDragEnd)) {\r\n                    __classPrivateFieldGet(this, _onDragEnd).call(this, data);\r\n                }\r\n                __classPrivateFieldSet(this, _isTracking, false);\r\n                break;\r\n        }\r\n    }\r\n    cancelTimeout() {\r\n        if (__classPrivateFieldGet(this, _timeoutId)) {\r\n            clearTimeout(__classPrivateFieldGet(this, _timeoutId));\r\n            __classPrivateFieldSet(this, _timeoutId, undefined);\r\n        }\r\n    }\r\n}\r\n_root = new WeakMap(), _moveHandler = new WeakMap(), _onDragStart = new WeakMap(), _onDragOver = new WeakMap(), _onDragEnd = new WeakMap(), _timeout = new WeakMap(), _isTracking = new WeakMap(), _timeoutId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _prefix, _dragHandler, _triggers, _targets, _currentTarget, _currentIdx, _preview, _movingCls, _detector, _currentBefore, _animation, _previewCls;\r\nimport { ElementBuilder } from \"cui-light-core/dist/esm/builders/element\";\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiSimpleDragOverDetector } from \"cui-light-core/dist/esm/handlers/drag/detectors\";\r\nimport { CuiDragHandler } from \"cui-light-core/dist/esm/handlers/drag/drag\";\r\nimport { CuiSwipeAnimationEngine } from \"cui-light-core/dist/esm/animation/engine\";\r\nimport { getIntOrDefault, replacePrefix, is, are } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { SCOPE_SELECTOR, EVENTS, CLASSES } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst SORTABLE_IS_MOVING = \"{prefix}-moving\";\r\nconst DEFAULT_SELECTOR = \" > *\";\r\nconst SORTABLE_PREVIEW_CLS = \"{prefix}-sortable-preview\";\r\nexport class CuiSortableArgs {\r\n    constructor() {\r\n        this.target = SCOPE_SELECTOR + DEFAULT_SELECTOR;\r\n        ;\r\n        this.trigger = SCOPE_SELECTOR + DEFAULT_SELECTOR;\r\n        this.timeout = 150;\r\n        this.threshold = 5;\r\n    }\r\n    parse(val) {\r\n        this.target = val.target ? SCOPE_SELECTOR + \" \" + val.target : SCOPE_SELECTOR + DEFAULT_SELECTOR;\r\n        this.trigger = val.trigger ? SCOPE_SELECTOR + \" \" + val.trigger : SCOPE_SELECTOR + DEFAULT_SELECTOR;\r\n        this.timeout = getIntOrDefault(val.timeout, 150);\r\n        this.threshold = getIntOrDefault(val.threshold, 5);\r\n    }\r\n}\r\nexport class CuiSortableComponent {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : \"cui\");\r\n        this.attribute = __classPrivateFieldGet(this, _prefix) + \"-sortable\";\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, sutils) {\r\n        return new CuiSortableHandler(element, this.attribute, sutils, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiSortableHandler extends CuiHandler {\r\n    constructor(element, attribute, utils, prefix) {\r\n        super(\"CuiSortableHandler\", element, attribute, new CuiSortableArgs(), utils);\r\n        _dragHandler.set(this, void 0);\r\n        _triggers.set(this, void 0);\r\n        _targets.set(this, void 0);\r\n        _currentTarget.set(this, void 0);\r\n        _currentIdx.set(this, void 0);\r\n        _preview.set(this, void 0);\r\n        _movingCls.set(this, void 0);\r\n        _detector.set(this, void 0);\r\n        _currentBefore.set(this, void 0);\r\n        _animation.set(this, void 0);\r\n        _previewCls.set(this, void 0);\r\n        __classPrivateFieldSet(this, _targets, []);\r\n        __classPrivateFieldSet(this, _triggers, []);\r\n        __classPrivateFieldSet(this, _currentIdx, -1);\r\n        __classPrivateFieldSet(this, _currentTarget, null);\r\n        __classPrivateFieldSet(this, _currentBefore, null);\r\n        __classPrivateFieldSet(this, _preview, null);\r\n        __classPrivateFieldSet(this, _dragHandler, new CuiDragHandler(element));\r\n        __classPrivateFieldGet(this, _dragHandler).onDragStart(this.onDragStart.bind(this));\r\n        __classPrivateFieldGet(this, _dragHandler).onDragOver(this.onDragOver.bind(this));\r\n        __classPrivateFieldGet(this, _dragHandler).onDragEnd(this.onDragEnd.bind(this));\r\n        __classPrivateFieldSet(this, _movingCls, replacePrefix(SORTABLE_IS_MOVING, prefix));\r\n        __classPrivateFieldSet(this, _previewCls, replacePrefix(SORTABLE_PREVIEW_CLS, prefix));\r\n        __classPrivateFieldSet(this, _detector, new CuiSimpleDragOverDetector());\r\n        __classPrivateFieldSet(this, _animation, new CuiSwipeAnimationEngine());\r\n        __classPrivateFieldGet(this, _animation).setOnFinish(() => {\r\n            let item = __classPrivateFieldGet(this, _currentTarget);\r\n            let idx = __classPrivateFieldGet(this, _currentIdx);\r\n            this.stopMovementPrep();\r\n            this.utils.bus.emit(EVENTS.MOVE_LOCK, null, false);\r\n            this.emitEvent(EVENTS.SORTED, {\r\n                item: item,\r\n                index: idx,\r\n                timestamp: new Date()\r\n            });\r\n        });\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldGet(this, _dragHandler).attach();\r\n        this.getTargetsAndTrggers();\r\n        __classPrivateFieldGet(this, _detector).setThreshold(this.args.threshold);\r\n    }\r\n    onUpdate() {\r\n        if (this.prevArgs && (this.args.target !== this.prevArgs.target ||\r\n            this.args.trigger !== this.prevArgs.trigger)) {\r\n            this.getTargetsAndTrggers();\r\n        }\r\n        __classPrivateFieldGet(this, _dragHandler).setLongPressTimeout(this.args.timeout);\r\n    }\r\n    onDestroy() {\r\n        __classPrivateFieldGet(this, _dragHandler).detach();\r\n    }\r\n    /**\r\n     * queries targets and triggers from the element\r\n     * If exception - lists are cleared\r\n     */\r\n    getTargetsAndTrggers() {\r\n        try {\r\n            __classPrivateFieldSet(this, _targets, [...this.element.querySelectorAll(this.args.target)]);\r\n            __classPrivateFieldSet(this, _triggers, [...this.element.querySelectorAll(this.args.trigger)]);\r\n            if (__classPrivateFieldGet(this, _triggers).length !== __classPrivateFieldGet(this, _targets).length) {\r\n                throw new Error(`Triggers (count ${__classPrivateFieldGet(this, _triggers).length}) and targets (count ${__classPrivateFieldGet(this, _targets).length}) selector are not correct`);\r\n            }\r\n            __classPrivateFieldGet(this, _detector).setElements(__classPrivateFieldGet(this, _targets));\r\n        }\r\n        catch (e) {\r\n            this._log.error(\"Incorrect trigger or target selector\");\r\n            this._log.exception(e, \"getTargetsAndTrggers\");\r\n            __classPrivateFieldSet(this, _targets, []);\r\n            __classPrivateFieldSet(this, _triggers, []);\r\n        }\r\n    }\r\n    onDragStart(data) {\r\n        __classPrivateFieldSet(this, _currentIdx, this.getPressedElementIdx(data.target));\r\n        __classPrivateFieldSet(this, _currentTarget, __classPrivateFieldGet(this, _currentIdx) > -1 ? __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)] : null);\r\n        if (!is(__classPrivateFieldGet(this, _currentTarget))) {\r\n            return false;\r\n        }\r\n        this.utils.bus.emit(EVENTS.MOVE_LOCK, null, true);\r\n        this.startMovementPrep(data);\r\n        this.emitEvent(EVENTS.SORT_START, {\r\n            item: __classPrivateFieldGet(this, _currentTarget),\r\n            index: __classPrivateFieldGet(this, _currentIdx),\r\n            timestamp: new Date()\r\n        });\r\n        return true;\r\n    }\r\n    onDragOver(data) {\r\n        this.move(data);\r\n        data.event.preventDefault();\r\n    }\r\n    onDragEnd(data) {\r\n        if (!is(__classPrivateFieldGet(this, _preview))) {\r\n            return;\r\n        }\r\n        //@ts-ignore preview\r\n        __classPrivateFieldGet(this, _animation).setElement(__classPrivateFieldGet(this, _preview));\r\n        __classPrivateFieldGet(this, _animation).setProps(this.getFinishAnimation());\r\n        __classPrivateFieldGet(this, _animation).finish(0, 100, false);\r\n    }\r\n    getPressedElementIdx(target) {\r\n        return __classPrivateFieldGet(this, _triggers).findIndex((trigger) => {\r\n            return trigger.contains(target);\r\n        });\r\n    }\r\n    startMovementPrep(data) {\r\n        this.mutate(() => {\r\n            this.createPreview();\r\n            if (is(__classPrivateFieldGet(this, _currentTarget)))\r\n                //@ts-ignore currentTarget\r\n                this.helper.setClass(__classPrivateFieldGet(this, _movingCls), __classPrivateFieldGet(this, _currentTarget));\r\n            this.helper.setClass(\"cui-locked\", this.element);\r\n            this.helper.setClass(CLASSES.swipingOn, document.body);\r\n            this.setPreviewPosition(data);\r\n            this.setCurrentPosition(data);\r\n        });\r\n    }\r\n    stopMovementPrep() {\r\n        this.mutate(() => {\r\n            if (is(__classPrivateFieldGet(this, _currentTarget)))\r\n                //@ts-ignore currentTarget\r\n                this.helper.removeClass(__classPrivateFieldGet(this, _movingCls), __classPrivateFieldGet(this, _currentTarget));\r\n            this.helper.removeClass(CLASSES.swipingOn, document.body);\r\n            this.helper.removeClass(\"cui-locked\", this.element);\r\n            this.removePreview();\r\n            __classPrivateFieldSet(this, _currentTarget, null);\r\n            __classPrivateFieldSet(this, _currentBefore, null);\r\n            this.getTargetsAndTrggers();\r\n        });\r\n    }\r\n    move(data) {\r\n        this.mutate(() => {\r\n            this.setPreviewPosition(data);\r\n            this.setCurrentPosition(data);\r\n        });\r\n    }\r\n    createPreview() {\r\n        if (!is(__classPrivateFieldGet(this, _currentTarget))) {\r\n            this.logError(\"Cannot create preview - current target does not exist\", \"createPreview\");\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _preview, new ElementBuilder(\"div\").setClasses(__classPrivateFieldGet(this, _previewCls)).build());\r\n        //@ts-ignore currentTarget\r\n        __classPrivateFieldGet(this, _preview).style.width = `${__classPrivateFieldGet(this, _currentTarget).offsetWidth}px`;\r\n        //@ts-ignore currentTarget\r\n        __classPrivateFieldGet(this, _preview).style.height = `${__classPrivateFieldGet(this, _currentTarget).offsetHeight}px`;\r\n        document.body.appendChild(__classPrivateFieldGet(this, _preview));\r\n    }\r\n    removePreview() {\r\n        if (is(__classPrivateFieldGet(this, _preview))) {\r\n            //@ts-ignore currentTarget\r\n            __classPrivateFieldGet(this, _preview).remove();\r\n            __classPrivateFieldSet(this, _preview, null);\r\n        }\r\n    }\r\n    setPreviewPosition(data) {\r\n        if (!is(__classPrivateFieldGet(this, _preview))) {\r\n            return;\r\n        }\r\n        //@ts-ignore preview\r\n        __classPrivateFieldGet(this, _preview).style.top = `${data.y}px`;\r\n        //@ts-ignore preview\r\n        __classPrivateFieldGet(this, _preview).style.left = `${data.x}px`;\r\n    }\r\n    setCurrentPosition(data) {\r\n        if (!__classPrivateFieldGet(this, _currentTarget)) {\r\n            return;\r\n        }\r\n        let [idx, detected] = __classPrivateFieldGet(this, _detector).detect(data.x, data.y);\r\n        if ((idx !== __classPrivateFieldGet(this, _currentIdx)) && detected && __classPrivateFieldGet(this, _currentBefore) !== detected) {\r\n            let el = detected;\r\n            this.insertElement(__classPrivateFieldGet(this, _currentTarget), el);\r\n            __classPrivateFieldSet(this, _currentBefore, el);\r\n            this.getTargetsAndTrggers();\r\n            __classPrivateFieldSet(this, _currentIdx, idx);\r\n        }\r\n    }\r\n    insertElement(source, destination) {\r\n        if (is(destination)) {\r\n            this.element.insertBefore(source, destination);\r\n        }\r\n        else {\r\n            this.element.appendChild(source);\r\n        }\r\n    }\r\n    getFinishAnimation() {\r\n        if (!are(__classPrivateFieldGet(this, _currentTarget), __classPrivateFieldGet(this, _preview))) {\r\n            return {\r\n                opacity: {\r\n                    from: 1,\r\n                    to: 0,\r\n                }\r\n            };\r\n        }\r\n        //@ts-ignore currentTarget\r\n        const box = __classPrivateFieldGet(this, _currentTarget).getBoundingClientRect();\r\n        return {\r\n            opacity: {\r\n                from: 1,\r\n                to: 0,\r\n            },\r\n            top: {\r\n                //@ts-ignore preview\r\n                from: __classPrivateFieldGet(this, _preview).offsetTop,\r\n                //@ts-ignore preview\r\n                to: box.top > 0 ? box.top : __classPrivateFieldGet(this, _preview).offsetTop,\r\n                unit: \"px\"\r\n            },\r\n            left: {\r\n                //@ts-ignore preview\r\n                from: __classPrivateFieldGet(this, _preview).offsetLeft,\r\n                //@ts-ignore preview\r\n                to: box.left > 0 ? box.left : __classPrivateFieldGet(this, _preview).offsetLeft,\r\n                unit: \"px\"\r\n            }\r\n        };\r\n    }\r\n}\r\n_dragHandler = new WeakMap(), _triggers = new WeakMap(), _targets = new WeakMap(), _currentTarget = new WeakMap(), _currentIdx = new WeakMap(), _preview = new WeakMap(), _movingCls = new WeakMap(), _detector = new WeakMap(), _currentBefore = new WeakMap(), _animation = new WeakMap(), _previewCls = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _prefix, _pauseEventId, _animationPauseClass;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { EVENTS, ICONS } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { is, isString, getStringOrDefault, getIntOrDefault, replacePrefix } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { IconBuilder } from \"cui-light-core/dist/esm/builders/icon\";\r\nexport class CuiSpinnerArgs {\r\n    constructor() {\r\n        this.spinner = \"circle\";\r\n        this.scale = 1;\r\n    }\r\n    parse(args) {\r\n        if (isString(args)) {\r\n            this.spinner = getStringOrDefault(args, \"circle\");\r\n        }\r\n        else {\r\n            this.spinner = getStringOrDefault(args.spinner, \"circle\");\r\n            this.scale = getIntOrDefault(args.scale, 1);\r\n        }\r\n    }\r\n}\r\nexport class CuiSpinnerComponent {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix)}-spinner`;\r\n        ICONS['spinner_circle'] = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M 7.800378,1.7908996 A 8.4986862,8.4986862 0 0 1 18.2091,7.8003784 8.4986862,8.4986862 0 0 1 12.199621,18.209101 8.4986862,8.4986862 0 0 1 1.7908995,12.199622 8.4986862,8.4986862 0 0 1 7.800378,1.7908996 Z\\\"></path></svg>\";\r\n        ICONS['spinner_circle_double'] = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M 10,1.5000006 A 8.4999997,8.4999997 0 0 1 18.5,10 8.4999997,8.4999997 0 0 1 10,18.499999 8.4999997,8.4999997 0 0 1 1.5000005,10 8.4999997,8.4999997 0 0 1 10,1.5000006 Z\\\"></path><path d=\\\"M 10,3.4999997 A 6.5000002,6.5000002 0 0 1 16.5,10 6.5000002,6.5000002 0 0 1 10,16.5 6.5000002,6.5000002 0 0 1 3.5,9.9999993 6.5000002,6.5000002 0 0 1 10,3.4999997 Z\\\"></path></svg>\";\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiSpinnerHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiSpinnerHandler extends CuiHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiSpinnerHandler\", element, attribute, new CuiSpinnerArgs(), utils);\r\n        _pauseEventId.set(this, void 0);\r\n        _animationPauseClass.set(this, void 0);\r\n        __classPrivateFieldSet(this, _pauseEventId, null);\r\n        __classPrivateFieldSet(this, _animationPauseClass, replacePrefix(\"{prefix}-animation-pause\", prefix));\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldSet(this, _pauseEventId, this.onEvent(EVENTS.PAUSE, this.onPause.bind(this)));\r\n        this.add();\r\n    }\r\n    onUpdate() {\r\n        if (this.prevArgs && this.args.spinner !== this.prevArgs.spinner) {\r\n            this.add();\r\n        }\r\n    }\r\n    onDestroy() {\r\n        this.removeIfAnyExisists();\r\n        this.detachEvent(EVENTS.PAUSE, __classPrivateFieldGet(this, _pauseEventId));\r\n    }\r\n    addSpinner(iconElement, name) {\r\n        this.element.appendChild(iconElement);\r\n        this.element.classList.add(`animation-spinner-${name}`);\r\n    }\r\n    add() {\r\n        const svgIcon = is(this.args.spinner) ? ICONS[`spinner_${this.args.spinner}`] : null;\r\n        if (!is(svgIcon)) {\r\n            this._log.warning(\"Incorrect spinner name: \" + this.args.spinner);\r\n            return;\r\n        }\r\n        this.removeIfAnyExisists();\r\n        const iconElement = new IconBuilder(svgIcon).setScale(this.args.scale).build();\r\n        this.mutate(this.addSpinner, iconElement, this.args.spinner);\r\n    }\r\n    removeIfAnyExisists() {\r\n        let existing = this.element.querySelector(\"svg\");\r\n        if (existing) {\r\n            existing.remove();\r\n        }\r\n    }\r\n    onPause(flag) {\r\n        this.fetch(() => {\r\n            if (flag && !this.helper.hasClass(__classPrivateFieldGet(this, _animationPauseClass), this.element)) {\r\n                this.helper.setClassesAs(this.element, __classPrivateFieldGet(this, _animationPauseClass));\r\n            }\r\n            else {\r\n                this.helper.removeClassesAs(this.element, __classPrivateFieldGet(this, _animationPauseClass));\r\n            }\r\n        });\r\n        this.emitEvent(EVENTS.PAUSED, flag);\r\n    }\r\n}\r\n_pauseEventId = new WeakMap(), _animationPauseClass = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _prefix, _defTimeout, _targets, _currentIdx, _links, _task, _switchEventId, _isTracking, _startX, _swipeRatio, _nextIdx, _nextElement, _ratioThreshold, _currSlider, _nextSlider, _animationDef, _targetsCount, _moveEventId;\r\nimport { CuiMutableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiTaskRunner } from \"cui-light-core/dist/esm/utils/task\";\r\nimport { CuiSwipeAnimationEngine } from \"cui-light-core/dist/esm/animation/engine\";\r\nimport { SWIPE_ANIMATIONS_DEFINITIONS } from \"cui-light-core/dist/esm/animation/definitions\";\r\nimport { getStringOrDefault, getIntOrDefault, boolStringOrDefault, calculateNextIndex, is, getChildrenHeight, isInRange } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { SCOPE_SELECTOR, EVENTS, CLASSES } from \"cui-light-core/dist/esm/utils/statics\";\r\n/**\r\n *\r\n *   targets: string - slider elements\r\n *   timeout: number - animation timeout\r\n *   links: string; - link to switcher (indicator, tab, etc)\r\n *   autoTimeout: number - if defined, slider will switch item automatically\r\n *   height: 'auto' | string - element height\r\n *   animation: string - animation name\r\n *   loop: boolean - allows to slide elements in loop\r\n */\r\nconst SWITCH_DEFAULT_TARGETS = \"> li\";\r\nexport class CuiSliderArgs {\r\n    constructor(prefix, timeout) {\r\n        _prefix.set(this, void 0);\r\n        _defTimeout.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        this.targets = SWITCH_DEFAULT_TARGETS;\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n        this.links = \"\";\r\n        this.autoTimeout = -1;\r\n        this.height = \"\";\r\n        this.animation = \"\";\r\n        this.loop = false;\r\n    }\r\n    parse(args) {\r\n        this.targets = SCOPE_SELECTOR + getStringOrDefault(args.targets, SWITCH_DEFAULT_TARGETS);\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.links = args.links;\r\n        this.autoTimeout = getIntOrDefault(args.autoTimeout, -1);\r\n        this.height = getStringOrDefault(args.height, 'auto');\r\n        this.animation = getStringOrDefault(args.animation, 'slide');\r\n        this.loop = boolStringOrDefault(args.loop, false);\r\n    }\r\n}\r\n_prefix = new WeakMap(), _defTimeout = new WeakMap();\r\nexport class CuiSliderComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-slider`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiSliderHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiSliderHandler extends CuiMutableHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiSliderHandler\", element, attribute, new CuiSliderArgs(utils.setup.prefix, utils.setup.animationTime), utils);\r\n        _targets.set(this, void 0);\r\n        _currentIdx.set(this, void 0);\r\n        _links.set(this, void 0);\r\n        _task.set(this, void 0);\r\n        _switchEventId.set(this, void 0);\r\n        //  #moveListener: CuiMoveEventListener;\r\n        _isTracking.set(this, void 0);\r\n        _startX.set(this, void 0);\r\n        _swipeRatio.set(this, void 0);\r\n        _nextIdx.set(this, void 0);\r\n        _nextElement.set(this, void 0);\r\n        _ratioThreshold.set(this, void 0);\r\n        _currSlider.set(this, void 0);\r\n        _nextSlider.set(this, void 0);\r\n        _animationDef.set(this, void 0);\r\n        _targetsCount.set(this, void 0);\r\n        _moveEventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _targets, []);\r\n        __classPrivateFieldSet(this, _currentIdx, -1);\r\n        __classPrivateFieldSet(this, _nextIdx, -1);\r\n        __classPrivateFieldSet(this, _links, []);\r\n        __classPrivateFieldSet(this, _switchEventId, null);\r\n        __classPrivateFieldSet(this, _moveEventId, null);\r\n        __classPrivateFieldSet(this, _isTracking, false);\r\n        __classPrivateFieldSet(this, _startX, -1);\r\n        __classPrivateFieldSet(this, _swipeRatio, 0);\r\n        __classPrivateFieldSet(this, _nextElement, null);\r\n        __classPrivateFieldSet(this, _ratioThreshold, 0.4);\r\n        __classPrivateFieldSet(this, _currSlider, new CuiSwipeAnimationEngine());\r\n        __classPrivateFieldSet(this, _nextSlider, new CuiSwipeAnimationEngine());\r\n        __classPrivateFieldGet(this, _currSlider).setOnFinish(this.onAnimationFinish.bind(this));\r\n        __classPrivateFieldSet(this, _targetsCount, 0);\r\n        __classPrivateFieldSet(this, _task, new CuiTaskRunner(this.args.autoTimeout, true, this.switch.bind(this, 'next')));\r\n        __classPrivateFieldSet(this, _animationDef, SWIPE_ANIMATIONS_DEFINITIONS[this.args.animation]);\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldSet(this, _switchEventId, this.onEvent(EVENTS.SWITCH, this.onPushSwitch.bind(this)));\r\n        __classPrivateFieldSet(this, _moveEventId, this.onEvent(EVENTS.GLOBAL_MOVE, this.onMove.bind(this)));\r\n        this.getTargets();\r\n        this.getLinks();\r\n        this.getActiveIndex();\r\n        this.setLinkActive(-1, __classPrivateFieldGet(this, _currentIdx));\r\n        this.mutate(() => {\r\n            this.helper.setStyle(this.element, 'height', this.getElementHeight(__classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)]));\r\n        });\r\n        __classPrivateFieldSet(this, _task, new CuiTaskRunner(this.args.autoTimeout, true, this.switch.bind(this, 'next')));\r\n        __classPrivateFieldSet(this, _animationDef, SWIPE_ANIMATIONS_DEFINITIONS[this.args.animation]);\r\n        this.startTask();\r\n    }\r\n    onUpdate() {\r\n        this.mutate(() => {\r\n            this.helper.setStyle(this.element, 'height', this.getElementHeight(__classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)]));\r\n        });\r\n        __classPrivateFieldSet(this, _animationDef, SWIPE_ANIMATIONS_DEFINITIONS[this.args.animation]);\r\n        this.startTask();\r\n    }\r\n    onDestroy() {\r\n        __classPrivateFieldGet(this, _task).stop();\r\n        this.detachEvent(EVENTS.SWITCH, __classPrivateFieldGet(this, _switchEventId));\r\n        this.detachEvent(EVENTS.GLOBAL_MOVE, __classPrivateFieldGet(this, _moveEventId));\r\n    }\r\n    onMutation(record) {\r\n    }\r\n    /**\r\n     * Move listener callback\r\n     * @param data move listener data\r\n     */\r\n    onMove(data) {\r\n        if (this.isLocked || !__classPrivateFieldGet(this, _animationDef)) {\r\n            return;\r\n        }\r\n        let current = __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)];\r\n        switch (data.type) {\r\n            case \"down\":\r\n                if (__classPrivateFieldGet(this, _isTracking) || !current.contains(data.target)) {\r\n                    return;\r\n                }\r\n                __classPrivateFieldSet(this, _isTracking, true);\r\n                __classPrivateFieldSet(this, _startX, data.x);\r\n                __classPrivateFieldGet(this, _currSlider).setElement(current);\r\n                this.helper.setClassesAs(document.body, CLASSES.swipingOn);\r\n                if (data.event.cancelable)\r\n                    data.event.preventDefault();\r\n                break;\r\n            case \"up\":\r\n                if (!__classPrivateFieldGet(this, _isTracking)) {\r\n                    break;\r\n                }\r\n                // Lock component until animation is finished\r\n                this.isLocked = true;\r\n                let absRatio = Math.abs(__classPrivateFieldGet(this, _swipeRatio));\r\n                let timeout = absRatio * this.args.timeout;\r\n                let back = absRatio <= __classPrivateFieldGet(this, _ratioThreshold);\r\n                __classPrivateFieldGet(this, _currSlider).finish(absRatio, timeout, back);\r\n                __classPrivateFieldGet(this, _nextSlider).finish(absRatio, timeout, back);\r\n                this.helper.removeClassesAs(document.body, CLASSES.swipingOn);\r\n                __classPrivateFieldSet(this, _isTracking, false);\r\n                break;\r\n            case \"move\":\r\n                if (!__classPrivateFieldGet(this, _isTracking)) {\r\n                    break;\r\n                }\r\n                let newRatio = (data.x - __classPrivateFieldGet(this, _startX)) / current.offsetWidth;\r\n                if (Math.abs(newRatio - __classPrivateFieldGet(this, _swipeRatio)) < 0.02) {\r\n                    break;\r\n                }\r\n                let nextIdx = calculateNextIndex(__classPrivateFieldGet(this, _swipeRatio) > 0 ? \"next\" : \"prev\", __classPrivateFieldGet(this, _currentIdx), __classPrivateFieldGet(this, _targetsCount));\r\n                __classPrivateFieldSet(this, _swipeRatio, this.adjustMoveRatio(newRatio));\r\n                if (nextIdx !== __classPrivateFieldGet(this, _nextIdx)) {\r\n                    __classPrivateFieldGet(this, _nextElement) && this.helper.removeClass(CLASSES.animProgress, __classPrivateFieldGet(this, _nextElement));\r\n                    __classPrivateFieldSet(this, _nextElement, __classPrivateFieldGet(this, _targets)[nextIdx]);\r\n                    __classPrivateFieldSet(this, _nextIdx, nextIdx);\r\n                    __classPrivateFieldGet(this, _nextSlider).setElement(__classPrivateFieldGet(this, _nextElement));\r\n                    __classPrivateFieldGet(this, _nextSlider).setProps(__classPrivateFieldGet(this, _swipeRatio) > 0 ? __classPrivateFieldGet(this, _animationDef).previous.right : __classPrivateFieldGet(this, _animationDef).previous.left);\r\n                    __classPrivateFieldGet(this, _currSlider).setProps(__classPrivateFieldGet(this, _swipeRatio) > 0 ? __classPrivateFieldGet(this, _animationDef).current.right : __classPrivateFieldGet(this, _animationDef).current.left);\r\n                    this.mutate(() => {\r\n                        __classPrivateFieldGet(this, _nextElement) && this.helper.setClass(CLASSES.animProgress, __classPrivateFieldGet(this, _nextElement));\r\n                    });\r\n                }\r\n                this.mutate(() => {\r\n                    __classPrivateFieldGet(this, _currSlider).update(Math.abs(__classPrivateFieldGet(this, _swipeRatio)));\r\n                    __classPrivateFieldGet(this, _nextSlider).update(Math.abs(__classPrivateFieldGet(this, _swipeRatio)));\r\n                });\r\n                if (data.event.cancelable)\r\n                    data.event.preventDefault();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    adjustMoveRatio(ratio) {\r\n        if (this.args.loop) {\r\n            return ratio;\r\n        }\r\n        if (__classPrivateFieldGet(this, _currentIdx) === __classPrivateFieldGet(this, _targetsCount) - 1 && ratio > 0) {\r\n            return 0;\r\n        }\r\n        if (__classPrivateFieldGet(this, _currentIdx) === 0 && ratio < 0) {\r\n            return 0;\r\n        }\r\n        return ratio;\r\n    }\r\n    /**\r\n     * Api method to switch childrens\r\n     * @param index - index to switch to\r\n     */\r\n    switch(index) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.isLocked) {\r\n                return false;\r\n            }\r\n            this.onPushSwitch(index);\r\n            return true;\r\n        });\r\n    }\r\n    /**\r\n     *\r\n     * @param element element this animation was perfromed on\r\n     * @param reverted - flag inidicating whether animation was performed to the end or reverted back to start\r\n     * @param errorOccured - tells whether animation was finished with error\r\n     */\r\n    onAnimationFinish(element, reverted, errorOccured) {\r\n        this.isLocked = false;\r\n        // If not go back or from push then switch, else was go back\r\n        let next = __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _nextIdx)];\r\n        let current = __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)];\r\n        if (!reverted) {\r\n            if (__classPrivateFieldGet(this, _nextIdx) > -1) {\r\n                this.mutate(() => {\r\n                    this.helper.removeClass(CLASSES.animProgress, next);\r\n                    this.helper.setClass(this.activeClassName, next);\r\n                    this.helper.removeClass(this.activeClassName, current);\r\n                    this.helper.removeAttribute(\"style\", current);\r\n                    this.helper.removeAttribute(\"style\", next);\r\n                    this.setLinkActive(__classPrivateFieldGet(this, _currentIdx), __classPrivateFieldGet(this, _nextIdx));\r\n                    this.emitEvent(EVENTS.SWITCHED, {\r\n                        timestamp: Date.now(),\r\n                        index: __classPrivateFieldGet(this, _nextIdx)\r\n                    });\r\n                    __classPrivateFieldSet(this, _currentIdx, __classPrivateFieldGet(this, _nextIdx));\r\n                    __classPrivateFieldSet(this, _nextIdx, -1);\r\n                    __classPrivateFieldSet(this, _nextElement, null);\r\n                    __classPrivateFieldSet(this, _startX, -1);\r\n                    __classPrivateFieldSet(this, _swipeRatio, 0);\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            if (is(__classPrivateFieldGet(this, _nextElement))) {\r\n                //@ts-ignore\r\n                this.helper.removeClass(CLASSES.animProgress, __classPrivateFieldGet(this, _nextElement));\r\n                //@ts-ignore\r\n                this.helper.removeAttribute(\"style\", __classPrivateFieldGet(this, _nextElement));\r\n            }\r\n            this.helper.removeAttribute(\"style\", current);\r\n            __classPrivateFieldSet(this, _nextIdx, -1);\r\n            __classPrivateFieldSet(this, _nextElement, null);\r\n            __classPrivateFieldSet(this, _startX, -1);\r\n            __classPrivateFieldSet(this, _swipeRatio, 0);\r\n        }\r\n        this.startTask();\r\n    }\r\n    onPushSwitch(index) {\r\n        if (!is(index) ||\r\n            this.isLocked ||\r\n            !__classPrivateFieldGet(this, _animationDef) ||\r\n            (!this.args.loop && __classPrivateFieldGet(this, _currentIdx) === 0 && index === 'prev') ||\r\n            (!this.args.loop && __classPrivateFieldGet(this, _currentIdx) === __classPrivateFieldGet(this, _targetsCount) - 1 && index === 'next')) {\r\n            return;\r\n        }\r\n        this.isLocked = true;\r\n        let nextIdx = calculateNextIndex(index, __classPrivateFieldGet(this, _currentIdx), __classPrivateFieldGet(this, _targetsCount));\r\n        if (nextIdx == __classPrivateFieldGet(this, _currentIdx) || nextIdx < 0 || nextIdx >= __classPrivateFieldGet(this, _targets).length) {\r\n            this._log.warning(`Index ${index} is not within the suitable range`);\r\n            return false;\r\n        }\r\n        __classPrivateFieldSet(this, _nextIdx, nextIdx);\r\n        let current = __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)];\r\n        let next = __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _nextIdx)];\r\n        __classPrivateFieldGet(this, _currSlider).setElement(current);\r\n        __classPrivateFieldGet(this, _nextSlider).setElement(next);\r\n        __classPrivateFieldGet(this, _currSlider).setProps(index === 'prev' ? __classPrivateFieldGet(this, _animationDef).current.left : __classPrivateFieldGet(this, _animationDef).current.right);\r\n        __classPrivateFieldGet(this, _nextSlider).setProps(index === 'prev' ? __classPrivateFieldGet(this, _animationDef).previous.left : __classPrivateFieldGet(this, _animationDef).previous.right);\r\n        this.mutate(() => {\r\n            __classPrivateFieldGet(this, _currSlider).finish(0, this.args.timeout, false);\r\n            __classPrivateFieldGet(this, _nextSlider).finish(0, this.args.timeout, false);\r\n            this.helper.setClass(CLASSES.animProgress, next);\r\n        });\r\n    }\r\n    getActiveIndex() {\r\n        __classPrivateFieldSet(this, _currentIdx, is(__classPrivateFieldGet(this, _targets)) ? __classPrivateFieldGet(this, _targets).findIndex(target => this.helper.hasClass(this.activeClassName, target)) : -1);\r\n    }\r\n    getElementHeight(current) {\r\n        if (!is(this.args.height) || this.args.height === 'auto') {\r\n            return getChildrenHeight(current) + \"px\";\r\n        }\r\n        else {\r\n            return this.args.height;\r\n        }\r\n    }\r\n    /**\r\n     * Queries targets\r\n     */\r\n    getTargets() {\r\n        let t = this.element.querySelectorAll(this.args.targets);\r\n        __classPrivateFieldSet(this, _targets, t.length > 0 ? [...t] : []);\r\n        __classPrivateFieldSet(this, _targetsCount, __classPrivateFieldGet(this, _targets).length);\r\n    }\r\n    /**\r\n     * Get linked switcher elements\r\n     */\r\n    getLinks() {\r\n        __classPrivateFieldSet(this, _links, is(this.args.links) ? [...document.querySelectorAll(this.args.links)] : []);\r\n    }\r\n    /**\r\n     * Set active class on linked switcher if set\r\n     * @param current - current index (to remove active from)\r\n     * @param next - next index (to set action on)\r\n     */\r\n    setLinkActive(current, next) {\r\n        if (!is(__classPrivateFieldGet(this, _links))) {\r\n            return;\r\n        }\r\n        this.mutate(() => {\r\n            if (isInRange(current, 0, __classPrivateFieldGet(this, _links).length - 1)) {\r\n                this.helper.removeClass(this.activeClassName, __classPrivateFieldGet(this, _links)[current]);\r\n            }\r\n            if (isInRange(next, 0, __classPrivateFieldGet(this, _links).length - 1)) {\r\n                this.helper.setClass(this.activeClassName, __classPrivateFieldGet(this, _links)[next]);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Runs task if arguments setup allows for it - auto flag must be set to true\r\n     */\r\n    startTask() {\r\n        __classPrivateFieldGet(this, _task).stop();\r\n        if (this.args.autoTimeout) {\r\n            __classPrivateFieldGet(this, _task).start();\r\n        }\r\n    }\r\n}\r\n_targets = new WeakMap(), _currentIdx = new WeakMap(), _links = new WeakMap(), _task = new WeakMap(), _switchEventId = new WeakMap(), _isTracking = new WeakMap(), _startX = new WeakMap(), _swipeRatio = new WeakMap(), _nextIdx = new WeakMap(), _nextElement = new WeakMap(), _ratioThreshold = new WeakMap(), _currSlider = new WeakMap(), _nextSlider = new WeakMap(), _animationDef = new WeakMap(), _targetsCount = new WeakMap(), _moveEventId = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _prefix, _defTimeout, _targets, _currentIdx, _links, _switches, _task, _switchEventId, _actionsIn, _actionsOut;\r\nimport { CuiMutableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiTaskRunner } from \"cui-light-core/dist/esm/utils/task\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { is, getStringOrDefault, replacePrefix, getIntOrDefault, isStringTrue, calculateNextIndex, getChildrenHeight, isInRange } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { SCOPE_SELECTOR, EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst SWITCH_DEFAULT_ACTION_IN = \".{prefix}-switch-animation-default-in\";\r\nconst SWITCH_DEFAULT_ACTION_OUT = \".{prefix}-switch-animation-default-out\";\r\nconst SWITCH_DEFAULT_TARGETS = \" > *\";\r\nexport class CuiSwitchArgs {\r\n    constructor(prefix, timeout) {\r\n        _prefix.set(this, void 0);\r\n        _defTimeout.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        this.targets = \"\";\r\n        this.in = \"\";\r\n        this.out = \"\";\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n        this.links = \"\";\r\n        this.switch = \"\";\r\n        this.autoTimeout = -1;\r\n        this.height = \"\";\r\n        this.loop = false;\r\n    }\r\n    parse(args) {\r\n        this.targets = is(args.targets) ? SCOPE_SELECTOR + args.targets : SCOPE_SELECTOR + SWITCH_DEFAULT_TARGETS;\r\n        this.in = getStringOrDefault(args.in, replacePrefix(SWITCH_DEFAULT_ACTION_IN, __classPrivateFieldGet(this, _prefix)));\r\n        this.out = getStringOrDefault(args.out, replacePrefix(SWITCH_DEFAULT_ACTION_OUT, __classPrivateFieldGet(this, _prefix)));\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.links = getStringOrDefault(args.links, \"\");\r\n        this.switch = getStringOrDefault(args.switch, \"\");\r\n        this.autoTimeout = getIntOrDefault(args.autoTimeout, -1);\r\n        this.height = getStringOrDefault(args.height, 'auto');\r\n        this.loop = isStringTrue(args.loop);\r\n    }\r\n}\r\n_prefix = new WeakMap(), _defTimeout = new WeakMap();\r\nexport class CuiSwitchComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-switch`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiSwitchHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiSwitchHandler extends CuiMutableHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiSwitchHandler\", element, attribute, new CuiSwitchArgs(utils.setup.prefix, utils.setup.animationTime), utils);\r\n        _targets.set(this, void 0);\r\n        _currentIdx.set(this, void 0);\r\n        _links.set(this, void 0);\r\n        _switches.set(this, void 0);\r\n        _task.set(this, void 0);\r\n        _switchEventId.set(this, void 0);\r\n        _actionsIn.set(this, void 0);\r\n        _actionsOut.set(this, void 0);\r\n        __classPrivateFieldSet(this, _targets, []);\r\n        __classPrivateFieldSet(this, _currentIdx, -1);\r\n        __classPrivateFieldSet(this, _links, []);\r\n        __classPrivateFieldSet(this, _switches, []);\r\n        __classPrivateFieldSet(this, _switchEventId, null);\r\n        __classPrivateFieldSet(this, _actionsIn, __classPrivateFieldSet(this, _actionsOut, []));\r\n        __classPrivateFieldSet(this, _task, new CuiTaskRunner(this.args.autoTimeout, true, this.switch.bind(this, 'next')));\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldSet(this, _switchEventId, this.onEvent(EVENTS.SWITCH, this.onPushSwitch.bind(this)));\r\n        this.parseArguments();\r\n        this.getTargets();\r\n        this.getActiveIndex();\r\n        this.getSwitches();\r\n        this.setSwitchesActive(__classPrivateFieldGet(this, _currentIdx));\r\n        this.setLinkActive(-1, __classPrivateFieldGet(this, _currentIdx));\r\n        this.mutate(() => {\r\n            this.helper.setStyle(this.element, 'height', this.getElementHeight(__classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)]));\r\n        });\r\n        __classPrivateFieldSet(this, _task, new CuiTaskRunner(this.args.autoTimeout, true, this.switch.bind(this, 'next')));\r\n        this.startTask();\r\n    }\r\n    onUpdate() {\r\n        this.parseArguments();\r\n        this.getTargets();\r\n        this.getSwitches();\r\n        this.setSwitchesActive(__classPrivateFieldGet(this, _currentIdx));\r\n        this.mutate(() => {\r\n            this.helper.setStyle(this.element, 'height', this.getElementHeight(__classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)]));\r\n        });\r\n        this.startTask();\r\n    }\r\n    onDestroy() {\r\n        __classPrivateFieldGet(this, _task).stop();\r\n        this.detachEvent(EVENTS.SWITCH, __classPrivateFieldGet(this, _switchEventId));\r\n    }\r\n    onMutation(record) {\r\n        this.getTargets();\r\n        this.mutate(() => {\r\n            this.helper.setStyle(this.element, 'height', this.getElementHeight(__classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)]));\r\n        });\r\n    }\r\n    switch(index) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.isLocked) {\r\n                return false;\r\n            }\r\n            this.getSwitches();\r\n            this.getActiveIndex();\r\n            let nextIdx = calculateNextIndex(index, __classPrivateFieldGet(this, _currentIdx), __classPrivateFieldGet(this, _targets).length);\r\n            if (!this.args.loop && ((index === \"next\" && nextIdx === 0) || (index === 'prev' && __classPrivateFieldGet(this, _currentIdx) === 0))) {\r\n                this.logInfo(\"Switch blocked by loop settings\", \"switch\");\r\n                return false;\r\n            }\r\n            if (nextIdx == __classPrivateFieldGet(this, _currentIdx) || nextIdx < 0 || nextIdx >= __classPrivateFieldGet(this, _targets).length) {\r\n                this.logWarning(`Index ${index} is not within the suitable range`, \"switch\");\r\n                return false;\r\n            }\r\n            this.isLocked = true;\r\n            this.setSwitchesActive(nextIdx);\r\n            let nextItem = __classPrivateFieldGet(this, _targets)[nextIdx];\r\n            yield this.actionsHelper.performSwitchAction(nextItem, __classPrivateFieldGet(this, _currentIdx) > -1 ? __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)] : null, __classPrivateFieldGet(this, _actionsIn), __classPrivateFieldGet(this, _actionsOut), () => {\r\n                // Set next element active\r\n                nextItem.classList.add(this.activeClassName);\r\n                // Remove active from current element (if current exists)\r\n                if (__classPrivateFieldGet(this, _currentIdx) > -1)\r\n                    __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)].classList.remove(this.activeClassName);\r\n                // Update linked items\r\n                this.setLinkActive(__classPrivateFieldGet(this, _currentIdx), nextIdx);\r\n                // Update element height - it must be done a parent get height based on current child\r\n                this.helper.setStyle(this.element, 'height', this.getElementHeight(nextItem));\r\n                this.startTask();\r\n                this.isLocked = false;\r\n            }, this.args.timeout);\r\n            this.emitEvent(EVENTS.SWITCHED, {\r\n                timestamp: Date.now(),\r\n                index: nextIdx\r\n            });\r\n            return true;\r\n        });\r\n    }\r\n    onPushSwitch(index) {\r\n        this.switch(index);\r\n    }\r\n    getActiveIndex() {\r\n        __classPrivateFieldSet(this, _currentIdx, is(__classPrivateFieldGet(this, _targets)) ? __classPrivateFieldGet(this, _targets).findIndex(target => this.helper.hasClass(this.activeClassName, target)) : -1);\r\n    }\r\n    getElementHeight(current) {\r\n        if (!is(this.args.height) || this.args.height === 'auto') {\r\n            return getChildrenHeight(current) + \"px\";\r\n        }\r\n        else {\r\n            return this.args.height;\r\n        }\r\n    }\r\n    /**\r\n     * Gets attributes value and prepares properties\r\n     */\r\n    parseArguments() {\r\n        __classPrivateFieldSet(this, _actionsIn, CuiActionsListFactory.get(this.args.in));\r\n        __classPrivateFieldSet(this, _actionsOut, CuiActionsListFactory.get(this.args.out));\r\n        __classPrivateFieldSet(this, _links, is(this.args.links) ? [...document.querySelectorAll(this.args.links)] : []);\r\n    }\r\n    /**\r\n     * Query target elements\r\n     */\r\n    getTargets() {\r\n        console.log(this.args.targets);\r\n        let t = this.element.querySelectorAll(this.args.targets);\r\n        __classPrivateFieldSet(this, _targets, t.length > 0 ? [...t] : []);\r\n    }\r\n    getSwitches() {\r\n        let switches = is(this.args.switch) ? document.querySelectorAll(this.args.switch) : null;\r\n        __classPrivateFieldSet(this, _switches, []);\r\n        if (switches) {\r\n            switches.forEach(sw => {\r\n                __classPrivateFieldGet(this, _switches).push(sw);\r\n            });\r\n        }\r\n    }\r\n    setLinkActive(current, next) {\r\n        if (!is(__classPrivateFieldGet(this, _links))) {\r\n            return;\r\n        }\r\n        if (isInRange(current, 0, __classPrivateFieldGet(this, _links).length - 1)) {\r\n            this.helper.removeClass(this.activeClassName, __classPrivateFieldGet(this, _links)[current]);\r\n        }\r\n        if (isInRange(next, 0, __classPrivateFieldGet(this, _links).length - 1)) {\r\n            this.helper.setClass(this.activeClassName, __classPrivateFieldGet(this, _links)[next]);\r\n        }\r\n    }\r\n    /**\r\n     * Sets propers active state on attached switches\r\n     * @param index\r\n     */\r\n    setSwitchesActive(index) {\r\n        __classPrivateFieldGet(this, _switches).forEach(sw => {\r\n            this.emitLinkSwitch(sw.$cuid, index);\r\n        });\r\n    }\r\n    /**\r\n     * Emits push event to attached switch to set proper index\r\n     * @param id - cuid of element\r\n     * @param index - index to be set on element\r\n     */\r\n    emitLinkSwitch(id, index) {\r\n        if (is(id))\r\n            this.utils.bus.emit(EVENTS.SWITCH, id, index);\r\n    }\r\n    /**\r\n     * Runs task if arguments setup allows for it - auto flag must be set to true\r\n     */\r\n    startTask() {\r\n        __classPrivateFieldGet(this, _task).stop();\r\n        if (this.args.autoTimeout) {\r\n            __classPrivateFieldGet(this, _task).start();\r\n        }\r\n    }\r\n}\r\n_targets = new WeakMap(), _currentIdx = new WeakMap(), _links = new WeakMap(), _switches = new WeakMap(), _task = new WeakMap(), _switchEventId = new WeakMap(), _actionsIn = new WeakMap(), _actionsOut = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _targetId, _isList, _listeners;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst SWITCHER_LIST_ITEM_SELECTOR = \"li > a\";\r\nexport class CuiSwitcherArgs {\r\n    constructor() {\r\n        this.index = \"\";\r\n        this.target = \"\";\r\n    }\r\n    parse(args) {\r\n        if (!is(args)) {\r\n            return;\r\n        }\r\n        this.target = args.target;\r\n        this.index = args.index;\r\n    }\r\n}\r\nexport class CuiSwitcherComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-switcher`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiSwitcherHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiSwitcherHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiSwitcherHandler\", element, attribute, new CuiSwitcherArgs(), utils);\r\n        _targetId.set(this, void 0);\r\n        _isList.set(this, void 0);\r\n        _listeners.set(this, void 0);\r\n        __classPrivateFieldSet(this, _targetId, null);\r\n        __classPrivateFieldSet(this, _isList, element.tagName === 'UL');\r\n        this.onClickEvent = this.onClickEvent.bind(this);\r\n        __classPrivateFieldSet(this, _listeners, []);\r\n    }\r\n    onInit() {\r\n        this.setEvents();\r\n        this.getTarget();\r\n    }\r\n    onUpdate() {\r\n        this.getTarget();\r\n    }\r\n    onDestroy() {\r\n        this.removeEvents();\r\n    }\r\n    getTarget() {\r\n        if (!is(this.args.target)) {\r\n            __classPrivateFieldSet(this, _targetId, null);\r\n        }\r\n        let target = document.querySelector(this.args.target);\r\n        if (is(target)) {\r\n            __classPrivateFieldSet(this, _targetId, target.$cuid);\r\n        }\r\n    }\r\n    setEvents() {\r\n        if (__classPrivateFieldGet(this, _isList)) {\r\n            let elements = this.element.querySelectorAll(SWITCHER_LIST_ITEM_SELECTOR);\r\n            elements.forEach((el, index) => {\r\n                let list = this.onListItemClick.bind(this, index);\r\n                __classPrivateFieldGet(this, _listeners).push(list);\r\n                //@ts-ignore\r\n                el.addEventListener('click', list);\r\n            });\r\n        }\r\n        else {\r\n            this.element.addEventListener('click', this.onClickEvent);\r\n        }\r\n    }\r\n    removeEvents() {\r\n        if (__classPrivateFieldGet(this, _isList)) {\r\n            let elements = this.element.querySelectorAll(SWITCHER_LIST_ITEM_SELECTOR);\r\n            elements.forEach((el, index) => {\r\n                if (__classPrivateFieldGet(this, _listeners).length > index)\r\n                    //@ts-ignore\r\n                    el.removeEventListener('click', __classPrivateFieldGet(this, _listeners)[index]);\r\n            });\r\n            __classPrivateFieldSet(this, _listeners, []);\r\n        }\r\n        else {\r\n            this.element.removeEventListener('click', this.onClickEvent);\r\n        }\r\n    }\r\n    onClickEvent(ev) {\r\n        this.getTarget();\r\n        if (!is(this.args.index)) {\r\n            return;\r\n        }\r\n        this.onClick(this.args.index.trim());\r\n    }\r\n    onListItemClick(index, ev) {\r\n        this.getTarget();\r\n        this.onClick(index);\r\n    }\r\n    onClick(index) {\r\n        if (!is(__classPrivateFieldGet(this, _targetId))) {\r\n            return;\r\n        }\r\n        //@ts-ignore  targetId checked already\r\n        this.utils.bus.emit(EVENTS.SWITCH, __classPrivateFieldGet(this, _targetId), index);\r\n    }\r\n}\r\n_targetId = new WeakMap(), _isList = new WeakMap(), _listeners = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _target, _utils, _toggleEventId, _actions;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { is, isString, getStringOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nexport class CuiToggleArgs {\r\n    constructor() {\r\n        this.action = \"\";\r\n        this.target = \"\";\r\n    }\r\n    parse(args) {\r\n        if (is(args) && isString(args)) {\r\n            this.action = args;\r\n        }\r\n        else {\r\n            this.target = getStringOrDefault(args.target, \"\");\r\n            this.action = args.action;\r\n        }\r\n    }\r\n}\r\nexport class CuiToggleComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : \"cui\"}-toggle`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiToggleHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiToggleHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiToggleHandler\", element, attribute, new CuiToggleArgs(), utils);\r\n        _target.set(this, void 0);\r\n        _utils.set(this, void 0);\r\n        _toggleEventId.set(this, void 0);\r\n        _actions.set(this, void 0);\r\n        __classPrivateFieldSet(this, _target, this.element);\r\n        __classPrivateFieldSet(this, _utils, utils);\r\n        __classPrivateFieldSet(this, _toggleEventId, null);\r\n        __classPrivateFieldSet(this, _actions, []);\r\n        this.onClick = this.onClick.bind(this);\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldSet(this, _target, this.getTarget());\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n        this.element.addEventListener('click', this.onClick);\r\n        __classPrivateFieldSet(this, _toggleEventId, this.onEvent(EVENTS.TOGGLE, this.toggle.bind(this)));\r\n    }\r\n    onUpdate() {\r\n        __classPrivateFieldSet(this, _target, this.getTarget());\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n    }\r\n    onDestroy() {\r\n        this.element.removeEventListener('click', this.onClick);\r\n        this.detachEvent(EVENTS.TOGGLE, __classPrivateFieldGet(this, _toggleEventId));\r\n    }\r\n    toggle() {\r\n        if (!__classPrivateFieldGet(this, _target)) {\r\n            this.logError(\"Target in not provided\", \"toggle\");\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _actions).forEach(action => action.toggle(__classPrivateFieldGet(this, _target), __classPrivateFieldGet(this, _utils)));\r\n        this.emitEvent(EVENTS.TOGGLED, {\r\n            action: this.args.action,\r\n            target: __classPrivateFieldGet(this, _target),\r\n            timestamp: Date.now()\r\n        });\r\n    }\r\n    onClick(ev) {\r\n        this.toggle();\r\n        ev.preventDefault();\r\n    }\r\n    getTarget() {\r\n        var _a;\r\n        if (!this.args.target) {\r\n            return this.element;\r\n        }\r\n        return (_a = document.querySelector(this.args.target)) !== null && _a !== void 0 ? _a : this.element;\r\n    }\r\n}\r\n_target = new WeakMap(), _utils = new WeakMap(), _toggleEventId = new WeakMap(), _actions = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defAct, _prefix, _hoverListener, _tooltip, _margin, _positionCalculator, _tooltipDataCls, _actions, _task;\r\nimport { ElementBuilder } from \"cui-light-core/dist/esm/builders/element\";\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiHoverListener } from \"cui-light-core/dist/esm/listeners/hover\";\r\nimport { CuiBasePositionCalculator } from \"cui-light-core/dist/esm/position/calculator\";\r\nimport { CuiTaskRunner } from \"cui-light-core/dist/esm/utils/task\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { replacePrefix, isString, getStringOrDefault, getIntOrDefault, is } from \"cui-light-core/dist/esm/utils/functions\";\r\nconst TOOLTIP_ACTION = \".{prefix}-animation-tooltip-in\";\r\nconst TOOLTIP_DATA = \"{prefix}-tooltip-data\";\r\nexport class CuiTooltipArgs {\r\n    constructor(prefix) {\r\n        _defAct.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defAct, replacePrefix(TOOLTIP_ACTION, prefix));\r\n        this.content = \"\";\r\n        this.width = 150;\r\n        this.margin = 8;\r\n        this.timeout = 2000;\r\n        this.pos = \"\";\r\n        this.action = __classPrivateFieldGet(this, _defAct);\r\n    }\r\n    parse(val) {\r\n        if (isString(val)) {\r\n            this.content = getStringOrDefault(val, \"\");\r\n            return;\r\n        }\r\n        this.content = getStringOrDefault(val.content, \"\");\r\n        this.width = getIntOrDefault(val.width, 150);\r\n        this.margin = getIntOrDefault(val.margin, 8);\r\n        this.pos = getStringOrDefault(val.pos, \"\");\r\n        this.action = getStringOrDefault(val.action, __classPrivateFieldGet(this, _defAct));\r\n        this.timeout = getIntOrDefault(val.timeout, 2000);\r\n    }\r\n}\r\n_defAct = new WeakMap();\r\nexport class CuiTooltipComponent {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix)}-tooltip`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, sutils) {\r\n        return new CuiTooltipHandler(element, this.attribute, sutils, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiTooltipHandler extends CuiHandler {\r\n    constructor(element, attribute, utils, prefix) {\r\n        super(\"CuiTooltipHandler\", element, attribute, new CuiTooltipArgs(prefix), utils);\r\n        _hoverListener.set(this, void 0);\r\n        _tooltip.set(this, void 0);\r\n        _margin.set(this, void 0);\r\n        _positionCalculator.set(this, void 0);\r\n        _tooltipDataCls.set(this, void 0);\r\n        _actions.set(this, void 0);\r\n        _task.set(this, void 0);\r\n        __classPrivateFieldSet(this, _tooltip, undefined);\r\n        __classPrivateFieldSet(this, _actions, []);\r\n        __classPrivateFieldSet(this, _task, undefined);\r\n        __classPrivateFieldSet(this, _tooltipDataCls, replacePrefix(TOOLTIP_DATA, prefix));\r\n        __classPrivateFieldSet(this, _hoverListener, new CuiHoverListener(element));\r\n        __classPrivateFieldGet(this, _hoverListener).setCallback(this.onHover.bind(this));\r\n        __classPrivateFieldSet(this, _margin, 8);\r\n        __classPrivateFieldSet(this, _positionCalculator, new CuiBasePositionCalculator());\r\n        __classPrivateFieldGet(this, _positionCalculator).setPreferred(\"top-center\");\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldGet(this, _hoverListener).attach();\r\n        this.getDataFromArgs();\r\n        __classPrivateFieldSet(this, _task, new CuiTaskRunner(this.args.timeout, false, this.removeTooltip.bind(this)));\r\n    }\r\n    onUpdate() {\r\n        this.getDataFromArgs();\r\n        if (__classPrivateFieldGet(this, _task))\r\n            __classPrivateFieldGet(this, _task).setTimeout(this.args.timeout);\r\n    }\r\n    onDestroy() {\r\n        this.removeTooltip();\r\n        __classPrivateFieldGet(this, _hoverListener).detach();\r\n    }\r\n    onHover(ev) {\r\n        if (ev.isHovering) {\r\n            this.createTooltip();\r\n        }\r\n        else {\r\n            this.removeTooltip();\r\n        }\r\n    }\r\n    createTooltip() {\r\n        if (is(__classPrivateFieldGet(this, _tooltip)) || !is(this.args.content)) {\r\n            return;\r\n        }\r\n        const box = this.element.getBoundingClientRect();\r\n        __classPrivateFieldSet(this, _tooltip, new ElementBuilder(\"div\").setClasses(__classPrivateFieldGet(this, _tooltipDataCls)).build());\r\n        __classPrivateFieldGet(this, _tooltip).textContent = this.args.content;\r\n        __classPrivateFieldGet(this, _tooltip).style.maxWidth = `${this.args.width}px`;\r\n        document.body.appendChild(__classPrivateFieldGet(this, _tooltip));\r\n        this.mutate(() => {\r\n            if (!__classPrivateFieldGet(this, _tooltip)) {\r\n                return;\r\n            }\r\n            const toolbox = __classPrivateFieldGet(this, _tooltip).getBoundingClientRect();\r\n            __classPrivateFieldGet(this, _positionCalculator).setMargin(__classPrivateFieldGet(this, _margin));\r\n            try {\r\n                let [x, y] = __classPrivateFieldGet(this, _positionCalculator).calculate(box, toolbox);\r\n                __classPrivateFieldGet(this, _tooltip).style.top = `${y}px`;\r\n                __classPrivateFieldGet(this, _tooltip).style.left = `${x}px`;\r\n                this.toggleActions();\r\n                if (__classPrivateFieldGet(this, _task))\r\n                    __classPrivateFieldGet(this, _task).start();\r\n            }\r\n            catch (e) {\r\n                this.logError(e.message, \"createTooltip\", e);\r\n            }\r\n        });\r\n    }\r\n    removeTooltip() {\r\n        if (!is(__classPrivateFieldGet(this, _tooltip))) {\r\n            return;\r\n        }\r\n        if (__classPrivateFieldGet(this, _task))\r\n            __classPrivateFieldGet(this, _task).stop();\r\n        this.mutate(() => {\r\n            //@ts-ignore already checked\r\n            __classPrivateFieldGet(this, _tooltip).remove();\r\n            __classPrivateFieldSet(this, _tooltip, undefined);\r\n        });\r\n    }\r\n    getDataFromArgs() {\r\n        __classPrivateFieldGet(this, _positionCalculator).setMargin(this.args.margin);\r\n        __classPrivateFieldGet(this, _positionCalculator).setStatic(this.args.pos);\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n    }\r\n    toggleActions() {\r\n        if (!__classPrivateFieldGet(this, _tooltip)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _actions).forEach(action => {\r\n            // @ts-ignore\r\n            action.toggle(__classPrivateFieldGet(this, _tooltip));\r\n        });\r\n    }\r\n}\r\n_hoverListener = new WeakMap(), _tooltip = new WeakMap(), _margin = new WeakMap(), _positionCalculator = new WeakMap(), _tooltipDataCls = new WeakMap(), _actions = new WeakMap(), _task = new WeakMap();\r\n","import { CuiAccordionComponent } from \"./accordion/accordion\";\r\nimport { CuiBanerComponent } from \"./banner/banner\";\r\nimport { CuiCircleComponent } from \"./circle/circle\";\r\nimport { CuiCloseComponent } from \"./close/close\";\r\nimport { CuiCoverComponent } from \"./cover/cover\";\r\nimport { CuiDialogComponent } from \"./dialog/dialog\";\r\nimport { CuiDropComponenet } from \"./drop/drop\";\r\nimport { CuiFloatComponent } from \"./float/float\";\r\nimport { CuiIconComponent } from \"./icon/icon\";\r\nimport { CuiIntersectionComponent } from \"./intersection/intersection\";\r\nimport { CuiOffCanvasComponent } from \"./offcanvas/offcanvas\";\r\nimport { CuiOffsetComponent } from \"./offset/offset\";\r\nimport { CuiOpenComponent } from \"./open/open\";\r\nimport { CuiResizeComponent } from \"./resize/resize\";\r\nimport { CuiScrollComponent } from \"./scroll/scroll\";\r\nimport { CuiScrollspyComponent } from \"./scrollspy/scrollspy\";\r\nimport { CuiSortableComponent } from \"./sortable/sortable\";\r\nimport { CuiSpinnerComponent } from \"./spinner/spinner\";\r\nimport { CuiSliderComponent } from \"./switch/slider\";\r\nimport { CuiSwitchComponent } from \"./switch/switch\";\r\nimport { CuiSwitcherComponent } from \"./switch/switcher\";\r\nimport { CuiToggleComponent } from \"./toggle/toggle\";\r\nimport { CuiTooltipComponent } from \"./tooltip/tooltip\";\r\n/**\r\n * Function that initializes and returns all components available in package\r\n * @param attributes - object holding data needed for components initialization\r\n */\r\nexport function GetComponents(attributes) {\r\n    let prefix = attributes === null || attributes === void 0 ? void 0 : attributes.prefix;\r\n    return [\r\n        new CuiIconComponent(prefix),\r\n        new CuiTooltipComponent(prefix),\r\n        new CuiCircleComponent(prefix),\r\n        new CuiSpinnerComponent(prefix),\r\n        new CuiScrollComponent(prefix),\r\n        new CuiScrollspyComponent(prefix),\r\n        new CuiIntersectionComponent(prefix),\r\n        new CuiOpenComponent(prefix),\r\n        new CuiCloseComponent(prefix),\r\n        new CuiToggleComponent(prefix),\r\n        new CuiDialogComponent(prefix),\r\n        new CuiOffCanvasComponent(prefix),\r\n        new CuiAccordionComponent(prefix),\r\n        new CuiDropComponenet(prefix),\r\n        new CuiOffsetComponent(prefix),\r\n        new CuiSwitchComponent(prefix),\r\n        new CuiSwitcherComponent(prefix),\r\n        new CuiFloatComponent(prefix),\r\n        new CuiSliderComponent(prefix),\r\n        new CuiBanerComponent(prefix),\r\n        new CuiCoverComponent(prefix),\r\n        new CuiSortableComponent(prefix),\r\n        new CuiResizeComponent(prefix),\r\n    ];\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _bus, _boundClick;\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nexport class CuiWindowClickPlugin {\r\n    constructor() {\r\n        this.name = 'click-plugin';\r\n        _bus.set(this, void 0);\r\n        _boundClick.set(this, void 0);\r\n        this.description = \"CuiWindowClickPlugin\";\r\n        __classPrivateFieldSet(this, _bus, undefined);\r\n        __classPrivateFieldSet(this, _boundClick, this.onWindowClick.bind(this));\r\n    }\r\n    init(utils) {\r\n        __classPrivateFieldSet(this, _bus, utils.bus);\r\n        window.addEventListener('click', __classPrivateFieldGet(this, _boundClick));\r\n    }\r\n    destroy() {\r\n        window.removeEventListener('click', __classPrivateFieldGet(this, _boundClick));\r\n    }\r\n    onWindowClick(ev) {\r\n        if (__classPrivateFieldGet(this, _bus))\r\n            __classPrivateFieldGet(this, _bus).emit(EVENTS.WINDOW_CLICK, null, ev);\r\n    }\r\n}\r\n_bus = new WeakMap(), _boundClick = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _callback, _keys, _inProgress, _singleEmit, _isAttached, _onKeyDownBound, _onKeyUpBound;\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiKeyPressListener {\r\n    constructor(singleEmit, keys) {\r\n        _callback.set(this, void 0);\r\n        _keys.set(this, void 0);\r\n        _inProgress.set(this, void 0);\r\n        _singleEmit.set(this, void 0);\r\n        _isAttached.set(this, void 0);\r\n        _onKeyDownBound.set(this, void 0);\r\n        _onKeyUpBound.set(this, void 0);\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n        __classPrivateFieldSet(this, _singleEmit, true);\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n        __classPrivateFieldSet(this, _callback, undefined);\r\n        __classPrivateFieldSet(this, _keys, keys !== null && keys !== void 0 ? keys : []);\r\n        __classPrivateFieldSet(this, _onKeyDownBound, this.onKeyDown.bind(this));\r\n        __classPrivateFieldSet(this, _onKeyUpBound, this.onKeyUp.bind(this));\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    isInProgress() {\r\n        return __classPrivateFieldGet(this, _inProgress);\r\n    }\r\n    attach() {\r\n        document.addEventListener('keydown', __classPrivateFieldGet(this, _onKeyDownBound));\r\n        if (__classPrivateFieldGet(this, _singleEmit)) {\r\n            document.addEventListener('keyup', __classPrivateFieldGet(this, _onKeyUpBound));\r\n        }\r\n        __classPrivateFieldSet(this, _isAttached, true);\r\n    }\r\n    detach() {\r\n        document.removeEventListener('keydown', __classPrivateFieldGet(this, _onKeyDownBound));\r\n        if (__classPrivateFieldGet(this, _singleEmit)) {\r\n            document.addEventListener('keyup', __classPrivateFieldGet(this, _onKeyUpBound));\r\n        }\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n    }\r\n    isAttached() {\r\n        return __classPrivateFieldGet(this, _isAttached);\r\n    }\r\n    onKeyDown(ev) {\r\n        if (__classPrivateFieldGet(this, _inProgress)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _inProgress, true);\r\n        try {\r\n            if ((!is(__classPrivateFieldGet(this, _keys)) || __classPrivateFieldGet(this, _keys).includes(ev.code)) && __classPrivateFieldGet(this, _callback)) {\r\n                __classPrivateFieldGet(this, _callback).call(this, ev);\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n        }\r\n        finally {\r\n            if (!__classPrivateFieldGet(this, _singleEmit))\r\n                __classPrivateFieldSet(this, _inProgress, false);\r\n        }\r\n    }\r\n    onKeyUp(ev) {\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n    }\r\n}\r\n_callback = new WeakMap(), _keys = new WeakMap(), _inProgress = new WeakMap(), _singleEmit = new WeakMap(), _isAttached = new WeakMap(), _onKeyDownBound = new WeakMap(), _onKeyUpBound = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _listener, _bus;\r\nimport { CuiKeyPressListener } from \"cui-light-core/dist/esm/listeners/keys\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nexport class CuiKeysObserver {\r\n    constructor(bus) {\r\n        _listener.set(this, void 0);\r\n        _bus.set(this, void 0);\r\n        __classPrivateFieldSet(this, _bus, bus);\r\n        __classPrivateFieldSet(this, _listener, new CuiKeyPressListener(true));\r\n        __classPrivateFieldGet(this, _listener).setCallback(this.onKeyDown.bind(this));\r\n    }\r\n    connect() {\r\n        __classPrivateFieldGet(this, _listener).attach();\r\n    }\r\n    disconnect() {\r\n        __classPrivateFieldGet(this, _listener).detach();\r\n    }\r\n    onKeyDown(ev) {\r\n        __classPrivateFieldGet(this, _bus).emit(EVENTS.KEYDOWN, null, {\r\n            timestamp: Date.now(),\r\n            event: ev\r\n        });\r\n    }\r\n}\r\n_listener = new WeakMap(), _bus = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _keysObserver;\r\nimport { CuiKeysObserver } from \"./observer\";\r\nexport class CuiKeysObserverPlugin {\r\n    constructor(keySetup) {\r\n        this.name = 'keys-observer';\r\n        _keysObserver.set(this, void 0);\r\n        this.description = \"CuiKeysObserverPlugin\";\r\n        this.setup = keySetup;\r\n        __classPrivateFieldSet(this, _keysObserver, undefined);\r\n    }\r\n    init(utils) {\r\n        __classPrivateFieldSet(this, _keysObserver, new CuiKeysObserver(utils.bus));\r\n        __classPrivateFieldGet(this, _keysObserver).connect();\r\n    }\r\n    destroy() {\r\n        if (__classPrivateFieldGet(this, _keysObserver))\r\n            __classPrivateFieldGet(this, _keysObserver).disconnect();\r\n    }\r\n}\r\n_keysObserver = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _mediaQuery, _callback, _isInitialized, _inProgress, _onEventBound;\r\nexport class CuiMediaQueryListener {\r\n    constructor(mediaQuery) {\r\n        _mediaQuery.set(this, void 0);\r\n        _callback.set(this, void 0);\r\n        _isInitialized.set(this, void 0);\r\n        _inProgress.set(this, void 0);\r\n        _onEventBound.set(this, void 0);\r\n        __classPrivateFieldSet(this, _mediaQuery, mediaQuery);\r\n        __classPrivateFieldSet(this, _isInitialized, false);\r\n        __classPrivateFieldSet(this, _callback, undefined);\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n        __classPrivateFieldSet(this, _onEventBound, this.event.bind(this));\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    isInProgress() {\r\n        return __classPrivateFieldGet(this, _inProgress);\r\n    }\r\n    attach() {\r\n        if (!window.matchMedia || __classPrivateFieldGet(this, _isInitialized) || !__classPrivateFieldGet(this, _mediaQuery)) {\r\n            return;\r\n        }\r\n        window.matchMedia(__classPrivateFieldGet(this, _mediaQuery))\r\n            .addEventListener('change', __classPrivateFieldGet(this, _onEventBound));\r\n        __classPrivateFieldSet(this, _isInitialized, true);\r\n    }\r\n    detach() {\r\n        if (__classPrivateFieldGet(this, _isInitialized)) {\r\n            window.matchMedia(__classPrivateFieldGet(this, _mediaQuery)).removeEventListener('change', __classPrivateFieldGet(this, _onEventBound));\r\n            __classPrivateFieldSet(this, _isInitialized, false);\r\n        }\r\n    }\r\n    isAttached() {\r\n        return __classPrivateFieldGet(this, _isInitialized);\r\n    }\r\n    event(ev) {\r\n        if (__classPrivateFieldGet(this, _inProgress) || !__classPrivateFieldGet(this, _callback)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _inProgress, true);\r\n        try {\r\n            __classPrivateFieldGet(this, _callback).call(this, ev);\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n        }\r\n        finally {\r\n            __classPrivateFieldSet(this, _inProgress, false);\r\n        }\r\n    }\r\n}\r\n_mediaQuery = new WeakMap(), _callback = new WeakMap(), _isInitialized = new WeakMap(), _inProgress = new WeakMap(), _onEventBound = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _listener, _utils;\r\nimport { getSystemLightMode } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiMediaQueryListener } from \"cui-light-core/dist/esm/listeners/media\";\r\nexport class CuiAutoLightModePlugin {\r\n    constructor(autoLightInit) {\r\n        this.description = 'Dark vs Light mode auto switcher';\r\n        this.name = 'auto-light';\r\n        _listener.set(this, void 0);\r\n        _utils.set(this, void 0);\r\n        this.description = \"CuiAutoLightModePlugin\";\r\n        this.setup = autoLightInit;\r\n        __classPrivateFieldSet(this, _utils, undefined);\r\n        __classPrivateFieldSet(this, _listener, undefined);\r\n    }\r\n    init(utils) {\r\n        __classPrivateFieldSet(this, _utils, utils);\r\n        if (this.setup.autoLight && getSystemLightMode() === 'dark') {\r\n            __classPrivateFieldGet(this, _utils).setLightMode('dark');\r\n        }\r\n        __classPrivateFieldSet(this, _listener, new CuiMediaQueryListener('(prefers-color-scheme: dark)'));\r\n        __classPrivateFieldGet(this, _listener).setCallback(this.onChange.bind(this));\r\n        __classPrivateFieldGet(this, _listener).attach();\r\n    }\r\n    destroy() {\r\n        if (__classPrivateFieldGet(this, _listener))\r\n            __classPrivateFieldGet(this, _listener).detach();\r\n    }\r\n    onChange(ev) {\r\n        var _a;\r\n        if (!__classPrivateFieldGet(this, _utils)) {\r\n            return;\r\n        }\r\n        let autoLightSetup = __classPrivateFieldGet(this, _utils).setup.plugins[this.description];\r\n        let autoLight = (_a = autoLightSetup === null || autoLightSetup === void 0 ? void 0 : autoLightSetup.autoLight) !== null && _a !== void 0 ? _a : false;\r\n        if (autoLight) {\r\n            if (ev.matches) {\r\n                __classPrivateFieldGet(this, _utils).setLightMode('dark');\r\n            }\r\n            else {\r\n                __classPrivateFieldGet(this, _utils).setLightMode('light');\r\n            }\r\n        }\r\n    }\r\n}\r\n_listener = new WeakMap(), _utils = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _listener, _utils;\r\nimport { getSystemPrintMode } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiMediaQueryListener } from \"cui-light-core/dist/esm/listeners/media\";\r\nexport class CuiAutoPrintModePlugin {\r\n    constructor(autoPrintInit) {\r\n        this.description = 'Auto print mode';\r\n        this.name = 'auto-print';\r\n        _listener.set(this, void 0);\r\n        _utils.set(this, void 0);\r\n        this.description = \"CuiAutoPrintModePlugin\";\r\n        this.setup = autoPrintInit;\r\n        __classPrivateFieldSet(this, _listener, undefined);\r\n        __classPrivateFieldSet(this, _utils, undefined);\r\n    }\r\n    init(utils) {\r\n        __classPrivateFieldSet(this, _utils, utils);\r\n        if (this.setup.autoPrint && getSystemPrintMode()) {\r\n            __classPrivateFieldGet(this, _utils).setPrintMode(true);\r\n        }\r\n        __classPrivateFieldSet(this, _listener, new CuiMediaQueryListener('print'));\r\n        __classPrivateFieldGet(this, _listener).setCallback(this.onChange.bind(this));\r\n        __classPrivateFieldGet(this, _listener).attach();\r\n    }\r\n    destroy() {\r\n        if (__classPrivateFieldGet(this, _listener))\r\n            __classPrivateFieldGet(this, _listener).detach();\r\n    }\r\n    onChange(ev) {\r\n        var _a, _b;\r\n        if (!__classPrivateFieldGet(this, _utils)) {\r\n            return;\r\n        }\r\n        this.setup = __classPrivateFieldGet(this, _utils).setup.plugins[this.description];\r\n        let autoPrint = (_b = (_a = this.setup) === null || _a === void 0 ? void 0 : _a.autoPrint) !== null && _b !== void 0 ? _b : false;\r\n        if (autoPrint) {\r\n            if (ev.matches) {\r\n                __classPrivateFieldGet(this, _utils).setPrintMode(true);\r\n            }\r\n            else {\r\n                __classPrivateFieldGet(this, _utils).setPrintMode(false);\r\n            }\r\n        }\r\n    }\r\n}\r\n_listener = new WeakMap(), _utils = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _red, _green, _blue, _alpha, _colorStr, _colorStr_1;\r\nimport { getRangeValue, is, isInRange, } from \"../utils/functions\";\r\nimport { CuiColorError } from \"./errors\";\r\nexport class CuiColor {\r\n    constructor(red, green, blue, alpha) {\r\n        _red.set(this, void 0);\r\n        _green.set(this, void 0);\r\n        _blue.set(this, void 0);\r\n        _alpha.set(this, void 0);\r\n        __classPrivateFieldSet(this, _red, 0);\r\n        __classPrivateFieldSet(this, _blue, 0);\r\n        __classPrivateFieldSet(this, _green, 0);\r\n        __classPrivateFieldSet(this, _alpha, 0);\r\n        this.set(red, green, blue, alpha);\r\n    }\r\n    static create(colorStr) {\r\n        if (!is(colorStr)) {\r\n            throw new CuiColorError(`Given color value is not in a valid format`);\r\n        }\r\n        let parser;\r\n        if (colorStr.startsWith(\"#\")) {\r\n            parser = new HexColorParser(colorStr);\r\n        }\r\n        else if (colorStr.startsWith(\"rgb\")) {\r\n            parser = new RgbColorParser(colorStr);\r\n        }\r\n        else {\r\n            throw new CuiColorError(\"Unknown color string format\");\r\n        }\r\n        let res = parser.parse();\r\n        if (!res) {\r\n            throw new CuiColorError(\"Color was not parsed\");\r\n        }\r\n        return res;\r\n    }\r\n    set(red, green, blue, alpha) {\r\n        __classPrivateFieldSet(this, _alpha, getRangeValue(alpha !== null && alpha !== void 0 ? alpha : 1, 0, 1));\r\n        __classPrivateFieldSet(this, _blue, getRangeValue(blue, 0, 255));\r\n        __classPrivateFieldSet(this, _red, getRangeValue(red, 0, 255));\r\n        __classPrivateFieldSet(this, _green, getRangeValue(green, 0, 255));\r\n    }\r\n    setRed(red) {\r\n        __classPrivateFieldSet(this, _red, getRangeValue(red, 0, 255));\r\n    }\r\n    setGreen(green) {\r\n        __classPrivateFieldSet(this, _green, getRangeValue(green, 0, 255));\r\n    }\r\n    setBlue(blue) {\r\n        __classPrivateFieldSet(this, _blue, getRangeValue(blue, 0, 255));\r\n    }\r\n    opacity(val) {\r\n        __classPrivateFieldSet(this, _alpha, getRangeValue(val, 0, 1));\r\n        return this;\r\n    }\r\n    lighten(amount) {\r\n        this.shade(amount);\r\n        return this;\r\n    }\r\n    darken(amount) {\r\n        this.shade(-amount);\r\n        return this;\r\n    }\r\n    invert() {\r\n        __classPrivateFieldSet(this, _blue, 255 - __classPrivateFieldGet(this, _blue));\r\n        __classPrivateFieldSet(this, _red, 255 - __classPrivateFieldGet(this, _red));\r\n        __classPrivateFieldSet(this, _green, 255 - __classPrivateFieldGet(this, _green));\r\n        return this;\r\n    }\r\n    getColorValue(type) {\r\n        const t = type ? type.toLowerCase() : '#';\r\n        switch (type) {\r\n            case 'red':\r\n                return __classPrivateFieldGet(this, _red);\r\n            case 'green':\r\n                return __classPrivateFieldGet(this, _green);\r\n            case 'blue':\r\n                return __classPrivateFieldGet(this, _blue);\r\n            case 'alpha':\r\n                return __classPrivateFieldGet(this, _alpha);\r\n        }\r\n        return -1;\r\n    }\r\n    toCssString() {\r\n        return `rgba(${__classPrivateFieldGet(this, _red)}, ${__classPrivateFieldGet(this, _green)}, ${__classPrivateFieldGet(this, _blue)}, ${__classPrivateFieldGet(this, _alpha)})`;\r\n    }\r\n    shade(percent, self = true) {\r\n        __classPrivateFieldSet(this, _red, this.shadeSingle(__classPrivateFieldGet(this, _red), percent, self));\r\n        __classPrivateFieldSet(this, _green, this.shadeSingle(__classPrivateFieldGet(this, _green), percent, self));\r\n        __classPrivateFieldSet(this, _blue, this.shadeSingle(__classPrivateFieldGet(this, _blue), percent, self));\r\n    }\r\n    shadeSingle(val, percent, self = true) {\r\n        let rel = self ? val : 255;\r\n        let prop = (rel * percent) / 100;\r\n        let newVal = val + Math.round(prop);\r\n        return getRangeValue(newVal, 0, 255);\r\n    }\r\n    clone() {\r\n        return new CuiColor(__classPrivateFieldGet(this, _red), __classPrivateFieldGet(this, _green), __classPrivateFieldGet(this, _blue), __classPrivateFieldGet(this, _alpha));\r\n    }\r\n}\r\n_red = new WeakMap(), _green = new WeakMap(), _blue = new WeakMap(), _alpha = new WeakMap();\r\nexport class HexColorParser {\r\n    constructor(colorStr) {\r\n        _colorStr.set(this, void 0);\r\n        __classPrivateFieldSet(this, _colorStr, colorStr);\r\n    }\r\n    trim() {\r\n        __classPrivateFieldSet(this, _colorStr, __classPrivateFieldGet(this, _colorStr) ? __classPrivateFieldGet(this, _colorStr).trim() : \"\");\r\n        return;\r\n    }\r\n    isValid() {\r\n        return is(__classPrivateFieldGet(this, _colorStr)) && __classPrivateFieldGet(this, _colorStr).startsWith(\"#\");\r\n    }\r\n    parse() {\r\n        let red = 0;\r\n        let blue = 0;\r\n        let green = 0;\r\n        let alpha = 1;\r\n        let length = __classPrivateFieldGet(this, _colorStr).length;\r\n        if (__classPrivateFieldGet(this, _colorStr).length === 4) {\r\n            red = parseInt(__classPrivateFieldGet(this, _colorStr)[1] + __classPrivateFieldGet(this, _colorStr)[1], 16);\r\n            green = parseInt(__classPrivateFieldGet(this, _colorStr)[2] + __classPrivateFieldGet(this, _colorStr)[2], 16);\r\n            blue = parseInt(__classPrivateFieldGet(this, _colorStr)[3] + __classPrivateFieldGet(this, _colorStr)[3], 16);\r\n        }\r\n        else {\r\n            red = parseInt(__classPrivateFieldGet(this, _colorStr)[1] + __classPrivateFieldGet(this, _colorStr)[2], 16);\r\n            green = parseInt(__classPrivateFieldGet(this, _colorStr)[3] + __classPrivateFieldGet(this, _colorStr)[4], 16);\r\n            blue = parseInt(__classPrivateFieldGet(this, _colorStr)[5] + __classPrivateFieldGet(this, _colorStr)[6], 16);\r\n            if (length > 7) {\r\n                let alphaHex = parseInt(__classPrivateFieldGet(this, _colorStr)[7] + __classPrivateFieldGet(this, _colorStr)[8], 16);\r\n                alpha = parseFloat((alphaHex / 255).toFixed(2));\r\n            }\r\n        }\r\n        return new CuiColor(red, green, blue, alpha);\r\n    }\r\n}\r\n_colorStr = new WeakMap();\r\nexport class RgbColorParser {\r\n    constructor(colorStr) {\r\n        _colorStr_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _colorStr_1, colorStr);\r\n    }\r\n    trim() {\r\n        __classPrivateFieldSet(this, _colorStr_1, is(__classPrivateFieldGet(this, _colorStr_1)) ? __classPrivateFieldGet(this, _colorStr_1).trim() : \"\");\r\n    }\r\n    isValid() {\r\n        return is(__classPrivateFieldGet(this, _colorStr_1)) && __classPrivateFieldGet(this, _colorStr_1).startsWith(\"rgb\");\r\n    }\r\n    parse() {\r\n        let len = __classPrivateFieldGet(this, _colorStr_1).length;\r\n        let str = __classPrivateFieldGet(this, _colorStr_1).startsWith(\"rgba\") ? __classPrivateFieldGet(this, _colorStr_1).substring(5, len - 1) : __classPrivateFieldGet(this, _colorStr_1).substring(4, len - 1);\r\n        let split = str.split(\",\");\r\n        if (!isInRange(split.length, 3, 4)) {\r\n            return undefined;\r\n        }\r\n        let red = parseInt(split[0]);\r\n        let green = parseInt(split[1]);\r\n        let blue = parseInt(split[2]);\r\n        let alpha = split.length === 4 ? parseFloat(split[3]) : 1;\r\n        return new CuiColor(red, green, blue, alpha);\r\n    }\r\n}\r\n_colorStr_1 = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _set, _setter, _setter_1, _set_1;\r\nimport { CSS_VARIABLES } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst baseColorSets = {\r\n    \"light\": {\r\n        background: CSS_VARIABLES.colorLightBackground,\r\n        base: CSS_VARIABLES.colorLightBase,\r\n        active: CSS_VARIABLES.colorLightActive,\r\n        muted: CSS_VARIABLES.colorLightMuted,\r\n    },\r\n    \"dark\": {\r\n        background: CSS_VARIABLES.colorDarkBackground,\r\n        base: CSS_VARIABLES.colorDarkBase,\r\n        active: CSS_VARIABLES.colorDarkActive,\r\n        muted: CSS_VARIABLES.colorDarkMuted,\r\n    }\r\n};\r\nconst themeColors = {\r\n    'accent': {\r\n        base: CSS_VARIABLES.colorAccent,\r\n        muted: CSS_VARIABLES.colorAccentMuted,\r\n        active: CSS_VARIABLES.colorAccentActive,\r\n        shade: CSS_VARIABLES.colorAccentShade,\r\n        shadeDark: CSS_VARIABLES.colorAccentShadeDark\r\n    },\r\n    'secondary': {\r\n        base: CSS_VARIABLES.colorSecondary,\r\n        muted: CSS_VARIABLES.colorSecondaryMuted,\r\n        active: CSS_VARIABLES.colorSecondaryActive,\r\n        shade: CSS_VARIABLES.colorSecondaryShade,\r\n        shadeDark: CSS_VARIABLES.colorSecondaryShadeDark\r\n    },\r\n    'error': {\r\n        base: CSS_VARIABLES.colorError,\r\n        muted: CSS_VARIABLES.colorErrorMuted,\r\n        active: CSS_VARIABLES.colorErrorActive,\r\n        shade: CSS_VARIABLES.colorErrorShade,\r\n        shadeDark: CSS_VARIABLES.colorErrorShadeDark\r\n    },\r\n    'warning': {\r\n        base: CSS_VARIABLES.colorWarning,\r\n        muted: CSS_VARIABLES.colorWarningMuted,\r\n        active: CSS_VARIABLES.colorWarningActive,\r\n        shade: CSS_VARIABLES.colorWarningShade,\r\n        shadeDark: CSS_VARIABLES.colorWarningShadeDark\r\n    },\r\n    'success': {\r\n        base: CSS_VARIABLES.colorSuccess,\r\n        muted: CSS_VARIABLES.colorSuccessMuted,\r\n        active: CSS_VARIABLES.colorSuccessActive,\r\n        shade: CSS_VARIABLES.colorSuccessShade,\r\n        shadeDark: CSS_VARIABLES.colorSuccessShadeDark\r\n    }\r\n};\r\nexport class CuiBaseColorsSetter {\r\n    constructor(colorSet, setter) {\r\n        _set.set(this, void 0);\r\n        _setter.set(this, void 0);\r\n        __classPrivateFieldSet(this, _set, baseColorSets[colorSet]);\r\n        __classPrivateFieldSet(this, _setter, setter);\r\n    }\r\n    setBackgroundColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set).background, color);\r\n    }\r\n    setBaseColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set).base, color);\r\n    }\r\n    setActiveColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set).active, color);\r\n    }\r\n    setMutedColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set).muted, color);\r\n    }\r\n    setBaseColors(colors) {\r\n        if (!__classPrivateFieldGet(this, _set)) {\r\n            return;\r\n        }\r\n        let set = {};\r\n        set[__classPrivateFieldGet(this, _set).background] = colors.background ? colors.background.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set).active] = colors.active ? colors.active.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set).muted] = colors.muted ? colors.muted.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set).base] = colors.base ? colors.base.toCssString() : \"\";\r\n        __classPrivateFieldGet(this, _setter).setProperties(set);\r\n    }\r\n    setColor(color, value) {\r\n        __classPrivateFieldGet(this, _setter).setProperty(color, value.toCssString());\r\n    }\r\n}\r\n_set = new WeakMap(), _setter = new WeakMap();\r\nexport class CuiThemeColorsSetter {\r\n    constructor(set, setter) {\r\n        _setter_1.set(this, void 0);\r\n        _set_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _setter_1, setter);\r\n        __classPrivateFieldSet(this, _set_1, themeColors[set]);\r\n    }\r\n    setBaseColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set_1).base, color);\r\n    }\r\n    setMutedColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set_1).muted, color);\r\n    }\r\n    setActiveColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set_1).active, color);\r\n    }\r\n    setShadeColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set_1).shade, color);\r\n    }\r\n    setShadeDarkColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set_1).shadeDark, color);\r\n    }\r\n    setColors(colors) {\r\n        if (!__classPrivateFieldGet(this, _set_1)) {\r\n            return;\r\n        }\r\n        let set = {};\r\n        set[__classPrivateFieldGet(this, _set_1).shade] = colors.shade ? colors.shade.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set_1).shadeDark] = colors.shadeDark ? colors.shadeDark.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set_1).active] = colors.active ? colors.active.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set_1).muted] = colors.muted ? colors.muted.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set_1).base] = colors.base ? colors.base.toCssString() : \"\";\r\n        __classPrivateFieldGet(this, _setter_1).setProperties(set);\r\n    }\r\n    setAutoColors(base) {\r\n        let set = {};\r\n        set[__classPrivateFieldGet(this, _set_1).base] = base.toCssString();\r\n        set[__classPrivateFieldGet(this, _set_1).shade] = base.lighten(30).toCssString();\r\n        set[__classPrivateFieldGet(this, _set_1).shadeDark] = base.darken(30).toCssString();\r\n        set[__classPrivateFieldGet(this, _set_1).active] = base.darken(10).toCssString();\r\n        set[__classPrivateFieldGet(this, _set_1).muted] = base.lighten(10).toCssString();\r\n        __classPrivateFieldGet(this, _setter_1).setProperties(set);\r\n    }\r\n    setColor(color, value) {\r\n        __classPrivateFieldGet(this, _setter_1).setProperty(color, value.toCssString());\r\n    }\r\n}\r\n_setter_1 = new WeakMap(), _set_1 = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _utils;\r\nimport { are, is } from \"cui-light-core/dist/esm/utils/functions\";\r\nexport class PropertySetter {\r\n    constructor(utils) {\r\n        _utils.set(this, void 0);\r\n        __classPrivateFieldSet(this, _utils, utils);\r\n    }\r\n    setProperty(property, value) {\r\n        if (!are(property, value)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _utils).interactions.mutate(() => {\r\n            __classPrivateFieldGet(this, _utils).setProperty(property, value);\r\n        }, null);\r\n    }\r\n    setProperties(set) {\r\n        if (!is(set)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _utils).interactions.mutate(() => {\r\n            for (let property in set) {\r\n                if (is(set[property]))\r\n                    __classPrivateFieldGet(this, _utils).setProperty(property, set[property]);\r\n            }\r\n        }, null);\r\n    }\r\n}\r\n_utils = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _setter;\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CSS_VARIABLES } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { CuiBaseColorsSetter, CuiThemeColorsSetter } from \"./colors\";\r\nimport { PropertySetter } from \"./setter\";\r\nexport class CuiPropertiesHandler {\r\n    constructor(utils) {\r\n        _setter.set(this, void 0);\r\n        __classPrivateFieldSet(this, _setter, new PropertySetter(utils));\r\n    }\r\n    /**\r\n     * Sets main font size\r\n     * @param {number} value numeric value\r\n     * @param {string} unit optional - size unit, px if not provided\r\n     */\r\n    setBaseFontSize(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.fontSize, value, unit);\r\n    }\r\n    /**\r\n     * Sets base animation time\r\n     * @param {number} value - time value\r\n     * @param {string} unit  - optional - ms is passed when no provided\r\n     */\r\n    setAnimationTime(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.animationTime, value, unit !== null && unit !== void 0 ? unit : 'ms');\r\n    }\r\n    /**\r\n    * Sets long animation time\r\n    * @param {number} value - time value\r\n    * @param {string} unit  - optional - ms is passed when no provided\r\n    */\r\n    setAnimationTimeLong(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.setAnimationTimeLong, value, unit !== null && unit !== void 0 ? unit : 'ms');\r\n    }\r\n    /**\r\n    * Sets short animation time\r\n    * @param {number} value - time value\r\n    * @param {string} unit  - optional - ms is passed when no provided\r\n    */\r\n    setAnimationTimeShort(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.setAnimationTimeShort, value, unit !== null && unit !== void 0 ? unit : 'ms');\r\n    }\r\n    /**\r\n    * Sets main line size\r\n    * @param {number} value numeric value\r\n    * @param {string} unit optional - size unit, px if not provided\r\n    */\r\n    setBaseLineHeight(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.lineHeight, value, unit);\r\n    }\r\n    /**\r\n     * Sets base margin value\r\n     * @param {number} value - margin value\r\n     * @param {string} unit - optional - margin unit (px default)\r\n     */\r\n    setBaseMargin(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.margin, value, unit);\r\n    }\r\n    /**\r\n    * Sets base padding value\r\n    * @param {number} value - padding value\r\n    * @param {string} unit - optional - padding unit (px default)\r\n    */\r\n    setBasePadding(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.padding, value, unit);\r\n    }\r\n    /**\r\n    * Sets base border radius\r\n    * @param {number} value - border value\r\n    * @param {string} unit - optional - border unit (px default)\r\n    */\r\n    setBaseBorderRadius(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.borderRadius, value, unit);\r\n    }\r\n    /**\r\n   * Sets component space\r\n   * @param {number} value - space value\r\n   * @param {string} unit - optional - space unit (px default)\r\n   */\r\n    setComponentSpace(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.componentSpace, value, unit);\r\n    }\r\n    /**\r\n     * Sets new accordion chevron icon\r\n     * @param value A SVG formatted to be replaced default value\r\n     */\r\n    setAccordionIcon(value) {\r\n        if (!is(value)) {\r\n            return;\r\n        }\r\n        this.setCSSVariable(CSS_VARIABLES.accordionIcon, value);\r\n    }\r\n    /**\r\n    * Sets a scrollbar width\r\n    * @param value A SVG formatted to be replaced default value\r\n    */\r\n    setScrollbarWidth(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.scrollbarWidth, value, unit);\r\n    }\r\n    /**\r\n     * Sets app viewport light background color\r\n     * @param color color to be set\r\n     */\r\n    setAppBackgroundColor(color) {\r\n        if (!is(color)) {\r\n            return;\r\n        }\r\n        this.setCSSVariable(CSS_VARIABLES.colorLightAppBackground, color.toCssString());\r\n    }\r\n    /**\r\n    * Sets app viewport dark background color\r\n    * @param color color to be set\r\n    */\r\n    setDarkAppBackgroundColor(color) {\r\n        if (!is(color)) {\r\n            return;\r\n        }\r\n        this.setCSSVariable(CSS_VARIABLES.colorDarkAppBackground, color.toCssString());\r\n    }\r\n    getBaseColorsSetter() {\r\n        return new CuiBaseColorsSetter(\"light\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    getDarkBaseColorsSetter() {\r\n        return new CuiBaseColorsSetter(\"dark\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    getAccentThemeColorsSetter() {\r\n        return new CuiThemeColorsSetter(\"accent\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    getSecondaryThemeColorsSetter() {\r\n        return new CuiThemeColorsSetter(\"secondary\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    getErrorThemeColorsSetter() {\r\n        return new CuiThemeColorsSetter(\"error\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    getWarningThemeColorsSetter() {\r\n        return new CuiThemeColorsSetter(\"warning\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    getSuccessThemeColorsSetter() {\r\n        return new CuiThemeColorsSetter(\"success\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    /**\r\n     * Sets property in interactive way\r\n     * @param {string} name property name - value of {prefix} is replaced by current prefix\r\n     * @param {string} value - property value\r\n     */\r\n    setCSSVariable(name, value) {\r\n        __classPrivateFieldGet(this, _setter).setProperty(name, value);\r\n    }\r\n    /**\r\n     * Sets unit type CSS variable property\r\n     * @param name Variable name\r\n     * @param value numeric value\r\n     * @param unit unit - optional - px is default value\r\n     */\r\n    setBaseUnitValue(name, value, unit) {\r\n        if (!is(value)) {\r\n            return;\r\n        }\r\n        let strVal = `${value}${unit !== null && unit !== void 0 ? unit : \"px\"}`;\r\n        this.setCSSVariable(name, strVal);\r\n    }\r\n}\r\n_setter = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _log;\r\nimport { CuiColor } from \"cui-light-core/dist/esm/models/colors\";\r\nimport { CuiLoggerFactory } from \"cui-light-core/dist/esm/factories/logger\";\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiPropertiesHandler } from \"./handler\";\r\nexport class CuiCSSVariablesPlugin {\r\n    constructor(keySetup) {\r\n        this.name = 'css-variables-plugin';\r\n        _log.set(this, void 0);\r\n        this.description = \"CuiCSSVariablesPlugin\";\r\n        this.setup = keySetup;\r\n        __classPrivateFieldSet(this, _log, CuiLoggerFactory.get(\"CuiCSSVariablesPlugin\"));\r\n        this.handler = undefined;\r\n    }\r\n    init(utils) {\r\n        this.handler = new CuiPropertiesHandler(utils);\r\n        utils.bus.on(\"csschange\", this.onCssChange.bind(this));\r\n    }\r\n    destroy() {\r\n    }\r\n    onCssChange(event) {\r\n        if (!this.handler) {\r\n            return;\r\n        }\r\n        let setter = null;\r\n        let accentSetter = null;\r\n        switch (event.method) {\r\n            case \"baseFontSize\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setBaseFontSize(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"baseLineHeight\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setBaseLineHeight(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"animationTime\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setAnimationTime(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"animationTimeLong\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setAnimationTimeLong(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"animationTimeShort\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setAnimationTimeShort(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"margin\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setBaseMargin(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"padding\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setBasePadding(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"borderRadius\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setBaseBorderRadius(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"componentSpace\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setComponentSpace(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"scrollbarWidth\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setScrollbarWidth(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"accordionIcon\":\r\n                if (!is(event.arg))\r\n                    return;\r\n                this.handler.setAccordionIcon(event.arg);\r\n                break;\r\n            case \"appLightBackground\":\r\n                if (!is(event.arg))\r\n                    return;\r\n                this.handler.setAppBackgroundColor(CuiColor.create(event.arg));\r\n                break;\r\n            case \"appDarkBackground\":\r\n                if (!is(event.arg))\r\n                    return;\r\n                this.handler.setDarkAppBackgroundColor(CuiColor.create(event.arg));\r\n                break;\r\n            case \"appDarkBackground\":\r\n                if (!is(event.arg))\r\n                    return;\r\n                this.handler.setDarkAppBackgroundColor(CuiColor.create(event.arg));\r\n                break;\r\n            case \"mainColorBackground\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                setter = this.getBaseColorSetter(event.arg.palette);\r\n                if (setter)\r\n                    setter.setBackgroundColor(CuiColor.create(event.arg.color));\r\n                break;\r\n            case \"mainColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                setter = this.getBaseColorSetter(event.arg.palette);\r\n                if (setter)\r\n                    setter.setBaseColor(CuiColor.create(event.arg.color));\r\n                break;\r\n            case \"mainColorMuted\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                setter = this.getBaseColorSetter(event.arg.palette);\r\n                if (setter)\r\n                    setter.setMutedColor(CuiColor.create(event.arg.color));\r\n                break;\r\n            case \"mainColorActive\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                setter = this.getBaseColorSetter(event.arg.palette);\r\n                if (setter)\r\n                    setter.setActiveColor(CuiColor.create(event.arg.color));\r\n                break;\r\n            case \"themeAutoColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setAutoColors(CuiColor.create(event.arg.color));\r\n            case \"themeBaseColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setAutoColors(CuiColor.create(event.arg.color));\r\n            case \"themeMutedColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setMutedColor(CuiColor.create(event.arg.color));\r\n            case \"themeActiveColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setActiveColor(CuiColor.create(event.arg.color));\r\n            case \"themeShadeColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setShadeColor(CuiColor.create(event.arg.color));\r\n            case \"themeShadeDarkColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setShadeDarkColor(CuiColor.create(event.arg.color));\r\n            default:\r\n                __classPrivateFieldGet(this, _log).warning(\"Unknown event method\", \"onCssChange\");\r\n        }\r\n    }\r\n    isArgNumber(arg) {\r\n        return is(arg) && is(arg.value);\r\n    }\r\n    isArgColor(arg) {\r\n        return is(arg) && is(arg.palette) && is(arg.color);\r\n    }\r\n    getBaseColorSetter(pallete) {\r\n        if (!this.handler) {\r\n            return undefined;\r\n        }\r\n        let prerp = pallete.trim().toLowerCase();\r\n        switch (prerp) {\r\n            case \"light\":\r\n                return this.handler.getBaseColorsSetter();\r\n            case \"dark\":\r\n                return this.handler.getDarkBaseColorsSetter();\r\n        }\r\n    }\r\n    getAccentColorSetter(pallete) {\r\n        if (!this.handler) {\r\n            return undefined;\r\n        }\r\n        let prerp = pallete.trim().toLowerCase();\r\n        switch (prerp) {\r\n            case \"accent\":\r\n                return this.handler.getAccentThemeColorsSetter();\r\n            case \"secondary\":\r\n                return this.handler.getSecondaryThemeColorsSetter();\r\n            case \"error\":\r\n                return this.handler.getErrorThemeColorsSetter();\r\n            case \"warning\":\r\n                return this.handler.getWarningThemeColorsSetter();\r\n            case \"success\":\r\n                return this.handler.getSuccessThemeColorsSetter();\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n}\r\n_log = new WeakMap();\r\n","import { CuiWindowClickPlugin } from \"./click/click\";\r\nimport { CuiKeysObserverPlugin } from \"./keys/keys\";\r\nimport { CuiAutoLightModePlugin } from \"./light/light\";\r\nimport { CuiAutoPrintModePlugin } from \"./print/print\";\r\nimport { CuiCSSVariablesPlugin } from \"./properties/properties\";\r\nexport function GetPlugins(init) {\r\n    let light = init ? init.autoLight : true;\r\n    let print = init ? init.autoPrint : true;\r\n    return [\r\n        new CuiAutoLightModePlugin({ autoLight: light }),\r\n        new CuiAutoPrintModePlugin({ autoPrint: print }),\r\n        new CuiKeysObserverPlugin({}),\r\n        new CuiWindowClickPlugin(),\r\n        new CuiCSSVariablesPlugin({})\r\n    ];\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _writes, _reads, _raf, _isScheduled, _limit, _reportCallback;\r\nexport class FastDom {\r\n    constructor() {\r\n        _writes.set(this, void 0);\r\n        _reads.set(this, void 0);\r\n        _raf.set(this, void 0);\r\n        _isScheduled.set(this, false);\r\n        _limit.set(this, void 0);\r\n        _reportCallback.set(this, void 0);\r\n        __classPrivateFieldSet(this, _raf, window.requestAnimationFrame.bind(window));\r\n        __classPrivateFieldSet(this, _writes, []);\r\n        __classPrivateFieldSet(this, _reads, []);\r\n        __classPrivateFieldSet(this, _limit, 5);\r\n        __classPrivateFieldSet(this, _reportCallback, undefined);\r\n    }\r\n    onError(callback) {\r\n        __classPrivateFieldSet(this, _reportCallback, callback);\r\n    }\r\n    mutate(callback, ctx, ...args) {\r\n        __classPrivateFieldGet(this, _reads).push(this.createTask(callback, ctx, ...args));\r\n        this.schedule();\r\n    }\r\n    fetch(callback, ctx, ...args) {\r\n        __classPrivateFieldGet(this, _writes).push(this.createTask(callback, ctx, ...args));\r\n        this.schedule();\r\n    }\r\n    createTask(callback, ctx, ...args) {\r\n        return ctx || args ? callback.bind(ctx, ...args) : callback;\r\n    }\r\n    run(tasks) {\r\n        let task = null;\r\n        while (task = tasks.shift()) {\r\n            task();\r\n        }\r\n    }\r\n    schedule(recursion) {\r\n        if (!__classPrivateFieldGet(this, _isScheduled)) {\r\n            __classPrivateFieldSet(this, _isScheduled, true);\r\n            if (recursion && recursion >= __classPrivateFieldGet(this, _limit)) {\r\n                throw new Error(\"Fast Dom limit reached\");\r\n            }\r\n            else {\r\n                __classPrivateFieldGet(this, _raf).call(this, this.flush.bind(this, recursion));\r\n            }\r\n        }\r\n    }\r\n    flush(recursion) {\r\n        let rec = recursion !== null && recursion !== void 0 ? recursion : 0;\r\n        let error = null;\r\n        let writes = __classPrivateFieldGet(this, _writes);\r\n        let reads = __classPrivateFieldGet(this, _reads);\r\n        try {\r\n            this.run(reads);\r\n            this.run(writes);\r\n        }\r\n        catch (e) {\r\n            if (__classPrivateFieldGet(this, _reportCallback)) {\r\n                __classPrivateFieldGet(this, _reportCallback).call(this, e);\r\n            }\r\n            else {\r\n                console.error(`An error has been captured in interactions: ${e.message}`);\r\n                //console.error(e)\r\n            }\r\n            error = e;\r\n        }\r\n        __classPrivateFieldSet(this, _isScheduled, false);\r\n        if (error || __classPrivateFieldGet(this, _writes).length || __classPrivateFieldGet(this, _reads).length) {\r\n            this.schedule(rec + 1);\r\n        }\r\n    }\r\n}\r\n_writes = new WeakMap(), _reads = new WeakMap(), _raf = new WeakMap(), _isScheduled = new WeakMap(), _limit = new WeakMap(), _reportCallback = new WeakMap();\r\nexport class SyncInteractions {\r\n    constructor() {\r\n        this.isRunning = false;\r\n        this.tasks = [];\r\n        this.raf = window.requestAnimationFrame.bind(window);\r\n    }\r\n    mutate(callback, ctx, ...args) {\r\n        this.tasks.push(this.createTask(callback, ctx, ...args));\r\n        this.schedule();\r\n    }\r\n    fetch(callback, ctx, ...args) {\r\n        this.tasks.push(this.createTask(callback, ctx, ...args));\r\n        this.schedule();\r\n    }\r\n    schedule() {\r\n        if (!this.isRunning) {\r\n            this.isRunning = true;\r\n            this.raf(this.flush.bind(this));\r\n        }\r\n    }\r\n    flush() {\r\n        let task = null;\r\n        while (task = this.tasks.shift()) {\r\n            try {\r\n                task();\r\n            }\r\n            catch (e) {\r\n            }\r\n        }\r\n        this.isRunning = false;\r\n    }\r\n    createTask(callback, ctx, ...args) {\r\n        return ctx || args ? callback.bind(ctx, ...args) : callback;\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _keys, _values;\r\nimport { ItemNotFoundError, ArgumentError } from \"../models/errors\";\r\nimport { is } from \"./functions\";\r\nexport class CuiDictionary {\r\n    constructor(init) {\r\n        _keys.set(this, void 0);\r\n        _values.set(this, void 0);\r\n        __classPrivateFieldSet(this, _keys, []);\r\n        __classPrivateFieldSet(this, _values, []);\r\n        if (init) {\r\n            init.forEach(x => {\r\n                if (!is(x.key)) {\r\n                    __classPrivateFieldSet(this, _keys, []);\r\n                    __classPrivateFieldSet(this, _values, []);\r\n                    throw new ArgumentError(\"Key is empty\");\r\n                }\r\n                this.add(x.key, x.value);\r\n            });\r\n        }\r\n    }\r\n    add(key, value) {\r\n        this.throwOnEmptyKey(key);\r\n        if (this.containsKey(key))\r\n            throw new Error(\"Key already exists\");\r\n        __classPrivateFieldGet(this, _keys).push(key);\r\n        __classPrivateFieldGet(this, _values).push(value);\r\n    }\r\n    remove(key) {\r\n        if (!is(key)) {\r\n            return;\r\n        }\r\n        let index = __classPrivateFieldGet(this, _keys).indexOf(key);\r\n        if (index >= 0) {\r\n            __classPrivateFieldGet(this, _keys).splice(index, 1);\r\n            __classPrivateFieldGet(this, _values).splice(index, 1);\r\n        }\r\n    }\r\n    get(key) {\r\n        this.throwOnEmptyKey(key);\r\n        let index = this.indexOf(key);\r\n        if (index < 0) {\r\n            return undefined;\r\n        }\r\n        return __classPrivateFieldGet(this, _values)[index];\r\n    }\r\n    containsKey(key) {\r\n        return is(key) && this.indexOf(key) >= 0;\r\n    }\r\n    keys() {\r\n        return __classPrivateFieldGet(this, _keys);\r\n    }\r\n    values() {\r\n        return __classPrivateFieldGet(this, _values);\r\n    }\r\n    indexOf(key) {\r\n        return is(key) ? __classPrivateFieldGet(this, _keys).indexOf(key) : -1;\r\n    }\r\n    update(key, value) {\r\n        this.throwOnEmptyKey(key);\r\n        let index = this.indexOf(key);\r\n        if (index < 0) {\r\n            throw new ItemNotFoundError(`Item with key [${key}] not found`);\r\n        }\r\n        __classPrivateFieldGet(this, _values)[index] = value;\r\n    }\r\n    clear() {\r\n        __classPrivateFieldSet(this, _values, []);\r\n        __classPrivateFieldSet(this, _keys, []);\r\n    }\r\n    throwOnEmptyKey(key) {\r\n        if (!is(key)) {\r\n            throw new ArgumentError(\"Key is empty\");\r\n        }\r\n    }\r\n}\r\n_keys = new WeakMap(), _values = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _cache, _maxSize;\r\nimport { CuiDictionary } from \"../utils/dictionary\";\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiCacheManager {\r\n    constructor(maxSize) {\r\n        _cache.set(this, void 0);\r\n        _maxSize.set(this, void 0);\r\n        __classPrivateFieldSet(this, _cache, new CuiDictionary());\r\n        __classPrivateFieldSet(this, _maxSize, maxSize !== null && maxSize !== void 0 ? maxSize : 500);\r\n    }\r\n    put(key, element) {\r\n        if (!is(key))\r\n            return;\r\n        if (this.has(key)) {\r\n            __classPrivateFieldGet(this, _cache).update(key, element);\r\n            return;\r\n        }\r\n        this.clean();\r\n        __classPrivateFieldGet(this, _cache).add(key, element);\r\n    }\r\n    get(key) {\r\n        if (!this.has(key))\r\n            return undefined;\r\n        let item = __classPrivateFieldGet(this, _cache).get(key);\r\n        if (item && item.refresh()) {\r\n            return item;\r\n        }\r\n        __classPrivateFieldGet(this, _cache).remove(key);\r\n        return undefined;\r\n    }\r\n    has(key) {\r\n        return is(key) ? __classPrivateFieldGet(this, _cache).containsKey(key) : false;\r\n    }\r\n    remove(key) {\r\n        if (!is(key))\r\n            return false;\r\n        if (this.has(key)) {\r\n            __classPrivateFieldGet(this, _cache).remove(key);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    clear() {\r\n        __classPrivateFieldGet(this, _cache).clear();\r\n    }\r\n    clean() {\r\n        if (__classPrivateFieldGet(this, _cache).keys().length >= __classPrivateFieldGet(this, _maxSize)) {\r\n            __classPrivateFieldGet(this, _cache).remove(__classPrivateFieldGet(this, _cache).keys()[0]);\r\n        }\r\n    }\r\n}\r\n_cache = new WeakMap(), _maxSize = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _log, _executor, _executor_1;\r\nimport { is } from \"../utils/functions\";\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\nclass EmitHandlerBase {\r\n    constructor() {\r\n        this.queue = [];\r\n        this.isBusy = false;\r\n    }\r\n    idMatches(emitId, handleId) {\r\n        return !is(emitId) || (is(emitId) && emitId == handleId);\r\n    }\r\n}\r\nexport class SimpleEventEmitHandler extends EmitHandlerBase {\r\n    constructor(executor) {\r\n        super();\r\n        _log.set(this, void 0);\r\n        _executor.set(this, void 0);\r\n        __classPrivateFieldSet(this, _executor, executor);\r\n        __classPrivateFieldSet(this, _log, CuiLoggerFactory.get(\"SimpleEventEmitHandler\"));\r\n    }\r\n    handle(events, cuid, args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(events)) {\r\n                __classPrivateFieldGet(this, _log).warning(\"No events provided\");\r\n                return;\r\n            }\r\n            this.queue.push({\r\n                events: events,\r\n                cuid: cuid,\r\n                args: args\r\n            });\r\n            if (!this.isBusy) {\r\n                if (!this.isBusy) {\r\n                    this.isBusy = true;\r\n                    this.perform();\r\n                    if (this.queue.length > 0) {\r\n                        yield this.perform();\r\n                    }\r\n                    this.isBusy = false;\r\n                }\r\n            }\r\n            return;\r\n        });\r\n    }\r\n    perform() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let task = this.queue.shift();\r\n            if (!task) {\r\n                return;\r\n            }\r\n            for (let id in task.events) {\r\n                let event = task.events[id];\r\n                try {\r\n                    if (this.idMatches(task.cuid, event.$cuid))\r\n                        yield __classPrivateFieldGet(this, _executor).execute(event.callback, task.args);\r\n                }\r\n                catch (e) {\r\n                    __classPrivateFieldGet(this, _log).error(e);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n_log = new WeakMap(), _executor = new WeakMap();\r\nexport class TaskedEventEmitHandler extends EmitHandlerBase {\r\n    constructor(executor) {\r\n        super();\r\n        _executor_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _executor_1, executor);\r\n    }\r\n    handle(events, cuid, args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(events)) {\r\n                return;\r\n            }\r\n            this.queue.push({\r\n                events: events,\r\n                cuid: cuid,\r\n                args: args\r\n            });\r\n            if (!this.isBusy) {\r\n                this.isBusy = true;\r\n                this.perform();\r\n                if (this.queue.length > 0) {\r\n                    this.perform();\r\n                }\r\n                this.isBusy = false;\r\n            }\r\n            return;\r\n        });\r\n    }\r\n    perform() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let task = this.queue.shift();\r\n            let promises = [];\r\n            if (!task) {\r\n                return Promise.all(promises);\r\n            }\r\n            for (let id in task.events) {\r\n                let event = task.events[id];\r\n                if (this.idMatches(task.cuid, event.$cuid))\r\n                    promises.push(__classPrivateFieldGet(this, _executor_1).execute(event.callback, task.args));\r\n            }\r\n            return Promise.all(promises);\r\n        });\r\n    }\r\n}\r\n_executor_1 = new WeakMap();\r\nexport class CuiEventEmitHandlerFactory {\r\n    static get(name, executor) {\r\n        switch (name) {\r\n            case \"tasked\":\r\n                return new TaskedEventEmitHandler(executor);\r\n            default:\r\n                return new SimpleEventEmitHandler(executor);\r\n        }\r\n    }\r\n}\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nexport class CuiCallbackExecutor {\r\n    execute(callback, args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            args = args !== null && args !== void 0 ? args : [];\r\n            callback(...args);\r\n            return;\r\n        });\r\n    }\r\n}\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _events, _log, _eventHandler, _name, _events_1, _log_1, _buses, _last, _isOn, _statistics;\r\nimport { is, are, generateRandomString, enumerateObject } from \"../utils/functions\";\r\nimport { ArgumentError } from \"../models/errors\";\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\nimport { CuiEventEmitHandlerFactory, TaskedEventEmitHandler } from \"./handlers\";\r\nimport { CuiCallbackExecutor } from \"./executors\";\r\nexport class CuiEventBus {\r\n    constructor(emitHandler, name) {\r\n        _events.set(this, void 0);\r\n        _log.set(this, void 0);\r\n        _eventHandler.set(this, void 0);\r\n        _name.set(this, void 0);\r\n        __classPrivateFieldSet(this, _events, {});\r\n        __classPrivateFieldSet(this, _eventHandler, emitHandler);\r\n        __classPrivateFieldSet(this, _name, name !== null && name !== void 0 ? name : \"CuiEventBus\");\r\n        __classPrivateFieldSet(this, _log, CuiLoggerFactory.get(__classPrivateFieldGet(this, _name)));\r\n    }\r\n    /**\r\n     * Attaches event to event bus\r\n     *\r\n     * @param {string} name - Event name\r\n     * @param {any} callback - callback function\r\n     * @param {CuiContext} ctx - callback context with id\r\n     * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n     */\r\n    on(name, callback, cui) {\r\n        if (!are(name, callback)) {\r\n            throw new ArgumentError(\"Missing argument\");\r\n        }\r\n        // When context is not provided (e.g. anonymous function) then generate random\r\n        let id = __classPrivateFieldGet(this, _name) + \"-\" + generateRandomString();\r\n        if (!__classPrivateFieldGet(this, _events)[name]) {\r\n            __classPrivateFieldGet(this, _events)[name] = {};\r\n        }\r\n        if (this.isAttached(__classPrivateFieldGet(this, _events)[name], id, cui)) {\r\n            return null;\r\n        }\r\n        __classPrivateFieldGet(this, _log).debug(`Attaching new event: [${name}] for: [${id}]`);\r\n        __classPrivateFieldGet(this, _events)[name][id] = { callback: callback, $cuid: this.getCuid(cui) };\r\n        return id;\r\n    }\r\n    /**\r\n    * Detaches specific event from event bus\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {CuiContext} ctx - callback context with id\r\n    * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n    */\r\n    detach(name, id) {\r\n        if (!are(name, id)) {\r\n            throw new ArgumentError(\"Missing argument\");\r\n        }\r\n        let ev = __classPrivateFieldGet(this, _events)[name];\r\n        __classPrivateFieldGet(this, _log).debug(`Detaching item: [${id}] from [${name}]`);\r\n        if (this.isAttached(ev, id)) {\r\n            delete ev[id];\r\n        }\r\n    }\r\n    /**\r\n    * Detaches all callbacks from event\r\n    *\r\n    * @param {string} name - Event name\r\n    */\r\n    detachAll(name) {\r\n        if (is(name) && __classPrivateFieldGet(this, _events)[name]) {\r\n            delete __classPrivateFieldGet(this, _events)[name];\r\n        }\r\n        else {\r\n            __classPrivateFieldGet(this, _log).error(`Event name is missing or incorrect`, \"detachAll\");\r\n        }\r\n    }\r\n    /**\r\n    * Emits event call to event bus\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {string} cuid - id of component which emits the event\r\n    * @param {any[]} args  - event arguments\r\n    */\r\n    emit(event, cuid, ...args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(event)) {\r\n                throw new ArgumentError(\"Event name is incorrect\");\r\n            }\r\n            let callbacks = __classPrivateFieldGet(this, _events)[event];\r\n            if (is(callbacks)) {\r\n                __classPrivateFieldGet(this, _log).debug(`Emit: [${event}]`);\r\n                yield __classPrivateFieldGet(this, _eventHandler).handle(__classPrivateFieldGet(this, _events)[event], cuid, args);\r\n            }\r\n            return true;\r\n        });\r\n    }\r\n    /**\r\n    * Checks whether given context is already attached to specific event\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {CuiContext} ctx - callback context with id\r\n    * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n    */\r\n    isSubscribing(name, id, cui) {\r\n        let ev = __classPrivateFieldGet(this, _events)[name];\r\n        return this.isAttached(ev, id, cui);\r\n    }\r\n    /**\r\n     * Detaches callbacks by component cuid - this is used to clean up attachments on component deletion\r\n     * @param {string} event - event name\r\n     * @param {string} cuid - cuid of the component\r\n     */\r\n    detachByCuid(event, cuid) {\r\n        if (!are(event, cuid)) {\r\n            return;\r\n        }\r\n        let ev = __classPrivateFieldGet(this, _events)[event];\r\n        if (!is(ev)) {\r\n            return;\r\n        }\r\n        enumerateObject(Object.assign({}, ev), (evId, evValue) => {\r\n            if (evValue.$cuid === cuid) {\r\n                delete ev[evId];\r\n            }\r\n        });\r\n    }\r\n    isAttached(ev, id, cui) {\r\n        if (is(cui)) {\r\n            // @ts-ignore\r\n            return is(ev) && is(id) && is(ev[id]) && ev[id].$cuid == cui.$cuid;\r\n        }\r\n        return is(ev) && is(id) && is(ev[id]);\r\n    }\r\n    getCuid(cui) {\r\n        // @ts-ignore\r\n        return is(cui) ? cui.$cuid : null;\r\n    }\r\n}\r\n_events = new WeakMap(), _log = new WeakMap(), _eventHandler = new WeakMap(), _name = new WeakMap();\r\nexport class CuiEventExtBus {\r\n    constructor(setup) {\r\n        _events_1.set(this, void 0);\r\n        _log_1.set(this, void 0);\r\n        _buses.set(this, void 0);\r\n        _last.set(this, void 0);\r\n        __classPrivateFieldSet(this, _log_1, CuiLoggerFactory.get(\"CuiEventBus\"));\r\n        __classPrivateFieldSet(this, _buses, []);\r\n        __classPrivateFieldSet(this, _events_1, {});\r\n        __classPrivateFieldSet(this, _last, 0);\r\n        if (is(setup)) {\r\n            __classPrivateFieldGet(this, _log_1).debug(\"Initiating buses\");\r\n            let sorted = setup.length === 1 ? setup : setup.sort((first, second) => {\r\n                return first.priority - second.priority;\r\n            });\r\n            sorted.forEach((item, index) => {\r\n                __classPrivateFieldGet(this, _buses).push(this.initBusInstance(item.name, item.handler));\r\n                __classPrivateFieldSet(this, _events_1, Object.assign(Object.assign({}, __classPrivateFieldGet(this, _events_1)), this.mapEvents(item.eventsDef, index)));\r\n                __classPrivateFieldGet(this, _log_1).debug(`Bus ${item.name} has been initialized with number: ${index}`);\r\n            });\r\n            __classPrivateFieldGet(this, _buses).push(this.initBusInstance(\"DefaultEventBus\", 'tasked'));\r\n            __classPrivateFieldSet(this, _last, __classPrivateFieldGet(this, _buses).length - 1);\r\n            __classPrivateFieldGet(this, _log_1).debug(`Bus initialization finished`);\r\n        }\r\n    }\r\n    /**\r\n     * Attaches event to event bus\r\n     *\r\n     * @param {string} name - Event name\r\n     * @param {any} callback - callback function\r\n     * @param {CuiContext} ctx - callback context with id\r\n     * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n     */\r\n    on(name, callback, cui) {\r\n        if (!are(name, callback)) {\r\n            throw new ArgumentError(\"Missing argument\");\r\n        }\r\n        return this.get(name).on(name, callback, cui);\r\n    }\r\n    /**\r\n    * Detaches specific event from event bus\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {CuiContext} ctx - callback context with id\r\n    * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n    */\r\n    detach(name, id, cui) {\r\n        if (!are(name, id)) {\r\n            throw new ArgumentError(\"Missing argument\");\r\n        }\r\n        this.get(name).detach(name, id, cui);\r\n    }\r\n    /**\r\n    * Detaches all callbacks from event\r\n    *\r\n    * @param {string} name - Event name\r\n    */\r\n    detachAll(name) {\r\n        this.get(name).detachAll(name);\r\n    }\r\n    /**\r\n    * Emits event call to event bus\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {string} cuid - id of component which emits the event\r\n    * @param {any[]} args  - event arguments\r\n    */\r\n    emit(event, cuid, ...args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(event)) {\r\n                throw new ArgumentError(\"Event name is incorrect\");\r\n            }\r\n            return this.get(event).emit(event, cuid, ...args);\r\n        });\r\n    }\r\n    /**\r\n    * Checks whether given context is already attached to specific event\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {CuiContext} ctx - callback context with id\r\n    * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n    */\r\n    isSubscribing(name, id, cui) {\r\n        return this.get(name).isSubscribing(name, id, cui);\r\n    }\r\n    /**\r\n    * Detaches callbacks by component cuid - this is used to clean up attachments on component deletion\r\n    * @param {string} event - event name\r\n    * @param {string} cuid - cuid of the component\r\n    */\r\n    detachByCuid(event, cuid) {\r\n        if (!are(event, cuid)) {\r\n            return;\r\n        }\r\n        this.get(event).detachByCuid(event, cuid);\r\n    }\r\n    /**\r\n     * Creates and initializes event bus instance\r\n     * @param busName Event bus name for logger\r\n     * @param handlerName handler name to create proper handler instance\r\n     */\r\n    initBusInstance(busName, handlerName) {\r\n        if (!are(busName, handlerName)) {\r\n            throw new ArgumentError(\"Bus name or handler name is incorrect\");\r\n        }\r\n        let executor = new CuiCallbackExecutor();\r\n        let handler = CuiEventEmitHandlerFactory.get(handlerName, executor);\r\n        return new CuiEventBus(handler, busName);\r\n    }\r\n    /**\r\n     * Creates mapping object from events array\r\n     * @param events events array\r\n     * @param index queue number\r\n     */\r\n    mapEvents(events, index) {\r\n        return events.reduce((result, current) => {\r\n            if (!result[current]) {\r\n                return Object.assign(Object.assign({}, result), { [current]: index });\r\n            }\r\n            return result;\r\n        }, {});\r\n    }\r\n    /**\r\n     * Retrives porper event bus based on event name\r\n     * @param event\r\n     */\r\n    get(event) {\r\n        let idx = __classPrivateFieldGet(this, _events_1)[event];\r\n        return __classPrivateFieldGet(this, _buses)[idx !== null && idx !== void 0 ? idx : __classPrivateFieldGet(this, _last)];\r\n    }\r\n}\r\n_events_1 = new WeakMap(), _log_1 = new WeakMap(), _buses = new WeakMap(), _last = new WeakMap();\r\nexport class CuiEventBusFactory {\r\n    static get(setup) {\r\n        //@ts-ignore - setup is underfined check is perfromed\r\n        return is(setup) ? new CuiEventExtBus(setup) : new CuiEventBus(new TaskedEventEmitHandler(new CuiCallbackExecutor));\r\n    }\r\n}\r\nexport class CuiBusExtStatisticsHandler {\r\n    constructor(gather, queueCount) {\r\n        _isOn.set(this, void 0);\r\n        _statistics.set(this, void 0);\r\n        __classPrivateFieldSet(this, _isOn, gather);\r\n        __classPrivateFieldSet(this, _statistics, {\r\n            queueCount: queueCount,\r\n            events: {}\r\n        });\r\n    }\r\n    addEvent(event, queueNumber, emitCount) {\r\n        __classPrivateFieldGet(this, _statistics).events[event] = {\r\n            name: event,\r\n            queueNumber: queueNumber,\r\n            emits: emitCount !== null && emitCount !== void 0 ? emitCount : 0\r\n        };\r\n    }\r\n    addQueue() {\r\n        __classPrivateFieldGet(this, _statistics).queueCount += 1;\r\n    }\r\n    addEmit(event, queueNumber) {\r\n        if (!__classPrivateFieldGet(this, _isOn)) {\r\n            return;\r\n        }\r\n        if (__classPrivateFieldGet(this, _statistics).events[event]) {\r\n            __classPrivateFieldGet(this, _statistics).events[event].emits += 1;\r\n        }\r\n        else {\r\n            this.addEvent(event, queueNumber !== null && queueNumber !== void 0 ? queueNumber : -1, 1);\r\n        }\r\n    }\r\n    getStatistics() {\r\n        return __classPrivateFieldGet(this, _statistics);\r\n    }\r\n}\r\n_isOn = new WeakMap(), _statistics = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar _interactions;\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiDocumentStyleAppender {\r\n    constructor(interactions) {\r\n        _interactions.set(this, void 0);\r\n        __classPrivateFieldSet(this, _interactions, interactions);\r\n    }\r\n    append(style) {\r\n        if (is(style)) {\r\n            const head = document.head || document.getElementsByTagName('head')[0];\r\n            const node = document.createElement('style');\r\n            const text = document.createTextNode(style);\r\n            node.type = 'text/css';\r\n            node.appendChild(text);\r\n            head.appendChild(node);\r\n        }\r\n        return true;\r\n    }\r\n}\r\n_interactions = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _root, _interactions, _LIGHTEN_FACTOR, _DARKEN_FACTOR;\r\nimport { is, getRangeValue, are } from \"../utils/functions\";\r\nimport { CSS_APP_BACKGROUND_COLORS, CSS_COMPONENT_BACKGROUND_COLORS, CSS_COMPONENT_BORDER_COLORS, CSS_THEMES } from \"../utils/statics\";\r\nexport class CuiInstanceColorHandler {\r\n    constructor(interactions) {\r\n        _root.set(this, void 0);\r\n        _interactions.set(this, void 0);\r\n        _LIGHTEN_FACTOR.set(this, 15);\r\n        _DARKEN_FACTOR.set(this, 15);\r\n        __classPrivateFieldSet(this, _root, document.documentElement);\r\n        __classPrivateFieldSet(this, _interactions, interactions);\r\n    }\r\n    setAppBackground(light, dark) {\r\n        this.setPropertyIn(CSS_APP_BACKGROUND_COLORS.light, light.toCssString());\r\n        this.setPropertyIn(CSS_APP_BACKGROUND_COLORS.dark, dark.toCssString());\r\n    }\r\n    setComponentBackground(light, dark) {\r\n        this.setPropertyIn(CSS_COMPONENT_BACKGROUND_COLORS.light, light.toCssString());\r\n        this.setPropertyIn(CSS_COMPONENT_BACKGROUND_COLORS.dark, dark.toCssString());\r\n    }\r\n    setBordersColors(light, dark) {\r\n        this.setPropertyIn(CSS_COMPONENT_BORDER_COLORS.light, light.toCssString());\r\n        this.setPropertyIn(CSS_COMPONENT_BORDER_COLORS.dark, dark.toCssString());\r\n    }\r\n    setColor(type, set) {\r\n        var _a, _b;\r\n        const colors = CSS_THEMES[type];\r\n        const baseColor = set.base;\r\n        if (!is(colors) || !is(baseColor)) {\r\n            return;\r\n        }\r\n        const mutedColor = (_a = set.muted) !== null && _a !== void 0 ? _a : baseColor.clone().lighten(__classPrivateFieldGet(this, _LIGHTEN_FACTOR));\r\n        const activeColor = (_b = set.active) !== null && _b !== void 0 ? _b : baseColor.clone().darken(__classPrivateFieldGet(this, _DARKEN_FACTOR));\r\n        __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n            this.setProperty(colors.base, baseColor.toCssString());\r\n            this.setProperty(colors.active, activeColor.toCssString());\r\n            this.setProperty(colors.muted, mutedColor.toCssString());\r\n        }, this);\r\n    }\r\n    setLightenFactor(factor) {\r\n        __classPrivateFieldSet(this, _LIGHTEN_FACTOR, getRangeValue(factor, 0, 100));\r\n    }\r\n    setDarkenFactor(factor) {\r\n        __classPrivateFieldSet(this, _DARKEN_FACTOR, getRangeValue(factor, 0, 100));\r\n    }\r\n    setProperty(propertyName, value) {\r\n        __classPrivateFieldGet(this, _root).style.setProperty(propertyName, value);\r\n    }\r\n    setPropertyIn(propertyName, value) {\r\n        if (!are(value, propertyName)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _interactions).mutate(this.setProperty, this, propertyName, value);\r\n    }\r\n}\r\n_root = new WeakMap(), _interactions = new WeakMap(), _LIGHTEN_FACTOR = new WeakMap(), _DARKEN_FACTOR = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _items, _promises, _prevYValue, _inProgress, _previousSize, _threshold, _bus, _listenerBoundCall;\r\nimport { calcWindowSize, calcWindowSize2 } from \"../utils/functions\";\r\nimport { EVENTS } from \"../utils/statics\";\r\nexport class CuiResizeObserver {\r\n    constructor(bus, threshold) {\r\n        _items.set(this, void 0);\r\n        _promises.set(this, void 0);\r\n        _prevYValue.set(this, void 0);\r\n        _inProgress.set(this, void 0);\r\n        _previousSize.set(this, void 0);\r\n        _threshold.set(this, void 0);\r\n        _bus.set(this, void 0);\r\n        _listenerBoundCall.set(this, void 0);\r\n        __classPrivateFieldSet(this, _items, []);\r\n        __classPrivateFieldSet(this, _promises, []);\r\n        __classPrivateFieldSet(this, _prevYValue, window.innerWidth);\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n        __classPrivateFieldSet(this, _previousSize, calcWindowSize(window.innerWidth));\r\n        __classPrivateFieldSet(this, _threshold, threshold !== null && threshold !== void 0 ? threshold : 0);\r\n        __classPrivateFieldSet(this, _bus, bus);\r\n        __classPrivateFieldSet(this, _listenerBoundCall, this.listener.bind(this));\r\n    }\r\n    observe(target) {\r\n        let idx = __classPrivateFieldGet(this, _items).findIndex(x => x === target);\r\n        if (idx < 0) {\r\n            __classPrivateFieldGet(this, _items).push(target);\r\n        }\r\n    }\r\n    unobserve(target) {\r\n        let idx = __classPrivateFieldGet(this, _items).findIndex(x => x === target);\r\n        if (idx >= 0) {\r\n            __classPrivateFieldGet(this, _items).splice(idx, 1);\r\n        }\r\n    }\r\n    connect() {\r\n        window.addEventListener('resize', __classPrivateFieldGet(this, _listenerBoundCall));\r\n    }\r\n    disconnect() {\r\n        window.removeEventListener('resize', __classPrivateFieldGet(this, _listenerBoundCall));\r\n    }\r\n    pushUpdateToItems(resizeData) {\r\n        if (__classPrivateFieldGet(this, _items).length < 1) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _promises, []);\r\n        __classPrivateFieldGet(this, _items).forEach(x => {\r\n            __classPrivateFieldGet(this, _promises).push(x.resize(resizeData));\r\n        });\r\n        Promise.all(__classPrivateFieldGet(this, _promises));\r\n        __classPrivateFieldSet(this, _promises, []);\r\n    }\r\n    listener(ev) {\r\n        if (__classPrivateFieldGet(this, _inProgress)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _inProgress, true);\r\n        const diff = window.innerWidth - __classPrivateFieldGet(this, _prevYValue);\r\n        if (Math.abs(diff) >= __classPrivateFieldGet(this, _threshold)) {\r\n            const currentSize = calcWindowSize2(window.innerWidth);\r\n            if (currentSize !== __classPrivateFieldGet(this, _previousSize)) {\r\n                const resizeData = {\r\n                    current: currentSize,\r\n                    previous: __classPrivateFieldGet(this, _previousSize),\r\n                    width: window.innerWidth,\r\n                    height: window.innerHeight,\r\n                    timestamp: Date.now()\r\n                };\r\n                __classPrivateFieldGet(this, _bus).emit(EVENTS.RESIZE, \"\", resizeData);\r\n                this.pushUpdateToItems(resizeData);\r\n                __classPrivateFieldSet(this, _previousSize, currentSize);\r\n            }\r\n        }\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n    }\r\n}\r\n_items = new WeakMap(), _promises = new WeakMap(), _prevYValue = new WeakMap(), _inProgress = new WeakMap(), _previousSize = new WeakMap(), _threshold = new WeakMap(), _bus = new WeakMap(), _listenerBoundCall = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _tool;\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiDevelopmentToolManager {\r\n    constructor(tool) {\r\n        _tool.set(this, void 0);\r\n        __classPrivateFieldSet(this, _tool, tool);\r\n    }\r\n    pushState(cuid, component, type, message, functionName) {\r\n        this.checkAndCall(() => {\r\n            // @ts-ignore - tool already checked\r\n            __classPrivateFieldGet(this, _tool).pushState(cuid, component, type, message, functionName);\r\n        });\r\n    }\r\n    registerElement(element, cuid, component) {\r\n        this.checkAndCall(() => {\r\n            // @ts-ignore - tool already checked\r\n            __classPrivateFieldGet(this, _tool).registerElement(element, cuid, component);\r\n        });\r\n    }\r\n    unregisterElement(cuid, component) {\r\n        this.checkAndCall(() => {\r\n            // @ts-ignore - tool already checked\r\n            __classPrivateFieldGet(this, _tool).unregisterElement(cuid, component);\r\n        });\r\n    }\r\n    setProperty(cuid, component, name, t) {\r\n        this.checkAndCall(() => {\r\n            // @ts-ignore - tool already checked\r\n            __classPrivateFieldGet(this, _tool).setProperty(cuid, component, name, t);\r\n        });\r\n    }\r\n    log(type, message, functionName) {\r\n        this.checkAndCall(() => {\r\n            // @ts-ignore - tool already checked\r\n            __classPrivateFieldGet(this, _tool).log(type, message, functionName);\r\n        });\r\n    }\r\n    checkAndCall(callback) {\r\n        if (!is(__classPrivateFieldGet(this, _tool))) {\r\n            return;\r\n        }\r\n        callback();\r\n    }\r\n}\r\n_tool = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _resizeObserver;\r\nimport { CuiSetup } from \"./setup\";\r\nimport { CuiInteractionsFactory } from \"../factories/interactions\";\r\nimport { CuiCacheManager } from \"../managers/cache\";\r\nimport { CuiEventBusFactory } from \"../bus/bus\";\r\nimport { are, getName, replacePrefix } from \"../utils/functions\";\r\nimport { CLASSES } from \"../utils/statics\";\r\nimport { CuiDocumentStyleAppender } from \"../styles/appender\";\r\nimport { CuiInstanceColorHandler } from \"../handlers/colors\";\r\nimport { CuiResizeObserver } from \"../observers/resize\";\r\nimport { CSSVariableError } from \"./errors\";\r\nimport { CuiDevelopmentToolManager } from \"../managers/development\";\r\nexport class CuiUtils {\r\n    constructor(initialSetup) {\r\n        _resizeObserver.set(this, void 0);\r\n        this.setup = new CuiSetup().fromInit(initialSetup);\r\n        this.interactions = CuiInteractionsFactory.get(initialSetup.interaction, this.onInteractionError.bind(this));\r\n        this.cache = new CuiCacheManager(this.setup.cacheSize);\r\n        this.bus = CuiEventBusFactory.get(initialSetup.busSetup);\r\n        this.colors = new CuiInstanceColorHandler(this.interactions);\r\n        this.development = new CuiDevelopmentToolManager(initialSetup.development);\r\n        this.styleAppender = new CuiDocumentStyleAppender(this.interactions);\r\n        __classPrivateFieldSet(this, _resizeObserver, new CuiResizeObserver(this.bus, this.setup.resizeThreshold));\r\n        __classPrivateFieldGet(this, _resizeObserver).connect();\r\n    }\r\n    setLightMode(mode) {\r\n        const name = getName(this.setup.prefix, CLASSES.dark);\r\n        const classes = document.body.classList;\r\n        if (mode === 'dark' && !classes.contains(name)) {\r\n            this.interactions.mutate(() => {\r\n                classes.add(name);\r\n            }, this);\r\n        }\r\n        else if (mode === 'light' && classes.contains(name)) {\r\n            this.interactions.mutate(() => {\r\n                classes.remove(name);\r\n            }, this);\r\n        }\r\n    }\r\n    getLightMode() {\r\n        const name = getName(this.setup.prefix, CLASSES.dark);\r\n        return document.body.classList.contains(name) ? 'dark' : 'light';\r\n    }\r\n    setPrintMode(flag) {\r\n        const name = getName(this.setup.prefix, CLASSES.print);\r\n        const classes = document.body.classList;\r\n        if (flag && !classes.contains(name)) {\r\n            classes.add(name);\r\n        }\r\n        else if (!flag && classes.contains(name)) {\r\n            classes.remove(name);\r\n        }\r\n    }\r\n    isPrintMode() {\r\n        const name = getName(this.setup.prefix, CLASSES.print);\r\n        return document.body.classList.contains(name);\r\n    }\r\n    setProperty(name, value) {\r\n        if (!are(name, value)) {\r\n            throw new CSSVariableError(\"Property or value was not provided\");\r\n        }\r\n        let prop = replacePrefix(name, this.setup.prefix);\r\n        document.documentElement.style.setProperty(prop, value);\r\n    }\r\n    onInteractionError(e) {\r\n        console.error(\"An error has been captured from interactions\");\r\n        console.error(e);\r\n    }\r\n}\r\n_resizeObserver = new WeakMap();\r\n","import { FastDom, SyncInteractions } from \"../utils/interactions\";\r\nexport class CuiInteractionsFactory {\r\n    /**\r\n     * Gets new instance of component focused logger\r\n     * @param type - Interactions type\r\n     */\r\n    static get(type, errorReport) {\r\n        const interactionType = type;\r\n        switch (interactionType) {\r\n            case 'async':\r\n                const fastDom = new FastDom();\r\n                if (errorReport)\r\n                    fastDom.onError(errorReport);\r\n                return fastDom;\r\n            default:\r\n                return new SyncInteractions();\r\n        }\r\n    }\r\n}\r\n"],"sourceRoot":""}