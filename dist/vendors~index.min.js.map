{"version":3,"sources":["webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/functions.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/statics.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/actions.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/models/errors.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/logger.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/factories/logger.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/builders/element.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/animation/definitions.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/listeners/move.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/models/setup.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/observers/mutations.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/helpers/helpers.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/index.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/index.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/index.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/aria.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/handlers/base.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/accordion/accordion.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/animation/animators.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/animation/engine.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/banner/banner.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/builders/icon.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/circle/circle.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/close/close.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/cover/cover.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/dialog/dialog.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/listeners/hover.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/position/evaluator.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/position/calculator.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/task.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/drop/drop.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/float/helpers.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/float/float.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/icon/icon.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/observers/intersection.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/intersection/intersection.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/offcanvas/offcanvas.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/models/elements.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/listeners/scroll.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/offset/modes.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/offset/offset.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/open/open.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/scroll/scroll.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/intersection/intersection.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/scrollspy/mode.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/scrollspy/scrollspy.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/handlers/drag/detectors.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/handlers/drag/drag.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/sortable/sortable.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/spinner/spinner.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/switch/slider.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/switch/switch.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/switch/switcher.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/toggle/toggle.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/tooltip/tooltip.js","webpack://cui-light/./node_modules/cui-light-components/dist/esm/module.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/click/click.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/listeners/keys.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/keys/observer.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/keys/keys.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/listeners/media.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/light/light.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/print/print.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/models/colors.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/properties/colors.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/properties/setter.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/properties/handler.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/properties/properties.js","webpack://cui-light/./node_modules/cui-light-plugins/dist/esm/module.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/interactions.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/utils/dictionary.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/managers/cache.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/bus/handlers.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/bus/executors.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/bus/bus.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/styles/appender.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/handlers/colors.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/observers/resize.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/managers/development.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/models/utils.js","webpack://cui-light/./node_modules/cui-light-core/dist/esm/factories/interactions.js"],"names":["is","val","typecheck","length","Array","isArray","isEmpty","getName","prefix","name","sleep","timeout","Promise","resolve","setTimeout","createElementFromString","htmlString","template","document","createElement","innerHTML","content","children","getRangeValue","value","min","max","getRangeValueOrDefault","def","isNaN","clone","object","Object","assign","joinAttributesForQuery","attributes","join","getSystemLightMode","window","matchMedia","matches","getSystemPrintMode","are","c","i","calcWindowSize","width","parseAttributeString","attribute","ret","out","startsWith","endsWith","JSON","parse","jsonify","e","console","error","message","component","functionName","Date","toLocaleString","parseJsonString","trim","includes","split","forEach","sp","getOffsetTop","element","offsetTop","parseInt","getStyleValue","getIntOrDefault","integer","target","property","currentStyle","getComputedStyle","getPropertyValue","isInRange","getActiveClass","parseAttribute","getAttribute","isStringTrue","toLowerCase","boolStringOrDefault","prop","getStringOrDefault","isString","replacePrefix","replace","generateRandomString","rand","getRandomInt","rand2","Math","floor","random","ceil","registerCuiElement","node","components","utils","$handlers","matching","hasAttribute","filter","a","getMatchingAttributes","$cuid","next","generateCUID","tagName","setAttribute","match","find","styleAppender","append","getStyle","handler","get","handle","attr","addCuiArgument","cuiArg","args","argArr","enumerateObject","arg","push","counter","idx","getParentCuiElement","parent","parentElement","getChildrenHeight","height","from","child","getBoundingClientRect","callback","hasOwnProperty","calculateNextIndex","currentIndex","totalLength","getFirstMatching","array","count","CUID_ATTRIBUTE","CLASSES","dark","animProgress","print","active","swipingOn","selectionOff","ICONS","close","accordion","special_menu","special_fail","special_success","CSS_APP_BACKGROUND_COLORS","light","CSS_COMPONENT_BACKGROUND_COLORS","CSS_COMPONENT_BORDER_COLORS","CSS_THEMES","base","muted","accent","secondary","success","warning","SCOPE_SELECTOR","CSS_VARIABLES","fontSize","lineHeight","animationTime","animationTimeLong","animationTimeShort","colorLightAppBackground","colorLightBackground","colorLightBorder","colorLightBase","colorLightActive","colorLightMuted","colorDarkAppBackground","colorDarkBackground","colorDarkBorder","colorDarkBase","colorDarkActive","colorDarkMuted","colorAccent","colorAccentActive","colorAccentMuted","colorAccentShade","colorAccentShadeDark","colorSecondary","colorSecondaryActive","colorSecondaryMuted","colorSecondaryShade","colorSecondaryShadeDark","colorWarning","colorWarningActive","colorWarningMuted","colorWarningShade","colorWarningShadeDark","colorSuccess","colorSuccessActive","colorSuccessMuted","colorSuccessShade","colorSuccessShadeDark","colorError","colorErrorActive","colorErrorMuted","colorErrorShade","colorErrorShadeDark","inputBackground","colorShade","colorShadeDarker","colorShadeLight","colorShadeLighter","outline","borderRadius","padding","margin","scrollbarWidth","componentSpace","accordionIcon","STATICS","logLevel","EVENTS","INSTANCE_INITIALIZED","INSTANCE_FINISHED","RESIZE","OPEN","OPENED","CLOSE","CLOSED","TOGGLE","TOGGLED","SWITCH","SWITCHED","ON_SCROLL","TARGET_CHANGE","INTERSECTION","KEYDOWN","SCROLLBY","WINDOW_CLICK","OFFSET","PROGRESS_CHANGE","PROGRESS_CHANGED","CHANGE","CHANGED","GLOBAL_MOVE","MOVE_LOCK","PAUSE","PAUSED","SORTED","SORT_START","COMPONENTS_COUNTER","_class","_name","_attributeName","_attributeValue","__classPrivateFieldSet","receiver","privateMap","has","TypeError","set","__classPrivateFieldGet","CuiClassAction","className","this","classList","contains","add","remove","WeakMap","CuiInboundAction","setLightMode","setDarkMode","getLightMode","AttributeAction","_a","_b","_c","removeAttribute","DummyAction","CuiActionsListFactory","map","single","substring","ErrorBase","Error","super","setPrototypeOf","prototype","ItemNotFoundError","ArgumentError","CuiInstanceInitError","RegisterElementError","AnimatorError","CSSVariableError","CuiColorError","CuiPositionError","CuiLogger","level","id","log","prepString","warn","stack","start","now","_id","_classes","_attributes","_tag","ElementBuilder","tag","undefined","SWIPE_ANIMATIONS_DEFINITIONS","current","left","transform","translateX","to","unit","right","previous","fade","opacity","_element","_onEvent","_isLocked","_isAttached","_preventDefault","_target","CuiMoveEventListener","body","onMouseDown","bind","onMouseUp","onMouseMove","onTouchStart","onTouchEnd","onTouchMove","flag","addEventListener","passive","removeEventListener","ev","publishMouseEvent","publishTouchEvent","type","cancelable","preventDefault","call","x","clientX","y","clientY","moveX","movementX","moveY","movementY","event","touch","touches","changedTouches","CuiSetup","autoLightMode","scrollThreshold","resizeThreshold","plugins","init","cacheSize","CuiSetupInit","app","interaction","root","busSetup","development","_observer","_options","_components","_utils","_queryString","_isObserving","_observer_1","_element_1","_disabled","_options_1","CuiMutationObserver","_log","subtree","childList","attributeFilter","debug","MutationObserver","mutationCallback","observe","disconnect","mutations","observer","mutation","item","attributeName","refresh","handleChildListMutation","onMutation","then","addedLen","addedNodes","removedLen","removedNodes","handleAddedNodes","handleRemovedNodes","nodes","childrens","hasChildNodes","querySelectorAll","exception","destroySingleElement","destroy","CuiComponentMutationHandler","unobserve","_interactions","__awaiter","thisArg","_arguments","P","generator","reject","fulfilled","step","rejected","result","done","apply","CuiActionsHelper","interactions","action","mutate","actions","inTarget","outTarget","inAction","outAction","onFinish","CUI_LIGHT_COMPONENTS_VERSION","CUI_LIGHT_PLUGINS_VERSION","CUI_CORE_VERSION","AriaAttributes","label","_emittedEvents","_attribute","_openEventId","_closeEventId","_keyCloseEventId","_openAct","_closeAct","_mutionHandler","cls","setClasses","classes","removeClasses","style","componentName","cuid","isLocked","setId","activeClassName","setup","helper","fetch","data","bus","emit","on","detach","fName","detachByCuid","registerElement","unregisterElement","setProperty","pushState","actionsHelper","prevArgs","isInitialized","logInfo","logWarning","registerInDebug","onHandle","pushDebugState","onRefresh","logError","onRemove","detachEmiitedEvents","removeFromDebug","CuiHandler","onInit","onUpdate","onDestroy","performActions","onEvent","openFromEvent","closeFromEvent","openAct","closeAct","detachEvent","checkLockAndWarn","isActive","escClose","keyClose","onKeyClose","onBeforeOpen","performAction","onActionFinish","onAfterOpen","setClass","setAria","onBeforeClose","onAfterClose","removeClass","open","emitEvent","timestamp","state","key","records","reduce","added","removed","_defTitleSelector","_defItemsSelector","_defTimeout","_prefix","_items","_targets","_switchEventId","animation","selector","items","CuiAccordionComponent","isValid","initTargets","onSwitch","index","queryItems","hasClass","removeClassesAs","closeAllExcept","setClassesAs","currentTarget","switch","t","setListener","listener","_unit","rtl","abs","progress","factor","createValue","props","cur","diff","buildSingle","build","_onFinishCallback","_animators","_lock","_animStartStamp","_cleanOnFinish","_errorOccured","_factory_1","_onError_1","_animators_1","_animationEngine","_factory_2","_onError_2","cleanOnFinish","animators","animator","reportError","revert","animationProgress","shouldCalcRevert","requestAnimationFrame","animateAsync","initialProgress","pr","currProgress","callUpdate","endAnimation","reverted","perform","shouldCleanOnFinish","setOnError","update","setElement","setAnimators","animate","_prefix_1","_swipeEngine","_isTracking","_startX","_ratio","_swipeAnimation","_moveEventId","swipe","CuiBanerComponent","setOnFinish","onSwipeFinish","onMove","absRatio","back","finish","newRatio","offsetWidth","setProps","_scale","_appender","svgString","scale","created","toString","_factor","_full","_path","_attr","_progressEventId","iconSvg","svg","querySelector","appendChild","getTotalLength","readStyle","onSetProgress","strokeDashoffset","updateStyle","_eventId","prevent","CuiCloseComponent","onClick","onClose","getTarget","run","catch","finally","cuiId","removeActiveClass","removeActiveClassAsync","shouldEmit","emitClose","_bodyClass","_scrollY","defTimeout","CuiCoverComponent","isAnyActive","pageYOffset","top","scrollTo","_prefix_2","_windowClickEventId","outClose","CuiDialogComponent","onWindowClick","container","_callback","_inProgress","_isHovering","_onOverBound","_onMoveBound","_onOutBound","onMouseOut","onMouseOver","mouseEvent","force","invoke","isHovering","_box","_targetWidth","_targetHeight","_margin","box","getTopPosition","getBottomPosition","getMiddlePosition","getLeftPosition","getRightPosition","getCenterPosition","initial","innerHeight","number","getVerticalPosition","innerWidth","getHorizontalPosition","throwIfNotValid","method","validate","_static","_preferred","_evaluator","evaluator","setMargin","position","elementBox","targetWidth","targetHeight","setElementBox","setTarget","vertical","horizontal","outVNum","outVPos","getAutoVerticalPosition","outHNum","outHPos","getAutoHorizontalPosition","_taskId","_autoRenew","autoRenew","canRun","stop","clearTimeout","_defOpenAct","_triggerHoverListener","_hoverListener","_trigger","_positionCalculator","_posClass","_dropParentCls","_autoTask","_actions","mode","trigger","autoClose","pos","CuiDropComponenet","setCallback","onElementHover","onTriggerClick","setPreferred","acquireTrigger","setTriggerEvent","setStatic","isAttached","findAndCloseOpenedDrop","onOpen","toggleActions","calculate","offsetHeight","attach","runAutoCloseTask","opened","onHoverEvent","toggle","BasePositionCalculator","diffX","diffY","BaseResizeCalculator","offsetLeft","_isMoving","_isResizing","_prevX","_prevY","_moveListener","_resizeCalculator","_resizeBtn","_moveBtn","CuiFloatComponent","move","resize","peform","newWidth","newHeight","fitsWindow","newX","newY","_currentIcon","icon","CuiIconComponent","addIcon","iconStr","setScale","childNodes","insertBefore","iconElement","firstChild","_root","_threshold","CuiIntersectionObserver","threshold","IntersectionObserver","rootMargin","offset","isRoot","parseFloat","CuiIntersectionComponent","parseArguments","onIntersection","connect","el","entries","entry","isIntersecting","intersectionRatio","addActions","removeActions","emitIntersection","getDefaultOpenClass","getDefaultCloseClass","CuiOffCanvasComponent","setPositionLeft","scrollY","CuiElementBoxFactory","Window","WindowElementBox","HTMLElement","HTMLElementBox","ElementBox","scrollHeight","scrollWidth","scrollTop","scrollLeft","pageXOffset","_task","_listener","onScrollFinish","source","getScrollLeft","getScrollTop","passedThreshold","scrolling","_pointLeft","_pointTop","_prevDiffY","_prevDiffX","_wasTriggeredX","_wasTriggeredY","CuiOffsetStaticMode","offsetX","offsetY","CuiOffsetDynamicMode","fitsOffsetY","fitsOffsetX","_matched","_action","_modeHandler","CuiOffsetComponent","onScroll","checkAndPerformActions","getRoot","matchesOffset","act","callEvent","calcaRatio","exceededThreshold","ratioX","ratioY","ratY","clientHeight","toFixed","ratX","clientWidth","CuiOpenComponent","activateTarget","setActiveClass","setActiveClassAsync","emitOpen","_parent","_onClickBound","behavior","setTargets","by","scrollBy","_scrollListener","_children","options","setThreshold","isInProgress","prepareCallbackResult","currentTop","currentBottom","childBottom","ratio","currentLeft","currentRight","childRight","parentBottom","getHeight","parentRight","getWidth","verticalRatio","calcChildVerticalRatio","horizontalRatio","calcChildHorizontalRatio","CuiScrollSpyModeHandlerFactory","elements","forEachAction","links","linksActions","getMatching","len","last","changed","lastElement","intersecting","_links","_linkActions","_rootBox","link","linkAction","CuiScrollspyComponent","updateAttributes","updateResult","targets","queryAll","setChildren","setParent","_elements","_count","found","isInBounds","_moveHandler","_onDragStart","_onDragOver","_onDragEnd","_timeoutId","cancelTimeout","_dragHandler","_triggers","_currentTarget","_currentIdx","_preview","_movingCls","_detector","_currentBefore","_animation","_previewCls","CuiSortableComponent","sutils","onDragStart","onDragOver","onDragEnd","stopMovementPrep","getTargetsAndTrggers","setLongPressTimeout","setElements","getPressedElementIdx","startMovementPrep","getFinishAnimation","findIndex","createPreview","setPreviewPosition","setCurrentPosition","removePreview","detected","detect","insertElement","destination","_pauseEventId","_animationPauseClass","spinner","onPause","removeIfAnyExisists","svgIcon","addSpinner","existing","_swipeRatio","_nextIdx","_nextElement","_ratioThreshold","_currSlider","_nextSlider","_animationDef","_targetsCount","autoTimeout","loop","CuiSliderComponent","onAnimationFinish","onPushSwitch","getTargets","getLinks","getActiveIndex","setLinkActive","setStyle","getElementHeight","startTask","record","nextIdx","adjustMoveRatio","errorOccured","_switches","_actionsIn","_actionsOut","in","CuiSwitchComponent","getSwitches","setSwitchesActive","nextItem","performSwitchAction","switches","sw","emitLinkSwitch","_targetId","_isList","_listeners","CuiSwitcherComponent","onClickEvent","setEvents","removeEvents","list","onListItemClick","_toggleEventId","CuiToggleComponent","_defAct","_tooltip","_tooltipDataCls","CuiTooltipComponent","onHover","getDataFromArgs","removeTooltip","createTooltip","textContent","maxWidth","toolbox","GetComponents","_bus","_boundClick","description","_keys","_singleEmit","_onKeyDownBound","_onKeyUpBound","singleEmit","keys","onKeyDown","onKeyUp","code","_keysObserver","keySetup","_mediaQuery","_isInitialized","_onEventBound","CuiMediaQueryListener","mediaQuery","autoLightInit","autoLight","onChange","autoLightSetup","autoPrintInit","autoPrint","setPrintMode","_red","_green","_blue","_alpha","_colorStr","_colorStr_1","red","green","blue","alpha","colorStr","parser","res","amount","shade","percent","self","shadeSingle","newVal","round","alphaHex","_set","_setter","_setter_1","_set_1","baseColorSets","background","themeColors","shadeDark","CuiBaseColorsSetter","colorSet","setter","color","setColor","colors","toCssString","setProperties","CuiThemeColorsSetter","lighten","darken","setBaseUnitValue","setAnimationTimeLong","setAnimationTimeShort","setCSSVariable","strVal","onCssChange","accentSetter","isArgNumber","setBaseFontSize","setBaseLineHeight","setAnimationTime","setBaseMargin","setBasePadding","setBaseBorderRadius","setComponentSpace","setScrollbarWidth","setAccordionIcon","setAppBackgroundColor","create","setDarkAppBackgroundColor","isArgColor","getBaseColorSetter","palette","setBackgroundColor","setBaseColor","setMutedColor","setActiveColor","getAccentColorSetter","setAutoColors","setShadeColor","setShadeDarkColor","pallete","getBaseColorsSetter","getDarkBaseColorsSetter","getAccentThemeColorsSetter","getSecondaryThemeColorsSetter","getErrorThemeColorsSetter","getWarningThemeColorsSetter","getSuccessThemeColorsSetter","GetPlugins","_limit","FastDom","isScheduled","raf","writes","reads","ctx","createTask","schedule","tasks","task","shift","recursion","flush","rec","SyncInteractions","isRunning","_values","throwOnEmptyKey","containsKey","indexOf","splice","_cache","_maxSize","maxSize","clean","clear","_executor","_executor_1","queue","isBusy","emitId","handleId","executor","events","idMatches","execute","promises","all","CuiCallbackExecutor","_events","_eventHandler","_events_1","_log_1","_buses","_last","emitHandler","cui","getCuid","callbacks","evId","evValue","sort","first","second","priority","initBusInstance","mapEvents","eventsDef","detachAll","isSubscribing","busName","handlerName","head","getElementsByTagName","text","createTextNode","_LIGHTEN_FACTOR","_DARKEN_FACTOR","documentElement","setPropertyIn","baseColor","mutedColor","activeColor","propertyName","_promises","_prevYValue","_previousSize","currentSize","resizeData","_tool","tool","_resizeObserver","initialSetup","fromInit","cache"],"mappings":"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","file":"vendors~index.min.js","sourcesContent":["import { ArgumentError, RegisterElementError } from \"../models/errors\";\r\nimport { COMPONENTS_COUNTER, CUID_ATTRIBUTE } from \"./statics\";\r\n/**\r\n * Checks if value is defined an is not null\r\n * Additionally with type check it can check value if it is not empty string or collection or object\r\n *\r\n * @param val - value\r\n * @param typecheck - default true - additional check whether value is not empty (string, collection, object)\r\n * @returns whether value passed all conditions\r\n */\r\nexport function is(val, typecheck = true) {\r\n    if (typeof val !== 'undefined' && val !== null) {\r\n        if (!typecheck) {\r\n            return true;\r\n        }\r\n        else {\r\n            return !isEmpty(val);\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Checks if value is empty string, array or object\r\n *\r\n *\r\n * @param val - value\r\n * @returns whether value passed all conditions\r\n */\r\nexport function isEmpty(val) {\r\n    if (typeof val === \"string\") {\r\n        return val.length === 0;\r\n    }\r\n    if (typeof val === \"boolean\") {\r\n        return val;\r\n    }\r\n    else if (Array.isArray(val)) {\r\n        return val.length === 0;\r\n    }\r\n    return false;\r\n}\r\nexport function getName(prefix, name) {\r\n    if (!is(prefix) || !is(name)) {\r\n        throw new ArgumentError(\"Missing argument value\");\r\n    }\r\n    return `${prefix}-${name}`;\r\n}\r\nexport function sleep(timeout) {\r\n    return new Promise(resolve => setTimeout(() => {\r\n        resolve(true);\r\n    }, timeout));\r\n}\r\n/**\r\n * Creates proper html element from given string\r\n * @param htmlString - string containing html\r\n */\r\nexport function createElementFromString(htmlString) {\r\n    if (!is(htmlString)) {\r\n        return null;\r\n    }\r\n    let template = document.createElement('template');\r\n    template.innerHTML = htmlString;\r\n    return template.content.children.length > 0 ? template.content.children[0] : null;\r\n}\r\nexport function getMatchingAttribute(element, attributes) {\r\n    let attr = null;\r\n    let len = attributes.length;\r\n    for (let i = 0; i < len; i++) {\r\n        let attribute = attributes[i];\r\n        if (element.hasAttribute(attribute)) {\r\n            attr = attribute;\r\n            break;\r\n        }\r\n    }\r\n    return attr;\r\n}\r\nexport function getMatchingAttributes(element, attributes) {\r\n    if (!element || !is(element.hasAttribute)) {\r\n        return [];\r\n    }\r\n    return attributes.filter(a => {\r\n        return element.hasAttribute(a);\r\n    });\r\n}\r\nexport function getRangeValue(value, min, max) {\r\n    if (value < min) {\r\n        return min;\r\n    }\r\n    else if (value > max) {\r\n        return max;\r\n    }\r\n    return value;\r\n}\r\nexport function getRangeValueOrDefault(value, min, max, def) {\r\n    if (value === null || typeof value === 'undefined' || isNaN(value)) {\r\n        return def;\r\n    }\r\n    return getRangeValue(value, min, max);\r\n}\r\nexport function increaseValue(value, amount) {\r\n    return amount < 0 || amount > 1 ? 0 : value + (value * amount);\r\n}\r\nexport function decreaseValue(value, amount) {\r\n    return amount < 0 || amount > 1 ? 0 : value - (value * amount);\r\n}\r\nexport function clone(object) {\r\n    if (!is(object)) {\r\n        return null;\r\n    }\r\n    return Object.assign({}, object);\r\n}\r\nexport function getSingleColorRatio(first, second, max) {\r\n    return Math.abs(((first - second) / max) * 100);\r\n}\r\n/**\r\n * Creates string containg css selector for array of attributes\r\n * @param attributes - attributes values\r\n */\r\nexport function joinAttributesForQuery(attributes) {\r\n    if (!is(attributes)) {\r\n        return \"\";\r\n    }\r\n    return `[${attributes.join('],[')}]`;\r\n}\r\n/**\r\n * Checks light system light mode\r\n * @returns Light Mode - dark/light\r\n */\r\nexport function getSystemLightMode() {\r\n    return window.matchMedia &&\r\n        window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\r\n}\r\n/**\r\n * Check print mode in the browser window\r\n * @returns true if window is displayed in print mode\r\n */\r\nexport function getSystemPrintMode() {\r\n    return window.matchMedia &&\r\n        window.matchMedia('print').matches;\r\n}\r\n/**\r\n * Verifies whether attributes exist and have some values\r\n * @param attributes attributes list\r\n */\r\nexport function are(...attributes) {\r\n    if (!is(attributes)) {\r\n        return false;\r\n    }\r\n    let c = attributes.length;\r\n    for (let i = 0; i < c; i++) {\r\n        if (!is(attributes[i])) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nexport function calcWindowSize(width) {\r\n    if (width <= 640) {\r\n        return 'small';\r\n    }\r\n    else if (width > 640 && width <= 960) {\r\n        return \"medium\";\r\n    }\r\n    else if (width > 960 && width <= 1200) {\r\n        return \"large\";\r\n    }\r\n    return 'xlarge';\r\n}\r\n/**\r\n * Creates object from string.\r\n * Supported syntaxes are:\r\n * - JSON\r\n * - single value\r\n * - key:value,value;key=value\r\n *\r\n * @param attribute - attribute value\r\n */\r\nexport function parseAttributeString(attribute) {\r\n    let ret = {};\r\n    if (!is(attribute)) {\r\n        return ret;\r\n    }\r\n    //@ts-ignore - null already checked\r\n    ret = parseJsonString(attribute.trim());\r\n    if (!is(ret)) {\r\n        //@ts-ignore - null already checked\r\n        if (!attribute.includes(';') && !attribute.includes(':')) {\r\n            ret = attribute;\r\n        }\r\n        else {\r\n            ret = {};\r\n            //@ts-ignore - null already checked\r\n            attribute.split(';').forEach(val => {\r\n                let sp = val.split(':');\r\n                if (sp.length === 2) {\r\n                    ret[sp[0].trim()] = sp[1].trim();\r\n                }\r\n            });\r\n        }\r\n    }\r\n    return ret;\r\n}\r\n/**\r\n * Creates object from JSON string\r\n* String must start with { and end with }\r\n *\r\n * @param attribute - attribute value\r\n * @returns object if string passes test, null otherwise\r\n */\r\nexport function parseJsonString(attribute) {\r\n    let out = null;\r\n    if (is(attribute) && attribute.startsWith('{') && attribute.endsWith('}')) {\r\n        try {\r\n            out = jsonify(attribute);\r\n        }\r\n        catch (e) {\r\n            console.error(prepLogString(\"An exception occured\", 'Functions', 'parseJsonString'), e);\r\n        }\r\n        return out;\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Creates object from JSON string\r\n * @param attribute - JSON string\r\n */\r\nexport function jsonify(attribute) {\r\n    return attribute && attribute.length > 0 ? JSON.parse(attribute) : {};\r\n}\r\nexport function getOffsetTop(element) {\r\n    if (!is(element)) {\r\n        return -1;\r\n    }\r\n    let val = element.offsetTop - parseInt(getStyleValue(element, 'margin-top')) - parseInt(getStyleValue(element, 'padding-top')) - parseInt(getStyleValue(element, 'border-top-width'));\r\n    return val < 0 ? element.offsetTop : val;\r\n}\r\nexport function getOffsetLeft(element) {\r\n    if (!is(element)) {\r\n        return -1;\r\n    }\r\n    let val = element.offsetLeft - parseInt(getStyleValue(element, 'margin-left')) - parseInt(getStyleValue(element, 'padding-left')) - parseInt(getStyleValue(element, 'border-left-width'));\r\n    return val < 0 ? element.offsetLeft : val;\r\n}\r\nexport function getIntOrDefault(value, def) {\r\n    let integer = parseInt(value);\r\n    return isNaN(integer) ? def : integer;\r\n}\r\nexport function getStyleValue(target, property) {\r\n    if (!is(target) || !is(property)) {\r\n        return null;\r\n    }\r\n    if (target.currentStyle) {\r\n        return target.currentStyle[property];\r\n    }\r\n    else if (window.getComputedStyle) {\r\n        return window.getComputedStyle(target, null).getPropertyValue(property);\r\n    }\r\n    return null;\r\n}\r\nexport function prepLogString(message, component, functionName) {\r\n    return `[${new Date().toLocaleString()}][${component !== null && component !== void 0 ? component : \"-\"}][${functionName !== null && functionName !== void 0 ? functionName : '-'}][${message}]`;\r\n}\r\nexport function isInRange(value, min, max) {\r\n    return is(value) && value >= min && value <= max;\r\n}\r\nexport function getActiveClass(prefix) {\r\n    return `${prefix !== null && prefix !== void 0 ? prefix : \"\"}-active`;\r\n}\r\nexport function parseAttribute(element, attribute) {\r\n    return are(element, attribute) ? parseAttributeString(element.getAttribute(attribute)) : null;\r\n}\r\n/**\r\n *  Checks whether string value contains synonym of true\r\n * @param value - string to check\r\n */\r\nexport function isStringTrue(value) {\r\n    return is(value) ? ['y', 't', 'true', 'yes'].includes(value.toLowerCase()) : false;\r\n}\r\nexport function boolStringOrDefault(prop, def) {\r\n    return is(prop) ? isStringTrue(prop) : def;\r\n}\r\nexport function getStringOrDefault(value, def) {\r\n    return is(value) ? value.toLowerCase() : def;\r\n}\r\n/**\r\n * Checks whether device supports touch\r\n */\r\nexport function isTouchSupported() {\r\n    return ('ontouchstart' in window) ||\r\n        (navigator.maxTouchPoints > 0) ||\r\n        (navigator.msMaxTouchPoints > 0);\r\n}\r\n/**\r\n * Checks whether value is type of string\r\n * @param {any} value - value to be checked\r\n */\r\nexport function isString(value) {\r\n    return typeof value === 'string';\r\n}\r\n/**\r\n * Replaces mask {prefix} with actual value in the string\r\n * @param {string} value - text containg a mask\r\n * @param {string} prefix - value to be put in place of mask\r\n */\r\nexport function replacePrefix(value, prefix) {\r\n    return !is(value) ? value : value.replace(\"{prefix}\", prefix !== null && prefix !== void 0 ? prefix : \"\");\r\n}\r\n/**\r\n * Generates identifier for Cui element\r\n *\r\n * @param element - Cui element selector\r\n * @returns generated identifier\r\n */\r\nexport function generateCUID(element) {\r\n    let starter = is(element) ? element : \"cui-element\";\r\n    return `${starter}-${COMPONENTS_COUNTER.next().value}`;\r\n}\r\n/**\r\n * Generates random string\r\n */\r\nexport function generateRandomString() {\r\n    let rand = getRandomInt(1, 1000);\r\n    let rand2 = getRandomInt(1, 100);\r\n    return `${Math.floor(Math.random() * rand2)}-${Math.floor(rand)}`;\r\n}\r\n/**\r\n * Generates random integer\r\n * @param min - min number\r\n * @param max - max number\r\n * @returns random integer\r\n */\r\nexport function getRandomInt(min, max) {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n/**\r\n * Registers Element as Cui element, initializes handlers, sets component style to document header and sets $cuid\r\n * @param {any} node - document node\r\n * @param {ICuiComponent[]} components -supported components array\r\n * @param {string[]} attributes - supported attributes array\r\n * @param {CuiUtils} utils - Cui Utils instance\r\n */\r\nexport function registerCuiElement(node, components, attributes, utils) {\r\n    let element = node;\r\n    element.$handlers = {};\r\n    let matching = getMatchingAttributes(node, attributes);\r\n    if (is(matching)) {\r\n        element.$cuid = node.hasAttribute(CUID_ATTRIBUTE) ? node.getAttribute(CUID_ATTRIBUTE) : generateCUID(node.tagName);\r\n        node.setAttribute(CUID_ATTRIBUTE, element.$cuid);\r\n        matching.forEach(match => {\r\n            let component = components.find(c => { return c.attribute === match; });\r\n            if (!is(component)) {\r\n                return;\r\n            }\r\n            try {\r\n                //@ts-ignore - component already checked agains undefined\r\n                utils.styleAppender.append(component.getStyle());\r\n                //@ts-ignore - component already checked agains undefined\r\n                let handler = component.get(node, utils);\r\n                //@ts-ignore - component already checked agains undefined\r\n                element.$handlers[component.attribute] = handler;\r\n                //@ts-ignore - component already checked agains undefined\r\n                element.$handlers[component.attribute].handle(parseAttribute(node, component.attribute));\r\n            }\r\n            catch (e) {\r\n                let attr = matching ? matching.join(\", \") : \"\";\r\n                throw new RegisterElementError(`An error occured during [${attr}] initialization: ${e.message}`);\r\n            }\r\n        });\r\n    }\r\n}\r\nexport function addCuiArgument(element, cuiArg, args) {\r\n    if (!are(cuiArg, args, element)) {\r\n        return false;\r\n    }\r\n    if (element.hasAttribute(cuiArg)) {\r\n        return false;\r\n    }\r\n    let argArr = [];\r\n    enumerateObject(args, (arg, value) => {\r\n        argArr.push(`${arg}: ${value}`);\r\n    });\r\n    element.setAttribute(cuiArg, argArr.join(\"; \"));\r\n    return true;\r\n}\r\nexport function* counter() {\r\n    let idx = 0;\r\n    while (true) {\r\n        let reset = yield idx++;\r\n        if (reset || idx > 200000) {\r\n            idx = 0;\r\n        }\r\n    }\r\n}\r\nexport function getHandlerExtendingOrNull(target, fName) {\r\n    if (!is(target.$handlers)) {\r\n        return null;\r\n    }\r\n    for (let handler in target.$handlers) {\r\n        if (target.$handlers.hasOwnProperty(handler)) {\r\n            let h = target.$handlers[handler];\r\n            if (hasFunction(h, fName))\r\n                return h;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Checks whether property exists on the object and it is a function\r\n * @param obj - object\r\n * @param fName - property name\r\n */\r\nexport function hasFunction(obj, fName) {\r\n    return is(obj[fName]) && typeof obj[fName] === 'function';\r\n}\r\n/**\r\n * Gets closest parent element which is a cUI element\r\n * @param element\r\n */\r\nexport function getParentCuiElement(element) {\r\n    if (!is(element)) {\r\n        return undefined;\r\n    }\r\n    let parent = element.parentElement;\r\n    return is(parent) && is(parent.$cuid) ? parent : getParentCuiElement(parent);\r\n}\r\n/**\r\n * Calculates element height by calculating childerns heights\r\n * @param element\r\n */\r\nexport function getChildrenHeight(element) {\r\n    let height = 0;\r\n    if (!element) {\r\n        return -1;\r\n    }\r\n    Array.from(element.children).forEach((child) => {\r\n        height += child.getBoundingClientRect().height;\r\n    });\r\n    return height > 0 ? height + 4 : height;\r\n}\r\nexport function enumerateObject(object, callback) {\r\n    if (!are(object, callback)) {\r\n        return;\r\n    }\r\n    for (let prop in object) {\r\n        if (object.hasOwnProperty(prop)) {\r\n            callback(prop, object[prop]);\r\n        }\r\n    }\r\n}\r\nexport function round(value, decimalPlaces) {\r\n    const multiplier = Math.pow(10, decimalPlaces);\r\n    return Math.floor(value) / multiplier;\r\n}\r\nexport function calculateNextIndex(val, currentIndex, totalLength) {\r\n    let idx = -1;\r\n    switch (val) {\r\n        case 'prev':\r\n            idx = currentIndex <= 0 ? totalLength - 1 : currentIndex - 1;\r\n            break;\r\n        case 'next':\r\n            idx = currentIndex < totalLength - 1 ? currentIndex + 1 : 0;\r\n            break;\r\n        case 'first':\r\n            idx = 0;\r\n            break;\r\n        case 'last':\r\n            idx = totalLength - 1;\r\n        default:\r\n            idx = getIntOrDefault(val, -1);\r\n            break;\r\n    }\r\n    return idx;\r\n}\r\nexport function getFirstMatching(array, callback) {\r\n    let count = array.length;\r\n    if (!array || count === 0) {\r\n        return undefined;\r\n    }\r\n    for (let idx = 0; idx < count; idx++) {\r\n        if (callback(array[idx], idx)) {\r\n            return array[idx];\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexport function mapObject(input, callback) {\r\n    return callback(input);\r\n}\r\nexport function mapObjectArray(input, callback) {\r\n    return input.map((item) => {\r\n        return mapObject(item, callback);\r\n    });\r\n}\r\n/**\r\n * Delays callback execution by specific time. Callback cannot be called again until previous execution finishes or was cancelled\r\n * @param callback - callback to execute\r\n * @param delayTime - time in ms that execution shall be delayed by\r\n * @returns Cancel callback\r\n */\r\nexport function delay(callback, delayTime) {\r\n    if (!are(callback, delayTime)) {\r\n        throw new Error(\"[delay]: Input arguments are not correct\");\r\n    }\r\n    let id = null;\r\n    return function (...args) {\r\n        if (id === null) {\r\n            id = setTimeout(() => {\r\n                callback(...args);\r\n                id = null;\r\n            }, delayTime);\r\n        }\r\n        return function () {\r\n            if (id !== null) {\r\n                clearTimeout(id);\r\n                id = null;\r\n            }\r\n        };\r\n    };\r\n}\r\n","import { counter } from \"./functions\";\r\nexport const CUID_ATTRIBUTE = \"cuid\";\r\nexport const CLASSES = {\r\n    dark: 'dark',\r\n    animProgress: 'animation-progress',\r\n    print: 'print',\r\n    active: 'active',\r\n    swipingOn: \"swiping-on\",\r\n    selectionOff: \"selection-off\",\r\n};\r\nexport const ICONS = {\r\n    close: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M 1.9999999,1.9999999 18,18\\\"></path><path d=\\\"M 18,1.9999999 1.9999999,18\\\"></path></svg>\",\r\n    accordion: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M 5.0000475,7.4490018 10.000024,12.551028 15,7.4490018\\\"></path></svg>\",\r\n    special_menu: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path class=\\\"menu_handle_2\\\" d=\\\"M 1,10 H 19\\\"></path><path class=\\\"menu_handle_1\\\" d=\\\"M 1,4.8571429 H 19\\\"></path><path  class=\\\"menu_handle_3\\\" d=\\\"M 1,15.142857 H 19\\\"></path></svg>\",\r\n    special_fail: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"special-fail\\\" viewBox=\\\"0 0 100 100\\\" width=\\\"100\\\" height=\\\"100\\\"><path class=\\\"circle\\\" d=\\\"M 50,7.000001 A 43,43 0 0 1 92.999999,50 43,43 0 0 1 50,92.999999 43,43 0 0 1 7.0000011,50 43,43 0 0 1 50,7.000001 Z\\\"></path><path class=\\\"arm_1\\\" d=\\\"M 28.536809,28.536809 71.342023,71.342023\\\"></path><path class=\\\"arm_2\\\" d=\\\"M 71.342023,28.536809 28.536809,71.342023\\\"></path></svg>\",\r\n    special_success: \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"special-success\\\" viewBox=\\\"0 0 100 100\\\" width=\\\"100\\\" height=\\\"100\\\"><path class=\\\"circle\\\" d=\\\"M 50,7 A 43,43 0 0 1 93,50 43,43 0 0 1 50,93 43,43 0 0 1 7,50 43,43 0 0 1 50,7 Z\\\"></path><path class=\\\"arm\\\" d=\\\"M 22.988405,48.234784 36.946233,72.410453 75.516456,33.84023\\\"></path></svg>\",\r\n};\r\nexport const COLORS = ['red', 'green', 'blue', 'alpha'];\r\nexport const CSS_APP_BACKGROUND_COLORS = {\r\n    light: '--cui-color-light-app-background',\r\n    dark: '--cui-color-dark-app-background'\r\n};\r\nexport const CSS_COMPONENT_BACKGROUND_COLORS = {\r\n    light: '--cui-color-light-background',\r\n    dark: '--cui-color-dark-background '\r\n};\r\nexport const CSS_COMPONENT_BORDER_COLORS = {\r\n    light: '--cui-color-light-border',\r\n    dark: '--cui-color-dark-border'\r\n};\r\nexport const CSS_THEMES = {\r\n    light: {\r\n        base: '--cui-color-light-base',\r\n        muted: '--cui-color-light-muted',\r\n        active: '--cui-color-light-active'\r\n    },\r\n    dark: {\r\n        base: '--cui-color-dark-base',\r\n        muted: '--cui-color-dark-muted',\r\n        active: '--cui-color-dark-active'\r\n    },\r\n    accent: {\r\n        base: '--cui-color-primary',\r\n        muted: '--cui-color-primary-muted',\r\n        active: '--cui-color-primary-active'\r\n    },\r\n    secondary: {\r\n        base: '--cui-color-secondary',\r\n        muted: '--cui-color-secondary-muted',\r\n        active: '--cui-color-secondary-active'\r\n    },\r\n    success: {\r\n        base: '--cui-color-success',\r\n        muted: '--cui-color-success-muted',\r\n        active: '--cui-color-success-active'\r\n    },\r\n    warning: {\r\n        base: '--cui-color-warning',\r\n        muted: '--cui-color-warning-muted',\r\n        active: '--cui-color-warning-active'\r\n    },\r\n    error: {\r\n        base: '--cui-color-error',\r\n        muted: '--cui-color-error-muted',\r\n        active: '--cui-color-error-active'\r\n    }\r\n};\r\nexport const SCOPE_SELECTOR = \":scope \";\r\nexport const CSS_VARIABLES = {\r\n    fontSize: \"--{prefix}-font-size\",\r\n    lineHeight: \"--{prefix}-line-height\",\r\n    animationTime: \"--{prefix}-animation-time\",\r\n    animationTimeLong: \"--{prefix}-animation-time-long\",\r\n    animationTimeShort: \"--{prefix}-animation-time-short\",\r\n    colorLightAppBackground: \"--{prefix}-color-light-app-background\",\r\n    colorLightBackground: \"--{prefix}-color-light-background\",\r\n    colorLightBorder: \"--{prefix}-color-light-border\",\r\n    colorLightBase: \"--{prefix}-color-light-base\",\r\n    colorLightActive: \"--{prefix}-color-light-active\",\r\n    colorLightMuted: \"--{prefix}-color-light-muted\",\r\n    colorDarkAppBackground: \"--{prefix}-color-dark-app-background\",\r\n    colorDarkBackground: \"--{prefix}-color-dark-background\",\r\n    colorDarkBorder: \"--{prefix}-color-dark-border\",\r\n    colorDarkBase: \"--{prefix}-color-dark-base\",\r\n    colorDarkActive: \"--{prefix}-color-dark-active\",\r\n    colorDarkMuted: \"--{prefix}-color-dark-muted\",\r\n    colorAccent: \"--{prefix}-color-primary\",\r\n    colorAccentActive: \"--{prefix}-color-primary-active\",\r\n    colorAccentMuted: \"--{prefix}-color-primary-muted\",\r\n    colorAccentShade: \"--{prefix}-color-primary-shade\",\r\n    colorAccentShadeDark: \"--{prefix}-color-primary-shade-dark\",\r\n    colorSecondary: \"--{prefix}-color-secondary\",\r\n    colorSecondaryActive: \"--{prefix}-color-secondary-active\",\r\n    colorSecondaryMuted: \"--{prefix}-color-secondary-muted\",\r\n    colorSecondaryShade: \"--{prefix}-color-secondary-shade\",\r\n    colorSecondaryShadeDark: \"--{prefix}-color-secondary-shade-dark\",\r\n    colorWarning: \"--{prefix}-color-warning\",\r\n    colorWarningActive: \"--{prefix}-color-warning-active\",\r\n    colorWarningMuted: \"--{prefix}-color-warning-muted\",\r\n    colorWarningShade: \"--{prefix}-color-warning-shade\",\r\n    colorWarningShadeDark: \"--{prefix}-color-warning-shade-dark\",\r\n    colorSuccess: \"--{prefix}-color-success\",\r\n    colorSuccessActive: \"--{prefix}-color-success-active\",\r\n    colorSuccessMuted: \"--{prefix}-color-success-muted\",\r\n    colorSuccessShade: \"--{prefix}-color-success-shade\",\r\n    colorSuccessShadeDark: \"--{prefix}-color-success-shade-dark\",\r\n    colorError: \"--{prefix}-color-error\",\r\n    colorErrorActive: \"--{prefix}-color-error-active\",\r\n    colorErrorMuted: \"--{prefix}-color-error-muted\",\r\n    colorErrorShade: \"--{prefix}-color-error-shade\",\r\n    colorErrorShadeDark: \"--{prefix}-color-error-shade-dark\",\r\n    inputBackground: \"--{prefix}-input-background-color\",\r\n    colorShade: \"--{prefix}-color-shade\",\r\n    colorShadeDarker: \"--{prefix}-color-shade-darker\",\r\n    colorShadeLight: \"--{prefix}-color-shade-light\",\r\n    colorShadeLighter: \"--{prefix}-color-shade-light-lighter\",\r\n    outline: \"--{prefix}-outline\",\r\n    borderRadius: \"--{prefix}-border-radius\",\r\n    padding: \"--{prefix}-padding\",\r\n    margin: \"--{prefix}-margin\",\r\n    scrollbarWidth: \"--{prefix}-scrollbar-width\",\r\n    componentSpace: \"--{prefix}-component-space\",\r\n    accordionIcon: \"--{prefix}-accordion-icon\"\r\n};\r\nexport class STATICS {\r\n}\r\nSTATICS.logLevel = 'none';\r\nSTATICS.prefix = 'cui';\r\nexport const EVENTS = {\r\n    INSTANCE_INITIALIZED: 'instance-initialized',\r\n    INSTANCE_FINISHED: 'instance-finished',\r\n    RESIZE: \"resize\",\r\n    OPEN: \"open\",\r\n    OPENED: \"opened\",\r\n    CLOSE: \"close\",\r\n    CLOSED: \"closed\",\r\n    TOGGLE: \"toggle\",\r\n    TOGGLED: 'toggled',\r\n    SWITCH: \"switch\",\r\n    SWITCHED: \"switched\",\r\n    ON_SCROLL: \"scroll\",\r\n    TARGET_CHANGE: 'targetchange',\r\n    INTERSECTION: 'intersection',\r\n    KEYDOWN: 'keydown',\r\n    SCROLLBY: 'scrollby',\r\n    WINDOW_CLICK: 'windowclick',\r\n    OFFSET: 'offset',\r\n    PROGRESS_CHANGE: \"progresschange\",\r\n    PROGRESS_CHANGED: \"progresschanged\",\r\n    CHANGE: \"change\",\r\n    CHANGED: \"changed\",\r\n    GLOBAL_MOVE: \"globalmove\",\r\n    MOVE_LOCK: \"movelock\",\r\n    PAUSE: \"pause\",\r\n    PAUSED: \"paused\",\r\n    SORTED: \"sorted\",\r\n    SORT_START: \"sortstart\"\r\n};\r\nexport const OBSERVABLE_SCROLL = \"SCROLL\";\r\nexport const OBSERVABLE_INTERSECTION = \"INTERSECTION\";\r\nexport const COMPONENTS_COUNTER = counter();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _class, _name, _attributeName, _attributeValue;\r\nimport { is, are } from \"./functions\";\r\nexport class CuiClassAction {\r\n    constructor(className) {\r\n        _class.set(this, void 0);\r\n        __classPrivateFieldSet(this, _class, className);\r\n    }\r\n    add(element, utils) {\r\n        if (are(element, __classPrivateFieldGet(this, _class)) && !element.classList.contains(__classPrivateFieldGet(this, _class))) {\r\n            element.classList.add(__classPrivateFieldGet(this, _class));\r\n        }\r\n    }\r\n    remove(element, utils) {\r\n        if (are(element, __classPrivateFieldGet(this, _class)) && element.classList.contains(__classPrivateFieldGet(this, _class))) {\r\n            element.classList.remove(__classPrivateFieldGet(this, _class));\r\n        }\r\n    }\r\n    toggle(element, utils) {\r\n        if (are(element, __classPrivateFieldGet(this, _class))) {\r\n            if (element.classList.contains(__classPrivateFieldGet(this, _class))) {\r\n                element.classList.remove(__classPrivateFieldGet(this, _class));\r\n            }\r\n            else {\r\n                element.classList.add(__classPrivateFieldGet(this, _class));\r\n            }\r\n        }\r\n    }\r\n}\r\n_class = new WeakMap();\r\nexport class CuiInboundAction {\r\n    constructor(name) {\r\n        _name.set(this, void 0);\r\n        __classPrivateFieldSet(this, _name, name);\r\n    }\r\n    add(element, utils) {\r\n        if (!utils) {\r\n            return;\r\n        }\r\n        switch (__classPrivateFieldGet(this, _name)) {\r\n            case 'dark-mode':\r\n                utils.setLightMode('dark');\r\n                break;\r\n            case 'light-mode':\r\n                utils.setLightMode('light');\r\n                break;\r\n        }\r\n    }\r\n    remove(element, utils) {\r\n        if (!utils) {\r\n            return;\r\n        }\r\n        switch (__classPrivateFieldGet(this, _name)) {\r\n            case 'dark-mode':\r\n                utils.setLightMode('light');\r\n                break;\r\n            case 'light-mode':\r\n                utils.setLightMode('dark');\r\n                break;\r\n        }\r\n    }\r\n    toggle(element, utils) {\r\n        if (!utils) {\r\n            return;\r\n        }\r\n        switch (__classPrivateFieldGet(this, _name)) {\r\n            case 'dark-mode':\r\n                this.setDarkMode(utils);\r\n                break;\r\n            case 'light-mode':\r\n                this.setDarkMode(utils);\r\n                break;\r\n        }\r\n    }\r\n    setDarkMode(utils) {\r\n        if (utils.getLightMode() === 'dark') {\r\n            utils.setLightMode('light');\r\n        }\r\n        else {\r\n            utils.setLightMode('dark');\r\n        }\r\n    }\r\n}\r\n_name = new WeakMap();\r\nexport class AttributeAction {\r\n    constructor(attribute) {\r\n        var _a, _b;\r\n        _attributeName.set(this, void 0);\r\n        _attributeValue.set(this, void 0);\r\n        _a = this, _b = this, [({ set value(_c) { __classPrivateFieldSet(_a, _attributeName, _c); } }).value, ({ set value(_c) { __classPrivateFieldSet(_b, _attributeValue, _c); } }).value] = attribute.split(',');\r\n    }\r\n    add(element, utils) {\r\n        if (!are(element, __classPrivateFieldGet(this, _attributeName), __classPrivateFieldGet(this, _attributeValue))) {\r\n            return;\r\n        }\r\n        element.setAttribute(__classPrivateFieldGet(this, _attributeName), __classPrivateFieldGet(this, _attributeValue));\r\n    }\r\n    remove(element, utils) {\r\n        if (!are(element, __classPrivateFieldGet(this, _attributeName), __classPrivateFieldGet(this, _attributeValue))) {\r\n            return;\r\n        }\r\n        if (element.hasAttribute(__classPrivateFieldGet(this, _attributeName))) {\r\n            element.removeAttribute(__classPrivateFieldGet(this, _attributeName));\r\n        }\r\n    }\r\n    toggle(element, utils) {\r\n        if (!are(element, __classPrivateFieldGet(this, _attributeName), __classPrivateFieldGet(this, _attributeValue))) {\r\n            return;\r\n        }\r\n        if (element.hasAttribute(__classPrivateFieldGet(this, _attributeName))) {\r\n            element.removeAttribute(__classPrivateFieldGet(this, _attributeName));\r\n        }\r\n        else {\r\n            element.setAttribute(__classPrivateFieldGet(this, _attributeName), __classPrivateFieldGet(this, _attributeValue));\r\n        }\r\n    }\r\n}\r\n_attributeName = new WeakMap(), _attributeValue = new WeakMap();\r\nexport class DummyAction {\r\n    constructor() {\r\n    }\r\n    add(element, utils) {\r\n    }\r\n    remove(element, utils) {\r\n    }\r\n    toggle(element, utils) {\r\n    }\r\n}\r\nexport class CuiActionsFatory {\r\n    static get(value) {\r\n        if (!is(value)) {\r\n            return new DummyAction();\r\n        }\r\n        let indicator = value[0];\r\n        switch (indicator) {\r\n            case '.':\r\n                return new CuiClassAction(value.substring(1));\r\n            case '~':\r\n                return new CuiInboundAction(value.substring(1));\r\n            case \"&\":\r\n                return new AttributeAction(value.substring(1));\r\n            default:\r\n                return new CuiClassAction(value);\r\n        }\r\n    }\r\n}\r\nexport class CuiActionsListFactory {\r\n    static get(value) {\r\n        if (!is(value)) {\r\n            return [];\r\n        }\r\n        const split = value.split(',');\r\n        return split.map(single => {\r\n            return CuiActionsFatory.get(single.trim());\r\n        });\r\n    }\r\n}\r\n","export class ErrorBase extends Error {\r\n    constructor(name, message) {\r\n        super(message);\r\n        Object.setPrototypeOf(this, new.target.prototype);\r\n        this.name = name;\r\n    }\r\n}\r\nexport class ItemNotFoundError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"ItemNotFoundError\", message);\r\n    }\r\n}\r\nexport class ArgumentError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"ArgumentError\", message);\r\n    }\r\n}\r\nexport class CuiBusError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"ArgumentError\", message);\r\n    }\r\n}\r\nexport class CuiInstanceInitError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"CuiInstanceInitError\", message);\r\n    }\r\n}\r\nexport class CuiScrollSpyOutOfRangeError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"CuiScrollSpyOutOfRangeError\", message);\r\n    }\r\n}\r\nexport class RegisterElementError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"RegisterElementError\", message);\r\n    }\r\n}\r\nexport class AnimatorError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"AnimatorError\", message);\r\n    }\r\n}\r\nexport class CSSVariableError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"CSSVariableError\", message);\r\n    }\r\n}\r\nexport class CuiColorError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"CuiColorError\", message);\r\n    }\r\n}\r\nexport class CuiPositionError extends ErrorBase {\r\n    constructor(message) {\r\n        super(\"CuiPositionError\", message);\r\n    }\r\n}\r\n","export class CuiLogger {\r\n    constructor(name, level) {\r\n        this.level = level;\r\n        this.component = name;\r\n        this.id = \"-\";\r\n    }\r\n    setLevel(level) {\r\n        this.level = level;\r\n    }\r\n    setId(id) {\r\n        this.id = id;\r\n    }\r\n    debug(message, functionName) {\r\n        if (this.level === 'debug') {\r\n            console.log(this.prepString(message, \"debug\", functionName));\r\n        }\r\n    }\r\n    error(message, functionName) {\r\n        if (this.level === 'error' || this.level === 'debug' || this.level === 'warning')\r\n            console.error(this.prepString(message, \"error\", functionName));\r\n    }\r\n    warning(message, functionName) {\r\n        if (this.level === 'warning' || this.level === 'debug')\r\n            console.warn(this.prepString(message, \"warning\", functionName));\r\n    }\r\n    exception(e, functionName) {\r\n        console.error(this.prepString(`An exception occured: ${e.name}: ${e.message}`, \"exception\", functionName));\r\n        if (this.level === 'debug')\r\n            console.error(e.stack);\r\n    }\r\n    performance(callback, functionName) {\r\n        if (this.level !== 'debug') {\r\n            return;\r\n        }\r\n        let start = Date.now();\r\n        callback();\r\n        console.log(this.prepString(`Performance measure: ${Date.now() - start}ms`, \"performance\", functionName));\r\n    }\r\n    prepString(message, level, functionName) {\r\n        return `[${new Date().toLocaleString()}][${level}][${this.component}][${functionName !== null && functionName !== void 0 ? functionName : '-'}][${this.id}][${message}]`;\r\n    }\r\n}\r\n","import { CuiLogger } from \"../utils/logger\";\r\nimport { STATICS } from \"../utils/statics\";\r\n/**\r\n *\r\n */\r\nexport class CuiLoggerFactory {\r\n    /**\r\n     * Gets new instance of component focused logger\r\n     * @param name - component name\r\n     */\r\n    static get(name, logLevel) {\r\n        return new CuiLogger(name, logLevel !== null && logLevel !== void 0 ? logLevel : STATICS.logLevel);\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _id, _classes, _attributes, _tag;\r\nimport { is, enumerateObject } from \"../utils/functions\";\r\nexport class ElementBuilder {\r\n    constructor(tag) {\r\n        _id.set(this, void 0);\r\n        _classes.set(this, void 0);\r\n        _attributes.set(this, void 0);\r\n        _tag.set(this, void 0);\r\n        __classPrivateFieldSet(this, _tag, tag);\r\n        __classPrivateFieldSet(this, _classes, []);\r\n        __classPrivateFieldSet(this, _attributes, undefined);\r\n        __classPrivateFieldSet(this, _id, undefined);\r\n    }\r\n    setId(id) {\r\n        __classPrivateFieldSet(this, _id, id);\r\n        return this;\r\n    }\r\n    setClasses(...classList) {\r\n        __classPrivateFieldSet(this, _classes, classList);\r\n        return this;\r\n    }\r\n    setAttributes(attributes) {\r\n        __classPrivateFieldSet(this, _attributes, attributes);\r\n        return this;\r\n    }\r\n    build(innerHTML) {\r\n        let element = document.createElement(__classPrivateFieldGet(this, _tag));\r\n        if (is(__classPrivateFieldGet(this, _id))) {\r\n            // @ts-ignore id is checked\r\n            element.id = __classPrivateFieldGet(this, _id);\r\n        }\r\n        if (is(__classPrivateFieldGet(this, _classes))) {\r\n            element.classList.add(...__classPrivateFieldGet(this, _classes));\r\n        }\r\n        if (is(__classPrivateFieldGet(this, _attributes))) {\r\n            // @ts-ignore attributes are checked\r\n            enumerateObject(__classPrivateFieldGet(this, _attributes), (attr, value) => {\r\n                element.setAttribute(attr, value);\r\n            });\r\n        }\r\n        if (is(innerHTML)) {\r\n            // @ts-ignore innerHTML checked already\r\n            element.innerHTML = innerHTML;\r\n        }\r\n        return element;\r\n    }\r\n}\r\n_id = new WeakMap(), _classes = new WeakMap(), _attributes = new WeakMap(), _tag = new WeakMap();\r\n","export const SWIPE_ANIMATIONS_DEFINITIONS = {\r\n    \"slide\": {\r\n        current: {\r\n            left: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 0,\r\n                        to: -100,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            },\r\n            right: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 0,\r\n                        to: 100,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        previous: {\r\n            left: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 100,\r\n                        to: 0,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            },\r\n            right: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: -100,\r\n                        to: 0,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    fade: {\r\n        current: {\r\n            left: {\r\n                opacity: {\r\n                    from: 1,\r\n                    to: 0\r\n                }\r\n            },\r\n            right: {\r\n                opacity: {\r\n                    from: 1,\r\n                    to: 0\r\n                }\r\n            }\r\n        },\r\n        previous: {\r\n            left: {\r\n                opacity: {\r\n                    from: 0,\r\n                    to: 1\r\n                }\r\n            },\r\n            right: {\r\n                opacity: {\r\n                    from: 0,\r\n                    to: 1\r\n                }\r\n            }\r\n        }\r\n    },\r\n    push: {\r\n        current: {\r\n            left: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 0,\r\n                        to: -10,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            },\r\n            right: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 0,\r\n                        to: 10,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        previous: {\r\n            left: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: 100,\r\n                        to: 0,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            },\r\n            right: {\r\n                transform: {\r\n                    translateX: {\r\n                        from: -100,\r\n                        to: 0,\r\n                        unit: \"%\"\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _element, _onEvent, _isLocked, _isAttached, _preventDefault, _target;\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiMoveEventListener {\r\n    constructor(element) {\r\n        _element.set(this, void 0);\r\n        _onEvent.set(this, void 0);\r\n        _isLocked.set(this, void 0);\r\n        _isAttached.set(this, void 0);\r\n        _preventDefault.set(this, void 0);\r\n        _target.set(this, void 0);\r\n        __classPrivateFieldSet(this, _isLocked, false);\r\n        __classPrivateFieldSet(this, _element, element !== null && element !== void 0 ? element : document.body);\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n        __classPrivateFieldSet(this, _preventDefault, false);\r\n        __classPrivateFieldSet(this, _onEvent, undefined);\r\n        __classPrivateFieldSet(this, _target, undefined);\r\n        this.onMouseDown = this.onMouseDown.bind(this);\r\n        this.onMouseUp = this.onMouseUp.bind(this);\r\n        this.onMouseMove = this.onMouseMove.bind(this);\r\n        this.onTouchStart = this.onTouchStart.bind(this);\r\n        this.onTouchEnd = this.onTouchEnd.bind(this);\r\n        this.onTouchMove = this.onTouchMove.bind(this);\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _onEvent, callback);\r\n    }\r\n    setTarget(element) {\r\n        __classPrivateFieldSet(this, _target, element);\r\n    }\r\n    isInProgress() {\r\n        return __classPrivateFieldGet(this, _isLocked);\r\n    }\r\n    preventDefault(flag) {\r\n        __classPrivateFieldSet(this, _preventDefault, flag);\r\n    }\r\n    attach() {\r\n        if (__classPrivateFieldGet(this, _isAttached)) {\r\n            return;\r\n        }\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).addEventListener('mousedown', this.onMouseDown, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).addEventListener('mouseup', this.onMouseUp, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).addEventListener('mousemove', this.onMouseMove, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).addEventListener('touchstart', this.onTouchStart, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).addEventListener('touchend', this.onTouchEnd, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).addEventListener('touchmove', this.onTouchMove, { passive: false });\r\n        __classPrivateFieldSet(this, _isAttached, true);\r\n    }\r\n    detach() {\r\n        console.log(\"On detach\");\r\n        if (!__classPrivateFieldGet(this, _isAttached)) {\r\n            return;\r\n        }\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).removeEventListener('mousedown', this.onMouseDown, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).removeEventListener('mouseup', this.onMouseUp, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).removeEventListener('mousemove', this.onMouseMove, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).removeEventListener('touchstart', this.onTouchStart, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).removeEventListener('touchend', this.onTouchEnd, { passive: false });\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _element).removeEventListener('touchmove', this.onTouchMove, { passive: false });\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n    }\r\n    isAttached() {\r\n        return __classPrivateFieldGet(this, _isAttached);\r\n    }\r\n    onMouseDown(ev) {\r\n        if (__classPrivateFieldGet(this, _isLocked)) {\r\n            return;\r\n        }\r\n        if (__classPrivateFieldGet(this, _target) && !__classPrivateFieldGet(this, _target).contains(ev.target)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _isLocked, true);\r\n        this.publishMouseEvent(\"down\", ev);\r\n    }\r\n    onMouseUp(ev) {\r\n        if (!__classPrivateFieldGet(this, _isLocked)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _isLocked, false);\r\n        this.publishMouseEvent(\"up\", ev);\r\n    }\r\n    onMouseMove(ev) {\r\n        if (__classPrivateFieldGet(this, _isLocked)) {\r\n            this.publishMouseEvent(\"move\", ev);\r\n        }\r\n    }\r\n    onTouchStart(ev) {\r\n        if (__classPrivateFieldGet(this, _isLocked)) {\r\n            return;\r\n        }\r\n        if (__classPrivateFieldGet(this, _target) && !__classPrivateFieldGet(this, _target).contains(ev.target)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _isLocked, true);\r\n        this.publishTouchEvent('down', ev);\r\n    }\r\n    onTouchEnd(ev) {\r\n        if (!__classPrivateFieldGet(this, _isLocked)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _isLocked, false);\r\n        this.publishTouchEvent('up', ev);\r\n    }\r\n    onTouchMove(ev) {\r\n        if (__classPrivateFieldGet(this, _isLocked)) {\r\n            this.publishTouchEvent('move', ev);\r\n        }\r\n    }\r\n    publishMouseEvent(type, ev) {\r\n        if (__classPrivateFieldGet(this, _preventDefault) && ev.cancelable) {\r\n            ev.preventDefault();\r\n        }\r\n        if (!is(__classPrivateFieldGet(this, _onEvent))) {\r\n            return;\r\n        }\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _onEvent).call(this, {\r\n            type: type,\r\n            x: ev.clientX,\r\n            y: ev.clientY,\r\n            moveX: ev.movementX,\r\n            moveY: ev.movementY,\r\n            target: ev.target,\r\n            event: ev\r\n        });\r\n    }\r\n    publishTouchEvent(type, ev) {\r\n        if (__classPrivateFieldGet(this, _preventDefault) && ev.cancelable)\r\n            ev.preventDefault();\r\n        if (!is(__classPrivateFieldGet(this, _onEvent))) {\r\n            return;\r\n        }\r\n        let touch = null;\r\n        if (ev.touches.length > 0) {\r\n            touch = ev.touches[0];\r\n        }\r\n        else if (ev.changedTouches.length > 0) {\r\n            touch = ev.changedTouches[0];\r\n        }\r\n        // @ts-ignore - already checked\r\n        __classPrivateFieldGet(this, _onEvent).call(this, {\r\n            event: ev,\r\n            type: type,\r\n            target: ev.target,\r\n            //@ts-ignore\r\n            x: is(touch) ? touch.clientX : -1,\r\n            //@ts-ignore\r\n            y: is(touch) ? touch.clientY : -1,\r\n            moveX: -1,\r\n            moveY: -1\r\n        });\r\n    }\r\n}\r\n_element = new WeakMap(), _onEvent = new WeakMap(), _isLocked = new WeakMap(), _isAttached = new WeakMap(), _preventDefault = new WeakMap(), _target = new WeakMap();\r\n","export class CuiSetup {\r\n    constructor() {\r\n        this.autoLightMode = false;\r\n        this.scrollThreshold = 20;\r\n        this.resizeThreshold = 20;\r\n        this.prefix = \"cui\";\r\n        this.plugins = {};\r\n    }\r\n    fromInit(init) {\r\n        var _a;\r\n        this.prefix = (_a = init.prefix) !== null && _a !== void 0 ? _a : \"cui\";\r\n        this.logLevel = init.logLevel;\r\n        this.cacheSize = init.cacheSize;\r\n        this.autoLightMode = init.autoLightMode;\r\n        this.animationTime = init.animationTime;\r\n        this.animationTimeShort = init.animationTimeShort;\r\n        this.animationTimeLong = init.animationTimeLong;\r\n        this.scrollThreshold = init.scrollThreshold;\r\n        this.resizeThreshold = init.resizeThreshold;\r\n        return this;\r\n    }\r\n}\r\nexport class CuiSetupInit {\r\n    constructor() {\r\n        this.prefix = 'cui';\r\n        this.app = '$cui';\r\n        this.logLevel = 'warning';\r\n        this.interaction = 'async';\r\n        this.animationTime = 300;\r\n        this.animationTimeShort = 150;\r\n        this.animationTimeLong = 500;\r\n        this.cacheSize = 500;\r\n        this.autoLightMode = false;\r\n        this.scrollThreshold = 20;\r\n        this.resizeThreshold = 20;\r\n        this.root = document.body;\r\n        this.busSetup = undefined;\r\n        this.development = undefined;\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _observer, _options, _element, _components, _attributes, _utils, _queryString, _isObserving, _observer_1, _element_1, _disabled, _options_1;\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\nimport { is, are, registerCuiElement, joinAttributesForQuery, parseAttribute } from \"../utils/functions\";\r\nexport class CuiMutationObserver {\r\n    constructor(element, utils) {\r\n        _observer.set(this, void 0);\r\n        _options.set(this, void 0);\r\n        _element.set(this, void 0);\r\n        _components.set(this, void 0);\r\n        _attributes.set(this, void 0);\r\n        _utils.set(this, void 0);\r\n        _queryString.set(this, void 0);\r\n        __classPrivateFieldSet(this, _observer, undefined);\r\n        this.plugins = undefined;\r\n        __classPrivateFieldSet(this, _options, undefined);\r\n        __classPrivateFieldSet(this, _element, element);\r\n        this._log = CuiLoggerFactory.get('CuiMutationObserver');\r\n        __classPrivateFieldSet(this, _components, []);\r\n        __classPrivateFieldSet(this, _attributes, []);\r\n        __classPrivateFieldSet(this, _utils, utils);\r\n        __classPrivateFieldSet(this, _queryString, \"\");\r\n    }\r\n    setPlugins(plugins) {\r\n        this.plugins = plugins;\r\n        return this;\r\n    }\r\n    setComponents(components) {\r\n        __classPrivateFieldSet(this, _components, components);\r\n        return this;\r\n    }\r\n    setAttributes(attributes) {\r\n        __classPrivateFieldSet(this, _options, {\r\n            attributes: true,\r\n            subtree: true,\r\n            childList: true,\r\n            attributeFilter: attributes\r\n        });\r\n        __classPrivateFieldSet(this, _attributes, attributes);\r\n        __classPrivateFieldSet(this, _queryString, joinAttributesForQuery(attributes));\r\n        return this;\r\n    }\r\n    start() {\r\n        this._log.debug(\"Starting\");\r\n        if (!__classPrivateFieldGet(this, _options)) {\r\n            this._log.error(\"Cannot start - options are not defined\");\r\n            return this;\r\n        }\r\n        __classPrivateFieldSet(this, _observer, new MutationObserver(this.mutationCallback.bind(this)));\r\n        __classPrivateFieldGet(this, _observer).observe(__classPrivateFieldGet(this, _element), __classPrivateFieldGet(this, _options));\r\n        this._log.debug(\"Started\");\r\n        return this;\r\n    }\r\n    stop() {\r\n        this._log.debug(\"Stopping\");\r\n        if (!__classPrivateFieldGet(this, _observer)) {\r\n            this._log.debug(\"Observer not available\");\r\n            return this;\r\n        }\r\n        __classPrivateFieldGet(this, _observer).disconnect();\r\n        __classPrivateFieldSet(this, _observer, undefined);\r\n        this._log.debug(\"Stopped\");\r\n        return this;\r\n    }\r\n    mutationCallback(mutations, observer) {\r\n        mutations.forEach((mutation) => {\r\n            switch (mutation.type) {\r\n                case 'attributes':\r\n                    const item = mutation.target;\r\n                    if (is(mutation.attributeName)) {\r\n                        // @ts-ignore - attribute name is checked\r\n                        if (are(item.$handlers, item.$handlers[mutation.attributeName])) {\r\n                            // @ts-ignore - attribute name is checked\r\n                            item.$handlers[mutation.attributeName].refresh(parseAttribute(item, mutation.attributeName));\r\n                        }\r\n                    }\r\n                    else {\r\n                        this._log.error(\"Mutation attribute doesn't not exisits\");\r\n                    }\r\n                    break;\r\n                case 'childList':\r\n                    this.handleChildListMutation(mutation);\r\n                    break;\r\n            }\r\n            if (is(this.plugins)) {\r\n                // @ts-ignore plugins is defined here\r\n                this.plugins.onMutation(mutation).then(() => {\r\n                    //\r\n                });\r\n            }\r\n        });\r\n    }\r\n    handleChildListMutation(mutation) {\r\n        const addedLen = mutation.addedNodes.length;\r\n        const removedLen = mutation.removedNodes.length;\r\n        if (addedLen > 0) {\r\n            this._log.debug(\"Registering added nodes: \" + addedLen);\r\n            this.handleAddedNodes(mutation.addedNodes);\r\n        }\r\n        else if (removedLen > 0) {\r\n            this._log.debug(\"Removing nodes: \" + removedLen);\r\n            this.handleRemovedNodes(mutation.removedNodes);\r\n        }\r\n    }\r\n    handleAddedNodes(nodes) {\r\n        nodes.forEach((node) => {\r\n            try {\r\n                registerCuiElement(node, __classPrivateFieldGet(this, _components), __classPrivateFieldGet(this, _attributes), __classPrivateFieldGet(this, _utils));\r\n                let childrens = node.hasChildNodes() ? node.querySelectorAll(__classPrivateFieldGet(this, _queryString)) : null;\r\n                if (is(childrens)) {\r\n                    childrens.forEach((child) => {\r\n                        registerCuiElement(child, __classPrivateFieldGet(this, _components), __classPrivateFieldGet(this, _attributes), __classPrivateFieldGet(this, _utils));\r\n                    });\r\n                }\r\n            }\r\n            catch (e) {\r\n                this._log.exception(e);\r\n            }\r\n        });\r\n    }\r\n    handleRemovedNodes(nodes) {\r\n        nodes.forEach((node) => {\r\n            this.destroySingleElement(node);\r\n            let childrens = node.hasChildNodes() ? node.querySelectorAll(__classPrivateFieldGet(this, _queryString)) : null;\r\n            if (is(childrens)) {\r\n                childrens.forEach((child) => {\r\n                    this.destroySingleElement(child);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    destroySingleElement(node) {\r\n        let element = node;\r\n        if (element.$handlers) {\r\n            for (let name in element.$handlers) {\r\n                if (element.$handlers.hasOwnProperty(name)) {\r\n                    try {\r\n                        element.$handlers[name].destroy();\r\n                    }\r\n                    catch (e) {\r\n                        this._log.exception(e, 'remove - ' + name);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n_observer = new WeakMap(), _options = new WeakMap(), _element = new WeakMap(), _components = new WeakMap(), _attributes = new WeakMap(), _utils = new WeakMap(), _queryString = new WeakMap();\r\nexport class CuiComponentMutationHandler {\r\n    constructor(target) {\r\n        _isObserving.set(this, void 0);\r\n        _observer_1.set(this, void 0);\r\n        _element_1.set(this, void 0);\r\n        _disabled.set(this, void 0);\r\n        _options_1.set(this, {\r\n            childList: true,\r\n            subtree: true\r\n        });\r\n        __classPrivateFieldSet(this, _observer_1, undefined);\r\n        __classPrivateFieldSet(this, _disabled, false);\r\n        __classPrivateFieldSet(this, _isObserving, false);\r\n        __classPrivateFieldSet(this, _element_1, target);\r\n    }\r\n    observe() {\r\n        if (!__classPrivateFieldGet(this, _isObserving) && !__classPrivateFieldGet(this, _disabled) && __classPrivateFieldGet(this, _observer_1)) {\r\n            __classPrivateFieldGet(this, _observer_1).observe(__classPrivateFieldGet(this, _element_1), __classPrivateFieldGet(this, _options_1));\r\n            __classPrivateFieldSet(this, _isObserving, true);\r\n        }\r\n    }\r\n    unobserve() {\r\n        if (__classPrivateFieldGet(this, _isObserving) && __classPrivateFieldGet(this, _observer_1)) {\r\n            __classPrivateFieldGet(this, _observer_1).disconnect();\r\n            __classPrivateFieldSet(this, _isObserving, false);\r\n        }\r\n    }\r\n    isObserving() {\r\n        return __classPrivateFieldGet(this, _isObserving);\r\n    }\r\n    disable(flag) {\r\n        __classPrivateFieldSet(this, _disabled, flag);\r\n        if (__classPrivateFieldGet(this, _disabled)) {\r\n            this.unobserve();\r\n        }\r\n    }\r\n    onMutation(callback) {\r\n        if (__classPrivateFieldGet(this, _isObserving))\r\n            this.unobserve();\r\n        __classPrivateFieldSet(this, _observer_1, new MutationObserver(callback));\r\n    }\r\n}\r\n_isObserving = new WeakMap(), _observer_1 = new WeakMap(), _element_1 = new WeakMap(), _disabled = new WeakMap(), _options_1 = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _interactions;\r\nimport { CLASSES } from \"../utils/statics\";\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiActionsHelper {\r\n    constructor(interactions) {\r\n        _interactions.set(this, void 0);\r\n        __classPrivateFieldSet(this, _interactions, interactions);\r\n    }\r\n    performAction(target, action, timeout, callback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise((resolve) => {\r\n                __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                    action.add(target);\r\n                    target.classList.add(CLASSES.animProgress);\r\n                    setTimeout(() => {\r\n                        __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                            action.remove(target);\r\n                            target.classList.remove(CLASSES.animProgress);\r\n                            if (callback)\r\n                                callback();\r\n                            resolve(true);\r\n                        }, null);\r\n                    }, timeout);\r\n                }, null);\r\n            });\r\n        });\r\n    }\r\n    performActions(target, actions, timeout, callback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise((resolve) => {\r\n                __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                    actions.forEach(x => x.add(target));\r\n                    target.classList.add(CLASSES.animProgress);\r\n                    setTimeout(() => {\r\n                        __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                            actions.forEach(x => x.remove(target));\r\n                            target.classList.remove(CLASSES.animProgress);\r\n                            if (callback)\r\n                                callback();\r\n                            resolve(true);\r\n                        }, null);\r\n                    }, timeout);\r\n                }, null);\r\n            });\r\n        });\r\n    }\r\n    performSwitchAction(inTarget, outTarget, inAction, outAction, onFinish, timeout) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            return new Promise((resolve) => {\r\n                __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                    inAction.forEach(x => x.add(inTarget));\r\n                    inTarget.classList.add(CLASSES.animProgress);\r\n                    if (is(outTarget)) {\r\n                        //@ts-ignore\r\n                        outAction.forEach(x => x.add(outTarget));\r\n                        //@ts-ignore\r\n                        outTarget.classList.add(CLASSES.animProgress);\r\n                    }\r\n                    setTimeout(() => {\r\n                        __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                            inAction.forEach(x => x.remove(inTarget));\r\n                            inTarget.classList.remove(CLASSES.animProgress);\r\n                            if (is(outTarget)) {\r\n                                //@ts-ignore\r\n                                outAction.forEach(x => x.remove(outTarget));\r\n                                //@ts-ignore\r\n                                outTarget.classList.remove(CLASSES.animProgress);\r\n                            }\r\n                            onFinish();\r\n                            resolve(true);\r\n                        }, null);\r\n                    }, timeout);\r\n                }, null);\r\n            });\r\n        });\r\n    }\r\n}\r\n_interactions = new WeakMap();\r\n","export const CUI_LIGHT_COMPONENTS_VERSION = \"0.2.1\";\r\n","export const CUI_LIGHT_PLUGINS_VERSION = \"0.2.1\";\r\n","export const CUI_CORE_VERSION = \"0.2.1\";\r\n// export * from \"./models/colors\";\r\n// export * from \"./models/errors\";\r\n// export * from \"./models/events\";\r\n// export * from \"./models/interfaces\";\r\n// export * from \"./models/setup\";\r\n// export * from \"./models/utils\";\r\n// // Utils\r\n// export * from \"./utils/actions\";\r\n// export * from \"./utils/dictionary\";\r\n// export * from \"./utils/functions\";\r\n// export * from \"./utils/interactions\";\r\n// export * from \"./utils/logger\";\r\n// export * from \"./utils/types\";\r\n// export * from \"./utils/statics\";\r\n// export * from \"./styles/appender\";\r\n// // Factories\r\n// export * from \"./factories/logger\";\r\n// export * from \"./factories/interactions\";\r\n// //Helpers\r\n// export * from \"./helpers/helpers\";\r\n// // BUS\r\n// export * from \"./bus/executors\";\r\n// export * from \"./bus/handlers\";\r\n// export * from \"./bus/bus\";\r\n// // Listeners\r\n// export * from \"./listeners/keys\";\r\n// export * from \"./listeners/media\";\r\n// export * from \"./listeners/scroll\";\r\n","export class AriaAttributes {\r\n    static setLabel(element, label) {\r\n        if (!element.hasAttribute('aria-label')) {\r\n            element.setAttribute('aria-label', label);\r\n        }\r\n    }\r\n    static setAria(element, attr, value) {\r\n        if (!element.hasAttribute(attr)) {\r\n            element.setAttribute(attr, value);\r\n        }\r\n    }\r\n    static removeAria(element, attr) {\r\n        if (element.hasAttribute(attr)) {\r\n            element.removeAttribute(attr);\r\n        }\r\n    }\r\n}\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _interactions, _emittedEvents, _attribute, _openEventId, _closeEventId, _keyCloseEventId, _openAct, _closeAct, _mutionHandler;\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\nimport { CuiComponentMutationHandler } from \"../observers/mutations\";\r\nimport { AriaAttributes } from \"../utils/aria\";\r\nimport { CuiActionsHelper } from \"../helpers/helpers\";\r\nimport { CuiActionsListFactory } from \"../utils/actions\";\r\nimport { is, getActiveClass, clone } from \"../utils/functions\";\r\nimport { EVENTS } from \"../utils/statics\";\r\nexport class ComponentHelper {\r\n    constructor(interactions) {\r\n        _interactions.set(this, void 0);\r\n        __classPrivateFieldSet(this, _interactions, interactions);\r\n    }\r\n    hasClass(cls, element) {\r\n        return cls && element.classList.contains(cls) ? true : false;\r\n    }\r\n    setClass(cls, element) {\r\n        this.setClasses([cls], element);\r\n    }\r\n    setClasses(classes, element) {\r\n        if (element) {\r\n            element.classList.add(...classes);\r\n        }\r\n    }\r\n    setClassesAs(element, ...classes) {\r\n        __classPrivateFieldGet(this, _interactions).mutate(this.setClasses, this, classes, element);\r\n    }\r\n    removeClass(cls, element) {\r\n        this.removeClasses([cls], element);\r\n    }\r\n    removeClasses(classes, element) {\r\n        if (element) {\r\n            element.classList.remove(...classes);\r\n        }\r\n    }\r\n    removeClassesAs(element, ...classes) {\r\n        __classPrivateFieldGet(this, _interactions).mutate(this.removeClasses, this, classes, element);\r\n    }\r\n    removeAttribute(attributeName, element) {\r\n        if (element && element.hasAttribute(attributeName))\r\n            element.removeAttribute(attributeName);\r\n    }\r\n    setStyle(element, property, value) {\r\n        if (element && element[\"style\"] && is(value)) {\r\n            element.style[property] = value;\r\n        }\r\n    }\r\n}\r\n_interactions = new WeakMap();\r\nexport class CuiComponentBase {\r\n    constructor(componentName, element, utils) {\r\n        _emittedEvents.set(this, void 0);\r\n        this._log = CuiLoggerFactory.get(componentName);\r\n        this.utils = utils;\r\n        this.element = element;\r\n        this.cuid = element.$cuid;\r\n        this.isLocked = false;\r\n        this._log.setId(this.cuid);\r\n        this.activeClassName = getActiveClass(utils.setup.prefix);\r\n        this.helper = new ComponentHelper(utils.interactions);\r\n        __classPrivateFieldSet(this, _emittedEvents, []);\r\n        this.componentName = componentName;\r\n    }\r\n    mutate(callback, ...args) {\r\n        this.utils.interactions.mutate(callback, this, ...args);\r\n    }\r\n    fetch(callback, ...args) {\r\n        this.utils.interactions.fetch(callback, this, ...args);\r\n    }\r\n    getEventName(name) {\r\n        return [name, this.cuid].join('-');\r\n    }\r\n    /**\r\n     * Emits event using passed data and cuid of the element\r\n     * NOTE: Don't use it to emit global events\r\n     * @param event Event name\r\n     * @param data Data to emit\r\n     */\r\n    emitEvent(event, ...data) {\r\n        if (!__classPrivateFieldGet(this, _emittedEvents).includes(event))\r\n            __classPrivateFieldGet(this, _emittedEvents).push(event);\r\n        this.utils.bus.emit(event, this.cuid, ...data);\r\n    }\r\n    onEvent(event, callback) {\r\n        return this.utils.bus.on(event, callback, this.element);\r\n    }\r\n    detachEvent(event, id) {\r\n        if (id != null) {\r\n            this.utils.bus.detach(event, id);\r\n            id = \"\";\r\n        }\r\n    }\r\n    getId() {\r\n        return this.cuid;\r\n    }\r\n    checkLockAndWarn(fName) {\r\n        if (this.isLocked) {\r\n            this._log.warning(\"Component is locked\", fName);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Helper which checks whether element has an active flag set\r\n     */\r\n    isActive() {\r\n        return this.element.classList.contains(this.activeClassName);\r\n    }\r\n    detachEmiitedEvents() {\r\n        __classPrivateFieldGet(this, _emittedEvents).forEach(event => {\r\n            this.utils.bus.detachByCuid(event, this.cuid);\r\n            this._log.debug(\"Detaching event: \" + event + \" on component delete\");\r\n        });\r\n    }\r\n    registerInDebug() {\r\n        this.utils.development.registerElement(this.element, this.cuid, this.componentName);\r\n    }\r\n    removeFromDebug() {\r\n        this.utils.development.unregisterElement(this.cuid, this.componentName);\r\n    }\r\n    setDebugProperty(name, value) {\r\n        this.utils.development.setProperty(this.cuid, this.componentName, name, value);\r\n    }\r\n    logInfo(message, functionName) {\r\n        this._log.debug(message, functionName);\r\n        this.utils.development.pushState(this.cuid, this.componentName, \"info\", message, functionName);\r\n    }\r\n    logWarning(message, functionName) {\r\n        this._log.warning(message, functionName);\r\n        this.utils.development.pushState(this.cuid, this.componentName, \"warning\", message, functionName);\r\n    }\r\n    pushDebugState(type, message, functionName) {\r\n        this.utils.development.pushState(this.cuid, this.componentName, type, message, functionName);\r\n    }\r\n    logError(message, functionName, error) {\r\n        this._log.error(message, functionName);\r\n        if (error) {\r\n            this._log.exception(error, functionName);\r\n        }\r\n        this.utils.development.pushState(this.cuid, this.componentName, \"error\", message, functionName);\r\n    }\r\n}\r\n_emittedEvents = new WeakMap();\r\nexport class CuiHandlerBase extends CuiComponentBase {\r\n    constructor(componentName, element, attribute, args, utils) {\r\n        super(componentName, element, utils);\r\n        _attribute.set(this, void 0);\r\n        this.args = args;\r\n        this.actionsHelper = new CuiActionsHelper(utils.interactions);\r\n        this.prevArgs = undefined;\r\n        this.isInitialized = false;\r\n        __classPrivateFieldSet(this, _attribute, attribute);\r\n    }\r\n    handle(args) {\r\n        this.logInfo(\"Init\", 'handle');\r\n        if (this.isInitialized) {\r\n            this.logWarning(\"Trying to initialize component again\", 'handle');\r\n            return;\r\n        }\r\n        this.args.parse(args);\r\n        if (!this.element.classList.contains(__classPrivateFieldGet(this, _attribute))) {\r\n            this.element.classList.add(__classPrivateFieldGet(this, _attribute));\r\n        }\r\n        this.registerInDebug();\r\n        this.onHandle();\r\n        this.isInitialized = true;\r\n    }\r\n    refresh(args) {\r\n        this.logInfo(\"Update\", 'refresh');\r\n        if (!this.isInitialized) {\r\n            this.logError(\"Cannot update not initialized component\", 'refresh');\r\n            return;\r\n        }\r\n        this.prevArgs = clone(this.args);\r\n        this.args.parse(args);\r\n        this.pushDebugState(\"info\", \"Component update\", 'refresh');\r\n        this.onRefresh();\r\n    }\r\n    destroy() {\r\n        this.logInfo(\"Destroy\", \"destroy\");\r\n        this.onRemove();\r\n        this.detachEmiitedEvents();\r\n        this.removeFromDebug();\r\n        this.isInitialized = false;\r\n    }\r\n}\r\n_attribute = new WeakMap();\r\nexport class CuiHandler extends CuiHandlerBase {\r\n    constructor(componentName, element, attribute, args, utils) {\r\n        super(componentName, element, attribute, args, utils);\r\n    }\r\n    onHandle() {\r\n        this.onInit();\r\n    }\r\n    onRefresh() {\r\n        this.onUpdate();\r\n    }\r\n    onRemove() {\r\n        this.onDestroy();\r\n    }\r\n    /**\r\n     * Helper created for elements that animate - perfroms an action *add*, after timeout it performs *remove*.\r\n     *\r\n     * @param action - action to perfrom\r\n     * @param timeout - timeout specified for action removal\r\n     * @param onFinish - callback to be performed after action is finished after removal\r\n     * @param callback - optional - callback to be executed in mutation on action removal, e.g. additional DOM changes on element\r\n     */\r\n    performAction(actions, timeout, onFinish, callback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (yield this.actionsHelper.performActions(this.element, actions, timeout, callback)) {\r\n                onFinish();\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n    }\r\n}\r\nexport class CuiInteractableHandler extends CuiHandlerBase {\r\n    constructor(componentName, element, attribute, args, utils) {\r\n        super(componentName, element, attribute, args, utils);\r\n        _openEventId.set(this, void 0);\r\n        _closeEventId.set(this, void 0);\r\n        _keyCloseEventId.set(this, void 0);\r\n        _openAct.set(this, void 0);\r\n        _closeAct.set(this, void 0);\r\n        __classPrivateFieldSet(this, _openEventId, null);\r\n        __classPrivateFieldSet(this, _closeEventId, null);\r\n        __classPrivateFieldSet(this, _keyCloseEventId, null);\r\n        __classPrivateFieldSet(this, _closeAct, []);\r\n        __classPrivateFieldSet(this, _openAct, []);\r\n    }\r\n    onHandle() {\r\n        __classPrivateFieldSet(this, _openEventId, this.onEvent(EVENTS.OPEN, this.openFromEvent.bind(this)));\r\n        __classPrivateFieldSet(this, _closeEventId, this.onEvent(EVENTS.CLOSE, this.closeFromEvent.bind(this)));\r\n        __classPrivateFieldSet(this, _openAct, CuiActionsListFactory.get(this.args.openAct));\r\n        __classPrivateFieldSet(this, _closeAct, CuiActionsListFactory.get(this.args.closeAct));\r\n        this.onInit();\r\n    }\r\n    onRefresh() {\r\n        if (!this.prevArgs || this.args.openAct !== this.prevArgs.openAct) {\r\n            __classPrivateFieldSet(this, _openAct, CuiActionsListFactory.get(this.args.openAct));\r\n        }\r\n        if (!this.prevArgs || this.args.closeAct !== this.prevArgs.closeAct) {\r\n            __classPrivateFieldSet(this, _closeAct, CuiActionsListFactory.get(this.args.closeAct));\r\n        }\r\n        this.onUpdate();\r\n    }\r\n    onRemove() {\r\n        this.detachEvent(EVENTS.CLOSE, __classPrivateFieldGet(this, _closeEventId));\r\n        this.detachEvent(EVENTS.OPEN, __classPrivateFieldGet(this, _openEventId));\r\n        this.onDestroy();\r\n    }\r\n    open(args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.checkLockAndWarn(\"open\")) {\r\n                return false;\r\n            }\r\n            if (this.isActive()) {\r\n                this.logWarning(\"Component is already opened\");\r\n                return false;\r\n            }\r\n            if (this.args.escClose || is(this.args.keyClose)) {\r\n                __classPrivateFieldSet(this, _keyCloseEventId, this.onEvent(EVENTS.KEYDOWN, this.onKeyClose.bind(this)));\r\n            }\r\n            if (!this.onBeforeOpen()) {\r\n                return false;\r\n            }\r\n            this.isLocked = true;\r\n            return this.performAction(__classPrivateFieldGet(this, _openAct), this.args.timeout, this.onActionFinish.bind(this, this.onAfterOpen.bind(this), EVENTS.OPENED, args), () => {\r\n                this.helper.setClass(this.activeClassName, this.element);\r\n                AriaAttributes.setAria(this.element, 'aria-expanded', 'true');\r\n            });\r\n            ;\r\n        });\r\n    }\r\n    close(args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.checkLockAndWarn(\"close\")) {\r\n                return false;\r\n            }\r\n            if (!this.isActive()) {\r\n                this.logWarning(\"Component is already closed\");\r\n                return false;\r\n            }\r\n            this.detachEvent(EVENTS.KEYDOWN, __classPrivateFieldGet(this, _keyCloseEventId));\r\n            if (!this.onBeforeClose()) {\r\n                return false;\r\n            }\r\n            this.isLocked = true;\r\n            return this.performAction(__classPrivateFieldGet(this, _closeAct), this.args.timeout, this.onActionFinish.bind(this, this.onAfterClose.bind(this), EVENTS.CLOSED, args), () => {\r\n                this.helper.removeClass(this.activeClassName, this.element);\r\n                AriaAttributes.setAria(this.element, 'aria-expanded', 'false');\r\n            });\r\n            ;\r\n        });\r\n    }\r\n    /**\r\n     * Helper created for elements that animate - perfroms an action *add*, after timeout it performs *remove*.\r\n     *\r\n     * @param action - action to perfrom\r\n     * @param timeout - timeout specified for action removal\r\n     * @param onFinish - callback to be performed after action is finished after removal\r\n     * @param callback - optional - callback to be executed in mutation on action removal, e.g. additional DOM changes on element\r\n     */\r\n    performAction(actions, timeout, onFinish, callback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (yield this.actionsHelper.performActions(this.element, actions, timeout, callback)) {\r\n                onFinish();\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n    }\r\n    openFromEvent(args) {\r\n        this.open(args);\r\n    }\r\n    closeFromEvent(args) {\r\n        this.close(args);\r\n    }\r\n    onActionFinish(callback, event, args) {\r\n        callback();\r\n        this.emitEvent(event, {\r\n            timestamp: Date.now(),\r\n            state: args\r\n        });\r\n        this.isLocked = false;\r\n    }\r\n    onKeyClose(ev) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.args.escClose && ev.event.key === \"Escape\" || is(this.args.keyClose) && ev.event.key === this.args.keyClose) {\r\n                yield this.close('Closed by key');\r\n            }\r\n        });\r\n    }\r\n}\r\n_openEventId = new WeakMap(), _closeEventId = new WeakMap(), _keyCloseEventId = new WeakMap(), _openAct = new WeakMap(), _closeAct = new WeakMap();\r\nexport class CuiMutableHandler extends CuiHandlerBase {\r\n    constructor(componentName, element, attribute, args, utils) {\r\n        super(componentName, element, attribute, args, utils);\r\n        _mutionHandler.set(this, void 0);\r\n        __classPrivateFieldSet(this, _mutionHandler, new CuiComponentMutationHandler(element));\r\n        __classPrivateFieldGet(this, _mutionHandler).onMutation(this.mutation.bind(this));\r\n    }\r\n    onHandle() {\r\n        this.onInit();\r\n        __classPrivateFieldGet(this, _mutionHandler).observe();\r\n    }\r\n    onRefresh() {\r\n        __classPrivateFieldGet(this, _mutionHandler).unobserve();\r\n        this.onUpdate();\r\n        __classPrivateFieldGet(this, _mutionHandler).observe();\r\n    }\r\n    onRemove() {\r\n        __classPrivateFieldGet(this, _mutionHandler).unobserve();\r\n        this.onDestroy();\r\n    }\r\n    /**\r\n     * Callback attached to mutation observer set on root element\r\n     *\r\n     * @param record - mutation records\r\n     */\r\n    mutation(records) {\r\n        this._log.debug(\"Element mutation\", \"mutation\");\r\n        this.onMutation(records.reduce((result, item) => {\r\n            if (item.type !== \"childList\") {\r\n                return result;\r\n            }\r\n            if (item.addedNodes.length > 0) {\r\n                result.added.push(...item.addedNodes);\r\n            }\r\n            if (item.removedNodes.length > 0) {\r\n                result.removed.push(...item.removedNodes);\r\n            }\r\n            return result;\r\n        }, {\r\n            added: [],\r\n            removed: []\r\n        }));\r\n    }\r\n}\r\n_mutionHandler = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTitleSelector, _defItemsSelector, _defTimeout, _prefix, _items, _targets, _switchEventId;\r\nimport { CuiMutableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { getIntOrDefault, is, isStringTrue, replacePrefix, getStringOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS, SCOPE_SELECTOR } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst ACCORDION_TITLE_CLS = '> * > .{prefix}-accordion-title';\r\nconst ACCORDION_ITEMS_CLS = '> *';\r\nexport class CuiAccordionArgs {\r\n    constructor(prefix, timeout) {\r\n        _defTitleSelector.set(this, void 0);\r\n        _defItemsSelector.set(this, void 0);\r\n        _defTimeout.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTitleSelector, replacePrefix(ACCORDION_TITLE_CLS, prefix));\r\n        __classPrivateFieldSet(this, _defItemsSelector, replacePrefix(ACCORDION_ITEMS_CLS, prefix));\r\n        this.animation = false;\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        this.single = false;\r\n        this.selector = SCOPE_SELECTOR + __classPrivateFieldGet(this, _defTitleSelector);\r\n        this.items = SCOPE_SELECTOR + __classPrivateFieldGet(this, _defItemsSelector);\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n    }\r\n    parse(args) {\r\n        if (is(args)) {\r\n            this.single = isStringTrue(args.single);\r\n            this.selector = SCOPE_SELECTOR + getStringOrDefault(args.selector, __classPrivateFieldGet(this, _defTitleSelector));\r\n            this.items = SCOPE_SELECTOR + getStringOrDefault(args.content, __classPrivateFieldGet(this, _defItemsSelector));\r\n            this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n            this.animation = isStringTrue(args.animation);\r\n            return;\r\n        }\r\n    }\r\n    isValid() {\r\n        return true;\r\n    }\r\n}\r\n_defTitleSelector = new WeakMap(), _defItemsSelector = new WeakMap(), _defTimeout = new WeakMap();\r\nexport class CuiAccordionComponent {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix)}-accordion`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiAccordionHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiAccordionHandler extends CuiMutableHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiAccordionHandler\", element, attribute, new CuiAccordionArgs(prefix, utils.setup.animationTime), utils);\r\n        _items.set(this, void 0);\r\n        _targets.set(this, void 0);\r\n        _switchEventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _switchEventId, null);\r\n        __classPrivateFieldSet(this, _items, []);\r\n        __classPrivateFieldSet(this, _targets, []);\r\n        __classPrivateFieldSet(this, _switchEventId, null);\r\n    }\r\n    onInit() {\r\n        if (this.args.isValid()) {\r\n            try {\r\n                this.initTargets();\r\n                __classPrivateFieldSet(this, _switchEventId, this.onEvent(EVENTS.SWITCH, this.onSwitch.bind(this)));\r\n            }\r\n            catch (e) {\r\n                this._log.exception(e, 'handle');\r\n            }\r\n            this._log.debug(\"Initialized\", \"handle\");\r\n        }\r\n    }\r\n    onUpdate() {\r\n        try {\r\n            this.initTargets();\r\n        }\r\n        catch (e) {\r\n            this._log.exception(e, 'handle');\r\n        }\r\n    }\r\n    onDestroy() {\r\n        this.detachEvent(EVENTS.SWITCH, __classPrivateFieldGet(this, _switchEventId));\r\n    }\r\n    onMutation(mutations) {\r\n        if (mutations.added.length > 0 || mutations.removed.length > 0)\r\n            this.initTargets();\r\n    }\r\n    switch(index) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this._log.debug(\"Switch to: \" + index);\r\n            if (index < 0 || this.isLocked || !this.isInitialized) {\r\n                return false;\r\n            }\r\n            __classPrivateFieldSet(this, _items, this.queryItems());\r\n            if (__classPrivateFieldGet(this, _items).length <= index) {\r\n                return false;\r\n            }\r\n            this.isLocked = true;\r\n            const current = __classPrivateFieldGet(this, _items)[index];\r\n            if (this.helper.hasClass(this.activeClassName, current)) {\r\n                this.helper.removeClassesAs(current, this.activeClassName);\r\n            }\r\n            else {\r\n                if (this.args.single) {\r\n                    this.closeAllExcept(index);\r\n                }\r\n                this.helper.setClassesAs(current, this.activeClassName);\r\n            }\r\n            this.emitEvent(EVENTS.SWITCHED, {\r\n                index: index,\r\n                currentTarget: current,\r\n                timestamp: Date.now()\r\n            });\r\n            this.isLocked = false;\r\n            return true;\r\n        });\r\n    }\r\n    onSwitch(index) {\r\n        this.switch(getIntOrDefault(index, -1)).then(() => {\r\n            this._log.debug(\"Switch from event to \" + index);\r\n        });\r\n    }\r\n    initTargets() {\r\n        __classPrivateFieldSet(this, _items, this.queryItems());\r\n        const t = this.element.querySelectorAll(this.args.selector);\r\n        __classPrivateFieldSet(this, _targets, []);\r\n        t.forEach((item, index) => {\r\n            let target = { element: item };\r\n            this.setListener(target, index);\r\n            __classPrivateFieldGet(this, _targets).push(target);\r\n        });\r\n    }\r\n    closeAllExcept(current) {\r\n        this.mutate(() => {\r\n            __classPrivateFieldGet(this, _items).forEach((item, index) => {\r\n                if (current !== index && this.helper.hasClass(this.activeClassName, item)) {\r\n                    item.classList.remove(this.activeClassName);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    setListener(target, index) {\r\n        target.listener = () => {\r\n            this.switch(index);\r\n        };\r\n        target.element.addEventListener('click', target.listener);\r\n    }\r\n    removeListener(target) {\r\n        if (target.listener) {\r\n            target.element.removeEventListener('click', target.listener);\r\n        }\r\n    }\r\n    queryItems() {\r\n        return [...this.element.querySelectorAll(this.args.items)];\r\n    }\r\n}\r\n_items = new WeakMap(), _targets = new WeakMap(), _switchEventId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _unit;\r\nimport { AnimatorError } from \"../models/errors\";\r\nimport { is } from \"../utils/functions\";\r\n/**\r\n * Changes the opacity of the element from 0 to 1\r\n */\r\nexport class OpacityAnimator {\r\n    constructor() {\r\n        this.length = this.to = this.from = -1;\r\n        this.rtl = false;\r\n    }\r\n    setProperty(prop) {\r\n        if (!prop || !is(prop.from) || !is(prop.to)) {\r\n            throw new AnimatorError(\"[OpacityAnimator] Property has incorrect format\");\r\n        }\r\n        this.from = prop.from;\r\n        this.to = prop.to;\r\n        this.length = Math.abs(this.to - this.from);\r\n        this.rtl = this.from > this.to;\r\n    }\r\n    perform(element, progress, factor) {\r\n        if (this.to < 0) {\r\n            return;\r\n        }\r\n        let current = this.length * progress;\r\n        if (element[\"style\"]) {\r\n            element.style.opacity = this.rtl ? Math.max(this.from - current, 0) : Math.min(this.from + current, 1);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Changes any style property of the element\r\n */\r\nexport class PropertyAnimator {\r\n    constructor(property) {\r\n        _unit.set(this, void 0);\r\n        if (!is(property)) {\r\n            throw new AnimatorError(\"[PropertyAnimator] Valid property is required\");\r\n        }\r\n        this.property = property;\r\n        this.length = this.to = this.from = -1;\r\n        this.rtl = false;\r\n        __classPrivateFieldSet(this, _unit, \"\");\r\n    }\r\n    setProperty(prop) {\r\n        if (!prop || !is(prop.from) || !is(prop.to)) {\r\n            throw new AnimatorError(\"[PropertyAnimator] Property has incorrect format\");\r\n        }\r\n        this.from = prop.from;\r\n        this.to = prop.to;\r\n        this.length = Math.abs(this.to - this.from);\r\n        this.rtl = this.from > this.to;\r\n        __classPrivateFieldSet(this, _unit, prop.unit);\r\n    }\r\n    perform(element, progress, factor) {\r\n        if (!this.property) {\r\n            return;\r\n        }\r\n        let current = this.length * progress;\r\n        if (element[\"style\"]) {\r\n            element.style[this.property] = this.createValue(this.rtl ? this.from - current : this.from + current, __classPrivateFieldGet(this, _unit));\r\n        }\r\n    }\r\n    createValue(value, unit) {\r\n        return `${value}${unit !== null && unit !== void 0 ? unit : \"\"}`;\r\n    }\r\n}\r\n_unit = new WeakMap();\r\n/**\r\n * Changes transform property of the element. Supports mulitple properties at the time\r\n */\r\nexport class TransformAnimator {\r\n    constructor() {\r\n        this.prop = undefined;\r\n    }\r\n    setProperty(prop) {\r\n        if (!prop) {\r\n            throw new AnimatorError(\"[TransformAnimator] Property has incorrect format\");\r\n        }\r\n        this.prop = prop;\r\n    }\r\n    build(progress) {\r\n        let props = [];\r\n        for (let name in this.prop) {\r\n            let cur = this.prop[name];\r\n            let diff = Math.abs(cur.to - cur.from);\r\n            let rtl = cur.from > cur.to;\r\n            let val = rtl ? cur.from - (diff * progress) : cur.from + (diff * progress);\r\n            props.push(this.buildSingle(name, val, cur.unit));\r\n        }\r\n        return props.join(\" \");\r\n    }\r\n    buildSingle(name, value, unit) {\r\n        return `${name}(${value}${unit})`;\r\n    }\r\n    perform(element, progress) {\r\n        if (!this.prop) {\r\n            return;\r\n        }\r\n        if (element[\"style\"]) {\r\n            element.style.transform = this.build(progress);\r\n        }\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _engine, _timeout, _factory, _onError, _onFinishCallback, _animators, _lock, _animStartStamp, _element, _cleanOnFinish, _errorOccured, _factory_1, _onError_1, _element_1, _animators_1, _animationEngine, _factory_2, _onError_2;\r\nimport { is } from \"../utils/functions\";\r\nimport { OpacityAnimator, TransformAnimator, PropertyAnimator } from \"./animators\";\r\nexport class CuiAnimation {\r\n    constructor(element) {\r\n        _engine.set(this, void 0);\r\n        _timeout.set(this, void 0);\r\n        _factory.set(this, void 0);\r\n        _onError.set(this, void 0);\r\n        __classPrivateFieldSet(this, _engine, new CuiAnimationEngine(true));\r\n        __classPrivateFieldSet(this, _onError, undefined);\r\n        __classPrivateFieldSet(this, _timeout, 0);\r\n        __classPrivateFieldSet(this, _factory, new AnimatorFactory());\r\n        if (element) {\r\n            __classPrivateFieldGet(this, _engine).setElement(element);\r\n        }\r\n    }\r\n    setElement(element) {\r\n        __classPrivateFieldGet(this, _engine).setElement(element);\r\n    }\r\n    setTimeout(timeout) {\r\n        __classPrivateFieldSet(this, _timeout, timeout);\r\n    }\r\n    onError(callback) {\r\n        __classPrivateFieldSet(this, _onError, callback);\r\n        __classPrivateFieldGet(this, _engine).setOnError(callback);\r\n    }\r\n    onFinish(callback) {\r\n        __classPrivateFieldGet(this, _engine).onFinish(callback);\r\n    }\r\n    perform(props, timeout, factor) {\r\n        if (!is(props)) {\r\n            this.reportError(new Error(\"Animation property cannot be empty\"));\r\n            return;\r\n        }\r\n        let animators = [];\r\n        try {\r\n            for (let prop in props) {\r\n                let animator = __classPrivateFieldGet(this, _factory).get(prop);\r\n                if (!animator)\r\n                    return;\r\n                animator.setProperty(props[prop]);\r\n                animators.push(animator);\r\n                __classPrivateFieldGet(this, _engine).setAnimators(animators);\r\n                __classPrivateFieldGet(this, _engine).animate(timeout !== null && timeout !== void 0 ? timeout : __classPrivateFieldGet(this, _timeout));\r\n            }\r\n        }\r\n        catch (e) {\r\n            this.reportError(e);\r\n            return;\r\n        }\r\n    }\r\n    reportError(e) {\r\n        if (__classPrivateFieldGet(this, _onError)) {\r\n            __classPrivateFieldGet(this, _onError).call(this, e);\r\n        }\r\n        else {\r\n            console.error(e);\r\n        }\r\n    }\r\n}\r\n_engine = new WeakMap(), _timeout = new WeakMap(), _factory = new WeakMap(), _onError = new WeakMap();\r\nclass AnimatorFactory {\r\n    get(id) {\r\n        if (!is(id)) {\r\n            return undefined;\r\n        }\r\n        switch (id) {\r\n            case \"opacity\":\r\n                return new OpacityAnimator();\r\n            case \"transform\":\r\n                return new TransformAnimator();\r\n            default:\r\n                return new PropertyAnimator(id);\r\n        }\r\n    }\r\n}\r\nexport class CuiAnimationEngine {\r\n    constructor(cleanOnFinish) {\r\n        _onFinishCallback.set(this, void 0);\r\n        _animators.set(this, void 0);\r\n        _lock.set(this, void 0);\r\n        _animStartStamp.set(this, void 0);\r\n        _element.set(this, void 0);\r\n        _cleanOnFinish.set(this, void 0);\r\n        _errorOccured.set(this, void 0);\r\n        _factory_1.set(this, void 0);\r\n        _onError_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _animators, []);\r\n        __classPrivateFieldSet(this, _element, undefined);\r\n        __classPrivateFieldSet(this, _animStartStamp, -1);\r\n        __classPrivateFieldSet(this, _cleanOnFinish, cleanOnFinish !== null && cleanOnFinish !== void 0 ? cleanOnFinish : false);\r\n        __classPrivateFieldSet(this, _factory_1, new AnimatorFactory());\r\n        __classPrivateFieldSet(this, _lock, false);\r\n        __classPrivateFieldSet(this, _onFinishCallback, undefined);\r\n        __classPrivateFieldSet(this, _errorOccured, false);\r\n        __classPrivateFieldSet(this, _onError_1, undefined);\r\n    }\r\n    onFinish(callback) {\r\n        __classPrivateFieldSet(this, _onFinishCallback, callback);\r\n    }\r\n    setAnimators(animators) {\r\n        __classPrivateFieldSet(this, _animators, animators);\r\n    }\r\n    setProps(props) {\r\n        if (!is(props)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _animators, []);\r\n        try {\r\n            for (let prop in props) {\r\n                let animator = __classPrivateFieldGet(this, _factory_1).get(prop);\r\n                if (!animator)\r\n                    return;\r\n                animator.setProperty(props[prop]);\r\n                __classPrivateFieldGet(this, _animators).push(animator);\r\n            }\r\n        }\r\n        catch (e) {\r\n            this.reportError(e);\r\n        }\r\n    }\r\n    setElement(element) {\r\n        __classPrivateFieldSet(this, _element, element);\r\n    }\r\n    setOnError(callback) {\r\n        __classPrivateFieldSet(this, _onError_1, callback);\r\n    }\r\n    animate(timeout, progress, revert) {\r\n        if (__classPrivateFieldGet(this, _lock)) {\r\n            return;\r\n        }\r\n        if (!__classPrivateFieldGet(this, _element) || __classPrivateFieldGet(this, _animators).length === 0) {\r\n            this.reportError(new Error(\"Animation cannot be performed: element or animators are not set\"));\r\n            return;\r\n        }\r\n        let animationProgress = progress !== null && progress !== void 0 ? progress : 0;\r\n        let shouldCalcRevert = revert ? revert : false;\r\n        __classPrivateFieldSet(this, _lock, true);\r\n        requestAnimationFrame(this.animateAsync.bind(this, timeout, animationProgress, shouldCalcRevert));\r\n    }\r\n    isLocked() {\r\n        return __classPrivateFieldGet(this, _lock);\r\n    }\r\n    animateAsync(timeout, initialProgress, revert, timestamp) {\r\n        if (!__classPrivateFieldGet(this, _animStartStamp)) {\r\n            __classPrivateFieldSet(this, _animStartStamp, timestamp);\r\n        }\r\n        let pr = timestamp - __classPrivateFieldGet(this, _animStartStamp);\r\n        let animationProgress = pr / timeout;\r\n        let currProgress = 0;\r\n        if (initialProgress === 0) {\r\n            currProgress = animationProgress;\r\n        }\r\n        else {\r\n            currProgress = revert ? initialProgress - (animationProgress * initialProgress) : initialProgress + (animationProgress * initialProgress);\r\n        }\r\n        this.callUpdate(revert ? Math.max(currProgress, 0) : Math.min(currProgress, 1), 1);\r\n        if (pr < timeout && !__classPrivateFieldGet(this, _errorOccured)) {\r\n            requestAnimationFrame(this.animateAsync.bind(this, timeout, initialProgress, revert));\r\n        }\r\n        else {\r\n            this.endAnimation(revert);\r\n        }\r\n    }\r\n    endAnimation(reverted) {\r\n        if (__classPrivateFieldGet(this, _cleanOnFinish) && __classPrivateFieldGet(this, _element)) {\r\n            __classPrivateFieldGet(this, _element).removeAttribute(\"style\");\r\n        }\r\n        if (__classPrivateFieldGet(this, _onFinishCallback)) {\r\n            __classPrivateFieldGet(this, _onFinishCallback).call(this, __classPrivateFieldGet(this, _element), reverted, __classPrivateFieldGet(this, _errorOccured));\r\n        }\r\n        __classPrivateFieldSet(this, _errorOccured, false);\r\n        __classPrivateFieldSet(this, _animStartStamp, -1);\r\n        __classPrivateFieldSet(this, _lock, false);\r\n    }\r\n    callUpdate(progress, factor) {\r\n        try {\r\n            __classPrivateFieldGet(this, _animators).forEach(animator => animator.perform(__classPrivateFieldGet(this, _element), progress, factor));\r\n        }\r\n        catch (e) {\r\n            this.reportError(e);\r\n            __classPrivateFieldSet(this, _errorOccured, true);\r\n        }\r\n    }\r\n    reportError(e) {\r\n        if (__classPrivateFieldGet(this, _onError_1)) {\r\n            __classPrivateFieldGet(this, _onError_1).call(this, e);\r\n        }\r\n        else {\r\n            console.error(\"An error occured in CuiAnimtionEngine\");\r\n            console.error(e);\r\n        }\r\n    }\r\n}\r\n_onFinishCallback = new WeakMap(), _animators = new WeakMap(), _lock = new WeakMap(), _animStartStamp = new WeakMap(), _element = new WeakMap(), _cleanOnFinish = new WeakMap(), _errorOccured = new WeakMap(), _factory_1 = new WeakMap(), _onError_1 = new WeakMap();\r\nexport class CuiSwipeAnimationEngine {\r\n    constructor(shouldCleanOnFinish) {\r\n        _element_1.set(this, void 0);\r\n        _animators_1.set(this, void 0);\r\n        _animationEngine.set(this, void 0);\r\n        _factory_2.set(this, void 0);\r\n        _onError_2.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element_1, undefined);\r\n        __classPrivateFieldSet(this, _animators_1, []);\r\n        __classPrivateFieldSet(this, _animationEngine, new CuiAnimationEngine(shouldCleanOnFinish));\r\n        __classPrivateFieldSet(this, _factory_2, new AnimatorFactory());\r\n        __classPrivateFieldSet(this, _onError_2, undefined);\r\n    }\r\n    setElement(element) {\r\n        __classPrivateFieldSet(this, _element_1, element);\r\n    }\r\n    setOnFinish(callback) {\r\n        __classPrivateFieldGet(this, _animationEngine).onFinish(callback);\r\n    }\r\n    setOnError(callback) {\r\n        __classPrivateFieldSet(this, _onError_2, callback);\r\n        __classPrivateFieldGet(this, _animationEngine).setOnError(callback);\r\n    }\r\n    setProps(props) {\r\n        if (!is(props)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _animators_1, []);\r\n        try {\r\n            for (let prop in props) {\r\n                let animator = __classPrivateFieldGet(this, _factory_2).get(prop);\r\n                if (!animator)\r\n                    return;\r\n                animator.setProperty(props[prop]);\r\n                __classPrivateFieldGet(this, _animators_1).push(animator);\r\n            }\r\n        }\r\n        catch (e) {\r\n            this.reportError(e);\r\n        }\r\n    }\r\n    /**\r\n     * Perform single update on animators\r\n     * @param progress - progress value to be set to animators 0..1\r\n     */\r\n    update(progress) {\r\n        if (!__classPrivateFieldGet(this, _element_1) || __classPrivateFieldGet(this, _animators_1).length === 0) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _animators_1).forEach(animator => animator.perform(__classPrivateFieldGet(this, _element_1), Math.min(progress, 1), 1));\r\n    }\r\n    /**\r\n     * Perform single update on animators in RAF\r\n     * @param progress - progress value to be set to animators 0..1\r\n     */\r\n    updateAsync(progress) {\r\n        requestAnimationFrame(this.update.bind(this, progress));\r\n    }\r\n    /**\r\n     * Finish swipe animation using animation engine\r\n     * @param progress - initial progress value 0..1\r\n     * @param timeout - time for animation to perform\r\n     * @param revert - whether animation should return back to 0 or progress to the end\r\n     */\r\n    finish(progress, timeout, revert) {\r\n        if (__classPrivateFieldGet(this, _element_1))\r\n            __classPrivateFieldGet(this, _animationEngine).setElement(__classPrivateFieldGet(this, _element_1));\r\n        __classPrivateFieldGet(this, _animationEngine).setAnimators(__classPrivateFieldGet(this, _animators_1));\r\n        __classPrivateFieldGet(this, _animationEngine).animate(timeout, progress, revert);\r\n    }\r\n    reportError(e) {\r\n        if (__classPrivateFieldGet(this, _onError_2)) {\r\n            __classPrivateFieldGet(this, _onError_2).call(this, e);\r\n        }\r\n        else {\r\n            console.log(e);\r\n        }\r\n    }\r\n}\r\n_element_1 = new WeakMap(), _animators_1 = new WeakMap(), _animationEngine = new WeakMap(), _factory_2 = new WeakMap(), _onError_2 = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTimeout, _prefix, _prefix_1, _swipeEngine, _isTracking, _startX, _ratio, _swipeAnimation, _moveEventId;\r\nimport { SWIPE_ANIMATIONS_DEFINITIONS } from \"cui-light-core/dist/esm/animation/definitions\";\r\nimport { CuiInteractableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiSwipeAnimationEngine } from \"cui-light-core/dist/esm/animation/engine\";\r\nimport { AriaAttributes } from \"cui-light-core/dist/esm/utils/aria\";\r\nimport { boolStringOrDefault, getIntOrDefault, getStringOrDefault, replacePrefix } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS, CLASSES } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst BANNER_OPEN_ANIMATION = \".{prefix}-animation-fade-in\";\r\nconst BANNER_CLOSE_ANIMATION = \".{prefix}-animation-fade-out\";\r\nexport class CuiBannerArgs {\r\n    constructor(prefix, timeout) {\r\n        _defTimeout.set(this, void 0);\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        this.escClose = false;\r\n        this.keyClose = \"\";\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n        this.swipe = false;\r\n        this.openAct = \"\";\r\n        this.closeAct = \"\";\r\n    }\r\n    parse(args) {\r\n        this.swipe = boolStringOrDefault(args.swipe, false);\r\n        this.escClose = false;\r\n        this.keyClose = \"\";\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.openAct = getStringOrDefault(args.openAct, replacePrefix(BANNER_OPEN_ANIMATION, __classPrivateFieldGet(this, _prefix)));\r\n        this.closeAct = getStringOrDefault(args.closeAct, replacePrefix(BANNER_CLOSE_ANIMATION, __classPrivateFieldGet(this, _prefix)));\r\n    }\r\n}\r\n_defTimeout = new WeakMap(), _prefix = new WeakMap();\r\nexport class CuiBanerComponent {\r\n    constructor(prefix) {\r\n        _prefix_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix_1, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix_1)}-banner`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiBannerHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix_1));\r\n    }\r\n}\r\n_prefix_1 = new WeakMap();\r\nexport class CuiBannerHandler extends CuiInteractableHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiBannerHandler\", element, attribute, new CuiBannerArgs(prefix, utils.setup.animationTime), utils);\r\n        _swipeEngine.set(this, void 0);\r\n        _isTracking.set(this, void 0);\r\n        _startX.set(this, void 0);\r\n        _ratio.set(this, void 0);\r\n        _swipeAnimation.set(this, void 0);\r\n        _moveEventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _swipeEngine, new CuiSwipeAnimationEngine(true));\r\n        __classPrivateFieldGet(this, _swipeEngine).setOnFinish(this.onSwipeFinish.bind(this));\r\n        __classPrivateFieldGet(this, _swipeEngine).setElement(this.element);\r\n        __classPrivateFieldSet(this, _startX, -1);\r\n        __classPrivateFieldSet(this, _ratio, 0);\r\n        __classPrivateFieldSet(this, _swipeAnimation, SWIPE_ANIMATIONS_DEFINITIONS[\"fade\"]);\r\n        __classPrivateFieldSet(this, _moveEventId, null);\r\n        __classPrivateFieldSet(this, _isTracking, false);\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldSet(this, _moveEventId, this.onEvent(EVENTS.GLOBAL_MOVE, this.onMove.bind(this)));\r\n        if (this.isActive()) {\r\n            this.open();\r\n        }\r\n    }\r\n    onUpdate() {\r\n    }\r\n    onDestroy() {\r\n        this.detachEvent(EVENTS.GLOBAL_MOVE, __classPrivateFieldGet(this, _moveEventId));\r\n    }\r\n    onBeforeOpen() {\r\n        return true;\r\n    }\r\n    onAfterOpen() {\r\n        if (this.args.swipe) {\r\n            __classPrivateFieldSet(this, _moveEventId, this.onEvent(EVENTS.GLOBAL_MOVE, this.onMove.bind(this)));\r\n        }\r\n    }\r\n    onAfterClose() {\r\n        this.detachEvent(EVENTS.GLOBAL_MOVE, __classPrivateFieldGet(this, _moveEventId));\r\n    }\r\n    onBeforeClose() {\r\n        return true;\r\n    }\r\n    onMove(data) {\r\n        if (this.isLocked) {\r\n            return;\r\n        }\r\n        let current = this.element;\r\n        switch (data.type) {\r\n            case \"down\":\r\n                if (__classPrivateFieldGet(this, _isTracking) || !current.contains(data.target)) {\r\n                    return;\r\n                }\r\n                __classPrivateFieldSet(this, _isTracking, true);\r\n                __classPrivateFieldSet(this, _startX, data.x);\r\n                this.helper.setClassesAs(document.body, CLASSES.swipingOn);\r\n                data.event.preventDefault();\r\n                break;\r\n            case \"up\":\r\n                if (!__classPrivateFieldGet(this, _isTracking) && __classPrivateFieldGet(this, _ratio) == 0) {\r\n                    break;\r\n                }\r\n                let absRatio = Math.abs(__classPrivateFieldGet(this, _ratio));\r\n                let timeout = absRatio * this.args.timeout;\r\n                let back = absRatio <= 0.4;\r\n                // Lock component until animation is finished\r\n                this.isLocked = true;\r\n                __classPrivateFieldGet(this, _swipeEngine).finish(absRatio, timeout, back);\r\n                this.helper.removeClassesAs(document.body, CLASSES.swipingOn);\r\n                __classPrivateFieldSet(this, _isTracking, false);\r\n                break;\r\n            case \"move\":\r\n                if (__classPrivateFieldGet(this, _isTracking)) {\r\n                    let newRatio = (data.x - __classPrivateFieldGet(this, _startX)) / current.offsetWidth;\r\n                    if (__classPrivateFieldGet(this, _ratio) >= 0 && newRatio <= 0 || __classPrivateFieldGet(this, _ratio) <= 0 && newRatio > 0) {\r\n                        __classPrivateFieldGet(this, _swipeEngine).setProps(newRatio > 0 ? __classPrivateFieldGet(this, _swipeAnimation).current.right : __classPrivateFieldGet(this, _swipeAnimation).current.left);\r\n                    }\r\n                    __classPrivateFieldSet(this, _ratio, newRatio);\r\n                    this.mutate(() => {\r\n                        __classPrivateFieldGet(this, _swipeEngine).update(Math.abs(__classPrivateFieldGet(this, _ratio)));\r\n                    });\r\n                    data.event.preventDefault();\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    onSwipeFinish(element, reverted, error) {\r\n        this.isLocked = false;\r\n        if (!reverted) {\r\n            this.helper.removeClass(this.activeClassName, this.element);\r\n            AriaAttributes.setAria(this.element, 'aria-expanded', 'false');\r\n        }\r\n        __classPrivateFieldSet(this, _ratio, 0);\r\n        __classPrivateFieldSet(this, _startX, 0);\r\n    }\r\n}\r\n_swipeEngine = new WeakMap(), _isTracking = new WeakMap(), _startX = new WeakMap(), _ratio = new WeakMap(), _swipeAnimation = new WeakMap(), _moveEventId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _element, _scale, _appender;\r\nimport { createElementFromString, getIntOrDefault, is } from \"../utils/functions\";\r\nexport class IconBuilder {\r\n    constructor(svgString) {\r\n        _element.set(this, void 0);\r\n        _scale.set(this, void 0);\r\n        _appender.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element, svgString);\r\n        __classPrivateFieldSet(this, _scale, 1);\r\n        __classPrivateFieldSet(this, _appender, new IconScaleAppender());\r\n    }\r\n    setScale(scale) {\r\n        __classPrivateFieldSet(this, _scale, scale);\r\n        return this;\r\n    }\r\n    build() {\r\n        let created = createElementFromString(__classPrivateFieldGet(this, _element));\r\n        if (is(created) && __classPrivateFieldGet(this, _scale)) {\r\n            // @ts-ignore created is checked already\r\n            __classPrivateFieldGet(this, _appender).append(created, __classPrivateFieldGet(this, _scale));\r\n        }\r\n        return created;\r\n    }\r\n}\r\n_element = new WeakMap(), _scale = new WeakMap(), _appender = new WeakMap();\r\nexport class IconScaleAppender {\r\n    append(element, value) {\r\n        let width = getIntOrDefault(element.getAttribute(\"width\"), 20);\r\n        let height = getIntOrDefault(element.getAttribute(\"height\"), 20);\r\n        element.setAttribute(\"width\", (width * value).toString());\r\n        element.setAttribute(\"height\", (height * value).toString());\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _factor, _full, _path, _attr, _progressEventId;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { is, getRangeValue, isString, getIntOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { ICONS, EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { IconBuilder } from \"cui-light-core/dist/esm/builders/icon\";\r\nexport class CuiCircleArgs {\r\n    constructor() {\r\n        this.progress = 0;\r\n    }\r\n    parse(val) {\r\n        if (!is(val)) {\r\n            this.progress = 0;\r\n        }\r\n        else if (isString(val)) {\r\n            this.progress = getIntOrDefault(val, 0);\r\n        }\r\n        else {\r\n            this.progress = getIntOrDefault(val.progress, 0);\r\n        }\r\n    }\r\n}\r\nexport class CuiCircleComponent {\r\n    constructor(prefix) {\r\n        this.attribute = (prefix !== null && prefix !== void 0 ? prefix : 'cui') + '-circle-progress';\r\n        ICONS['special_circle_progress'] = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"  class=\\\"circle-progress\\\" viewBox=\\\"0 0 100 100\\\" width=\\\"100\\\" height=\\\"100\\\"><path class=\\\"circle-progress-path\\\" d=\\\"M 50,5.3660047 A 44.867708,44.633994 0 0 1 94.867709,49.999997 44.867708,44.633994 0 0 1 50,94.633995 44.867708,44.633994 0 0 1 5.1322908,50.000001 44.867708,44.633994 0 0 1 50,5.3660047\\\"></path></svg>\";\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiCircleHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiCircleHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiCircleHandler\", element, attribute, new CuiCircleArgs(), utils);\r\n        _factor.set(this, void 0);\r\n        _full.set(this, void 0);\r\n        _path.set(this, void 0);\r\n        _attr.set(this, void 0);\r\n        _progressEventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _factor, __classPrivateFieldSet(this, _full, 0));\r\n        __classPrivateFieldSet(this, _path, null);\r\n        __classPrivateFieldSet(this, _attr, attribute);\r\n        __classPrivateFieldSet(this, _progressEventId, null);\r\n    }\r\n    onInit() {\r\n        const iconSvg = new IconBuilder(ICONS['special_circle_progress']).build();\r\n        if (!is(iconSvg)) {\r\n            this.logError(\"SVG circle was not created\", \"onInit\");\r\n            return;\r\n        }\r\n        const svg = this.element.querySelector('svg');\r\n        if (is(svg)) {\r\n            //@ts-ignore svg checked\r\n            svg.remove();\r\n        }\r\n        //@ts-ignore iconSvg checked\r\n        this.element.appendChild(iconSvg);\r\n        __classPrivateFieldSet(this, _path, this.element.querySelector('.circle-progress-path'));\r\n        __classPrivateFieldSet(this, _full, __classPrivateFieldGet(this, _path).getTotalLength());\r\n        __classPrivateFieldSet(this, _factor, __classPrivateFieldGet(this, _full) / 100);\r\n        this.fetch(this.readStyle);\r\n        __classPrivateFieldSet(this, _progressEventId, this.onEvent(EVENTS.PROGRESS_CHANGE, this.onSetProgress.bind(this)));\r\n    }\r\n    onUpdate() {\r\n        this.fetch(this.readStyle);\r\n        this.emitEvent(EVENTS.PROGRESS_CHANGED, {\r\n            timestamp: Date.now(),\r\n            progress: this.args.progress\r\n        });\r\n    }\r\n    onDestroy() {\r\n        this.detachEvent(EVENTS.PROGRESS_CHANGE, __classPrivateFieldGet(this, _progressEventId));\r\n    }\r\n    onSetProgress(val) {\r\n        if (is(val)) {\r\n            this.element.setAttribute(__classPrivateFieldGet(this, _attr), val);\r\n        }\r\n    }\r\n    updateStyle(value) {\r\n        __classPrivateFieldGet(this, _path).style.strokeDashoffset = value;\r\n    }\r\n    readStyle() {\r\n        if (this.prevArgs && this.args.progress === this.prevArgs.progress) {\r\n            return;\r\n        }\r\n        const progress = getRangeValue(this.args.progress, 0, 100);\r\n        this.mutate(this.updateStyle, __classPrivateFieldGet(this, _full) - __classPrivateFieldGet(this, _factor) * progress);\r\n    }\r\n}\r\n_factor = new WeakMap(), _full = new WeakMap(), _path = new WeakMap(), _attr = new WeakMap(), _progressEventId = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTimeout, _prefix, _eventId;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { getStringOrDefault, getIntOrDefault, is, isString, isStringTrue, getParentCuiElement, are } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nexport class CuiCloseArgs {\r\n    constructor(timeout) {\r\n        _defTimeout.set(this, void 0);\r\n        this.target = \"\";\r\n        this.action = \"\";\r\n        this.prevent = false;\r\n        this.state = \"\";\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n    }\r\n    parse(args) {\r\n        if (is(args) && isString(args)) {\r\n            this.target = args;\r\n            this.action = \"\";\r\n            this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n            this.prevent = false;\r\n            this.state = \"\";\r\n            return;\r\n        }\r\n        this.target = getStringOrDefault(args.target, \"\");\r\n        this.action = args.action;\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.prevent = args.prevent && isStringTrue(args.prevent);\r\n        this.state = args.state;\r\n    }\r\n}\r\n_defTimeout = new WeakMap();\r\nexport class CuiCloseComponent {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix)}-close`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiCloseHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiCloseHandler extends CuiHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiCloseHandler\", element, attribute, new CuiCloseArgs(utils.setup.animationTime), utils);\r\n        _eventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _eventId, null);\r\n        this.onClick = this.onClick.bind(this);\r\n    }\r\n    onInit() {\r\n        this.element.addEventListener('click', this.onClick);\r\n        __classPrivateFieldSet(this, _eventId, this.onEvent(EVENTS.CLOSE, this.onClose.bind(this)));\r\n    }\r\n    onUpdate() {\r\n        //\r\n    }\r\n    onDestroy() {\r\n        this.element.removeEventListener('click', this.onClick);\r\n        this.detachEvent(EVENTS.CLOSE, __classPrivateFieldGet(this, _eventId));\r\n    }\r\n    onClick(ev) {\r\n        this.onClose(ev);\r\n        if (this.args.prevent)\r\n            ev.preventDefault();\r\n    }\r\n    onClose(ev) {\r\n        if (this.isLocked) {\r\n            return;\r\n        }\r\n        const target = this.getTarget();\r\n        if (!is(target)) {\r\n            this._log.warning(`Target ${this.args.target} not found`, 'onClick');\r\n            return;\r\n        }\r\n        this.isLocked = true;\r\n        //@ts-ignore target is checked\r\n        this.run(target).then((result) => {\r\n            this.onActionFinish(ev, result);\r\n        }).catch((e) => {\r\n            this._log.exception(e);\r\n        }).finally(() => {\r\n            this.isLocked = false;\r\n        });\r\n    }\r\n    run(target) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let cuiId = target.$cuid;\r\n            if (is(cuiId)) {\r\n                yield this.utils.bus.emit(EVENTS.CLOSE, cuiId, this.args.state);\r\n                return false;\r\n            }\r\n            else if (are(this.args.action, this.args.timeout)) {\r\n                let actions = CuiActionsListFactory.get(this.args.action);\r\n                return this.actionsHelper.performActions(target, actions, this.args.timeout, () => {\r\n                    this.removeActiveClass(target);\r\n                });\r\n            }\r\n            else {\r\n                this.removeActiveClassAsync(target);\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n    removeActiveClass(target) {\r\n        if (is(target) && this.helper.hasClass(this.activeClassName, target)) {\r\n            this.helper.removeClass(this.activeClassName, target);\r\n        }\r\n    }\r\n    removeActiveClassAsync(target) {\r\n        this.fetch(() => {\r\n            if (is(target) && this.helper.hasClass(this.activeClassName, target)) {\r\n                this.helper.removeClassesAs(target, this.activeClassName);\r\n            }\r\n        });\r\n    }\r\n    onActionFinish(ev, shouldEmit) {\r\n        if (shouldEmit)\r\n            this.emitClose(ev);\r\n    }\r\n    getTarget() {\r\n        var _a;\r\n        if (!is(this.args.target)) {\r\n            return getParentCuiElement(this.element);\r\n        }\r\n        return (_a = document.querySelector(this.args.target)) !== null && _a !== void 0 ? _a : getParentCuiElement(this.element);\r\n    }\r\n    emitClose(ev) {\r\n        this.emitEvent(EVENTS.CLOSED, {\r\n            timestamp: Date.now(),\r\n            state: this.args.state,\r\n            event: ev\r\n        });\r\n    }\r\n}\r\n_eventId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTimeout, _prefix, _prefix_1, _bodyClass, _scrollY;\r\nimport { replacePrefix, isStringTrue, getStringOrDefault, getIntOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { AriaAttributes } from \"cui-light-core/dist/esm/utils/aria\";\r\nimport { CuiInteractableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nconst COVER_OPEN_ANIMATION_CLASS = '.{prefix}-dialog-default-in';\r\nconst COVER_CLOSE_ANIMATION_CLASS = '.{prefix}-dialog-default-out';\r\nconst bodyClass = '{prefix}-cover-open';\r\nexport class CuiCoverArgs {\r\n    constructor(prefix, defTimeout) {\r\n        _defTimeout.set(this, void 0);\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTimeout, defTimeout !== null && defTimeout !== void 0 ? defTimeout : 300);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        this.escClose = false;\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n        this.openAct = \"\";\r\n        this.closeAct = \"\";\r\n        this.keyClose = \"\";\r\n    }\r\n    parse(args) {\r\n        this.escClose = isStringTrue(args.escClose);\r\n        this.keyClose = args.keyClose;\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.openAct = getStringOrDefault(args.openAct, replacePrefix(COVER_OPEN_ANIMATION_CLASS, __classPrivateFieldGet(this, _prefix)));\r\n        this.closeAct = getStringOrDefault(args.closeAct, replacePrefix(COVER_CLOSE_ANIMATION_CLASS, __classPrivateFieldGet(this, _prefix)));\r\n    }\r\n}\r\n_defTimeout = new WeakMap(), _prefix = new WeakMap();\r\nexport class CuiCoverComponent {\r\n    constructor(prefix) {\r\n        _prefix_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix_1, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix_1)}-cover`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiCoverHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix_1));\r\n    }\r\n}\r\n_prefix_1 = new WeakMap();\r\nexport class CuiCoverHandler extends CuiInteractableHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiDialogHandler\", element, attribute, new CuiCoverArgs(prefix, utils.setup.animationTimeLong), utils);\r\n        _bodyClass.set(this, void 0);\r\n        _scrollY.set(this, void 0);\r\n        __classPrivateFieldSet(this, _bodyClass, replacePrefix(bodyClass, prefix));\r\n        __classPrivateFieldSet(this, _scrollY, 0);\r\n    }\r\n    onInit() {\r\n        AriaAttributes.setAria(this.element, 'aria-modal', \"\");\r\n    }\r\n    onUpdate() {\r\n    }\r\n    onDestroy() {\r\n    }\r\n    onBeforeOpen() {\r\n        if (this.isAnyActive()) {\r\n            return false;\r\n        }\r\n        __classPrivateFieldSet(this, _scrollY, window.pageYOffset);\r\n        return true;\r\n    }\r\n    onAfterOpen() {\r\n        this.helper.setClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n        document.body.style.top = `-${__classPrivateFieldGet(this, _scrollY)}px`;\r\n        AriaAttributes.setAria(this.element, 'aria-hidden', \"false\");\r\n    }\r\n    onAfterClose() {\r\n        document.body.style.top = '';\r\n        window.scrollTo(0, (__classPrivateFieldGet(this, _scrollY) || 0) * -1);\r\n        __classPrivateFieldSet(this, _scrollY, 0);\r\n        this.helper.removeClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n        AriaAttributes.setAria(this.element, 'aria-hidden', \"true\");\r\n    }\r\n    onBeforeClose() {\r\n        return true;\r\n    }\r\n    isAnyActive() {\r\n        return this.helper.hasClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n    }\r\n}\r\n_bodyClass = new WeakMap(), _scrollY = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTimeout, _prefix, _prefix_1, _prefix_2, _bodyClass, _scrollY, _windowClickEventId;\r\nimport { replacePrefix, isStringTrue, getStringOrDefault, getIntOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { AriaAttributes } from \"cui-light-core/dist/esm/utils/aria\";\r\nimport { CuiInteractableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nconst DIALOG_OPEN_ANIMATION_CLASS = '.{prefix}-dialog-default-in';\r\nconst DIALOG_CLOSE_ANIMATION_CLASS = '.{prefix}-dialog-default-out';\r\nconst bodyClass = '{prefix}-dialog-open';\r\nconst CONTAINER = '.{prefix}-dialog-container';\r\nexport class CuiDialogArgs {\r\n    constructor(prefix, defTimeout) {\r\n        _defTimeout.set(this, void 0);\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTimeout, defTimeout !== null && defTimeout !== void 0 ? defTimeout : 300);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        this.escClose = false;\r\n        this.outClose = false;\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n        this.openAct = \"\";\r\n        this.closeAct = \"\";\r\n        this.keyClose = \"\";\r\n    }\r\n    parse(args) {\r\n        this.escClose = isStringTrue(args.escClose);\r\n        this.outClose = isStringTrue(args.outClose);\r\n        this.keyClose = args.keyClose;\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.openAct = getStringOrDefault(args.openAct, replacePrefix(DIALOG_OPEN_ANIMATION_CLASS, __classPrivateFieldGet(this, _prefix)));\r\n        this.closeAct = getStringOrDefault(args.closeAct, replacePrefix(DIALOG_CLOSE_ANIMATION_CLASS, __classPrivateFieldGet(this, _prefix)));\r\n    }\r\n}\r\n_defTimeout = new WeakMap(), _prefix = new WeakMap();\r\nexport class CuiDialogComponent {\r\n    constructor(prefix) {\r\n        _prefix_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix_1, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix_1)}-dialog`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiDialogHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix_1));\r\n    }\r\n}\r\n_prefix_1 = new WeakMap();\r\nexport class CuiDialogHandler extends CuiInteractableHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiDialogHandler\", element, attribute, new CuiDialogArgs(prefix, utils.setup.animationTimeLong), utils);\r\n        _prefix_2.set(this, void 0);\r\n        _bodyClass.set(this, void 0);\r\n        _scrollY.set(this, void 0);\r\n        _windowClickEventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _bodyClass, replacePrefix(bodyClass, prefix));\r\n        __classPrivateFieldSet(this, _prefix_2, prefix);\r\n        __classPrivateFieldSet(this, _scrollY, 0);\r\n        __classPrivateFieldSet(this, _windowClickEventId, null);\r\n    }\r\n    onInit() {\r\n        AriaAttributes.setAria(this.element, 'aria-modal', \"\");\r\n    }\r\n    onUpdate() {\r\n    }\r\n    onDestroy() {\r\n    }\r\n    onBeforeOpen() {\r\n        if (this.isAnyActive()) {\r\n            return false;\r\n        }\r\n        __classPrivateFieldSet(this, _scrollY, window.pageYOffset);\r\n        return true;\r\n    }\r\n    onAfterOpen() {\r\n        if (this.args.outClose) {\r\n            __classPrivateFieldSet(this, _windowClickEventId, this.onEvent(EVENTS.WINDOW_CLICK, this.onWindowClick.bind(this)));\r\n        }\r\n        this.helper.setClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n        document.body.style.top = `-${__classPrivateFieldGet(this, _scrollY)}px`;\r\n    }\r\n    onAfterClose() {\r\n        document.body.style.top = '';\r\n        window.scrollTo(0, (__classPrivateFieldGet(this, _scrollY) || 0) * -1);\r\n        __classPrivateFieldSet(this, _scrollY, 0);\r\n        this.helper.removeClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n        this.detachEvent(EVENTS.WINDOW_CLICK, __classPrivateFieldGet(this, _windowClickEventId));\r\n    }\r\n    onBeforeClose() {\r\n        return true;\r\n    }\r\n    isAnyActive() {\r\n        return this.helper.hasClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n    }\r\n    onWindowClick(ev) {\r\n        let container = this.element.querySelector(replacePrefix(CONTAINER, __classPrivateFieldGet(this, _prefix_2)));\r\n        if (container && !container.contains(ev.target)) {\r\n            this.close('out').then(() => {\r\n                this._log.debug(\"Closed by click outside\");\r\n            });\r\n        }\r\n    }\r\n}\r\n_prefix_2 = new WeakMap(), _bodyClass = new WeakMap(), _scrollY = new WeakMap(), _windowClickEventId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _target, _callback, _inProgress, _isHovering, _isAttached, _onOverBound, _onMoveBound, _onOutBound;\r\nimport { are } from \"../utils/functions\";\r\nexport class CuiHoverListener {\r\n    constructor(target) {\r\n        _target.set(this, void 0);\r\n        _callback.set(this, void 0);\r\n        _inProgress.set(this, void 0);\r\n        _isHovering.set(this, void 0);\r\n        _isAttached.set(this, void 0);\r\n        _onOverBound.set(this, void 0);\r\n        _onMoveBound.set(this, void 0);\r\n        _onOutBound.set(this, void 0);\r\n        __classPrivateFieldSet(this, _target, target);\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n        __classPrivateFieldSet(this, _isHovering, false);\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n        __classPrivateFieldSet(this, _callback, undefined);\r\n        __classPrivateFieldSet(this, _onMoveBound, this.onMouseMove.bind(this));\r\n        __classPrivateFieldSet(this, _onOutBound, this.onMouseOut.bind(this));\r\n        __classPrivateFieldSet(this, _onOverBound, this.onMouseOver.bind(this));\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    isInProgress() {\r\n        return __classPrivateFieldGet(this, _inProgress);\r\n    }\r\n    attach() {\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _target).addEventListener(\"mouseover\", __classPrivateFieldGet(this, _onOverBound));\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _target).addEventListener(\"mousemove\", __classPrivateFieldGet(this, _onMoveBound));\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _target).addEventListener(\"mouseout\", __classPrivateFieldGet(this, _onOutBound));\r\n        __classPrivateFieldSet(this, _isAttached, true);\r\n    }\r\n    detach() {\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _target).removeEventListener(\"mouseover\", __classPrivateFieldGet(this, _onOverBound));\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _target).removeEventListener(\"mousemove\", __classPrivateFieldGet(this, _onMoveBound));\r\n        // @ts-ignore\r\n        __classPrivateFieldGet(this, _target).removeEventListener(\"mouseout\", __classPrivateFieldGet(this, _onOutBound));\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n    }\r\n    emit(mouseEvent, force) {\r\n        if (!are(__classPrivateFieldGet(this, _callback))) {\r\n            return;\r\n        }\r\n        if (!force && __classPrivateFieldGet(this, _inProgress)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _inProgress, true);\r\n        window.requestAnimationFrame(this.invoke.bind(this, {\r\n            isHovering: __classPrivateFieldGet(this, _isHovering),\r\n            event: mouseEvent,\r\n            timestamp: Date.now()\r\n        }));\r\n    }\r\n    isAttached() {\r\n        return __classPrivateFieldGet(this, _isAttached);\r\n    }\r\n    invoke(ev) {\r\n        if (__classPrivateFieldGet(this, _callback))\r\n            __classPrivateFieldGet(this, _callback).call(this, ev);\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n    }\r\n    onMouseOver(ev) {\r\n        __classPrivateFieldSet(this, _isHovering, true);\r\n        this.emit(ev, true);\r\n    }\r\n    onMouseOut(ev) {\r\n        __classPrivateFieldSet(this, _isHovering, false);\r\n        this.emit(ev, true);\r\n    }\r\n    onMouseMove(ev) {\r\n        this.emit(ev, false);\r\n    }\r\n}\r\n_target = new WeakMap(), _callback = new WeakMap(), _inProgress = new WeakMap(), _isHovering = new WeakMap(), _isAttached = new WeakMap(), _onOverBound = new WeakMap(), _onMoveBound = new WeakMap(), _onOutBound = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _box, _targetWidth, _targetHeight, _margin;\r\nimport { CuiPositionError } from \"../models/errors\";\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiBasePositionEvaluator {\r\n    constructor() {\r\n        _box.set(this, void 0);\r\n        _targetWidth.set(this, void 0);\r\n        _targetHeight.set(this, void 0);\r\n        _margin.set(this, void 0);\r\n        __classPrivateFieldSet(this, _targetHeight, -1);\r\n        __classPrivateFieldSet(this, _targetWidth, -1);\r\n        __classPrivateFieldSet(this, _box, undefined);\r\n        __classPrivateFieldSet(this, _margin, 0);\r\n    }\r\n    setElementBox(box) {\r\n        __classPrivateFieldSet(this, _box, box);\r\n    }\r\n    setTarget(width, height) {\r\n        __classPrivateFieldSet(this, _targetWidth, width);\r\n        __classPrivateFieldSet(this, _targetHeight, height);\r\n    }\r\n    setMargin(value) {\r\n        __classPrivateFieldSet(this, _margin, value);\r\n    }\r\n    getVerticalPosition(value) {\r\n        switch (value) {\r\n            case 'top':\r\n                return this.getTopPosition();\r\n            case \"bottom\":\r\n                return this.getBottomPosition();\r\n            case \"middle\":\r\n                return this.getMiddlePosition();\r\n            default:\r\n                return -1;\r\n        }\r\n    }\r\n    getHorizontalPosition(value) {\r\n        switch (value) {\r\n            case 'left':\r\n                return this.getLeftPosition();\r\n            case \"right\":\r\n                return this.getRightPosition();\r\n            case \"center\":\r\n                return this.getCenterPosition();\r\n            default:\r\n                return -1;\r\n        }\r\n    }\r\n    getAutoVerticalPosition(initial) {\r\n        let innerHeight = window.innerHeight;\r\n        let number = this.getVerticalPosition(initial);\r\n        if ((initial === 'top' || initial === \"middle\") && number < 0) {\r\n            return [this.getVerticalPosition(\"bottom\"), \"bottom\"];\r\n        }\r\n        else if ((initial === \"bottom\" || initial === \"middle\") && number + __classPrivateFieldGet(this, _targetHeight) > innerHeight) {\r\n            return [this.getVerticalPosition(\"top\"), \"top\"];\r\n        }\r\n        return [number, initial];\r\n    }\r\n    getAutoHorizontalPosition(initial) {\r\n        let innerWidth = window.innerWidth;\r\n        let number = this.getHorizontalPosition(initial);\r\n        if ((initial === 'right' || initial === \"center\") && number < 0) {\r\n            return [this.getHorizontalPosition(\"left\"), \"left\"];\r\n        }\r\n        else if ((initial === 'left' || initial === \"center\") && number + __classPrivateFieldGet(this, _targetWidth) > innerWidth) {\r\n            return [this.getHorizontalPosition(\"right\"), \"right\"];\r\n        }\r\n        return [number, initial];\r\n    }\r\n    getTopPosition() {\r\n        this.throwIfNotValid(\"getTopPosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return __classPrivateFieldGet(this, _box).top - __classPrivateFieldGet(this, _margin) - __classPrivateFieldGet(this, _targetHeight);\r\n    }\r\n    getBottomPosition() {\r\n        this.throwIfNotValid(\"getBottomPosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return __classPrivateFieldGet(this, _box).top + __classPrivateFieldGet(this, _box).height + __classPrivateFieldGet(this, _margin);\r\n    }\r\n    getMiddlePosition() {\r\n        this.throwIfNotValid(\"getMiddlePosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return (__classPrivateFieldGet(this, _box).top + __classPrivateFieldGet(this, _box).height / 2) - __classPrivateFieldGet(this, _targetHeight) / 2;\r\n    }\r\n    getLeftPosition() {\r\n        this.throwIfNotValid(\"getLeftPosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return __classPrivateFieldGet(this, _box).left;\r\n    }\r\n    getRightPosition() {\r\n        this.throwIfNotValid(\"getRightPosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return __classPrivateFieldGet(this, _box).left + __classPrivateFieldGet(this, _box).width - __classPrivateFieldGet(this, _targetWidth);\r\n    }\r\n    getCenterPosition() {\r\n        this.throwIfNotValid(\"getCenterPosition\");\r\n        // @ts-ignore - already checked in validate\r\n        return (__classPrivateFieldGet(this, _box).left + __classPrivateFieldGet(this, _box).width / 2) - __classPrivateFieldGet(this, _targetWidth) / 2;\r\n    }\r\n    validate() {\r\n        return is(__classPrivateFieldGet(this, _box)) && __classPrivateFieldGet(this, _targetHeight) > 0 && __classPrivateFieldGet(this, _targetWidth) > 0;\r\n    }\r\n    throwIfNotValid(method) {\r\n        if (!this.validate()) {\r\n            throw new CuiPositionError(`[${method}] Position cannot be calculated: missing data [width: ${__classPrivateFieldGet(this, _targetWidth)}][height: ${__classPrivateFieldGet(this, _targetHeight)}]`);\r\n        }\r\n    }\r\n}\r\n_box = new WeakMap(), _targetWidth = new WeakMap(), _targetHeight = new WeakMap(), _margin = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _static, _preferred, _evaluator, _log;\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\nimport { is } from \"../utils/functions\";\r\nimport { CuiBasePositionEvaluator } from \"./evaluator\";\r\nexport class CuiBasePositionCalculator {\r\n    constructor(evaluator) {\r\n        _static.set(this, void 0);\r\n        _preferred.set(this, void 0);\r\n        _evaluator.set(this, void 0);\r\n        _log.set(this, void 0);\r\n        __classPrivateFieldSet(this, _preferred, \"top-center\");\r\n        __classPrivateFieldSet(this, _static, \"\");\r\n        __classPrivateFieldSet(this, _evaluator, evaluator !== null && evaluator !== void 0 ? evaluator : new CuiBasePositionEvaluator());\r\n        __classPrivateFieldSet(this, _log, CuiLoggerFactory.get(\"CuiBasePositionCalculator\"));\r\n    }\r\n    setMargin(value) {\r\n        __classPrivateFieldGet(this, _evaluator).setMargin(value);\r\n    }\r\n    setPreferred(position) {\r\n        __classPrivateFieldSet(this, _preferred, position);\r\n    }\r\n    setStatic(position) {\r\n        __classPrivateFieldSet(this, _static, position);\r\n    }\r\n    calculate(elementBox, targetWidth, targetHeight) {\r\n        __classPrivateFieldGet(this, _evaluator).setElementBox(elementBox);\r\n        __classPrivateFieldGet(this, _evaluator).setTarget(targetWidth, targetHeight);\r\n        if (is(__classPrivateFieldGet(this, _static))) {\r\n            __classPrivateFieldGet(this, _log).debug(\"Evaluating static position\");\r\n            const [vertical, horizontal] = this.parse(__classPrivateFieldGet(this, _static));\r\n            return [__classPrivateFieldGet(this, _evaluator).getHorizontalPosition(horizontal), __classPrivateFieldGet(this, _evaluator).getVerticalPosition(vertical), __classPrivateFieldGet(this, _static)];\r\n        }\r\n        let [vertical, horizontal] = [\"\", \"\"];\r\n        if (is(__classPrivateFieldGet(this, _preferred))) {\r\n            __classPrivateFieldGet(this, _log).debug(\"Evaluating auto position\");\r\n            [vertical, horizontal] = this.parse(__classPrivateFieldGet(this, _preferred));\r\n        }\r\n        vertical = vertical !== null && vertical !== void 0 ? vertical : \"top\";\r\n        horizontal = horizontal !== null && horizontal !== void 0 ? horizontal : \"center\";\r\n        const joined = [vertical, horizontal].join(\"-\");\r\n        __classPrivateFieldGet(this, _log).debug(\"Calculating position: \" + vertical + \"-\" + horizontal);\r\n        const [outVNum, outVPos] = __classPrivateFieldGet(this, _evaluator).getAutoVerticalPosition(vertical);\r\n        const [outHNum, outHPos] = __classPrivateFieldGet(this, _evaluator).getAutoHorizontalPosition(horizontal);\r\n        __classPrivateFieldGet(this, _log).debug(\"Calculated position: \" + outVPos + \"-\" + outHPos);\r\n        return [outHNum, outVNum, outVPos + \"-\" + outHPos];\r\n    }\r\n    parse(position) {\r\n        return position.split(\"-\");\r\n    }\r\n}\r\n_static = new WeakMap(), _preferred = new WeakMap(), _evaluator = new WeakMap(), _log = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _taskId, _autoRenew, _timeout, _callback;\r\nimport { is } from \"./functions\";\r\nexport class CuiTaskRunner {\r\n    constructor(timeout, autoRenew, callback) {\r\n        _taskId.set(this, void 0);\r\n        _autoRenew.set(this, void 0);\r\n        _timeout.set(this, void 0);\r\n        _callback.set(this, void 0);\r\n        __classPrivateFieldSet(this, _autoRenew, autoRenew);\r\n        __classPrivateFieldSet(this, _timeout, timeout);\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    start() {\r\n        if (!this.canRun()) {\r\n            return;\r\n        }\r\n        this.stop();\r\n        __classPrivateFieldSet(this, _taskId, setTimeout(() => {\r\n            //@ts-ignore - already checked in canRun\r\n            __classPrivateFieldGet(this, _callback).call(this);\r\n            __classPrivateFieldSet(this, _taskId, null);\r\n            if (__classPrivateFieldGet(this, _autoRenew)) {\r\n                this.start();\r\n            }\r\n        }, __classPrivateFieldGet(this, _timeout)));\r\n    }\r\n    stop() {\r\n        if (__classPrivateFieldGet(this, _taskId)) {\r\n            clearTimeout(__classPrivateFieldGet(this, _taskId));\r\n            __classPrivateFieldSet(this, _taskId, null);\r\n        }\r\n    }\r\n    getId() {\r\n        return __classPrivateFieldGet(this, _taskId);\r\n    }\r\n    canRun() {\r\n        return is(__classPrivateFieldGet(this, _callback)) && __classPrivateFieldGet(this, _timeout) > 0;\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    setTimeout(timeout) {\r\n        __classPrivateFieldSet(this, _timeout, timeout);\r\n    }\r\n}\r\n_taskId = new WeakMap(), _autoRenew = new WeakMap(), _timeout = new WeakMap(), _callback = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defOpenAct, _prefix, _prefix_1, _bodyClass, _attribute, _triggerHoverListener, _hoverListener, _trigger, _windowClickEventId, _openEventId, _closeEventId, _positionCalculator, _posClass, _dropParentCls, _autoTask, _actions;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { is, replacePrefix, isStringTrue, getStringOrDefault, getIntOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS, SCOPE_SELECTOR } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { AriaAttributes } from \"cui-light-core/dist/esm/utils/aria\";\r\nimport { CuiHoverListener } from \"cui-light-core/dist/esm/listeners/hover\";\r\nimport { CuiBasePositionCalculator } from \"cui-light-core/dist/esm/position/calculator\";\r\nimport { CuiTaskRunner } from \"cui-light-core/dist/esm/utils/task\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nconst bodyClass = '{prefix}-drop-open';\r\nconst DROP_POSITION = \"{prefix}-drop-position-\";\r\nconst DROP_TRIGGER = \"{prefix}-drop-trigger\";\r\nconst DROP_DEFAULT_TRIGGER = \"> a, button\";\r\nexport class CuiDropArgs {\r\n    constructor(prefix) {\r\n        _defOpenAct.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defOpenAct, replacePrefix('{prefix}-drop-animation-in', prefix));\r\n        this.mode = \"click\";\r\n        this.trigger = DROP_DEFAULT_TRIGGER;\r\n        this.autoClose = false;\r\n        this.outClose = false;\r\n        this.prevent = false;\r\n        this.pos = \"\";\r\n        this.action = __classPrivateFieldGet(this, _defOpenAct);\r\n        this.timeout = 3000;\r\n        this.margin = 8;\r\n    }\r\n    parse(args) {\r\n        this.mode = getStringOrDefault(args.mode, 'click').toLowerCase();\r\n        this.trigger = SCOPE_SELECTOR + getStringOrDefault(args.trigger, DROP_DEFAULT_TRIGGER);\r\n        this.prevent = isStringTrue(args.prevent);\r\n        this.autoClose = isStringTrue(args.autoClose);\r\n        this.outClose = args.outClose ? isStringTrue(args.outClose) : true;\r\n        this.pos = getStringOrDefault(args.pos, \"\");\r\n        this.action = getStringOrDefault(args.action, __classPrivateFieldGet(this, _defOpenAct));\r\n        this.timeout = getIntOrDefault(args.timeout, 3000);\r\n        this.margin = getIntOrDefault(args.margin, 8);\r\n    }\r\n}\r\n_defOpenAct = new WeakMap();\r\nexport class CuiDropComponenet {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix)}-drop`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiDropHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiDropHandler extends CuiHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuidropHandler\", element, attribute, new CuiDropArgs(prefix), utils);\r\n        _prefix_1.set(this, void 0);\r\n        _bodyClass.set(this, void 0);\r\n        _attribute.set(this, void 0);\r\n        _triggerHoverListener.set(this, void 0);\r\n        _hoverListener.set(this, void 0);\r\n        _trigger.set(this, void 0);\r\n        _windowClickEventId.set(this, void 0);\r\n        _openEventId.set(this, void 0);\r\n        _closeEventId.set(this, void 0);\r\n        _positionCalculator.set(this, void 0);\r\n        _posClass.set(this, void 0);\r\n        _dropParentCls.set(this, void 0);\r\n        _autoTask.set(this, void 0);\r\n        _actions.set(this, void 0);\r\n        __classPrivateFieldSet(this, _attribute, attribute);\r\n        __classPrivateFieldSet(this, _prefix_1, prefix);\r\n        __classPrivateFieldSet(this, _bodyClass, replacePrefix(bodyClass, prefix));\r\n        __classPrivateFieldSet(this, _hoverListener, new CuiHoverListener(this.element));\r\n        __classPrivateFieldGet(this, _hoverListener).setCallback(this.onElementHover.bind(this));\r\n        __classPrivateFieldSet(this, _windowClickEventId, null);\r\n        __classPrivateFieldSet(this, _openEventId, null);\r\n        __classPrivateFieldSet(this, _closeEventId, null);\r\n        this.onTriggerClick = this.onTriggerClick.bind(this);\r\n        __classPrivateFieldSet(this, _positionCalculator, new CuiBasePositionCalculator());\r\n        __classPrivateFieldGet(this, _positionCalculator).setMargin(8);\r\n        __classPrivateFieldGet(this, _positionCalculator).setPreferred(\"bottom-left\");\r\n        __classPrivateFieldSet(this, _posClass, \"\");\r\n        __classPrivateFieldSet(this, _dropParentCls, replacePrefix(DROP_TRIGGER, prefix));\r\n        __classPrivateFieldSet(this, _triggerHoverListener, undefined);\r\n        __classPrivateFieldSet(this, _trigger, this.element);\r\n        __classPrivateFieldSet(this, _actions, []);\r\n        __classPrivateFieldSet(this, _autoTask, new CuiTaskRunner(this.args.timeout, false, this.close.bind(this)));\r\n        ;\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldSet(this, _trigger, this.acquireTrigger());\r\n        __classPrivateFieldSet(this, _triggerHoverListener, new CuiHoverListener(__classPrivateFieldGet(this, _trigger)));\r\n        this.setTriggerEvent();\r\n        __classPrivateFieldSet(this, _openEventId, this.onEvent(EVENTS.OPEN, this.open.bind(this)));\r\n        __classPrivateFieldSet(this, _closeEventId, this.onEvent(EVENTS.CLOSE, this.close.bind(this)));\r\n        __classPrivateFieldGet(this, _positionCalculator).setStatic(this.args.pos);\r\n        __classPrivateFieldGet(this, _positionCalculator).setMargin(this.args.margin);\r\n        __classPrivateFieldSet(this, _autoTask, new CuiTaskRunner(this.args.timeout, false, this.close.bind(this)));\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n        this.mutate(() => {\r\n            AriaAttributes.setAria(this.element, 'aria-dropdown', \"\");\r\n            if (this.element.parentElement && !this.helper.hasClass(__classPrivateFieldGet(this, _dropParentCls), this.element.parentElement)) {\r\n                this.helper.setClass(__classPrivateFieldGet(this, _dropParentCls), this.element.parentElement);\r\n            }\r\n        });\r\n        this._log.debug(\"Initialized\", \"handle\");\r\n    }\r\n    onUpdate() {\r\n        if (__classPrivateFieldGet(this, _triggerHoverListener) && __classPrivateFieldGet(this, _triggerHoverListener).isAttached()) {\r\n            __classPrivateFieldGet(this, _triggerHoverListener).detach();\r\n        }\r\n        else if (this.prevArgs && this.prevArgs.mode === 'click') {\r\n            //@ts-ignore \r\n            __classPrivateFieldGet(this, _trigger).removeEventListener('click', this.onTriggerClick);\r\n        }\r\n        __classPrivateFieldSet(this, _trigger, this.acquireTrigger());\r\n        __classPrivateFieldSet(this, _triggerHoverListener, new CuiHoverListener(__classPrivateFieldGet(this, _trigger)));\r\n        this.setTriggerEvent();\r\n        __classPrivateFieldGet(this, _positionCalculator).setStatic(this.args.pos);\r\n        __classPrivateFieldGet(this, _positionCalculator).setMargin(this.args.margin);\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n        __classPrivateFieldGet(this, _autoTask).setTimeout(this.args.timeout);\r\n    }\r\n    onDestroy() {\r\n        this.detachEvent(EVENTS.OPEN, __classPrivateFieldGet(this, _openEventId));\r\n        this.detachEvent(EVENTS.CLOSE, __classPrivateFieldGet(this, _closeEventId));\r\n        if (this.element.parentElement) {\r\n            this.mutate(() => {\r\n                //@ts-ignore\r\n                this.helper.removeClass(__classPrivateFieldGet(this, _dropParentCls), this.element.parentElement);\r\n            });\r\n        }\r\n    }\r\n    /**\r\n    * Api Method open\r\n    */\r\n    open() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.checkLockAndWarn('open')) {\r\n                return false;\r\n            }\r\n            if (this.isActive()) {\r\n                return this.close();\r\n            }\r\n            if (this.isAnyActive()) {\r\n                yield this.findAndCloseOpenedDrop();\r\n            }\r\n            this.isLocked = true;\r\n            this._log.debug(`Drop ${this.cuid}`, 'open');\r\n            this.onOpen();\r\n            this.isLocked = false;\r\n            return true;\r\n        });\r\n    }\r\n    /**\r\n     * Api Method close\r\n     */\r\n    close() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.checkLockAndWarn(\"close\") || !this.isActive()) {\r\n                return false;\r\n            }\r\n            this.isLocked = true;\r\n            this._log.debug(`Drop ${this.cuid}`, 'close');\r\n            this.onClose();\r\n            this.detachEvent(EVENTS.WINDOW_CLICK, __classPrivateFieldGet(this, _windowClickEventId));\r\n            this.emitEvent(EVENTS.CLOSED, {\r\n                timestamp: Date.now()\r\n            });\r\n            __classPrivateFieldGet(this, _hoverListener).detach();\r\n            this.isLocked = false;\r\n            return true;\r\n        });\r\n    }\r\n    onClose() {\r\n        this.mutate(() => {\r\n            this.helper.removeClass(this.activeClassName, this.element);\r\n            this.helper.removeClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n            this.toggleActions();\r\n            this.helper.removeClass(__classPrivateFieldGet(this, _posClass), this.element);\r\n            AriaAttributes.setAria(this.element, 'aria-expanded', 'false');\r\n        });\r\n    }\r\n    onOpen() {\r\n        this.helper.setClass(this.activeClassName, this.element);\r\n        this.mutate(() => {\r\n            const box = __classPrivateFieldGet(this, _trigger).getBoundingClientRect();\r\n            try {\r\n                const [x, y, pos] = __classPrivateFieldGet(this, _positionCalculator).calculate(box, this.element.offsetWidth, this.element.offsetHeight);\r\n                this.element.style.top = `${y - box.top}px`;\r\n                this.element.style.left = `${x - box.left}px`;\r\n                __classPrivateFieldSet(this, _posClass, replacePrefix(DROP_POSITION + pos, __classPrivateFieldGet(this, _prefix_1)));\r\n                this.toggleActions();\r\n                this.helper.setClass(__classPrivateFieldGet(this, _posClass), this.element);\r\n                this.helper.setClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n                this.emitEvent(EVENTS.OPENED, {\r\n                    timestamp: Date.now()\r\n                });\r\n                __classPrivateFieldGet(this, _hoverListener).attach();\r\n                this.runAutoCloseTask();\r\n                if (this.args.outClose) {\r\n                    __classPrivateFieldSet(this, _windowClickEventId, this.onEvent(EVENTS.WINDOW_CLICK, this.onWindowClick.bind(this)));\r\n                }\r\n                AriaAttributes.setAria(this.element, 'aria-expanded', 'true');\r\n            }\r\n            catch (e) {\r\n                this._log.exception(e);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Event invoked when window is clicked\r\n     * @param ev\r\n     */\r\n    onWindowClick(ev) {\r\n        if (!this.element.contains(ev.target)) {\r\n            this.close();\r\n        }\r\n    }\r\n    isAnyActive() {\r\n        return this.helper.hasClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n    }\r\n    /**\r\n     * Finds and opens other active drop element\r\n     */\r\n    findAndCloseOpenedDrop() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const opened = document.querySelector(`[${__classPrivateFieldGet(this, _attribute)}].${this.activeClassName}`);\r\n            if (!is(opened)) {\r\n                this._log.warning(\"Opened drop was not found\");\r\n                return false;\r\n            }\r\n            //@ts-ignore opened checked\r\n            const handler = opened.$handlers[__classPrivateFieldGet(this, _attribute)];\r\n            if (!is(handler)) {\r\n                this._log.warning(\"Drop handler was not found in the element\");\r\n                return false;\r\n            }\r\n            return handler.close();\r\n        });\r\n    }\r\n    /**\r\n     * Invoked when trigger button is clicked\r\n     * @param ev\r\n     */\r\n    onTriggerClick(ev) {\r\n        if (this.isActive()) {\r\n            this.close();\r\n        }\r\n        else {\r\n            this.open();\r\n        }\r\n        if (this.args.prevent) {\r\n            ev.preventDefault();\r\n        }\r\n    }\r\n    /**\r\n    * Invoked when trigger button is hovered on\r\n    * @param ev\r\n    */\r\n    onHoverEvent(ev) {\r\n        if (ev.isHovering && !this.isActive()) {\r\n            this.open();\r\n        }\r\n        if (this.args.prevent) {\r\n            ev.event.preventDefault();\r\n        }\r\n    }\r\n    /**\r\n     * Method triggered when opened element is hovered on\r\n     * @param ev\r\n     */\r\n    onElementHover(ev) {\r\n        if (ev.isHovering) {\r\n            __classPrivateFieldGet(this, _autoTask).stop();\r\n        }\r\n        else if (!ev.isHovering && this.args.autoClose) {\r\n            this.runAutoCloseTask();\r\n        }\r\n    }\r\n    /**\r\n     * Sets event on trigger button\r\n     */\r\n    setTriggerEvent() {\r\n        if (this.args.mode === 'hover' && __classPrivateFieldGet(this, _triggerHoverListener)) {\r\n            __classPrivateFieldGet(this, _triggerHoverListener).setCallback(this.onHoverEvent.bind(this));\r\n            __classPrivateFieldGet(this, _triggerHoverListener).attach();\r\n        }\r\n        else {\r\n            //@ts-ignore\r\n            __classPrivateFieldGet(this, _trigger).addEventListener('click', this.onTriggerClick);\r\n        }\r\n    }\r\n    /**\r\n     * Runs auto-close task on opened element\r\n     */\r\n    runAutoCloseTask() {\r\n        if (!this.args.autoClose) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _autoTask).start();\r\n    }\r\n    toggleActions() {\r\n        __classPrivateFieldGet(this, _actions).forEach(action => {\r\n            action.toggle(this.element);\r\n        });\r\n    }\r\n    acquireTrigger() {\r\n        let ret = null;\r\n        if (!this.element.parentElement) {\r\n            ret = document.querySelector(this.args.trigger);\r\n        }\r\n        else\r\n            ret = this.element.parentElement.querySelector(this.args.trigger);\r\n        return ret !== null && ret !== void 0 ? ret : this.element;\r\n    }\r\n}\r\n_prefix_1 = new WeakMap(), _bodyClass = new WeakMap(), _attribute = new WeakMap(), _triggerHoverListener = new WeakMap(), _hoverListener = new WeakMap(), _trigger = new WeakMap(), _windowClickEventId = new WeakMap(), _openEventId = new WeakMap(), _closeEventId = new WeakMap(), _positionCalculator = new WeakMap(), _posClass = new WeakMap(), _dropParentCls = new WeakMap(), _autoTask = new WeakMap(), _actions = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _element, _element_1, _element_2;\r\nexport class BasePositionCalculator {\r\n    calculate(x, y, diffX, diffY) {\r\n        return [x, y];\r\n    }\r\n}\r\nexport class OptionalPositionCalculator {\r\n    constructor(element) {\r\n        _element.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element, element);\r\n    }\r\n    calculate(x, y, diffX, diffY) {\r\n        let newX = __classPrivateFieldGet(this, _element).offsetLeft + diffX;\r\n        let newY = __classPrivateFieldGet(this, _element).offsetTop + diffY;\r\n        return [newX, newY];\r\n    }\r\n}\r\n_element = new WeakMap();\r\nexport class BaseResizeCalculator {\r\n    constructor(element) {\r\n        _element_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element_1, element);\r\n    }\r\n    calculate(x, y, diffX, diffY) {\r\n        let width = x - __classPrivateFieldGet(this, _element_1).offsetLeft;\r\n        let height = y - __classPrivateFieldGet(this, _element_1).offsetTop;\r\n        return [width, height];\r\n    }\r\n}\r\n_element_1 = new WeakMap();\r\nexport class OptionalResizeCalculator {\r\n    constructor(element) {\r\n        _element_2.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element_2, element);\r\n    }\r\n    calculate(x, y, diffX, diffY) {\r\n        let width = __classPrivateFieldGet(this, _element_2).offsetWidth + diffX;\r\n        let height = __classPrivateFieldGet(this, _element_2).offsetHeight + diffY;\r\n        return [width, height];\r\n    }\r\n}\r\n_element_2 = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTimeout, _prefix, _prefix_1, _isMoving, _isResizing, _prevX, _prevY, _prefix_2, _moveListener, _positionCalculator, _resizeCalculator, _resizeBtn, _moveBtn;\r\nimport { replacePrefix, isStringTrue, is, getIntOrDefault, getStringOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { AriaAttributes } from \"cui-light-core/dist/esm/utils/aria\";\r\nimport { CuiInteractableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiMoveEventListener } from \"cui-light-core/dist/esm/listeners/move\";\r\nimport { BasePositionCalculator, BaseResizeCalculator } from \"./helpers\";\r\nimport { CLASSES, EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst FLOAT_OPEN_ANIMATION_CLASS = '.{prefix}-float-default-in';\r\nconst FLOAT_CLOSE_ANIMATION_CLASS = '.{prefix}-float-default-out';\r\nconst MOVE = '.{prefix}-float-move';\r\nconst RESIZE = '.{prefix}-float-resize';\r\nexport class CuiFloatArgs {\r\n    constructor(prefix, defTimeout) {\r\n        _defTimeout.set(this, void 0);\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTimeout, defTimeout !== null && defTimeout !== void 0 ? defTimeout : 300);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        this.escClose = false;\r\n        this.keyClose = \"\";\r\n        this.openAct = \"\";\r\n        this.closeAct = \"\";\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n    }\r\n    parse(args) {\r\n        this.escClose = isStringTrue(args.escClose);\r\n        this.keyClose = args.keyClose;\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.openAct = getStringOrDefault(args.openAct, replacePrefix(FLOAT_OPEN_ANIMATION_CLASS, __classPrivateFieldGet(this, _prefix)));\r\n        this.closeAct = getStringOrDefault(args.closeAct, replacePrefix(FLOAT_CLOSE_ANIMATION_CLASS, __classPrivateFieldGet(this, _prefix)));\r\n    }\r\n}\r\n_defTimeout = new WeakMap(), _prefix = new WeakMap();\r\nexport class CuiFloatComponent {\r\n    constructor(prefix) {\r\n        _prefix_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix_1, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix_1)}-float`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiFloatHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix_1));\r\n    }\r\n}\r\n_prefix_1 = new WeakMap();\r\nexport class CuiFloatHandler extends CuiInteractableHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiFloatHandler\", element, attribute, new CuiFloatArgs(prefix, utils.setup.animationTime), utils);\r\n        _isMoving.set(this, void 0);\r\n        _isResizing.set(this, void 0);\r\n        _prevX.set(this, void 0);\r\n        _prevY.set(this, void 0);\r\n        _prefix_2.set(this, void 0);\r\n        _moveListener.set(this, void 0);\r\n        _positionCalculator.set(this, void 0);\r\n        _resizeCalculator.set(this, void 0);\r\n        _resizeBtn.set(this, void 0);\r\n        _moveBtn.set(this, void 0);\r\n        __classPrivateFieldSet(this, _isMoving, false);\r\n        __classPrivateFieldSet(this, _isResizing, false);\r\n        __classPrivateFieldSet(this, _prevX, 0);\r\n        __classPrivateFieldSet(this, _prevY, 0);\r\n        __classPrivateFieldSet(this, _moveListener, new CuiMoveEventListener());\r\n        __classPrivateFieldGet(this, _moveListener).preventDefault(false);\r\n        __classPrivateFieldSet(this, _positionCalculator, new BasePositionCalculator());\r\n        __classPrivateFieldSet(this, _resizeCalculator, new BaseResizeCalculator(element));\r\n        __classPrivateFieldSet(this, _prefix_2, prefix);\r\n        this.move = this.move.bind(this);\r\n        this.resize = this.resize.bind(this);\r\n        __classPrivateFieldSet(this, _moveBtn, null);\r\n        __classPrivateFieldSet(this, _resizeBtn, null);\r\n    }\r\n    onInit() {\r\n        AriaAttributes.setAria(this.element, 'aria-modal', \"\");\r\n        __classPrivateFieldSet(this, _moveBtn, this.element.querySelector(replacePrefix(MOVE, __classPrivateFieldGet(this, _prefix_2))));\r\n        __classPrivateFieldSet(this, _resizeBtn, this.element.querySelector(replacePrefix(RESIZE, __classPrivateFieldGet(this, _prefix_2))));\r\n        __classPrivateFieldGet(this, _moveListener).setCallback(this.onMove.bind(this));\r\n    }\r\n    onUpdate() {\r\n    }\r\n    onDestroy() {\r\n    }\r\n    onBeforeOpen() {\r\n        return true;\r\n    }\r\n    onAfterOpen() {\r\n        __classPrivateFieldGet(this, _moveListener).attach();\r\n    }\r\n    onAfterClose() {\r\n        __classPrivateFieldGet(this, _moveListener).detach();\r\n    }\r\n    onBeforeClose() {\r\n        return true;\r\n    }\r\n    onMove(ev) {\r\n        switch (ev.type) {\r\n            case 'down':\r\n                this.onMouseDown(ev);\r\n                break;\r\n            case 'up':\r\n                this.onMouseUp(ev);\r\n                break;\r\n            case 'move':\r\n                this.onMouseMove(ev);\r\n                break;\r\n        }\r\n    }\r\n    onMouseDown(ev) {\r\n        if (ev.target === __classPrivateFieldGet(this, _moveBtn)) {\r\n            __classPrivateFieldSet(this, _isMoving, true);\r\n            ev.event.preventDefault();\r\n        }\r\n        else if (ev.target === __classPrivateFieldGet(this, _resizeBtn)) {\r\n            __classPrivateFieldSet(this, _isResizing, true);\r\n            ev.event.preventDefault();\r\n            //this.helper.setClass(\"cui-float-resize-shadow\")\r\n        }\r\n        __classPrivateFieldSet(this, _prevX, ev.x);\r\n        __classPrivateFieldSet(this, _prevY, ev.y);\r\n        this.helper.setClassesAs(document.body, CLASSES.swipingOn);\r\n        // Lock global move handler\r\n        this.utils.bus.emit(EVENTS.MOVE_LOCK, null, true);\r\n    }\r\n    onMouseMove(ev) {\r\n        if (__classPrivateFieldGet(this, _isMoving)) {\r\n            this.peform(ev, this.move);\r\n        }\r\n        else if (__classPrivateFieldGet(this, _isResizing)) {\r\n            this.peform(ev, this.resize);\r\n        }\r\n    }\r\n    onMouseUp(ev) {\r\n        __classPrivateFieldSet(this, _isMoving, false);\r\n        __classPrivateFieldSet(this, _isResizing, false);\r\n        this.helper.removeClassesAs(document.body, CLASSES.swipingOn);\r\n        // Unlock global handler\r\n        this.utils.bus.emit(EVENTS.MOVE_LOCK, null, false);\r\n    }\r\n    peform(ev, callback) {\r\n        this.mutate(() => {\r\n            if (is(callback))\r\n                callback(this.element, ev.x, ev.y, (ev.x - __classPrivateFieldGet(this, _prevX)), (ev.y - __classPrivateFieldGet(this, _prevY)));\r\n            __classPrivateFieldSet(this, _prevX, ev.x);\r\n            __classPrivateFieldSet(this, _prevY, ev.y);\r\n        });\r\n        ev.event.preventDefault();\r\n    }\r\n    resize(element, x, y, diffX, diffY) {\r\n        let [newWidth, newHeight] = __classPrivateFieldGet(this, _resizeCalculator).calculate(x, y, diffX, diffY);\r\n        if (this.fitsWindow(element.offsetTop, element.offsetLeft, newWidth, newHeight)) {\r\n            this.mutate(() => {\r\n                element.style.width = newWidth + \"px\";\r\n                element.style.height = newHeight + \"px\";\r\n            });\r\n        }\r\n    }\r\n    move(element, x, y, diffX, diffY) {\r\n        let [newX, newY] = __classPrivateFieldGet(this, _positionCalculator).calculate(x, y, diffX, diffY);\r\n        if (this.fitsWindow(newY, newX, element.offsetWidth, element.offsetHeight)) {\r\n            this.mutate(() => {\r\n                element.style.left = newX + \"px\";\r\n                element.style.top = newY + \"px\";\r\n            });\r\n        }\r\n    }\r\n    fitsWindow(top, left, width, height) {\r\n        return (top + height < window.innerHeight - 10) &&\r\n            (top > 10) && (left > 10) &&\r\n            (left + width < window.innerWidth - 10);\r\n    }\r\n}\r\n_isMoving = new WeakMap(), _isResizing = new WeakMap(), _prevX = new WeakMap(), _prevY = new WeakMap(), _prefix_2 = new WeakMap(), _moveListener = new WeakMap(), _positionCalculator = new WeakMap(), _resizeCalculator = new WeakMap(), _resizeBtn = new WeakMap(), _moveBtn = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _currentIcon;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { ICONS } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { is, isString, getStringOrDefault, getIntOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { IconBuilder } from \"cui-light-core/dist/esm/builders/icon\";\r\nexport class CuiIconArgs {\r\n    constructor() {\r\n        this.icon = \"\";\r\n        this.scale = 1;\r\n    }\r\n    parse(val) {\r\n        if (isString(val)) {\r\n            this.icon = getStringOrDefault(val, \"\");\r\n        }\r\n        else {\r\n            this.icon = getStringOrDefault(val.icon, \"\");\r\n            this.scale = getIntOrDefault(val.scale, 1);\r\n        }\r\n    }\r\n}\r\nexport class CuiIconComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-icon`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiIconHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiIconHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiIconHandler\", element, attribute, new CuiIconArgs(), utils);\r\n        _currentIcon.set(this, void 0);\r\n        __classPrivateFieldSet(this, _currentIcon, null);\r\n    }\r\n    onInit() {\r\n        if (__classPrivateFieldGet(this, _currentIcon) !== null) {\r\n            this._log.debug(\"Icon already initialized\");\r\n            return;\r\n        }\r\n        this.addIcon(this.args.icon);\r\n        __classPrivateFieldSet(this, _currentIcon, this.args.icon);\r\n    }\r\n    onUpdate() {\r\n        if (this.args.icon === __classPrivateFieldGet(this, _currentIcon)) {\r\n            return;\r\n        }\r\n        this.addIcon(this.args.icon);\r\n        __classPrivateFieldSet(this, _currentIcon, this.args.icon);\r\n    }\r\n    onDestroy() {\r\n        const svg = this.element.querySelector('svg');\r\n        if (is(svg)) {\r\n            //@ts-ignore checked\r\n            svg.remove();\r\n        }\r\n        __classPrivateFieldSet(this, _currentIcon, null);\r\n    }\r\n    addIcon(icon) {\r\n        const iconStr = icon ? ICONS[icon] : null;\r\n        if (!iconStr) {\r\n            return;\r\n        }\r\n        const iconSvg = new IconBuilder(iconStr).setScale(this.args.scale).build();\r\n        const svg = this.element.querySelector('svg');\r\n        if (is(svg)) {\r\n            //@ts-ignore checked\r\n            svg.remove();\r\n        }\r\n        if (this.element.childNodes.length > 0) {\r\n            this.mutate(this.insertBefore, iconSvg);\r\n        }\r\n        else {\r\n            this.mutate(this.appendChild, iconSvg);\r\n        }\r\n    }\r\n    insertBefore(iconElement) {\r\n        this.element.insertBefore(iconElement, this.element.firstChild);\r\n    }\r\n    appendChild(iconElement) {\r\n        this.element.appendChild(iconElement);\r\n    }\r\n}\r\n_currentIcon = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _observer, _root, _threshold, _callback;\r\nexport class CuiIntersectionEntry {\r\n    constructor() {\r\n        this.isInView = false;\r\n        this.ratio = 0;\r\n    }\r\n}\r\n/**\r\n * Creates a wrapper for intersection observer\r\n * Constructor gets a root element for observer and optional array of threshold values [0...1]\r\n */\r\nexport class CuiIntersectionObserver {\r\n    constructor(root, threshold) {\r\n        _observer.set(this, void 0);\r\n        _root.set(this, void 0);\r\n        _threshold.set(this, void 0);\r\n        _callback.set(this, void 0);\r\n        __classPrivateFieldSet(this, _root, root);\r\n        __classPrivateFieldSet(this, _threshold, threshold !== null && threshold !== void 0 ? threshold : [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1]);\r\n        __classPrivateFieldSet(this, _callback, undefined);\r\n        __classPrivateFieldSet(this, _observer, undefined);\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    connect() {\r\n        if (!__classPrivateFieldGet(this, _callback)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _observer, new IntersectionObserver(__classPrivateFieldGet(this, _callback), {\r\n            root: __classPrivateFieldGet(this, _root),\r\n            rootMargin: '0px',\r\n            threshold: __classPrivateFieldGet(this, _threshold)\r\n        }));\r\n    }\r\n    observe(target) {\r\n        if (__classPrivateFieldGet(this, _observer))\r\n            __classPrivateFieldGet(this, _observer).observe(target);\r\n    }\r\n    unobserve(target) {\r\n        if (__classPrivateFieldGet(this, _observer))\r\n            __classPrivateFieldGet(this, _observer).unobserve(target);\r\n    }\r\n    disconnect() {\r\n        if (__classPrivateFieldGet(this, _observer))\r\n            __classPrivateFieldGet(this, _observer).disconnect();\r\n    }\r\n}\r\n_observer = new WeakMap(), _root = new WeakMap(), _threshold = new WeakMap(), _callback = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _observer, _targets, _actions;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiIntersectionObserver } from \"cui-light-core/dist/esm/observers/intersection\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { is, getRangeValueOrDefault, getStringOrDefault, isStringTrue } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS, SCOPE_SELECTOR } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst DEFAULT_SELCTOR = \"> *\";\r\n/**\r\n * Intersection\r\n * Toggles action in/out when target is intersecting with the screen\r\n *\r\n * Set this on scrollable element\r\n * target - children selector\r\n * offset - 0...1 - tells how much target must intersecting with the screen\r\n * action - action to trigger\r\n */\r\nexport class CuiIntersectionAttributes {\r\n    constructor() {\r\n        this.target = \"div\";\r\n        this.action = \"\";\r\n        this.offset = 0;\r\n        this.isRoot = false;\r\n    }\r\n    parse(args) {\r\n        this.target = is(args.target) ? SCOPE_SELECTOR + args.target : SCOPE_SELECTOR + DEFAULT_SELCTOR;\r\n        this.action = getStringOrDefault(args.action, \"\");\r\n        this.offset = getRangeValueOrDefault(parseFloat(args.offset), 0, 1, 0);\r\n        this.isRoot = isStringTrue(args.isRoot);\r\n    }\r\n}\r\nexport class CuiIntersectionComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-intersection`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiIntersectionHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiIntersectionHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiIntersectionHandler\", element, attribute, new CuiIntersectionAttributes(), utils);\r\n        _observer.set(this, void 0);\r\n        _targets.set(this, void 0);\r\n        _actions.set(this, void 0);\r\n        __classPrivateFieldSet(this, _observer, new CuiIntersectionObserver(this.element));\r\n        __classPrivateFieldSet(this, _targets, []);\r\n        __classPrivateFieldSet(this, _actions, []);\r\n    }\r\n    onInit() {\r\n        this.parseArguments();\r\n        __classPrivateFieldGet(this, _observer).setCallback(this.onIntersection.bind(this));\r\n        __classPrivateFieldGet(this, _observer).connect();\r\n        __classPrivateFieldGet(this, _targets).forEach(target => {\r\n            __classPrivateFieldGet(this, _observer).observe(target);\r\n        });\r\n    }\r\n    onUpdate() {\r\n        this.parseArguments();\r\n    }\r\n    onDestroy() {\r\n        __classPrivateFieldGet(this, _observer).disconnect();\r\n    }\r\n    parseArguments() {\r\n        // @ts-ignore prevArgs is correct\r\n        if (!is(this.prevArgs) || (this.prevArgs.target !== this.args.target)) {\r\n            let el = this.args.isRoot ? document.body : this.element;\r\n            __classPrivateFieldSet(this, _targets, [...el.querySelectorAll(this.args.target)]);\r\n        }\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n    }\r\n    onIntersection(entries, observer) {\r\n        if (!is(__classPrivateFieldGet(this, _targets))) {\r\n            return;\r\n        }\r\n        entries.forEach(entry => {\r\n            if (entry.isIntersecting && entry.intersectionRatio >= this.args.offset) {\r\n                this.addActions(entry.target);\r\n            }\r\n            else {\r\n                this.removeActions(entry.target);\r\n            }\r\n            this.emitIntersection(entry);\r\n        });\r\n    }\r\n    emitIntersection(entry) {\r\n        this.emitEvent(EVENTS.INTERSECTION, {\r\n            entry: entry,\r\n            offset: this.args.offset,\r\n            timestamp: Date.now()\r\n        });\r\n    }\r\n    addActions(element) {\r\n        __classPrivateFieldGet(this, _actions).forEach(action => action.add(element));\r\n    }\r\n    removeActions(element) {\r\n        __classPrivateFieldGet(this, _actions).forEach(action => action.remove(element));\r\n    }\r\n}\r\n_observer = new WeakMap(), _targets = new WeakMap(), _actions = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _prefix, _defTimeout, _prefix_1, _prefix_2, _bodyClass, _scrollY, _windowClickEventId;\r\nimport { CuiInteractableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { AriaAttributes } from \"cui-light-core/dist/esm/utils/aria\";\r\nimport { is, isStringTrue, getStringOrDefault, getIntOrDefault, replacePrefix, getName } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst OFFCANVAS_RIGHT_ANIM_DEFAULT_IN = \".{prefix}-offcanvas-default-right-in\";\r\nconst OFFCANVAS_RIGHT_ANIM_DEFAULT_OUT = \".{prefix}-offcanvas-default-right-out\";\r\nconst OFFCANVAS_LEFT_ANIM_DEFAULT_IN = \".{prefix}-offcanvas-default-left-in\";\r\nconst OFFCANVAS_LEFT_ANIM_DEFAULT_OUT = \".{prefix}-offcanvas-default-left-out\";\r\nconst OFFCANVAS_BODY = \"{prefix}-off-canvas-open\";\r\nconst OFFCANVAS_CONTAINER_CLS = '.{prefix}-off-canvas-container';\r\nexport class CuiOffCanvasArgs {\r\n    constructor(prefix, timeout) {\r\n        _prefix.set(this, void 0);\r\n        _defTimeout.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        this.escClose = false;\r\n        this.position = 'right';\r\n        this.openAct = this.getDefaultOpenClass();\r\n        this.closeAct = this.getDefaultCloseClass();\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n        this.outClose = false;\r\n        this.keyClose = \"\";\r\n    }\r\n    parse(args) {\r\n        if (is(args)) {\r\n            this.escClose = isStringTrue(args.escClose);\r\n            this.outClose = isStringTrue(args.outClose);\r\n            this.position = getStringOrDefault(args.position, 'right');\r\n            this.openAct = getStringOrDefault(args.openAct, this.getDefaultOpenClass());\r\n            this.closeAct = getStringOrDefault(args.closeAct, this.getDefaultCloseClass());\r\n            this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n            this.keyClose = args.keyClose;\r\n        }\r\n    }\r\n    getDefaultOpenClass() {\r\n        return replacePrefix(this.position === 'right' ? OFFCANVAS_RIGHT_ANIM_DEFAULT_IN : OFFCANVAS_LEFT_ANIM_DEFAULT_IN, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n    getDefaultCloseClass() {\r\n        return replacePrefix(this.position === 'right' ? OFFCANVAS_RIGHT_ANIM_DEFAULT_OUT : OFFCANVAS_LEFT_ANIM_DEFAULT_OUT, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap(), _defTimeout = new WeakMap();\r\nexport class CuiOffCanvasComponent {\r\n    constructor(prefix) {\r\n        _prefix_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix_1, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix_1)}-off-canvas`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiOffCanvasHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix_1));\r\n    }\r\n}\r\n_prefix_1 = new WeakMap();\r\nexport class CuiOffCanvasHandler extends CuiInteractableHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiOffCanvasHandler\", element, attribute, new CuiOffCanvasArgs(prefix, utils.setup.animationTime), utils);\r\n        _prefix_2.set(this, void 0);\r\n        _bodyClass.set(this, void 0);\r\n        _scrollY.set(this, void 0);\r\n        _windowClickEventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix_2, prefix);\r\n        __classPrivateFieldSet(this, _bodyClass, replacePrefix(OFFCANVAS_BODY, prefix));\r\n        __classPrivateFieldSet(this, _windowClickEventId, null);\r\n        __classPrivateFieldSet(this, _scrollY, 0);\r\n    }\r\n    onInit() {\r\n        this.mutate(() => {\r\n            this.setPositionLeft();\r\n            AriaAttributes.setAria(this.element, 'aria-modal', \"\");\r\n        });\r\n    }\r\n    onUpdate() {\r\n        this.setPositionLeft();\r\n    }\r\n    onDestroy() {\r\n    }\r\n    onBeforeOpen() {\r\n        if (this.isAnyActive()) {\r\n            return false;\r\n        }\r\n        __classPrivateFieldSet(this, _scrollY, window.pageYOffset);\r\n        return true;\r\n    }\r\n    onAfterOpen() {\r\n        if (this.args.outClose) {\r\n            __classPrivateFieldSet(this, _windowClickEventId, this.onEvent(EVENTS.WINDOW_CLICK, this.onWindowClick.bind(this)));\r\n        }\r\n        this.helper.setClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n        document.body.style.top = `-${scrollY}px`;\r\n    }\r\n    onAfterClose() {\r\n        this.detachEvent(EVENTS.WINDOW_CLICK, __classPrivateFieldGet(this, _windowClickEventId));\r\n        this.helper.removeClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n        document.body.style.top = '';\r\n        window.scrollTo(0, __classPrivateFieldGet(this, _scrollY) * -1);\r\n    }\r\n    onBeforeClose() {\r\n        return true;\r\n    }\r\n    onWindowClick(ev) {\r\n        const container = this.element.querySelector(replacePrefix(OFFCANVAS_CONTAINER_CLS, __classPrivateFieldGet(this, _prefix_2)));\r\n        if (container && !container.contains(ev.target)) {\r\n            this.close();\r\n        }\r\n    }\r\n    isAnyActive() {\r\n        return this.helper.hasClass(__classPrivateFieldGet(this, _bodyClass), document.body);\r\n    }\r\n    setPositionLeft() {\r\n        let cls = getName(__classPrivateFieldGet(this, _prefix_2), 'left');\r\n        if (this.args.position === 'left' && !this.helper.hasClass(cls, this.element)) {\r\n            this.helper.setClass(cls, this.element);\r\n        }\r\n        else if (this.args.position == 'right' && this.helper.hasClass(cls, this.element)) {\r\n            this.helper.removeClass(cls, this.element);\r\n        }\r\n    }\r\n}\r\n_prefix_2 = new WeakMap(), _bodyClass = new WeakMap(), _scrollY = new WeakMap(), _windowClickEventId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _box, _element, _element_1;\r\nexport class CuiElementBoxFactory {\r\n    static get(element) {\r\n        if (element instanceof Window) {\r\n            return new WindowElementBox();\r\n        }\r\n        else if (element instanceof HTMLElement) {\r\n            return new HTMLElementBox(element);\r\n        }\r\n        return new ElementBox(element);\r\n    }\r\n}\r\nexport class ElementBox {\r\n    constructor(element) {\r\n        _box.set(this, void 0);\r\n        _element.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element, element);\r\n        __classPrivateFieldSet(this, _box, element.getBoundingClientRect());\r\n    }\r\n    getHeight() {\r\n        return __classPrivateFieldGet(this, _box).height;\r\n    }\r\n    getWidth() {\r\n        return __classPrivateFieldGet(this, _box).width;\r\n    }\r\n    getTop() {\r\n        return __classPrivateFieldGet(this, _box).top;\r\n    }\r\n    getLeft() {\r\n        return __classPrivateFieldGet(this, _box).left;\r\n    }\r\n    getScrollHeight() {\r\n        return __classPrivateFieldGet(this, _element).scrollHeight;\r\n    }\r\n    getScrollWidth() {\r\n        return __classPrivateFieldGet(this, _element).scrollWidth;\r\n    }\r\n    getScrollTop() {\r\n        return __classPrivateFieldGet(this, _element).scrollTop;\r\n    }\r\n    getScrollLeft() {\r\n        return __classPrivateFieldGet(this, _element).scrollLeft;\r\n    }\r\n    queryAll(selector) {\r\n        return [...__classPrivateFieldGet(this, _element).querySelectorAll(selector)];\r\n    }\r\n}\r\n_box = new WeakMap(), _element = new WeakMap();\r\nexport class HTMLElementBox {\r\n    constructor(element) {\r\n        _element_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _element_1, element);\r\n    }\r\n    getHeight() {\r\n        return __classPrivateFieldGet(this, _element_1).offsetHeight;\r\n    }\r\n    getWidth() {\r\n        return __classPrivateFieldGet(this, _element_1).offsetWidth;\r\n    }\r\n    getTop() {\r\n        return __classPrivateFieldGet(this, _element_1).offsetTop;\r\n    }\r\n    getLeft() {\r\n        return __classPrivateFieldGet(this, _element_1).offsetLeft;\r\n    }\r\n    getScrollHeight() {\r\n        return __classPrivateFieldGet(this, _element_1).scrollHeight;\r\n    }\r\n    getScrollWidth() {\r\n        return __classPrivateFieldGet(this, _element_1).scrollWidth;\r\n    }\r\n    getScrollTop() {\r\n        return __classPrivateFieldGet(this, _element_1).scrollTop;\r\n    }\r\n    getScrollLeft() {\r\n        return __classPrivateFieldGet(this, _element_1).scrollLeft;\r\n    }\r\n    queryAll(selector) {\r\n        return [...__classPrivateFieldGet(this, _element_1).querySelectorAll(selector)];\r\n    }\r\n}\r\n_element_1 = new WeakMap();\r\nexport class WindowElementBox {\r\n    getHeight() {\r\n        return window.innerHeight;\r\n    }\r\n    getWidth() {\r\n        return window.innerWidth;\r\n    }\r\n    getTop() {\r\n        return 0;\r\n    }\r\n    getLeft() {\r\n        return 0;\r\n    }\r\n    getScrollHeight() {\r\n        return window.innerHeight;\r\n    }\r\n    getScrollWidth() {\r\n        return window.innerWidth;\r\n    }\r\n    getScrollTop() {\r\n        return window.pageYOffset;\r\n    }\r\n    getScrollLeft() {\r\n        return window.pageXOffset;\r\n    }\r\n    queryAll(selector) {\r\n        return [...document.querySelectorAll(selector)];\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _target, _inProgress, _threshold, _prevX, _prevY, _callback, _isAttached, _box, _task, _listener;\r\nimport { CuiElementBoxFactory } from \"../models/elements\";\r\nimport { getRangeValueOrDefault, is } from \"../utils/functions\";\r\nimport { CuiTaskRunner } from \"../utils/task\";\r\nconst DEFAULT_SCROLL_END_TIMEOUT = 50;\r\nexport class CuiScrollListener {\r\n    constructor(target, threshold) {\r\n        _target.set(this, void 0);\r\n        _inProgress.set(this, void 0);\r\n        _threshold.set(this, void 0);\r\n        _prevX.set(this, void 0);\r\n        _prevY.set(this, void 0);\r\n        _callback.set(this, void 0);\r\n        _isAttached.set(this, void 0);\r\n        _box.set(this, void 0);\r\n        _task.set(this, void 0);\r\n        _listener.set(this, void 0);\r\n        __classPrivateFieldSet(this, _target, target);\r\n        __classPrivateFieldSet(this, _box, CuiElementBoxFactory.get(target));\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n        __classPrivateFieldSet(this, _threshold, getRangeValueOrDefault(threshold, 0, 100, 0));\r\n        __classPrivateFieldSet(this, _prevX, __classPrivateFieldSet(this, _prevY, 0));\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n        __classPrivateFieldSet(this, _callback, undefined);\r\n        __classPrivateFieldSet(this, _task, new CuiTaskRunner(DEFAULT_SCROLL_END_TIMEOUT, false, this.onScrollFinish.bind(this)));\r\n        __classPrivateFieldSet(this, _listener, this.listener.bind(this));\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    attach() {\r\n        __classPrivateFieldGet(this, _target).addEventListener('scroll', __classPrivateFieldGet(this, _listener));\r\n        __classPrivateFieldSet(this, _isAttached, true);\r\n        this.listener(undefined, true, \"init\");\r\n    }\r\n    detach() {\r\n        __classPrivateFieldGet(this, _target).removeEventListener('scroll', __classPrivateFieldGet(this, _listener));\r\n        __classPrivateFieldGet(this, _task).stop();\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n    }\r\n    setTarget(target) {\r\n        if (target !== __classPrivateFieldGet(this, _target)) {\r\n            this.detach();\r\n            __classPrivateFieldSet(this, _target, target);\r\n            this.attach();\r\n        }\r\n    }\r\n    setThreshold(threshold) {\r\n        __classPrivateFieldSet(this, _threshold, getRangeValueOrDefault(threshold, 0, 100, 0));\r\n    }\r\n    isInProgress() {\r\n        return __classPrivateFieldGet(this, _inProgress);\r\n    }\r\n    isAttached() {\r\n        return __classPrivateFieldGet(this, _isAttached);\r\n    }\r\n    listener(ev, initial, source) {\r\n        if (!is(__classPrivateFieldGet(this, _callback))) {\r\n            return;\r\n        }\r\n        let left = __classPrivateFieldGet(this, _box).getScrollLeft();\r\n        let top = __classPrivateFieldGet(this, _box).getScrollTop();\r\n        __classPrivateFieldSet(this, _prevX, __classPrivateFieldGet(this, _prevX) + left);\r\n        __classPrivateFieldSet(this, _prevY, __classPrivateFieldGet(this, _prevY) + top);\r\n        if (__classPrivateFieldGet(this, _inProgress) || (!this.passedThreshold() && is(ev))) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _inProgress, true);\r\n        // @ts-ignore - callback already checked\r\n        __classPrivateFieldGet(this, _callback).call(this, {\r\n            base: ev,\r\n            top: top,\r\n            left: left,\r\n            initial: initial !== null && initial !== void 0 ? initial : false,\r\n            scrolling: is(ev),\r\n            source: source !== null && source !== void 0 ? source : \"event\"\r\n        });\r\n        if (is(ev))\r\n            __classPrivateFieldGet(this, _task).start();\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n        __classPrivateFieldSet(this, _prevX, 0);\r\n        __classPrivateFieldSet(this, _prevY, 0);\r\n    }\r\n    passedThreshold() {\r\n        return __classPrivateFieldGet(this, _threshold) <= 0 || (__classPrivateFieldGet(this, _prevX) >= __classPrivateFieldGet(this, _threshold) || __classPrivateFieldGet(this, _prevY) >= __classPrivateFieldGet(this, _threshold));\r\n    }\r\n    onScrollFinish() {\r\n        this.listener(undefined, false, \"task\");\r\n    }\r\n}\r\n_target = new WeakMap(), _inProgress = new WeakMap(), _threshold = new WeakMap(), _prevX = new WeakMap(), _prevY = new WeakMap(), _callback = new WeakMap(), _isAttached = new WeakMap(), _box = new WeakMap(), _task = new WeakMap(), _listener = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _pointLeft, _pointTop, _prevDiffY, _prevDiffX, _wasTriggeredX, _wasTriggeredY, _threshold;\r\nexport class CuiOffsetStaticMode {\r\n    matches(top, left, offsetX, offsetY) {\r\n        return (offsetX > 0 && left >= offsetX) ||\r\n            (offsetY > 0 && top >= offsetY);\r\n    }\r\n}\r\n/**\r\n * Dynamically calculates whether to trigger or untrigger an action.\r\n * If current value exceedes offset and threshold action is triggered.\r\n * If action was triggered and current move is lower than threshold action is untriggered\r\n *\r\n * Example: If offsetY is 100, then first after 100 action is set on. It is kept when scrolling down.\r\n * If user decides to scroll up and difference between turning point and current is bigger than threshold then action is set off.\r\n *\r\n * Example usage is with navbar - it shall disappear after offset and return back when user scrolls up.\r\n */\r\nexport class CuiOffsetDynamicMode {\r\n    constructor() {\r\n        _pointLeft.set(this, void 0);\r\n        _pointTop.set(this, void 0);\r\n        _prevDiffY.set(this, void 0);\r\n        _prevDiffX.set(this, void 0);\r\n        _wasTriggeredX.set(this, void 0);\r\n        _wasTriggeredY.set(this, void 0);\r\n        _threshold.set(this, void 0);\r\n        __classPrivateFieldSet(this, _pointLeft, 0);\r\n        __classPrivateFieldSet(this, _pointTop, 0);\r\n        __classPrivateFieldSet(this, _prevDiffX, 0);\r\n        __classPrivateFieldSet(this, _prevDiffY, 0);\r\n        __classPrivateFieldSet(this, _threshold, 100);\r\n        __classPrivateFieldSet(this, _wasTriggeredX, false);\r\n        __classPrivateFieldSet(this, _wasTriggeredY, false);\r\n    }\r\n    matches(top, left, offsetX, offsetY) {\r\n        return this.fitsOffsetY(top, offsetY) || this.fitsOffsetX(left, offsetX);\r\n    }\r\n    fitsOffsetX(left, offsetX) {\r\n        if (offsetX <= 0)\r\n            return false;\r\n        let diffX = left - __classPrivateFieldGet(this, _pointLeft);\r\n        if (left >= offsetX && diffX > __classPrivateFieldGet(this, _threshold)) {\r\n            __classPrivateFieldSet(this, _wasTriggeredX, true);\r\n        }\r\n        else if (__classPrivateFieldGet(this, _wasTriggeredX) && diffX < -__classPrivateFieldGet(this, _threshold)) {\r\n            __classPrivateFieldSet(this, _wasTriggeredX, false);\r\n        }\r\n        if (diffX < 0 && __classPrivateFieldGet(this, _prevDiffX) < diffX || diffX >= 0 && __classPrivateFieldGet(this, _prevDiffX) > diffX) {\r\n            __classPrivateFieldSet(this, _pointLeft, left);\r\n        }\r\n        __classPrivateFieldSet(this, _prevDiffX, diffX);\r\n        return __classPrivateFieldGet(this, _wasTriggeredX);\r\n    }\r\n    fitsOffsetY(top, offsetY) {\r\n        if (offsetY <= 0) {\r\n            return false;\r\n        }\r\n        let diffY = top - __classPrivateFieldGet(this, _pointTop);\r\n        if (top >= offsetY && diffY > __classPrivateFieldGet(this, _threshold)) {\r\n            __classPrivateFieldSet(this, _wasTriggeredY, true);\r\n        }\r\n        else if (__classPrivateFieldGet(this, _wasTriggeredY) && diffY < -__classPrivateFieldGet(this, _threshold)) {\r\n            __classPrivateFieldSet(this, _wasTriggeredY, false);\r\n        }\r\n        if (diffY < 0 && __classPrivateFieldGet(this, _prevDiffY) < diffY || diffY >= 0 && __classPrivateFieldGet(this, _prevDiffY) > diffY) {\r\n            __classPrivateFieldSet(this, _pointTop, top);\r\n        }\r\n        __classPrivateFieldSet(this, _prevDiffY, diffY);\r\n        return __classPrivateFieldGet(this, _wasTriggeredY);\r\n    }\r\n}\r\n_pointLeft = new WeakMap(), _pointTop = new WeakMap(), _prevDiffY = new WeakMap(), _prevDiffX = new WeakMap(), _wasTriggeredX = new WeakMap(), _wasTriggeredY = new WeakMap(), _threshold = new WeakMap();\r\nexport class CuiOffsetModeFactory {\r\n    static get(mode) {\r\n        if (mode === 'dynamic') {\r\n            return new CuiOffsetDynamicMode();\r\n        }\r\n        return new CuiOffsetStaticMode();\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _listener, _target, _utils, _matched, _action, _prevX, _prevY, _threshold, _root, _modeHandler;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiScrollListener } from \"cui-light-core/dist/esm/listeners/scroll\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { are, getIntOrDefault, getRangeValue, getStringOrDefault, is, isStringTrue } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiOffsetModeFactory } from \"./modes\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nexport class CuiOffsetArgs {\r\n    constructor() {\r\n        this.offsetX = 0;\r\n        this.offsetY = 0;\r\n        this.target = \"\";\r\n        this.root = false;\r\n        this.action = \"\";\r\n        this.mode = 'static';\r\n    }\r\n    parse(args) {\r\n        this.target = args.target;\r\n        this.action = args.action;\r\n        this.offsetX = getIntOrDefault(args.offsetX, -1);\r\n        this.offsetY = getIntOrDefault(args.offsetY, -1);\r\n        this.root = isStringTrue(args.root);\r\n        this.mode = getStringOrDefault(args.mode, 'static');\r\n    }\r\n}\r\nexport class CuiOffsetComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-offset`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiOffsetHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiOffsetHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiOffsetHandler\", element, attribute, new CuiOffsetArgs(), utils);\r\n        _listener.set(this, void 0);\r\n        _target.set(this, void 0);\r\n        _utils.set(this, void 0);\r\n        _matched.set(this, void 0);\r\n        _action.set(this, void 0);\r\n        _prevX.set(this, void 0);\r\n        _prevY.set(this, void 0);\r\n        _threshold.set(this, void 0);\r\n        _root.set(this, void 0);\r\n        _modeHandler.set(this, void 0);\r\n        this.element = element;\r\n        __classPrivateFieldSet(this, _target, this.element);\r\n        __classPrivateFieldSet(this, _utils, utils);\r\n        __classPrivateFieldSet(this, _matched, false);\r\n        __classPrivateFieldSet(this, _action, []);\r\n        __classPrivateFieldSet(this, _prevX, 0);\r\n        __classPrivateFieldSet(this, _prevY, 0);\r\n        __classPrivateFieldSet(this, _threshold, 20);\r\n        __classPrivateFieldSet(this, _root, this.element);\r\n        __classPrivateFieldSet(this, _modeHandler, null);\r\n        __classPrivateFieldSet(this, _listener, undefined);\r\n    }\r\n    onInit() {\r\n        this.parseAttribute();\r\n        __classPrivateFieldSet(this, _listener, new CuiScrollListener(this.args.root ? window : this.element, this.utils.setup.scrollThreshold));\r\n        __classPrivateFieldGet(this, _listener).setCallback(this.onScroll.bind(this));\r\n        __classPrivateFieldGet(this, _listener).attach();\r\n    }\r\n    onUpdate() {\r\n        this.parseAttribute();\r\n    }\r\n    onDestroy() {\r\n        if (__classPrivateFieldGet(this, _listener))\r\n            __classPrivateFieldGet(this, _listener).detach();\r\n    }\r\n    onScroll(ev) {\r\n        this.checkAndPerformActions(ev);\r\n    }\r\n    parseAttribute() {\r\n        __classPrivateFieldSet(this, _root, this.getRoot());\r\n        __classPrivateFieldSet(this, _target, this.getTarget());\r\n        __classPrivateFieldSet(this, _action, CuiActionsListFactory.get(this.args.action));\r\n        __classPrivateFieldSet(this, _modeHandler, CuiOffsetModeFactory.get(this.args.mode));\r\n    }\r\n    checkAndPerformActions(ev) {\r\n        if (!is(__classPrivateFieldGet(this, _modeHandler))) {\r\n            this.logError(\"Cannot perform - mode handler not initialized\", \"checkAndPerformActions\");\r\n        }\r\n        // @ts-ignore modehandler\r\n        let matchesOffset = __classPrivateFieldGet(this, _modeHandler).matches(ev.top, ev.left, this.args.offsetX, this.args.offsetY);\r\n        /**\r\n         * Act and emit event when offset has been reached\r\n         */\r\n        if (matchesOffset !== __classPrivateFieldGet(this, _matched)) {\r\n            this.act(matchesOffset);\r\n            __classPrivateFieldSet(this, _matched, matchesOffset);\r\n            this.callEvent(__classPrivateFieldGet(this, _matched), ev.left, ev.top, ev.scrolling, ev.source, ...this.calcaRatio(ev.left, ev.top));\r\n            return;\r\n        }\r\n        /**\r\n         * Emit event periodically\r\n         */\r\n        if (this.exceededThreshold(ev.left, ev.top)) {\r\n            this.callEvent(__classPrivateFieldGet(this, _matched), ev.left, ev.top, ev.scrolling, ev.source, ...this.calcaRatio(ev.left, ev.top));\r\n            __classPrivateFieldSet(this, _prevX, ev.left);\r\n            __classPrivateFieldSet(this, _prevY, ev.top);\r\n        }\r\n    }\r\n    act(matching) {\r\n        if (!are(__classPrivateFieldGet(this, _action), __classPrivateFieldGet(this, _target))) {\r\n            return;\r\n        }\r\n        this.isLocked = true;\r\n        __classPrivateFieldGet(this, _action).forEach(action => {\r\n            if (matching) {\r\n                action.add(__classPrivateFieldGet(this, _target), __classPrivateFieldGet(this, _utils));\r\n            }\r\n            else {\r\n                action.remove(__classPrivateFieldGet(this, _target), __classPrivateFieldGet(this, _utils));\r\n            }\r\n        });\r\n        this.isLocked = false;\r\n    }\r\n    callEvent(matches, x, y, scrolling, source, ratioX, ratioY) {\r\n        this.emitEvent(EVENTS.OFFSET, {\r\n            matches: __classPrivateFieldGet(this, _matched),\r\n            offsetX: x,\r\n            offsetY: y,\r\n            ratioX: ratioX,\r\n            ratioY: ratioY,\r\n            scrolling: scrolling,\r\n            source: source,\r\n            timestamp: Date.now()\r\n        });\r\n    }\r\n    getRoot() {\r\n        return this.args.root ? document.body : this.element;\r\n    }\r\n    exceededThreshold(x, y) {\r\n        return Math.abs(x - __classPrivateFieldGet(this, _prevX)) > __classPrivateFieldGet(this, _threshold) || Math.abs(y - __classPrivateFieldGet(this, _prevY)) > __classPrivateFieldGet(this, _threshold);\r\n    }\r\n    calcaRatio(x, y) {\r\n        let ratY = parseFloat(((__classPrivateFieldGet(this, _root).clientHeight + y) / __classPrivateFieldGet(this, _root).scrollHeight).toFixed(2));\r\n        let ratX = parseFloat(((__classPrivateFieldGet(this, _root).clientWidth + x) / __classPrivateFieldGet(this, _root).scrollWidth).toFixed(2));\r\n        return [getRangeValue(ratX, 0, 1), getRangeValue(ratY, 0, 1)];\r\n    }\r\n    getTarget() {\r\n        let target = this.args.target ? __classPrivateFieldGet(this, _root).querySelector(this.args.target) : null;\r\n        return target !== null && target !== void 0 ? target : this.element;\r\n    }\r\n}\r\n_listener = new WeakMap(), _target = new WeakMap(), _utils = new WeakMap(), _matched = new WeakMap(), _action = new WeakMap(), _prevX = new WeakMap(), _prevY = new WeakMap(), _threshold = new WeakMap(), _root = new WeakMap(), _modeHandler = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defTimeout, _prefix, _eventId;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { getStringOrDefault, getIntOrDefault, is, isString, isStringTrue, are, getFirstMatching } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { CUID_ATTRIBUTE, EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nexport class CuiOpenArgs {\r\n    constructor(timeout) {\r\n        _defTimeout.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        this.target = \"\";\r\n        this.action = \"\";\r\n        this.timeout = 0;\r\n        this.prevent = false;\r\n        this.state = \"\";\r\n    }\r\n    parse(args) {\r\n        if (is(args) && isString(args)) {\r\n            this.target = args;\r\n            this.action = \"\";\r\n            this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n            this.prevent = false;\r\n            this.state = \"\";\r\n            return;\r\n        }\r\n        this.target = getStringOrDefault(args.target, \"\");\r\n        this.action = args.action;\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.prevent = isStringTrue(args.prevent);\r\n        this.state = args.state;\r\n    }\r\n}\r\n_defTimeout = new WeakMap();\r\nexport class CuiOpenComponent {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix)}-open`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiOpenHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiOpenHandler extends CuiHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiOpenHandler\", element, attribute, new CuiOpenArgs(utils.setup.animationTime), utils);\r\n        _eventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _eventId, null);\r\n        this.onClick = this.onClick.bind(this);\r\n    }\r\n    onInit() {\r\n        this.element.addEventListener('click', this.onClick);\r\n        __classPrivateFieldSet(this, _eventId, this.onEvent(EVENTS.OPEN, this.onOpen.bind(this)));\r\n    }\r\n    onUpdate() {\r\n        //\r\n    }\r\n    onDestroy() {\r\n        this.element.removeEventListener('click', this.onClick);\r\n        this.detachEvent(EVENTS.OPEN, __classPrivateFieldGet(this, _eventId));\r\n    }\r\n    onClick(ev) {\r\n        this.onOpen(ev);\r\n        if (this.args.prevent) {\r\n            ev.preventDefault();\r\n        }\r\n    }\r\n    onOpen(ev) {\r\n        if (this.isLocked) {\r\n            return;\r\n        }\r\n        const target = this.getTarget(this.args.target);\r\n        if (!is(target)) {\r\n            this._log.warning(`Target ${this.args.target} not found`, 'onClick');\r\n            return;\r\n        }\r\n        this.isLocked = true;\r\n        //@ts-ignore - target checked\r\n        this.run(target).then((result) => {\r\n            //@ts-ignore - target checked\r\n            this.activateTarget(ev, target, result);\r\n        }).catch((e) => {\r\n            this._log.exception(e);\r\n        }).finally(() => {\r\n            this.isLocked = false;\r\n        });\r\n    }\r\n    /**\r\n     * Emits open event or performs an opening action\r\n     * @param target target element\r\n     * @returns whether event opened shall be emitted\r\n     */\r\n    run(target) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let cuiId = target.$cuid;\r\n            if (is(cuiId)) {\r\n                this._log.debug(\"Open cUI component\");\r\n                yield this.utils.bus.emit(EVENTS.OPEN, cuiId, this.args.state);\r\n                return false;\r\n            }\r\n            else {\r\n                this._log.debug(\"Open html component\");\r\n                if (are(this.args.timeout, this.args.action)) {\r\n                    this._log.debug(\"Perfrom an action\");\r\n                    let actions = CuiActionsListFactory.get(this.args.action);\r\n                    yield this.actionsHelper.performActions(target, actions, this.args.timeout, () => {\r\n                        this.setActiveClass(target);\r\n                    });\r\n                    return true;\r\n                }\r\n                this.setActiveClassAsync(target);\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n    setActiveClass(target) {\r\n        if (is(target) && !this.helper.hasClass(this.activeClassName, target)) {\r\n            this.helper.setClass(this.activeClassName, target);\r\n        }\r\n    }\r\n    setActiveClassAsync(target) {\r\n        this.fetch(() => {\r\n            if (is(target) && !this.helper.hasClass(this.activeClassName, target)) {\r\n                this.helper.setClassesAs(target, this.activeClassName);\r\n            }\r\n        });\r\n    }\r\n    activateTarget(ev, target, shouldEmit) {\r\n        if (is(target) && !this.helper.hasClass(this.activeClassName, target)) {\r\n            this.helper.setClassesAs(target, this.activeClassName);\r\n        }\r\n        if (shouldEmit)\r\n            this.emitOpen(ev);\r\n    }\r\n    emitOpen(ev) {\r\n        this.emitEvent(EVENTS.OPENED, {\r\n            event: ev,\r\n            state: this.args.state,\r\n            timestamp: Date.now()\r\n        });\r\n    }\r\n    getTarget(target) {\r\n        if (is(target)) {\r\n            //@ts-ignore - target checked\r\n            return document.querySelector(target);\r\n        }\r\n        let parent = this.element.parentElement;\r\n        //@ts-ignore - parent checked\r\n        let result = is(parent) ? parent.querySelectorAll(`[${CUID_ATTRIBUTE}]`) : undefined;\r\n        if (!result || result.length < 2) {\r\n            return undefined;\r\n        }\r\n        return getFirstMatching([...result], (el) => {\r\n            return el !== this.element;\r\n        });\r\n    }\r\n}\r\n_eventId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _parent, _target, _onClickBound;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { is, getOffsetTop, getStringOrDefault, are } from \"cui-light-core/dist/esm/utils/functions\";\r\n/**\r\n * Component scrolls to specified target in the document\r\n * Arguments:\r\n * target - selector to target element where page should be scrolled to.\r\n * parent - set parent selector if parent should be different than html parent\r\n * behavior - auto/smooth - choose between step and smooth scrolling\r\n *\r\n */\r\nexport class CuiScrollComponent {\r\n    constructor(prefix) {\r\n        this.attribute = is(prefix) ? prefix + 'scroll' : 'cui-scroll';\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiScrollHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiScrollArgs {\r\n    constructor() {\r\n        this.target = \"\";\r\n        this.parent = \"\";\r\n        this.behavior = 'auto';\r\n    }\r\n    parse(val) {\r\n        this.target = getStringOrDefault(val.target, \"\");\r\n        this.parent = getStringOrDefault(val.parent, \"\");\r\n        this.behavior = is(val.behavior) && val.behavior.toLowerCase() === 'smooth' ? 'smooth' : 'auto';\r\n    }\r\n}\r\nexport class CuiScrollHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiScrollHandler\", element, attribute, new CuiScrollArgs(), utils);\r\n        _parent.set(this, void 0);\r\n        _target.set(this, void 0);\r\n        _onClickBound.set(this, void 0);\r\n        this.element = element;\r\n        __classPrivateFieldSet(this, _parent, null);\r\n        __classPrivateFieldSet(this, _target, null);\r\n        __classPrivateFieldSet(this, _onClickBound, this.onClick.bind(this));\r\n    }\r\n    onInit() {\r\n        this.element.addEventListener('click', __classPrivateFieldGet(this, _onClickBound));\r\n        this.setTargets();\r\n    }\r\n    onUpdate() {\r\n        this.setTargets();\r\n    }\r\n    onDestroy() {\r\n        this.element.removeEventListener('click', __classPrivateFieldGet(this, _onClickBound));\r\n    }\r\n    onClick(ev) {\r\n        if (!are(__classPrivateFieldGet(this, _target), __classPrivateFieldGet(this, _parent))) {\r\n            return;\r\n        }\r\n        //@ts-ignore\r\n        let to = getOffsetTop(__classPrivateFieldGet(this, _target)) - __classPrivateFieldGet(this, _parent).offsetTop;\r\n        //@ts-ignore\r\n        let from = __classPrivateFieldGet(this, _parent).scrollTop;\r\n        let by = to - from;\r\n        //@ts-ignore\r\n        __classPrivateFieldGet(this, _parent).scrollBy({\r\n            top: by,\r\n            behavior: this.args.behavior\r\n        });\r\n        this.emitEvent(EVENTS.ON_SCROLL, {\r\n            to: to,\r\n            by: by,\r\n            //@ts-ignore\r\n            target: __classPrivateFieldGet(this, _target),\r\n            //@ts-ignore\r\n            parent: __classPrivateFieldGet(this, _parent),\r\n            timestamp: Date.now(),\r\n        });\r\n        ev.preventDefault();\r\n    }\r\n    setTargets() {\r\n        __classPrivateFieldSet(this, _target, document.querySelector(this.args.target));\r\n        if (is(__classPrivateFieldGet(this, _target))) {\r\n            __classPrivateFieldSet(this, _parent, is(this.args.parent) ? document.querySelector(this.args.parent) : __classPrivateFieldGet(this, _target).parentElement);\r\n        }\r\n    }\r\n}\r\n_parent = new WeakMap(), _target = new WeakMap(), _onClickBound = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _scrollListener, _callback, _children, _box;\r\nimport { CuiScrollListener } from \"../listeners/scroll\";\r\nimport { CuiElementBoxFactory } from \"../models/elements\";\r\nimport { are, getRangeValue } from \"../utils/functions\";\r\nconst DEFAULT_OPTION_THRESHOLD = 0;\r\nexport class CuiIntersectionListener {\r\n    constructor(element, options) {\r\n        var _a;\r\n        _scrollListener.set(this, void 0);\r\n        _callback.set(this, void 0);\r\n        _children.set(this, void 0);\r\n        _box.set(this, void 0);\r\n        __classPrivateFieldSet(this, _box, CuiElementBoxFactory.get(element));\r\n        __classPrivateFieldSet(this, _scrollListener, new CuiScrollListener(element, (_a = options === null || options === void 0 ? void 0 : options.threshold) !== null && _a !== void 0 ? _a : DEFAULT_OPTION_THRESHOLD));\r\n        __classPrivateFieldGet(this, _scrollListener).setCallback(this.onScroll.bind(this));\r\n        __classPrivateFieldSet(this, _children, []);\r\n        __classPrivateFieldSet(this, _callback, undefined);\r\n    }\r\n    /**\r\n     * Sets child elements - ratio is calcutalated based on them\r\n     * @param children\r\n     */\r\n    setChildren(children) {\r\n        __classPrivateFieldSet(this, _children, children);\r\n    }\r\n    setThreshold(threshold) {\r\n        __classPrivateFieldGet(this, _scrollListener).setThreshold(threshold);\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    setParent(target) {\r\n        __classPrivateFieldSet(this, _box, CuiElementBoxFactory.get(target));\r\n        __classPrivateFieldGet(this, _scrollListener).setTarget(target);\r\n    }\r\n    isInProgress() {\r\n        return __classPrivateFieldGet(this, _scrollListener).isInProgress();\r\n    }\r\n    attach() {\r\n        if (this.isAttached()) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _scrollListener).attach();\r\n    }\r\n    detach() {\r\n        if (!this.isAttached()) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _scrollListener).detach();\r\n    }\r\n    isAttached() {\r\n        return __classPrivateFieldGet(this, _scrollListener) && __classPrivateFieldGet(this, _scrollListener).isAttached();\r\n    }\r\n    onScroll(ev) {\r\n        if (!are(__classPrivateFieldGet(this, _children), __classPrivateFieldGet(this, _callback))) {\r\n            return;\r\n        }\r\n        if (__classPrivateFieldGet(this, _callback))\r\n            __classPrivateFieldGet(this, _callback).call(this, this.prepareCallbackResult(ev));\r\n    }\r\n    calcChildVerticalRatio(child, currentTop, currentBottom) {\r\n        let childBottom = child.offsetTop + child.offsetHeight;\r\n        // Simulated top if view top is outside of parent then takes parent top\r\n        let symTop = currentTop > child.offsetTop ? currentTop : child.offsetTop;\r\n        // Simulated bottom if view bottom is outside of parent then takes parent bottom\r\n        let symBottom = currentBottom < childBottom ? currentBottom : childBottom;\r\n        // Calculates amount of pixels that are in view\r\n        let diff = symBottom - symTop;\r\n        // Calculates ratio - how much of a child is in parent view\r\n        let ratio = diff / child.offsetHeight;\r\n        return getRangeValue(ratio, 0, 1);\r\n    }\r\n    calcChildHorizontalRatio(child, currentLeft, currentRight) {\r\n        let childRight = child.offsetLeft + child.offsetWidth;\r\n        // Simulated top if view left is outside of parent then takes parent left\r\n        let symLeft = currentLeft > child.offsetLeft ? currentLeft : child.offsetLeft;\r\n        // Simulated bottom if view right is outside of parent then takes parent right\r\n        let symRight = currentRight < childRight ? currentRight : childRight;\r\n        // Calculates amount of pixels that are in view\r\n        let diff = symRight - symLeft;\r\n        // Calculates ratio - how much of a child is in parent view\r\n        let ratio = diff / child.offsetWidth;\r\n        return getRangeValue(ratio, 0, 1);\r\n    }\r\n    prepareCallbackResult(ev) {\r\n        var _a, _b;\r\n        let parentBottom = ev.top + __classPrivateFieldGet(this, _box).getHeight();\r\n        let parentRight = ev.left + __classPrivateFieldGet(this, _box).getWidth();\r\n        let result = {\r\n            ev: ev.base,\r\n            top: ev.top,\r\n            left: ev.left,\r\n            scrolling: (_a = ev.scrolling) !== null && _a !== void 0 ? _a : false,\r\n            initial: (_b = ev.initial) !== null && _b !== void 0 ? _b : false,\r\n            source: ev.source,\r\n            items: __classPrivateFieldGet(this, _children).map((child, index) => {\r\n                let verticalRatio = this.calcChildVerticalRatio(child, ev.top, parentBottom);\r\n                let horizontalRatio = this.calcChildHorizontalRatio(child, ev.left, parentRight);\r\n                return {\r\n                    verticalRatio: verticalRatio,\r\n                    horizontalRatio: horizontalRatio,\r\n                    element: child\r\n                };\r\n            })\r\n        };\r\n        return result;\r\n    }\r\n}\r\n_scrollListener = new WeakMap(), _callback = new WeakMap(), _children = new WeakMap(), _box = new WeakMap();\r\n","import { are, is } from \"cui-light-core/dist/esm/utils/functions\";\r\nexport class CuiScrollSpyModeHandlerFactory {\r\n    static get(mode) {\r\n        if (mode === \"multi\") {\r\n            return new CuiMultiModeHandler();\r\n        }\r\n        return new CuiSingleModeHandler();\r\n    }\r\n}\r\nclass CuiModeHandlerBase {\r\n    constructor(init) {\r\n        this.previous = init;\r\n    }\r\n    getMatching(ratio, items) {\r\n        return items.reduce((result, item, index) => {\r\n            if (item.verticalRatio > ratio) {\r\n                result.push(index);\r\n            }\r\n            return result;\r\n        }, []);\r\n    }\r\n    addActions(actions, ...elements) {\r\n        this.forEachAction(actions, elements, (action, element) => {\r\n            action.add(element);\r\n        });\r\n    }\r\n    removeActions(actions, ...elements) {\r\n        this.forEachAction(actions, elements, (action, element) => {\r\n            action.remove(element);\r\n        });\r\n    }\r\n    forEachAction(actions, elements, callback) {\r\n        if (!are(actions, elements, callback)) {\r\n            return;\r\n        }\r\n        actions.forEach(action => {\r\n            elements.forEach(element => {\r\n                if (is(element))\r\n                    callback(action, element);\r\n            });\r\n        });\r\n    }\r\n}\r\nexport class CuiSingleModeHandler extends CuiModeHandlerBase {\r\n    constructor() {\r\n        super(-1);\r\n    }\r\n    update(items, ratio, actions, links, linksActions) {\r\n        let matching = this.getMatching(ratio, items);\r\n        let len = matching.length;\r\n        let last = len > 0 ? matching[len - 1] : -1;\r\n        let result = {\r\n            changed: false\r\n        };\r\n        if (!this.matches(last)) {\r\n            if (this.previous > -1)\r\n                this.removeActions(actions, items[this.previous].element);\r\n            if (last > -1) {\r\n                let lastElement = items[last].element;\r\n                result.intersecting = [lastElement];\r\n                this.addActions(actions, lastElement);\r\n            }\r\n            if (are(links, linksActions)) {\r\n                if (this.previous > -1)\r\n                    this.removeActions(linksActions, links[this.previous]);\r\n                if (last > -1)\r\n                    this.addActions(linksActions, links[last]);\r\n            }\r\n            this.previous = last;\r\n            result.changed = true;\r\n            result.intersecting = [];\r\n            return result;\r\n        }\r\n        return result;\r\n    }\r\n    matches(item) {\r\n        return item === this.previous;\r\n    }\r\n}\r\nexport class CuiMultiModeHandler extends CuiModeHandlerBase {\r\n    constructor() {\r\n        super([]);\r\n    }\r\n    update(items, ratio, actions, links, linksActions) {\r\n        let matching = this.getMatching(ratio, items);\r\n        let result = {\r\n            changed: false\r\n        };\r\n        if (!this.matches(matching)) {\r\n            let intersecting = matching.map(idx => { return items[idx].element; });\r\n            this.removeActions(actions, ...this.previous.map(idx => { return items[idx].element; }));\r\n            this.addActions(actions, ...intersecting);\r\n            result.intersecting = intersecting;\r\n            if (are(links, linksActions)) {\r\n                this.removeActions(linksActions, ...this.previous.map(idx => { return links[idx]; }));\r\n                this.addActions(linksActions, ...matching.map(idx => { return links[idx]; }));\r\n            }\r\n            this.previous = matching;\r\n            result.changed = true;\r\n            return result;\r\n        }\r\n        return result;\r\n    }\r\n    matches(item) {\r\n        let len = item.length;\r\n        if (len !== this.previous.length) {\r\n            return false;\r\n        }\r\n        let i = 0;\r\n        for (i = 0; i < len; i++) {\r\n            if (!this.previous.includes(item[i])) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _listener, _links, _actions, _linkActions, _root, _rootBox, _modeHandler;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { getRangeValueOrDefault, getStringOrDefault, isStringTrue, getIntOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS, SCOPE_SELECTOR } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { CuiIntersectionListener } from \"cui-light-core/dist/esm/intersection/intersection\";\r\nimport { CuiElementBoxFactory } from \"cui-light-core/dist/esm/models/elements\";\r\nimport { CuiScrollSpyModeHandlerFactory } from \"./mode\";\r\nconst DEFAULT_SELECTOR = \"> *\";\r\nexport class CuiScrollSpyArgs {\r\n    constructor() {\r\n        this.ratio = 0;\r\n        this.mode = \"single\";\r\n        this.threshold = -1;\r\n        this.selector = \"\";\r\n        this.action = \"\";\r\n        this.isRoot = false;\r\n        this.link = \"\";\r\n        this.linkAction = \"\";\r\n    }\r\n    parse(args) {\r\n        var _a;\r\n        this.selector = `${SCOPE_SELECTOR}${(_a = args.selector) !== null && _a !== void 0 ? _a : DEFAULT_SELECTOR}`;\r\n        this.action = getStringOrDefault(args.action, \"\");\r\n        this.link = getStringOrDefault(args.link, \"\");\r\n        this.linkAction = getStringOrDefault(args.linkAction, \"\");\r\n        this.ratio = getRangeValueOrDefault(parseFloat(args.ratio), 0, 1, 0);\r\n        this.isRoot = isStringTrue(args.isRoot);\r\n        this.mode = (args === null || args === void 0 ? void 0 : args.mode) === 'multi' ? \"multi\" : \"single\";\r\n        this.threshold = getIntOrDefault(args.threshold, -1);\r\n    }\r\n}\r\nexport class CuiScrollspyComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-scrollspy`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiScrollspyHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiScrollspyHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiScrollspyHandler\", element, attribute, new CuiScrollSpyArgs(), utils);\r\n        _listener.set(this, void 0);\r\n        _links.set(this, void 0);\r\n        _actions.set(this, void 0);\r\n        _linkActions.set(this, void 0);\r\n        _root.set(this, void 0);\r\n        _rootBox.set(this, void 0);\r\n        _modeHandler.set(this, void 0);\r\n        this.element = element;\r\n        __classPrivateFieldSet(this, _listener, new CuiIntersectionListener(this.element, { threshold: this.utils.setup.scrollThreshold }));\r\n        __classPrivateFieldSet(this, _links, []);\r\n        __classPrivateFieldSet(this, _actions, []);\r\n        __classPrivateFieldSet(this, _linkActions, []);\r\n        __classPrivateFieldSet(this, _root, undefined);\r\n        __classPrivateFieldSet(this, _rootBox, undefined);\r\n        __classPrivateFieldSet(this, _modeHandler, undefined);\r\n    }\r\n    onInit() {\r\n        this.parseAttribute();\r\n        __classPrivateFieldGet(this, _listener).setCallback(this.onIntersection.bind(this));\r\n        __classPrivateFieldGet(this, _listener).attach();\r\n    }\r\n    onUpdate() {\r\n        this.updateAttributes();\r\n    }\r\n    onDestroy() {\r\n        __classPrivateFieldGet(this, _listener).detach();\r\n    }\r\n    onIntersection(ev) {\r\n        if (!__classPrivateFieldGet(this, _modeHandler)) {\r\n            this.logError(\"Cannot perform - mode handler not initialized\", \"OnIntersection\");\r\n            return;\r\n        }\r\n        let timestamp = Date.now();\r\n        this.mutate(() => {\r\n            //@ts-ignore - modeHandler checked\r\n            let updateResult = __classPrivateFieldGet(this, _modeHandler).update(ev.items, this.args.ratio, __classPrivateFieldGet(this, _actions), __classPrivateFieldGet(this, _links), __classPrivateFieldGet(this, _linkActions));\r\n            if (updateResult.changed) {\r\n                this.emitEvent(EVENTS.TARGET_CHANGE, {\r\n                    intersecting: updateResult.intersecting,\r\n                    timestamp: timestamp\r\n                });\r\n            }\r\n        });\r\n        this.emitEvent(EVENTS.ON_SCROLL, {\r\n            top: ev.top,\r\n            left: ev.left,\r\n            scrolling: ev.scrolling,\r\n            initial: ev.initial,\r\n            source: ev.source,\r\n            timestamp: timestamp,\r\n        });\r\n    }\r\n    parseAttribute() {\r\n        __classPrivateFieldSet(this, _root, this.args.isRoot ? window : this.element);\r\n        __classPrivateFieldSet(this, _rootBox, CuiElementBoxFactory.get(__classPrivateFieldGet(this, _root)));\r\n        let targets = this.args.selector ? __classPrivateFieldGet(this, _rootBox).queryAll(this.args.selector) : [];\r\n        __classPrivateFieldGet(this, _listener).setChildren(targets);\r\n        __classPrivateFieldGet(this, _listener).setThreshold(this.args.threshold);\r\n        __classPrivateFieldSet(this, _links, this.args.link ? [...document.querySelectorAll(this.args.link)] : []);\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n        __classPrivateFieldSet(this, _linkActions, CuiActionsListFactory.get(this.args.linkAction));\r\n        __classPrivateFieldSet(this, _modeHandler, CuiScrollSpyModeHandlerFactory.get(this.args.mode));\r\n    }\r\n    updateAttributes() {\r\n        if (this.prevArgs && this.args.isRoot !== this.prevArgs.isRoot) {\r\n            __classPrivateFieldSet(this, _root, this.args.isRoot ? window : this.element);\r\n            __classPrivateFieldSet(this, _rootBox, CuiElementBoxFactory.get(__classPrivateFieldGet(this, _root)));\r\n            __classPrivateFieldGet(this, _listener).setParent(__classPrivateFieldGet(this, _root));\r\n        }\r\n        if (this.prevArgs && __classPrivateFieldGet(this, _rootBox) && this.args.selector !== this.prevArgs.selector) {\r\n            let targets = this.args.selector ? __classPrivateFieldGet(this, _rootBox).queryAll(this.args.selector) : [];\r\n            __classPrivateFieldGet(this, _listener).setChildren(targets);\r\n        }\r\n        __classPrivateFieldGet(this, _listener).setThreshold(this.args.threshold);\r\n        __classPrivateFieldSet(this, _links, this.args.link ? [...document.querySelectorAll(this.args.link)] : []);\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n        __classPrivateFieldSet(this, _linkActions, CuiActionsListFactory.get(this.args.linkAction));\r\n        __classPrivateFieldSet(this, _modeHandler, CuiScrollSpyModeHandlerFactory.get(this.args.mode));\r\n    }\r\n}\r\n_listener = new WeakMap(), _links = new WeakMap(), _actions = new WeakMap(), _linkActions = new WeakMap(), _root = new WeakMap(), _rootBox = new WeakMap(), _modeHandler = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _elements, _count, _threshold;\r\nimport { is } from \"../../utils/functions\";\r\nexport class CuiSimpleDragOverDetector {\r\n    constructor() {\r\n        _elements.set(this, void 0);\r\n        _count.set(this, void 0);\r\n        _threshold.set(this, void 0);\r\n        __classPrivateFieldSet(this, _elements, []);\r\n        __classPrivateFieldSet(this, _count, 0);\r\n        __classPrivateFieldSet(this, _threshold, 5);\r\n    }\r\n    setElements(elements) {\r\n        __classPrivateFieldSet(this, _elements, elements);\r\n        __classPrivateFieldSet(this, _count, __classPrivateFieldGet(this, _elements).length);\r\n    }\r\n    setThreshold(value) {\r\n        __classPrivateFieldSet(this, _threshold, value);\r\n    }\r\n    detect(x, y) {\r\n        if (!is(__classPrivateFieldGet(this, _elements))) {\r\n            return [-1, undefined];\r\n        }\r\n        let idx = -1;\r\n        let found = undefined;\r\n        for (let i = 0; i < __classPrivateFieldGet(this, _count); i++) {\r\n            if (this.isInBounds(__classPrivateFieldGet(this, _elements)[i], x, y)) {\r\n                if (i === 0) {\r\n                    idx = i;\r\n                    found = __classPrivateFieldGet(this, _elements)[i];\r\n                    //break;\r\n                }\r\n                else if (i < __classPrivateFieldGet(this, _count) - 1) {\r\n                    idx = i + 1;\r\n                    found = __classPrivateFieldGet(this, _elements)[i + 1];\r\n                    //break;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        return [idx, found];\r\n    }\r\n    isInBounds(element, x, y) {\r\n        const box = element.getBoundingClientRect();\r\n        if (box.width === 0) {\r\n            console.log(element);\r\n        }\r\n        return x > box.left - __classPrivateFieldGet(this, _threshold) && x < box.left + box.width + __classPrivateFieldGet(this, _threshold) &&\r\n            y > box.top - __classPrivateFieldGet(this, _threshold) && y < box.top + box.height + __classPrivateFieldGet(this, _threshold);\r\n    }\r\n}\r\n_elements = new WeakMap(), _count = new WeakMap(), _threshold = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _root, _moveHandler, _onDragStart, _onDragOver, _onDragEnd, _timeout, _isTracking, _timeoutId;\r\nimport { CuiMoveEventListener } from \"../../listeners/move\";\r\nexport class CuiDragHandler {\r\n    constructor(root) {\r\n        _root.set(this, void 0);\r\n        _moveHandler.set(this, void 0);\r\n        _onDragStart.set(this, void 0);\r\n        _onDragOver.set(this, void 0);\r\n        _onDragEnd.set(this, void 0);\r\n        _timeout.set(this, void 0);\r\n        _isTracking.set(this, void 0);\r\n        _timeoutId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _root, root);\r\n        __classPrivateFieldSet(this, _moveHandler, new CuiMoveEventListener());\r\n        __classPrivateFieldSet(this, _timeout, 150);\r\n        __classPrivateFieldSet(this, _isTracking, false);\r\n        __classPrivateFieldSet(this, _timeoutId, undefined);\r\n        __classPrivateFieldGet(this, _moveHandler).setTarget(__classPrivateFieldGet(this, _root));\r\n        __classPrivateFieldGet(this, _moveHandler).preventDefault(false);\r\n        __classPrivateFieldGet(this, _moveHandler).setCallback(this.onMove.bind(this));\r\n        __classPrivateFieldSet(this, _onDragStart, undefined);\r\n        __classPrivateFieldSet(this, _onDragOver, undefined);\r\n        __classPrivateFieldSet(this, _onDragEnd, undefined);\r\n    }\r\n    setLongPressTimeout(timeout) {\r\n        __classPrivateFieldSet(this, _timeout, timeout);\r\n    }\r\n    onDragStart(callback) {\r\n        __classPrivateFieldSet(this, _onDragStart, callback);\r\n    }\r\n    onDragOver(callback) {\r\n        __classPrivateFieldSet(this, _onDragOver, callback);\r\n    }\r\n    onDragEnd(callback) {\r\n        __classPrivateFieldSet(this, _onDragEnd, callback);\r\n    }\r\n    attach() {\r\n        __classPrivateFieldGet(this, _moveHandler).attach();\r\n    }\r\n    detach() {\r\n        __classPrivateFieldGet(this, _moveHandler).detach();\r\n    }\r\n    onMove(data) {\r\n        switch (data.type) {\r\n            case \"down\":\r\n                if (__classPrivateFieldGet(this, _isTracking)) {\r\n                    return;\r\n                }\r\n                __classPrivateFieldSet(this, _timeoutId, setTimeout(() => {\r\n                    if (__classPrivateFieldGet(this, _onDragStart) && __classPrivateFieldGet(this, _onDragStart).call(this, data)) {\r\n                        __classPrivateFieldSet(this, _isTracking, true);\r\n                    }\r\n                }, __classPrivateFieldGet(this, _timeout)));\r\n                break;\r\n            case \"move\":\r\n                this.cancelTimeout();\r\n                if (!__classPrivateFieldGet(this, _isTracking)) {\r\n                    return;\r\n                }\r\n                if (__classPrivateFieldGet(this, _onDragOver)) {\r\n                    __classPrivateFieldGet(this, _onDragOver).call(this, data);\r\n                }\r\n                break;\r\n            case \"up\":\r\n                this.cancelTimeout();\r\n                if (!__classPrivateFieldGet(this, _isTracking)) {\r\n                    return;\r\n                }\r\n                if (__classPrivateFieldGet(this, _onDragEnd)) {\r\n                    __classPrivateFieldGet(this, _onDragEnd).call(this, data);\r\n                }\r\n                __classPrivateFieldSet(this, _isTracking, false);\r\n                break;\r\n        }\r\n    }\r\n    cancelTimeout() {\r\n        if (__classPrivateFieldGet(this, _timeoutId)) {\r\n            clearTimeout(__classPrivateFieldGet(this, _timeoutId));\r\n            __classPrivateFieldSet(this, _timeoutId, undefined);\r\n        }\r\n    }\r\n}\r\n_root = new WeakMap(), _moveHandler = new WeakMap(), _onDragStart = new WeakMap(), _onDragOver = new WeakMap(), _onDragEnd = new WeakMap(), _timeout = new WeakMap(), _isTracking = new WeakMap(), _timeoutId = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _prefix, _dragHandler, _triggers, _targets, _currentTarget, _currentIdx, _preview, _movingCls, _detector, _currentBefore, _animation, _previewCls;\r\nimport { ElementBuilder } from \"cui-light-core/dist/esm/builders/element\";\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiSimpleDragOverDetector } from \"cui-light-core/dist/esm/handlers/drag/detectors\";\r\nimport { CuiDragHandler } from \"cui-light-core/dist/esm/handlers/drag/drag\";\r\nimport { CuiSwipeAnimationEngine } from \"cui-light-core/dist/esm/animation/engine\";\r\nimport { getIntOrDefault, replacePrefix, is, are } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { SCOPE_SELECTOR, EVENTS, CLASSES } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst SORTABLE_IS_MOVING = \"{prefix}-moving\";\r\nconst DEFAULT_SELECTOR = \" > *\";\r\nconst SORTABLE_PREVIEW_CLS = \"{prefix}-sortable-preview\";\r\nexport class CuiSortableArgs {\r\n    constructor() {\r\n        this.target = SCOPE_SELECTOR + DEFAULT_SELECTOR;\r\n        ;\r\n        this.trigger = SCOPE_SELECTOR + DEFAULT_SELECTOR;\r\n        this.timeout = 150;\r\n        this.threshold = 5;\r\n    }\r\n    parse(val) {\r\n        this.target = val.target ? SCOPE_SELECTOR + \" \" + val.target : SCOPE_SELECTOR + DEFAULT_SELECTOR;\r\n        this.trigger = val.trigger ? SCOPE_SELECTOR + \" \" + val.trigger : SCOPE_SELECTOR + DEFAULT_SELECTOR;\r\n        this.timeout = getIntOrDefault(val.timeout, 150);\r\n        this.threshold = getIntOrDefault(val.threshold, 5);\r\n    }\r\n}\r\nexport class CuiSortableComponent {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : \"cui\");\r\n        this.attribute = __classPrivateFieldGet(this, _prefix) + \"-sortable\";\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, sutils) {\r\n        return new CuiSortableHandler(element, this.attribute, sutils, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiSortableHandler extends CuiHandler {\r\n    constructor(element, attribute, utils, prefix) {\r\n        super(\"CuiSortableHandler\", element, attribute, new CuiSortableArgs(), utils);\r\n        _dragHandler.set(this, void 0);\r\n        _triggers.set(this, void 0);\r\n        _targets.set(this, void 0);\r\n        _currentTarget.set(this, void 0);\r\n        _currentIdx.set(this, void 0);\r\n        _preview.set(this, void 0);\r\n        _movingCls.set(this, void 0);\r\n        _detector.set(this, void 0);\r\n        _currentBefore.set(this, void 0);\r\n        _animation.set(this, void 0);\r\n        _previewCls.set(this, void 0);\r\n        __classPrivateFieldSet(this, _targets, []);\r\n        __classPrivateFieldSet(this, _triggers, []);\r\n        __classPrivateFieldSet(this, _currentIdx, -1);\r\n        __classPrivateFieldSet(this, _currentTarget, null);\r\n        __classPrivateFieldSet(this, _currentBefore, null);\r\n        __classPrivateFieldSet(this, _preview, null);\r\n        __classPrivateFieldSet(this, _dragHandler, new CuiDragHandler(element));\r\n        __classPrivateFieldGet(this, _dragHandler).onDragStart(this.onDragStart.bind(this));\r\n        __classPrivateFieldGet(this, _dragHandler).onDragOver(this.onDragOver.bind(this));\r\n        __classPrivateFieldGet(this, _dragHandler).onDragEnd(this.onDragEnd.bind(this));\r\n        __classPrivateFieldSet(this, _movingCls, replacePrefix(SORTABLE_IS_MOVING, prefix));\r\n        __classPrivateFieldSet(this, _previewCls, replacePrefix(SORTABLE_PREVIEW_CLS, prefix));\r\n        __classPrivateFieldSet(this, _detector, new CuiSimpleDragOverDetector());\r\n        __classPrivateFieldSet(this, _animation, new CuiSwipeAnimationEngine());\r\n        __classPrivateFieldGet(this, _animation).setOnFinish(() => {\r\n            let item = __classPrivateFieldGet(this, _currentTarget);\r\n            let idx = __classPrivateFieldGet(this, _currentIdx);\r\n            this.stopMovementPrep();\r\n            this.utils.bus.emit(EVENTS.MOVE_LOCK, null, false);\r\n            this.emitEvent(EVENTS.SORTED, {\r\n                item: item,\r\n                index: idx,\r\n                timestamp: new Date()\r\n            });\r\n        });\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldGet(this, _dragHandler).attach();\r\n        this.getTargetsAndTrggers();\r\n        __classPrivateFieldGet(this, _detector).setThreshold(this.args.threshold);\r\n    }\r\n    onUpdate() {\r\n        if (this.prevArgs && (this.args.target !== this.prevArgs.target ||\r\n            this.args.trigger !== this.prevArgs.trigger)) {\r\n            this.getTargetsAndTrggers();\r\n        }\r\n        __classPrivateFieldGet(this, _dragHandler).setLongPressTimeout(this.args.timeout);\r\n    }\r\n    onDestroy() {\r\n        __classPrivateFieldGet(this, _dragHandler).detach();\r\n    }\r\n    /**\r\n     * queries targets and triggers from the element\r\n     * If exception - lists are cleared\r\n     */\r\n    getTargetsAndTrggers() {\r\n        try {\r\n            __classPrivateFieldSet(this, _targets, [...this.element.querySelectorAll(this.args.target)]);\r\n            __classPrivateFieldSet(this, _triggers, [...this.element.querySelectorAll(this.args.trigger)]);\r\n            if (__classPrivateFieldGet(this, _triggers).length !== __classPrivateFieldGet(this, _targets).length) {\r\n                throw new Error(`Triggers (count ${__classPrivateFieldGet(this, _triggers).length}) and targets (count ${__classPrivateFieldGet(this, _targets).length}) selector are not correct`);\r\n            }\r\n            __classPrivateFieldGet(this, _detector).setElements(__classPrivateFieldGet(this, _targets));\r\n        }\r\n        catch (e) {\r\n            this._log.error(\"Incorrect trigger or target selector\");\r\n            this._log.exception(e, \"getTargetsAndTrggers\");\r\n            __classPrivateFieldSet(this, _targets, []);\r\n            __classPrivateFieldSet(this, _triggers, []);\r\n        }\r\n    }\r\n    onDragStart(data) {\r\n        __classPrivateFieldSet(this, _currentIdx, this.getPressedElementIdx(data.target));\r\n        __classPrivateFieldSet(this, _currentTarget, __classPrivateFieldGet(this, _currentIdx) > -1 ? __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)] : null);\r\n        if (!is(__classPrivateFieldGet(this, _currentTarget))) {\r\n            return false;\r\n        }\r\n        this.utils.bus.emit(EVENTS.MOVE_LOCK, null, true);\r\n        this.startMovementPrep(data);\r\n        this.emitEvent(EVENTS.SORT_START, {\r\n            item: __classPrivateFieldGet(this, _currentTarget),\r\n            index: __classPrivateFieldGet(this, _currentIdx),\r\n            timestamp: new Date()\r\n        });\r\n        return true;\r\n    }\r\n    onDragOver(data) {\r\n        this.move(data);\r\n        data.event.preventDefault();\r\n    }\r\n    onDragEnd(data) {\r\n        if (!is(__classPrivateFieldGet(this, _preview))) {\r\n            return;\r\n        }\r\n        //@ts-ignore preview\r\n        __classPrivateFieldGet(this, _animation).setElement(__classPrivateFieldGet(this, _preview));\r\n        __classPrivateFieldGet(this, _animation).setProps(this.getFinishAnimation());\r\n        __classPrivateFieldGet(this, _animation).finish(0, 100, false);\r\n    }\r\n    getPressedElementIdx(target) {\r\n        return __classPrivateFieldGet(this, _triggers).findIndex((trigger) => {\r\n            return trigger.contains(target);\r\n        });\r\n    }\r\n    startMovementPrep(data) {\r\n        this.mutate(() => {\r\n            this.createPreview();\r\n            if (is(__classPrivateFieldGet(this, _currentTarget)))\r\n                //@ts-ignore currentTarget\r\n                this.helper.setClass(__classPrivateFieldGet(this, _movingCls), __classPrivateFieldGet(this, _currentTarget));\r\n            this.helper.setClass(\"cui-locked\", this.element);\r\n            this.helper.setClass(CLASSES.swipingOn, document.body);\r\n            this.setPreviewPosition(data);\r\n            this.setCurrentPosition(data);\r\n        });\r\n    }\r\n    stopMovementPrep() {\r\n        this.mutate(() => {\r\n            if (is(__classPrivateFieldGet(this, _currentTarget)))\r\n                //@ts-ignore currentTarget\r\n                this.helper.removeClass(__classPrivateFieldGet(this, _movingCls), __classPrivateFieldGet(this, _currentTarget));\r\n            this.helper.removeClass(CLASSES.swipingOn, document.body);\r\n            this.helper.removeClass(\"cui-locked\", this.element);\r\n            this.removePreview();\r\n            __classPrivateFieldSet(this, _currentTarget, null);\r\n            __classPrivateFieldSet(this, _currentBefore, null);\r\n            this.getTargetsAndTrggers();\r\n        });\r\n    }\r\n    move(data) {\r\n        this.mutate(() => {\r\n            this.setPreviewPosition(data);\r\n            this.setCurrentPosition(data);\r\n        });\r\n    }\r\n    createPreview() {\r\n        if (!is(__classPrivateFieldGet(this, _currentTarget))) {\r\n            this.logError(\"Cannot create preview - current target does not exist\", \"createPreview\");\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _preview, new ElementBuilder(\"div\").setClasses(__classPrivateFieldGet(this, _previewCls)).build());\r\n        //@ts-ignore currentTarget\r\n        __classPrivateFieldGet(this, _preview).style.width = `${__classPrivateFieldGet(this, _currentTarget).offsetWidth}px`;\r\n        //@ts-ignore currentTarget\r\n        __classPrivateFieldGet(this, _preview).style.height = `${__classPrivateFieldGet(this, _currentTarget).offsetHeight}px`;\r\n        document.body.appendChild(__classPrivateFieldGet(this, _preview));\r\n    }\r\n    removePreview() {\r\n        if (is(__classPrivateFieldGet(this, _preview))) {\r\n            //@ts-ignore currentTarget\r\n            __classPrivateFieldGet(this, _preview).remove();\r\n            __classPrivateFieldSet(this, _preview, null);\r\n        }\r\n    }\r\n    setPreviewPosition(data) {\r\n        if (!is(__classPrivateFieldGet(this, _preview))) {\r\n            return;\r\n        }\r\n        //@ts-ignore preview\r\n        __classPrivateFieldGet(this, _preview).style.top = `${data.y}px`;\r\n        //@ts-ignore preview\r\n        __classPrivateFieldGet(this, _preview).style.left = `${data.x}px`;\r\n    }\r\n    setCurrentPosition(data) {\r\n        if (!__classPrivateFieldGet(this, _currentTarget)) {\r\n            return;\r\n        }\r\n        let [idx, detected] = __classPrivateFieldGet(this, _detector).detect(data.x, data.y);\r\n        if ((idx !== __classPrivateFieldGet(this, _currentIdx)) && detected && __classPrivateFieldGet(this, _currentBefore) !== detected) {\r\n            let el = detected;\r\n            this.insertElement(__classPrivateFieldGet(this, _currentTarget), el);\r\n            __classPrivateFieldSet(this, _currentBefore, el);\r\n            this.getTargetsAndTrggers();\r\n            __classPrivateFieldSet(this, _currentIdx, idx);\r\n        }\r\n    }\r\n    insertElement(source, destination) {\r\n        if (is(destination)) {\r\n            this.element.insertBefore(source, destination);\r\n        }\r\n        else {\r\n            this.element.appendChild(source);\r\n        }\r\n    }\r\n    getFinishAnimation() {\r\n        if (!are(__classPrivateFieldGet(this, _currentTarget), __classPrivateFieldGet(this, _preview))) {\r\n            return {\r\n                opacity: {\r\n                    from: 1,\r\n                    to: 0,\r\n                }\r\n            };\r\n        }\r\n        //@ts-ignore currentTarget\r\n        const box = __classPrivateFieldGet(this, _currentTarget).getBoundingClientRect();\r\n        return {\r\n            opacity: {\r\n                from: 1,\r\n                to: 0,\r\n            },\r\n            top: {\r\n                //@ts-ignore preview\r\n                from: __classPrivateFieldGet(this, _preview).offsetTop,\r\n                //@ts-ignore preview\r\n                to: box.top > 0 ? box.top : __classPrivateFieldGet(this, _preview).offsetTop,\r\n                unit: \"px\"\r\n            },\r\n            left: {\r\n                //@ts-ignore preview\r\n                from: __classPrivateFieldGet(this, _preview).offsetLeft,\r\n                //@ts-ignore preview\r\n                to: box.left > 0 ? box.left : __classPrivateFieldGet(this, _preview).offsetLeft,\r\n                unit: \"px\"\r\n            }\r\n        };\r\n    }\r\n}\r\n_dragHandler = new WeakMap(), _triggers = new WeakMap(), _targets = new WeakMap(), _currentTarget = new WeakMap(), _currentIdx = new WeakMap(), _preview = new WeakMap(), _movingCls = new WeakMap(), _detector = new WeakMap(), _currentBefore = new WeakMap(), _animation = new WeakMap(), _previewCls = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _prefix, _pauseEventId, _animationPauseClass;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { EVENTS, ICONS } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { is, isString, getStringOrDefault, getIntOrDefault, replacePrefix } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { IconBuilder } from \"cui-light-core/dist/esm/builders/icon\";\r\nexport class CuiSpinnerArgs {\r\n    constructor() {\r\n        this.spinner = \"circle\";\r\n        this.scale = 1;\r\n    }\r\n    parse(args) {\r\n        if (isString(args)) {\r\n            this.spinner = getStringOrDefault(args, \"circle\");\r\n        }\r\n        else {\r\n            this.spinner = getStringOrDefault(args.spinner, \"circle\");\r\n            this.scale = getIntOrDefault(args.scale, 1);\r\n        }\r\n    }\r\n}\r\nexport class CuiSpinnerComponent {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix)}-spinner`;\r\n        ICONS['spinner_circle'] = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M 7.800378,1.7908996 A 8.4986862,8.4986862 0 0 1 18.2091,7.8003784 8.4986862,8.4986862 0 0 1 12.199621,18.209101 8.4986862,8.4986862 0 0 1 1.7908995,12.199622 8.4986862,8.4986862 0 0 1 7.800378,1.7908996 Z\\\"></path></svg>\";\r\n        ICONS['spinner_circle_double'] = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M 10,1.5000006 A 8.4999997,8.4999997 0 0 1 18.5,10 8.4999997,8.4999997 0 0 1 10,18.499999 8.4999997,8.4999997 0 0 1 1.5000005,10 8.4999997,8.4999997 0 0 1 10,1.5000006 Z\\\"></path><path d=\\\"M 10,3.4999997 A 6.5000002,6.5000002 0 0 1 16.5,10 6.5000002,6.5000002 0 0 1 10,16.5 6.5000002,6.5000002 0 0 1 3.5,9.9999993 6.5000002,6.5000002 0 0 1 10,3.4999997 Z\\\"></path></svg>\";\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiSpinnerHandler(element, utils, this.attribute, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiSpinnerHandler extends CuiHandler {\r\n    constructor(element, utils, attribute, prefix) {\r\n        super(\"CuiSpinnerHandler\", element, attribute, new CuiSpinnerArgs(), utils);\r\n        _pauseEventId.set(this, void 0);\r\n        _animationPauseClass.set(this, void 0);\r\n        __classPrivateFieldSet(this, _pauseEventId, null);\r\n        __classPrivateFieldSet(this, _animationPauseClass, replacePrefix(\"{prefix}-animation-pause\", prefix));\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldSet(this, _pauseEventId, this.onEvent(EVENTS.PAUSE, this.onPause.bind(this)));\r\n        this.add();\r\n    }\r\n    onUpdate() {\r\n        if (this.prevArgs && this.args.spinner !== this.prevArgs.spinner) {\r\n            this.add();\r\n        }\r\n    }\r\n    onDestroy() {\r\n        this.removeIfAnyExisists();\r\n        this.detachEvent(EVENTS.PAUSE, __classPrivateFieldGet(this, _pauseEventId));\r\n    }\r\n    addSpinner(iconElement, name) {\r\n        this.element.appendChild(iconElement);\r\n        this.element.classList.add(`animation-spinner-${name}`);\r\n    }\r\n    add() {\r\n        const svgIcon = is(this.args.spinner) ? ICONS[`spinner_${this.args.spinner}`] : null;\r\n        if (!is(svgIcon)) {\r\n            this._log.warning(\"Incorrect spinner name: \" + this.args.spinner);\r\n            return;\r\n        }\r\n        this.removeIfAnyExisists();\r\n        const iconElement = new IconBuilder(svgIcon).setScale(this.args.scale).build();\r\n        this.mutate(this.addSpinner, iconElement, this.args.spinner);\r\n    }\r\n    removeIfAnyExisists() {\r\n        let existing = this.element.querySelector(\"svg\");\r\n        if (existing) {\r\n            existing.remove();\r\n        }\r\n    }\r\n    onPause(flag) {\r\n        this.fetch(() => {\r\n            if (flag && !this.helper.hasClass(__classPrivateFieldGet(this, _animationPauseClass), this.element)) {\r\n                this.helper.setClassesAs(this.element, __classPrivateFieldGet(this, _animationPauseClass));\r\n            }\r\n            else {\r\n                this.helper.removeClassesAs(this.element, __classPrivateFieldGet(this, _animationPauseClass));\r\n            }\r\n        });\r\n        this.emitEvent(EVENTS.PAUSED, flag);\r\n    }\r\n}\r\n_pauseEventId = new WeakMap(), _animationPauseClass = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _prefix, _defTimeout, _targets, _currentIdx, _links, _task, _switchEventId, _isTracking, _startX, _swipeRatio, _nextIdx, _nextElement, _ratioThreshold, _currSlider, _nextSlider, _animationDef, _targetsCount, _moveEventId;\r\nimport { CuiMutableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiTaskRunner } from \"cui-light-core/dist/esm/utils/task\";\r\nimport { CuiSwipeAnimationEngine } from \"cui-light-core/dist/esm/animation/engine\";\r\nimport { SWIPE_ANIMATIONS_DEFINITIONS } from \"cui-light-core/dist/esm/animation/definitions\";\r\nimport { getStringOrDefault, getIntOrDefault, boolStringOrDefault, calculateNextIndex, is, getChildrenHeight, isInRange } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { SCOPE_SELECTOR, EVENTS, CLASSES } from \"cui-light-core/dist/esm/utils/statics\";\r\n/**\r\n *\r\n *   targets: string - slider elements\r\n *   timeout: number - animation timeout\r\n *   links: string; - link to switcher (indicator, tab, etc)\r\n *   autoTimeout: number - if defined, slider will switch item automatically\r\n *   height: 'auto' | string - element height\r\n *   animation: string - animation name\r\n *   loop: boolean - allows to slide elements in loop\r\n */\r\nconst SWITCH_DEFAULT_TARGETS = \"> li\";\r\nexport class CuiSliderArgs {\r\n    constructor(prefix, timeout) {\r\n        _prefix.set(this, void 0);\r\n        _defTimeout.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        this.targets = SWITCH_DEFAULT_TARGETS;\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n        this.links = \"\";\r\n        this.autoTimeout = -1;\r\n        this.height = \"\";\r\n        this.animation = \"\";\r\n        this.loop = false;\r\n    }\r\n    parse(args) {\r\n        this.targets = SCOPE_SELECTOR + getStringOrDefault(args.targets, SWITCH_DEFAULT_TARGETS);\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.links = args.links;\r\n        this.autoTimeout = getIntOrDefault(args.autoTimeout, -1);\r\n        this.height = getStringOrDefault(args.height, 'auto');\r\n        this.animation = getStringOrDefault(args.animation, 'slide');\r\n        this.loop = boolStringOrDefault(args.loop, false);\r\n    }\r\n}\r\n_prefix = new WeakMap(), _defTimeout = new WeakMap();\r\nexport class CuiSliderComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-slider`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiSliderHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiSliderHandler extends CuiMutableHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiSliderHandler\", element, attribute, new CuiSliderArgs(utils.setup.prefix, utils.setup.animationTime), utils);\r\n        _targets.set(this, void 0);\r\n        _currentIdx.set(this, void 0);\r\n        _links.set(this, void 0);\r\n        _task.set(this, void 0);\r\n        _switchEventId.set(this, void 0);\r\n        //  #moveListener: CuiMoveEventListener;\r\n        _isTracking.set(this, void 0);\r\n        _startX.set(this, void 0);\r\n        _swipeRatio.set(this, void 0);\r\n        _nextIdx.set(this, void 0);\r\n        _nextElement.set(this, void 0);\r\n        _ratioThreshold.set(this, void 0);\r\n        _currSlider.set(this, void 0);\r\n        _nextSlider.set(this, void 0);\r\n        _animationDef.set(this, void 0);\r\n        _targetsCount.set(this, void 0);\r\n        _moveEventId.set(this, void 0);\r\n        __classPrivateFieldSet(this, _targets, []);\r\n        __classPrivateFieldSet(this, _currentIdx, -1);\r\n        __classPrivateFieldSet(this, _nextIdx, -1);\r\n        __classPrivateFieldSet(this, _links, []);\r\n        __classPrivateFieldSet(this, _switchEventId, null);\r\n        __classPrivateFieldSet(this, _moveEventId, null);\r\n        __classPrivateFieldSet(this, _isTracking, false);\r\n        __classPrivateFieldSet(this, _startX, -1);\r\n        __classPrivateFieldSet(this, _swipeRatio, 0);\r\n        __classPrivateFieldSet(this, _nextElement, null);\r\n        __classPrivateFieldSet(this, _ratioThreshold, 0.5);\r\n        __classPrivateFieldSet(this, _currSlider, new CuiSwipeAnimationEngine());\r\n        __classPrivateFieldSet(this, _nextSlider, new CuiSwipeAnimationEngine());\r\n        __classPrivateFieldGet(this, _currSlider).setOnFinish(this.onAnimationFinish.bind(this));\r\n        __classPrivateFieldSet(this, _targetsCount, 0);\r\n        __classPrivateFieldSet(this, _task, new CuiTaskRunner(this.args.autoTimeout, true, this.switch.bind(this, 'next')));\r\n        __classPrivateFieldSet(this, _animationDef, SWIPE_ANIMATIONS_DEFINITIONS[this.args.animation]);\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldSet(this, _switchEventId, this.onEvent(EVENTS.SWITCH, this.onPushSwitch.bind(this)));\r\n        __classPrivateFieldSet(this, _moveEventId, this.onEvent(EVENTS.GLOBAL_MOVE, this.onMove.bind(this)));\r\n        this.getTargets();\r\n        this.getLinks();\r\n        this.getActiveIndex();\r\n        this.setLinkActive(-1, __classPrivateFieldGet(this, _currentIdx));\r\n        this.mutate(() => {\r\n            this.helper.setStyle(this.element, 'height', this.getElementHeight(__classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)]));\r\n        });\r\n        __classPrivateFieldSet(this, _task, new CuiTaskRunner(this.args.autoTimeout, true, this.switch.bind(this, 'next')));\r\n        __classPrivateFieldSet(this, _animationDef, SWIPE_ANIMATIONS_DEFINITIONS[this.args.animation]);\r\n        this.startTask();\r\n    }\r\n    onUpdate() {\r\n        this.mutate(() => {\r\n            this.helper.setStyle(this.element, 'height', this.getElementHeight(__classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)]));\r\n        });\r\n        __classPrivateFieldSet(this, _animationDef, SWIPE_ANIMATIONS_DEFINITIONS[this.args.animation]);\r\n        this.startTask();\r\n    }\r\n    onDestroy() {\r\n        __classPrivateFieldGet(this, _task).stop();\r\n        this.detachEvent(EVENTS.SWITCH, __classPrivateFieldGet(this, _switchEventId));\r\n        this.detachEvent(EVENTS.GLOBAL_MOVE, __classPrivateFieldGet(this, _moveEventId));\r\n    }\r\n    onMutation(record) {\r\n    }\r\n    /**\r\n     * Move listener callback\r\n     * @param data move listener data\r\n     */\r\n    onMove(data) {\r\n        if (this.isLocked || !__classPrivateFieldGet(this, _animationDef)) {\r\n            return;\r\n        }\r\n        let current = __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)];\r\n        switch (data.type) {\r\n            case \"down\":\r\n                if (__classPrivateFieldGet(this, _isTracking) || !current.contains(data.target)) {\r\n                    return;\r\n                }\r\n                __classPrivateFieldSet(this, _isTracking, true);\r\n                __classPrivateFieldSet(this, _startX, data.x);\r\n                __classPrivateFieldGet(this, _currSlider).setElement(current);\r\n                this.helper.setClassesAs(document.body, CLASSES.swipingOn);\r\n                if (data.event.cancelable)\r\n                    data.event.preventDefault();\r\n                break;\r\n            case \"up\":\r\n                if (!__classPrivateFieldGet(this, _isTracking)) {\r\n                    break;\r\n                }\r\n                // Lock component until animation is finished\r\n                this.isLocked = true;\r\n                let absRatio = Math.abs(__classPrivateFieldGet(this, _swipeRatio));\r\n                let timeout = absRatio * this.args.timeout;\r\n                let back = absRatio <= __classPrivateFieldGet(this, _ratioThreshold);\r\n                __classPrivateFieldGet(this, _currSlider).finish(absRatio, timeout, back);\r\n                __classPrivateFieldGet(this, _nextSlider).finish(absRatio, timeout, back);\r\n                this.helper.removeClassesAs(document.body, CLASSES.swipingOn);\r\n                __classPrivateFieldSet(this, _isTracking, false);\r\n                break;\r\n            case \"move\":\r\n                if (!__classPrivateFieldGet(this, _isTracking)) {\r\n                    break;\r\n                }\r\n                let newRatio = (data.x - __classPrivateFieldGet(this, _startX)) / current.offsetWidth;\r\n                if (Math.abs(newRatio - __classPrivateFieldGet(this, _swipeRatio)) < 0.02) {\r\n                    break;\r\n                }\r\n                let nextIdx = calculateNextIndex(__classPrivateFieldGet(this, _swipeRatio) > 0 ? \"next\" : \"prev\", __classPrivateFieldGet(this, _currentIdx), __classPrivateFieldGet(this, _targetsCount));\r\n                __classPrivateFieldSet(this, _swipeRatio, this.adjustMoveRatio(newRatio));\r\n                if (nextIdx !== __classPrivateFieldGet(this, _nextIdx)) {\r\n                    __classPrivateFieldGet(this, _nextElement) && this.helper.removeClass(CLASSES.animProgress, __classPrivateFieldGet(this, _nextElement));\r\n                    __classPrivateFieldSet(this, _nextElement, __classPrivateFieldGet(this, _targets)[nextIdx]);\r\n                    __classPrivateFieldSet(this, _nextIdx, nextIdx);\r\n                    __classPrivateFieldGet(this, _nextSlider).setElement(__classPrivateFieldGet(this, _nextElement));\r\n                    __classPrivateFieldGet(this, _nextSlider).setProps(__classPrivateFieldGet(this, _swipeRatio) > 0 ? __classPrivateFieldGet(this, _animationDef).previous.right : __classPrivateFieldGet(this, _animationDef).previous.left);\r\n                    __classPrivateFieldGet(this, _currSlider).setProps(__classPrivateFieldGet(this, _swipeRatio) > 0 ? __classPrivateFieldGet(this, _animationDef).current.right : __classPrivateFieldGet(this, _animationDef).current.left);\r\n                    this.mutate(() => {\r\n                        __classPrivateFieldGet(this, _nextElement) && this.helper.setClass(CLASSES.animProgress, __classPrivateFieldGet(this, _nextElement));\r\n                    });\r\n                }\r\n                this.mutate(() => {\r\n                    __classPrivateFieldGet(this, _currSlider).update(Math.abs(__classPrivateFieldGet(this, _swipeRatio)));\r\n                    __classPrivateFieldGet(this, _nextSlider).update(Math.abs(__classPrivateFieldGet(this, _swipeRatio)));\r\n                });\r\n                if (data.event.cancelable)\r\n                    data.event.preventDefault();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    adjustMoveRatio(ratio) {\r\n        if (this.args.loop) {\r\n            return ratio;\r\n        }\r\n        if (__classPrivateFieldGet(this, _currentIdx) === __classPrivateFieldGet(this, _targetsCount) - 1 && ratio > 0) {\r\n            return 0;\r\n        }\r\n        if (__classPrivateFieldGet(this, _currentIdx) === 0 && ratio < 0) {\r\n            return 0;\r\n        }\r\n        return ratio;\r\n    }\r\n    /**\r\n     * Api method to switch childrens\r\n     * @param index - index to switch to\r\n     */\r\n    switch(index) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.isLocked) {\r\n                return false;\r\n            }\r\n            this.onPushSwitch(index);\r\n            return true;\r\n        });\r\n    }\r\n    /**\r\n     *\r\n     * @param element element this animation was perfromed on\r\n     * @param reverted - flag inidicating whether animation was performed to the end or reverted back to start\r\n     * @param errorOccured - tells whether animation was finished with error\r\n     */\r\n    onAnimationFinish(element, reverted, errorOccured) {\r\n        this.isLocked = false;\r\n        // If not go back or from push then switch, else was go back\r\n        let next = __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _nextIdx)];\r\n        let current = __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)];\r\n        if (!reverted) {\r\n            if (__classPrivateFieldGet(this, _nextIdx) > -1) {\r\n                this.mutate(() => {\r\n                    this.helper.removeClass(CLASSES.animProgress, next);\r\n                    this.helper.setClass(this.activeClassName, next);\r\n                    this.helper.removeClass(this.activeClassName, current);\r\n                    this.helper.removeAttribute(\"style\", current);\r\n                    this.helper.removeAttribute(\"style\", next);\r\n                    this.setLinkActive(__classPrivateFieldGet(this, _currentIdx), __classPrivateFieldGet(this, _nextIdx));\r\n                    this.emitEvent(EVENTS.SWITCHED, {\r\n                        timestamp: Date.now(),\r\n                        index: __classPrivateFieldGet(this, _nextIdx)\r\n                    });\r\n                    __classPrivateFieldSet(this, _currentIdx, __classPrivateFieldGet(this, _nextIdx));\r\n                    __classPrivateFieldSet(this, _nextIdx, -1);\r\n                    __classPrivateFieldSet(this, _nextElement, null);\r\n                    __classPrivateFieldSet(this, _startX, -1);\r\n                    __classPrivateFieldSet(this, _swipeRatio, 0);\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            if (!is(__classPrivateFieldGet(this, _nextElement))) {\r\n                //@ts-ignore\r\n                this.helper.removeClass(CLASSES.animProgress, __classPrivateFieldGet(this, _nextElement));\r\n                //@ts-ignore\r\n                this.helper.removeAttribute(\"style\", __classPrivateFieldGet(this, _nextElement));\r\n            }\r\n            this.helper.removeAttribute(\"style\", current);\r\n            __classPrivateFieldSet(this, _nextIdx, -1);\r\n            __classPrivateFieldSet(this, _nextElement, null);\r\n            __classPrivateFieldSet(this, _startX, -1);\r\n            __classPrivateFieldSet(this, _swipeRatio, 0);\r\n        }\r\n        this.startTask();\r\n    }\r\n    onPushSwitch(index) {\r\n        if (!is(index) ||\r\n            this.isLocked ||\r\n            !__classPrivateFieldGet(this, _animationDef) ||\r\n            (!this.args.loop && __classPrivateFieldGet(this, _currentIdx) === 0 && index === 'prev') ||\r\n            (!this.args.loop && __classPrivateFieldGet(this, _currentIdx) === __classPrivateFieldGet(this, _targetsCount) - 1 && index === 'next')) {\r\n            return;\r\n        }\r\n        this.isLocked = true;\r\n        let nextIdx = calculateNextIndex(index, __classPrivateFieldGet(this, _currentIdx), __classPrivateFieldGet(this, _targetsCount));\r\n        if (nextIdx == __classPrivateFieldGet(this, _currentIdx) || nextIdx < 0 || nextIdx >= __classPrivateFieldGet(this, _targets).length) {\r\n            this._log.warning(`Index ${index} is not within the suitable range`);\r\n            return false;\r\n        }\r\n        __classPrivateFieldSet(this, _nextIdx, nextIdx);\r\n        let current = __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)];\r\n        let next = __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _nextIdx)];\r\n        __classPrivateFieldGet(this, _currSlider).setElement(current);\r\n        __classPrivateFieldGet(this, _nextSlider).setElement(next);\r\n        __classPrivateFieldGet(this, _currSlider).setProps(index === 'prev' ? __classPrivateFieldGet(this, _animationDef).current.left : __classPrivateFieldGet(this, _animationDef).current.right);\r\n        __classPrivateFieldGet(this, _nextSlider).setProps(index === 'prev' ? __classPrivateFieldGet(this, _animationDef).previous.left : __classPrivateFieldGet(this, _animationDef).previous.right);\r\n        this.mutate(() => {\r\n            __classPrivateFieldGet(this, _currSlider).finish(0, this.args.timeout, false);\r\n            __classPrivateFieldGet(this, _nextSlider).finish(0, this.args.timeout, false);\r\n            this.helper.setClass(CLASSES.animProgress, next);\r\n        });\r\n    }\r\n    getActiveIndex() {\r\n        __classPrivateFieldSet(this, _currentIdx, is(__classPrivateFieldGet(this, _targets)) ? __classPrivateFieldGet(this, _targets).findIndex(target => this.helper.hasClass(this.activeClassName, target)) : -1);\r\n    }\r\n    getElementHeight(current) {\r\n        if (!is(this.args.height) || this.args.height === 'auto') {\r\n            return getChildrenHeight(current) + \"px\";\r\n        }\r\n        else {\r\n            return this.args.height;\r\n        }\r\n    }\r\n    /**\r\n     * Queries targets\r\n     */\r\n    getTargets() {\r\n        let t = this.element.querySelectorAll(this.args.targets);\r\n        __classPrivateFieldSet(this, _targets, t.length > 0 ? [...t] : []);\r\n        __classPrivateFieldSet(this, _targetsCount, __classPrivateFieldGet(this, _targets).length);\r\n    }\r\n    /**\r\n     * Get linked switcher elements\r\n     */\r\n    getLinks() {\r\n        __classPrivateFieldSet(this, _links, is(this.args.links) ? [...document.querySelectorAll(this.args.links)] : []);\r\n    }\r\n    /**\r\n     * Set active class on linked switcher if set\r\n     * @param current - current index (to remove active from)\r\n     * @param next - next index (to set action on)\r\n     */\r\n    setLinkActive(current, next) {\r\n        if (!is(__classPrivateFieldGet(this, _links))) {\r\n            return;\r\n        }\r\n        this.mutate(() => {\r\n            if (isInRange(current, 0, __classPrivateFieldGet(this, _links).length - 1)) {\r\n                this.helper.removeClass(this.activeClassName, __classPrivateFieldGet(this, _links)[current]);\r\n            }\r\n            if (isInRange(next, 0, __classPrivateFieldGet(this, _links).length - 1)) {\r\n                this.helper.setClass(this.activeClassName, __classPrivateFieldGet(this, _links)[next]);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Runs task if arguments setup allows for it - auto flag must be set to true\r\n     */\r\n    startTask() {\r\n        __classPrivateFieldGet(this, _task).stop();\r\n        if (this.args.autoTimeout) {\r\n            __classPrivateFieldGet(this, _task).start();\r\n        }\r\n    }\r\n}\r\n_targets = new WeakMap(), _currentIdx = new WeakMap(), _links = new WeakMap(), _task = new WeakMap(), _switchEventId = new WeakMap(), _isTracking = new WeakMap(), _startX = new WeakMap(), _swipeRatio = new WeakMap(), _nextIdx = new WeakMap(), _nextElement = new WeakMap(), _ratioThreshold = new WeakMap(), _currSlider = new WeakMap(), _nextSlider = new WeakMap(), _animationDef = new WeakMap(), _targetsCount = new WeakMap(), _moveEventId = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _prefix, _defTimeout, _targets, _currentIdx, _links, _switches, _task, _switchEventId, _actionsIn, _actionsOut;\r\nimport { CuiMutableHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiTaskRunner } from \"cui-light-core/dist/esm/utils/task\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { is, getStringOrDefault, replacePrefix, getIntOrDefault, isStringTrue, calculateNextIndex, getChildrenHeight, isInRange } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { SCOPE_SELECTOR, EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst SWITCH_DEFAULT_ACTION_IN = \".{prefix}-switch-animation-default-in\";\r\nconst SWITCH_DEFAULT_ACTION_OUT = \".{prefix}-switch-animation-default-out\";\r\nconst SWITCH_DEFAULT_TARGETS = \" > *\";\r\nexport class CuiSwitchArgs {\r\n    constructor(prefix, timeout) {\r\n        _prefix.set(this, void 0);\r\n        _defTimeout.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        __classPrivateFieldSet(this, _defTimeout, timeout !== null && timeout !== void 0 ? timeout : 300);\r\n        this.targets = \"\";\r\n        this.in = \"\";\r\n        this.out = \"\";\r\n        this.timeout = __classPrivateFieldGet(this, _defTimeout);\r\n        this.links = \"\";\r\n        this.switch = \"\";\r\n        this.autoTimeout = -1;\r\n        this.height = \"\";\r\n        this.loop = false;\r\n    }\r\n    parse(args) {\r\n        this.targets = is(args.targets) ? SCOPE_SELECTOR + args.targets : SCOPE_SELECTOR + SWITCH_DEFAULT_TARGETS;\r\n        this.in = getStringOrDefault(args.in, replacePrefix(SWITCH_DEFAULT_ACTION_IN, __classPrivateFieldGet(this, _prefix)));\r\n        this.out = getStringOrDefault(args.out, replacePrefix(SWITCH_DEFAULT_ACTION_OUT, __classPrivateFieldGet(this, _prefix)));\r\n        this.timeout = getIntOrDefault(args.timeout, __classPrivateFieldGet(this, _defTimeout));\r\n        this.links = getStringOrDefault(args.links, \"\");\r\n        this.switch = getStringOrDefault(args.switch, \"\");\r\n        this.autoTimeout = getIntOrDefault(args.autoTimeout, -1);\r\n        this.height = getStringOrDefault(args.height, 'auto');\r\n        this.loop = isStringTrue(args.loop);\r\n    }\r\n}\r\n_prefix = new WeakMap(), _defTimeout = new WeakMap();\r\nexport class CuiSwitchComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-switch`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiSwitchHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiSwitchHandler extends CuiMutableHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiSwitchHandler\", element, attribute, new CuiSwitchArgs(utils.setup.prefix, utils.setup.animationTime), utils);\r\n        _targets.set(this, void 0);\r\n        _currentIdx.set(this, void 0);\r\n        _links.set(this, void 0);\r\n        _switches.set(this, void 0);\r\n        _task.set(this, void 0);\r\n        _switchEventId.set(this, void 0);\r\n        _actionsIn.set(this, void 0);\r\n        _actionsOut.set(this, void 0);\r\n        __classPrivateFieldSet(this, _targets, []);\r\n        __classPrivateFieldSet(this, _currentIdx, -1);\r\n        __classPrivateFieldSet(this, _links, []);\r\n        __classPrivateFieldSet(this, _switches, []);\r\n        __classPrivateFieldSet(this, _switchEventId, null);\r\n        __classPrivateFieldSet(this, _actionsIn, __classPrivateFieldSet(this, _actionsOut, []));\r\n        __classPrivateFieldSet(this, _task, new CuiTaskRunner(this.args.autoTimeout, true, this.switch.bind(this, 'next')));\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldSet(this, _switchEventId, this.onEvent(EVENTS.SWITCH, this.onPushSwitch.bind(this)));\r\n        this.parseArguments();\r\n        this.getTargets();\r\n        this.getActiveIndex();\r\n        this.getSwitches();\r\n        this.setSwitchesActive(__classPrivateFieldGet(this, _currentIdx));\r\n        this.setLinkActive(-1, __classPrivateFieldGet(this, _currentIdx));\r\n        this.mutate(() => {\r\n            this.helper.setStyle(this.element, 'height', this.getElementHeight(__classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)]));\r\n        });\r\n        __classPrivateFieldSet(this, _task, new CuiTaskRunner(this.args.autoTimeout, true, this.switch.bind(this, 'next')));\r\n        this.startTask();\r\n    }\r\n    onUpdate() {\r\n        this.parseArguments();\r\n        this.getTargets();\r\n        this.getSwitches();\r\n        this.setSwitchesActive(__classPrivateFieldGet(this, _currentIdx));\r\n        this.mutate(() => {\r\n            this.helper.setStyle(this.element, 'height', this.getElementHeight(__classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)]));\r\n        });\r\n        this.startTask();\r\n    }\r\n    onDestroy() {\r\n        __classPrivateFieldGet(this, _task).stop();\r\n        this.detachEvent(EVENTS.SWITCH, __classPrivateFieldGet(this, _switchEventId));\r\n    }\r\n    onMutation(record) {\r\n        this.getTargets();\r\n        this.mutate(() => {\r\n            this.helper.setStyle(this.element, 'height', this.getElementHeight(__classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)]));\r\n        });\r\n    }\r\n    switch(index) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.isLocked) {\r\n                return false;\r\n            }\r\n            this.getSwitches();\r\n            this.getActiveIndex();\r\n            let nextIdx = calculateNextIndex(index, __classPrivateFieldGet(this, _currentIdx), __classPrivateFieldGet(this, _targets).length);\r\n            if (!this.args.loop && ((index === \"next\" && nextIdx === 0) || (index === 'prev' && __classPrivateFieldGet(this, _currentIdx) === 0))) {\r\n                this.logInfo(\"Switch blocked by loop settings\", \"switch\");\r\n                return false;\r\n            }\r\n            if (nextIdx == __classPrivateFieldGet(this, _currentIdx) || nextIdx < 0 || nextIdx >= __classPrivateFieldGet(this, _targets).length) {\r\n                this.logWarning(`Index ${index} is not within the suitable range`, \"switch\");\r\n                return false;\r\n            }\r\n            this.isLocked = true;\r\n            this.setSwitchesActive(nextIdx);\r\n            let nextItem = __classPrivateFieldGet(this, _targets)[nextIdx];\r\n            yield this.actionsHelper.performSwitchAction(nextItem, __classPrivateFieldGet(this, _currentIdx) > -1 ? __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)] : null, __classPrivateFieldGet(this, _actionsIn), __classPrivateFieldGet(this, _actionsOut), () => {\r\n                // Set next element active\r\n                nextItem.classList.add(this.activeClassName);\r\n                // Remove active from current element (if current exists)\r\n                if (__classPrivateFieldGet(this, _currentIdx) > -1)\r\n                    __classPrivateFieldGet(this, _targets)[__classPrivateFieldGet(this, _currentIdx)].classList.remove(this.activeClassName);\r\n                // Update linked items\r\n                this.setLinkActive(__classPrivateFieldGet(this, _currentIdx), nextIdx);\r\n                // Update element height - it must be done a parent get height based on current child\r\n                this.helper.setStyle(this.element, 'height', this.getElementHeight(nextItem));\r\n                this.startTask();\r\n                this.isLocked = false;\r\n            }, this.args.timeout);\r\n            this.emitEvent(EVENTS.SWITCHED, {\r\n                timestamp: Date.now(),\r\n                index: nextIdx\r\n            });\r\n            return true;\r\n        });\r\n    }\r\n    onPushSwitch(index) {\r\n        this.switch(index);\r\n    }\r\n    getActiveIndex() {\r\n        __classPrivateFieldSet(this, _currentIdx, is(__classPrivateFieldGet(this, _targets)) ? __classPrivateFieldGet(this, _targets).findIndex(target => this.helper.hasClass(this.activeClassName, target)) : -1);\r\n    }\r\n    getElementHeight(current) {\r\n        if (!is(this.args.height) || this.args.height === 'auto') {\r\n            return getChildrenHeight(current) + \"px\";\r\n        }\r\n        else {\r\n            return this.args.height;\r\n        }\r\n    }\r\n    /**\r\n     * Gets attributes value and prepares properties\r\n     */\r\n    parseArguments() {\r\n        __classPrivateFieldSet(this, _actionsIn, CuiActionsListFactory.get(this.args.in));\r\n        __classPrivateFieldSet(this, _actionsOut, CuiActionsListFactory.get(this.args.out));\r\n        __classPrivateFieldSet(this, _links, is(this.args.links) ? [...document.querySelectorAll(this.args.links)] : []);\r\n    }\r\n    /**\r\n     * Query target elements\r\n     */\r\n    getTargets() {\r\n        console.log(this.args.targets);\r\n        let t = this.element.querySelectorAll(this.args.targets);\r\n        __classPrivateFieldSet(this, _targets, t.length > 0 ? [...t] : []);\r\n    }\r\n    getSwitches() {\r\n        let switches = is(this.args.switch) ? document.querySelectorAll(this.args.switch) : null;\r\n        __classPrivateFieldSet(this, _switches, []);\r\n        if (switches) {\r\n            switches.forEach(sw => {\r\n                __classPrivateFieldGet(this, _switches).push(sw);\r\n            });\r\n        }\r\n    }\r\n    setLinkActive(current, next) {\r\n        if (!is(__classPrivateFieldGet(this, _links))) {\r\n            return;\r\n        }\r\n        if (isInRange(current, 0, __classPrivateFieldGet(this, _links).length - 1)) {\r\n            this.helper.removeClass(this.activeClassName, __classPrivateFieldGet(this, _links)[current]);\r\n        }\r\n        if (isInRange(next, 0, __classPrivateFieldGet(this, _links).length - 1)) {\r\n            this.helper.setClass(this.activeClassName, __classPrivateFieldGet(this, _links)[next]);\r\n        }\r\n    }\r\n    /**\r\n     * Sets propers active state on attached switches\r\n     * @param index\r\n     */\r\n    setSwitchesActive(index) {\r\n        __classPrivateFieldGet(this, _switches).forEach(sw => {\r\n            this.emitLinkSwitch(sw.$cuid, index);\r\n        });\r\n    }\r\n    /**\r\n     * Emits push event to attached switch to set proper index\r\n     * @param id - cuid of element\r\n     * @param index - index to be set on element\r\n     */\r\n    emitLinkSwitch(id, index) {\r\n        if (is(id))\r\n            this.utils.bus.emit(EVENTS.SWITCH, id, index);\r\n    }\r\n    /**\r\n     * Runs task if arguments setup allows for it - auto flag must be set to true\r\n     */\r\n    startTask() {\r\n        __classPrivateFieldGet(this, _task).stop();\r\n        if (this.args.autoTimeout) {\r\n            __classPrivateFieldGet(this, _task).start();\r\n        }\r\n    }\r\n}\r\n_targets = new WeakMap(), _currentIdx = new WeakMap(), _links = new WeakMap(), _switches = new WeakMap(), _task = new WeakMap(), _switchEventId = new WeakMap(), _actionsIn = new WeakMap(), _actionsOut = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _targetId, _isList, _listeners;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst SWITCHER_LIST_ITEM_SELECTOR = \"li > a\";\r\nexport class CuiSwitcherArgs {\r\n    constructor() {\r\n        this.index = \"\";\r\n        this.target = \"\";\r\n    }\r\n    parse(args) {\r\n        if (!is(args)) {\r\n            return;\r\n        }\r\n        this.target = args.target;\r\n        this.index = args.index;\r\n    }\r\n}\r\nexport class CuiSwitcherComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : 'cui'}-switcher`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiSwitcherHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiSwitcherHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiSwitcherHandler\", element, attribute, new CuiSwitcherArgs(), utils);\r\n        _targetId.set(this, void 0);\r\n        _isList.set(this, void 0);\r\n        _listeners.set(this, void 0);\r\n        __classPrivateFieldSet(this, _targetId, null);\r\n        __classPrivateFieldSet(this, _isList, element.tagName === 'UL');\r\n        this.onClickEvent = this.onClickEvent.bind(this);\r\n        __classPrivateFieldSet(this, _listeners, []);\r\n    }\r\n    onInit() {\r\n        this.setEvents();\r\n        this.getTarget();\r\n    }\r\n    onUpdate() {\r\n        this.getTarget();\r\n    }\r\n    onDestroy() {\r\n        this.removeEvents();\r\n    }\r\n    getTarget() {\r\n        if (!is(this.args.target)) {\r\n            __classPrivateFieldSet(this, _targetId, null);\r\n        }\r\n        let target = document.querySelector(this.args.target);\r\n        if (is(target)) {\r\n            __classPrivateFieldSet(this, _targetId, target.$cuid);\r\n        }\r\n    }\r\n    setEvents() {\r\n        if (__classPrivateFieldGet(this, _isList)) {\r\n            let elements = this.element.querySelectorAll(SWITCHER_LIST_ITEM_SELECTOR);\r\n            elements.forEach((el, index) => {\r\n                let list = this.onListItemClick.bind(this, index);\r\n                __classPrivateFieldGet(this, _listeners).push(list);\r\n                //@ts-ignore\r\n                el.addEventListener('click', list);\r\n            });\r\n        }\r\n        else {\r\n            this.element.addEventListener('click', this.onClickEvent);\r\n        }\r\n    }\r\n    removeEvents() {\r\n        if (__classPrivateFieldGet(this, _isList)) {\r\n            let elements = this.element.querySelectorAll(SWITCHER_LIST_ITEM_SELECTOR);\r\n            elements.forEach((el, index) => {\r\n                if (__classPrivateFieldGet(this, _listeners).length > index)\r\n                    //@ts-ignore\r\n                    el.removeEventListener('click', __classPrivateFieldGet(this, _listeners)[index]);\r\n            });\r\n            __classPrivateFieldSet(this, _listeners, []);\r\n        }\r\n        else {\r\n            this.element.removeEventListener('click', this.onClickEvent);\r\n        }\r\n    }\r\n    onClickEvent(ev) {\r\n        this.getTarget();\r\n        if (!is(this.args.index)) {\r\n            return;\r\n        }\r\n        this.onClick(this.args.index.trim());\r\n    }\r\n    onListItemClick(index, ev) {\r\n        this.getTarget();\r\n        this.onClick(index);\r\n    }\r\n    onClick(index) {\r\n        if (!is(__classPrivateFieldGet(this, _targetId))) {\r\n            return;\r\n        }\r\n        //@ts-ignore  targetId checked already\r\n        this.utils.bus.emit(EVENTS.SWITCH, __classPrivateFieldGet(this, _targetId), index);\r\n    }\r\n}\r\n_targetId = new WeakMap(), _isList = new WeakMap(), _listeners = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _target, _utils, _toggleEventId, _actions;\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { is, isString, getStringOrDefault } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nexport class CuiToggleArgs {\r\n    constructor() {\r\n        this.action = \"\";\r\n        this.target = \"\";\r\n    }\r\n    parse(args) {\r\n        if (is(args) && isString(args)) {\r\n            this.action = args;\r\n        }\r\n        else {\r\n            this.target = getStringOrDefault(args.target, \"\");\r\n            this.action = args.action;\r\n        }\r\n    }\r\n}\r\nexport class CuiToggleComponent {\r\n    constructor(prefix) {\r\n        this.attribute = `${prefix !== null && prefix !== void 0 ? prefix : \"cui\"}-toggle`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, utils) {\r\n        return new CuiToggleHandler(element, utils, this.attribute);\r\n    }\r\n}\r\nexport class CuiToggleHandler extends CuiHandler {\r\n    constructor(element, utils, attribute) {\r\n        super(\"CuiToggleHandler\", element, attribute, new CuiToggleArgs(), utils);\r\n        _target.set(this, void 0);\r\n        _utils.set(this, void 0);\r\n        _toggleEventId.set(this, void 0);\r\n        _actions.set(this, void 0);\r\n        __classPrivateFieldSet(this, _target, this.element);\r\n        __classPrivateFieldSet(this, _utils, utils);\r\n        __classPrivateFieldSet(this, _toggleEventId, null);\r\n        __classPrivateFieldSet(this, _actions, []);\r\n        this.onClick = this.onClick.bind(this);\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldSet(this, _target, this.getTarget());\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n        this.element.addEventListener('click', this.onClick);\r\n        __classPrivateFieldSet(this, _toggleEventId, this.onEvent(EVENTS.TOGGLE, this.toggle.bind(this)));\r\n    }\r\n    onUpdate() {\r\n        __classPrivateFieldSet(this, _target, this.getTarget());\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n    }\r\n    onDestroy() {\r\n        this.element.removeEventListener('click', this.onClick);\r\n        this.detachEvent(EVENTS.TOGGLE, __classPrivateFieldGet(this, _toggleEventId));\r\n    }\r\n    toggle() {\r\n        if (!__classPrivateFieldGet(this, _target)) {\r\n            this.logError(\"Target in not provided\", \"toggle\");\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _actions).forEach(action => action.toggle(__classPrivateFieldGet(this, _target), __classPrivateFieldGet(this, _utils)));\r\n        this.emitEvent(EVENTS.TOGGLED, {\r\n            action: this.args.action,\r\n            target: __classPrivateFieldGet(this, _target),\r\n            timestamp: Date.now()\r\n        });\r\n    }\r\n    onClick(ev) {\r\n        this.toggle();\r\n        ev.preventDefault();\r\n    }\r\n    getTarget() {\r\n        var _a;\r\n        if (!this.args.target) {\r\n            return this.element;\r\n        }\r\n        return (_a = document.querySelector(this.args.target)) !== null && _a !== void 0 ? _a : this.element;\r\n    }\r\n}\r\n_target = new WeakMap(), _utils = new WeakMap(), _toggleEventId = new WeakMap(), _actions = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _defAct, _prefix, _hoverListener, _tooltip, _margin, _positionCalculator, _tooltipDataCls, _actions, _task;\r\nimport { ElementBuilder } from \"cui-light-core/dist/esm/builders/element\";\r\nimport { CuiHandler } from \"cui-light-core/dist/esm/handlers/base\";\r\nimport { CuiHoverListener } from \"cui-light-core/dist/esm/listeners/hover\";\r\nimport { CuiBasePositionCalculator } from \"cui-light-core/dist/esm/position/calculator\";\r\nimport { CuiTaskRunner } from \"cui-light-core/dist/esm/utils/task\";\r\nimport { CuiActionsListFactory } from \"cui-light-core/dist/esm/utils/actions\";\r\nimport { replacePrefix, isString, getStringOrDefault, getIntOrDefault, is } from \"cui-light-core/dist/esm/utils/functions\";\r\nconst TOOLTIP_ACTION = \".{prefix}-animation-tooltip-in\";\r\nconst TOOLTIP_DATA = \"{prefix}-tooltip-data\";\r\nexport class CuiTooltipArgs {\r\n    constructor(prefix) {\r\n        _defAct.set(this, void 0);\r\n        __classPrivateFieldSet(this, _defAct, replacePrefix(TOOLTIP_ACTION, prefix));\r\n        this.content = \"\";\r\n        this.width = 150;\r\n        this.margin = 8;\r\n        this.timeout = 3000;\r\n        this.pos = \"\";\r\n        this.action = __classPrivateFieldGet(this, _defAct);\r\n    }\r\n    parse(val) {\r\n        if (isString(val)) {\r\n            this.content = getStringOrDefault(val, \"\");\r\n            return;\r\n        }\r\n        this.content = getStringOrDefault(val.content, \"\");\r\n        this.width = getIntOrDefault(val.width, 150);\r\n        this.margin = getIntOrDefault(val.margin, 8);\r\n        this.pos = getStringOrDefault(val.pos, \"\");\r\n        this.action = getStringOrDefault(val.action, __classPrivateFieldGet(this, _defAct));\r\n        this.timeout = getIntOrDefault(val.timeout, 3000);\r\n    }\r\n}\r\n_defAct = new WeakMap();\r\nexport class CuiTooltipComponent {\r\n    constructor(prefix) {\r\n        _prefix.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix !== null && prefix !== void 0 ? prefix : 'cui');\r\n        this.attribute = `${__classPrivateFieldGet(this, _prefix)}-tooltip`;\r\n    }\r\n    getStyle() {\r\n        return null;\r\n    }\r\n    get(element, sutils) {\r\n        return new CuiTooltipHandler(element, this.attribute, sutils, __classPrivateFieldGet(this, _prefix));\r\n    }\r\n}\r\n_prefix = new WeakMap();\r\nexport class CuiTooltipHandler extends CuiHandler {\r\n    constructor(element, attribute, utils, prefix) {\r\n        super(\"CuiTooltipHandler\", element, attribute, new CuiTooltipArgs(prefix), utils);\r\n        _hoverListener.set(this, void 0);\r\n        _tooltip.set(this, void 0);\r\n        _margin.set(this, void 0);\r\n        _positionCalculator.set(this, void 0);\r\n        _tooltipDataCls.set(this, void 0);\r\n        _actions.set(this, void 0);\r\n        _task.set(this, void 0);\r\n        __classPrivateFieldSet(this, _tooltip, undefined);\r\n        __classPrivateFieldSet(this, _actions, []);\r\n        __classPrivateFieldSet(this, _task, undefined);\r\n        __classPrivateFieldSet(this, _tooltipDataCls, replacePrefix(TOOLTIP_DATA, prefix));\r\n        __classPrivateFieldSet(this, _hoverListener, new CuiHoverListener(element));\r\n        __classPrivateFieldGet(this, _hoverListener).setCallback(this.onHover.bind(this));\r\n        __classPrivateFieldSet(this, _margin, 8);\r\n        __classPrivateFieldSet(this, _positionCalculator, new CuiBasePositionCalculator());\r\n        __classPrivateFieldGet(this, _positionCalculator).setPreferred(\"top-center\");\r\n    }\r\n    onInit() {\r\n        __classPrivateFieldGet(this, _hoverListener).attach();\r\n        this.getDataFromArgs();\r\n        __classPrivateFieldSet(this, _task, new CuiTaskRunner(this.args.timeout, false, this.removeTooltip.bind(this)));\r\n    }\r\n    onUpdate() {\r\n        this.getDataFromArgs();\r\n        if (__classPrivateFieldGet(this, _task))\r\n            __classPrivateFieldGet(this, _task).setTimeout(this.args.timeout);\r\n    }\r\n    onDestroy() {\r\n        __classPrivateFieldGet(this, _hoverListener).detach();\r\n    }\r\n    onHover(ev) {\r\n        if (ev.isHovering) {\r\n            this.createTooltip();\r\n        }\r\n        else {\r\n            this.removeTooltip();\r\n        }\r\n    }\r\n    createTooltip() {\r\n        if (is(__classPrivateFieldGet(this, _tooltip)) || !is(this.args.content)) {\r\n            return;\r\n        }\r\n        const box = this.element.getBoundingClientRect();\r\n        __classPrivateFieldSet(this, _tooltip, new ElementBuilder(\"div\").setClasses(__classPrivateFieldGet(this, _tooltipDataCls)).build());\r\n        __classPrivateFieldGet(this, _tooltip).textContent = this.args.content;\r\n        __classPrivateFieldGet(this, _tooltip).style.maxWidth = `${this.args.width}px`;\r\n        document.body.appendChild(__classPrivateFieldGet(this, _tooltip));\r\n        this.mutate(() => {\r\n            if (!__classPrivateFieldGet(this, _tooltip)) {\r\n                return;\r\n            }\r\n            const toolbox = __classPrivateFieldGet(this, _tooltip).getBoundingClientRect();\r\n            __classPrivateFieldGet(this, _positionCalculator).setMargin(__classPrivateFieldGet(this, _margin));\r\n            try {\r\n                let [x, y] = __classPrivateFieldGet(this, _positionCalculator).calculate(box, toolbox.width, toolbox.height);\r\n                __classPrivateFieldGet(this, _tooltip).style.top = `${y}px`;\r\n                __classPrivateFieldGet(this, _tooltip).style.left = `${x}px`;\r\n                this.toggleActions();\r\n                if (__classPrivateFieldGet(this, _task))\r\n                    __classPrivateFieldGet(this, _task).start();\r\n            }\r\n            catch (e) {\r\n                this._log.exception(e);\r\n            }\r\n        });\r\n    }\r\n    removeTooltip() {\r\n        if (!is(__classPrivateFieldGet(this, _tooltip))) {\r\n            return;\r\n        }\r\n        if (__classPrivateFieldGet(this, _task))\r\n            __classPrivateFieldGet(this, _task).stop();\r\n        this.mutate(() => {\r\n            //@ts-ignore already checkded\r\n            __classPrivateFieldGet(this, _tooltip).remove();\r\n            __classPrivateFieldSet(this, _tooltip, undefined);\r\n        });\r\n    }\r\n    getDataFromArgs() {\r\n        __classPrivateFieldGet(this, _positionCalculator).setMargin(this.args.margin);\r\n        __classPrivateFieldGet(this, _positionCalculator).setStatic(this.args.pos);\r\n        __classPrivateFieldSet(this, _actions, CuiActionsListFactory.get(this.args.action));\r\n    }\r\n    toggleActions() {\r\n        if (!__classPrivateFieldGet(this, _tooltip)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _actions).forEach(action => {\r\n            // @ts-ignore\r\n            action.toggle(__classPrivateFieldGet(this, _tooltip));\r\n        });\r\n    }\r\n}\r\n_hoverListener = new WeakMap(), _tooltip = new WeakMap(), _margin = new WeakMap(), _positionCalculator = new WeakMap(), _tooltipDataCls = new WeakMap(), _actions = new WeakMap(), _task = new WeakMap();\r\n","import { CuiAccordionComponent } from \"./accordion/accordion\";\r\nimport { CuiBanerComponent } from \"./banner/banner\";\r\nimport { CuiCircleComponent } from \"./circle/circle\";\r\nimport { CuiCloseComponent } from \"./close/close\";\r\nimport { CuiCoverComponent } from \"./cover/cover\";\r\nimport { CuiDialogComponent } from \"./dialog/dialog\";\r\nimport { CuiDropComponenet } from \"./drop/drop\";\r\nimport { CuiFloatComponent } from \"./float/float\";\r\nimport { CuiIconComponent } from \"./icon/icon\";\r\nimport { CuiIntersectionComponent } from \"./intersection/intersection\";\r\nimport { CuiOffCanvasComponent } from \"./offcanvas/offcanvas\";\r\nimport { CuiOffsetComponent } from \"./offset/offset\";\r\nimport { CuiOpenComponent } from \"./open/open\";\r\nimport { CuiScrollComponent } from \"./scroll/scroll\";\r\nimport { CuiScrollspyComponent } from \"./scrollspy/scrollspy\";\r\nimport { CuiSortableComponent } from \"./sortable/sortable\";\r\nimport { CuiSpinnerComponent } from \"./spinner/spinner\";\r\nimport { CuiSliderComponent } from \"./switch/slider\";\r\nimport { CuiSwitchComponent } from \"./switch/switch\";\r\nimport { CuiSwitcherComponent } from \"./switch/switcher\";\r\nimport { CuiToggleComponent } from \"./toggle/toggle\";\r\nimport { CuiTooltipComponent } from \"./tooltip/tooltip\";\r\n/**\r\n * Function that initializes and returns all components available in package\r\n * @param attributes - object holding data needed for components initialization\r\n */\r\nexport function GetComponents(attributes) {\r\n    let prefix = attributes === null || attributes === void 0 ? void 0 : attributes.prefix;\r\n    return [\r\n        new CuiIconComponent(prefix),\r\n        new CuiTooltipComponent(prefix),\r\n        new CuiCircleComponent(prefix),\r\n        new CuiSpinnerComponent(prefix),\r\n        new CuiScrollComponent(prefix),\r\n        new CuiScrollspyComponent(prefix),\r\n        new CuiIntersectionComponent(prefix),\r\n        new CuiOpenComponent(prefix),\r\n        new CuiCloseComponent(prefix),\r\n        new CuiToggleComponent(prefix),\r\n        new CuiDialogComponent(prefix),\r\n        new CuiOffCanvasComponent(prefix),\r\n        new CuiAccordionComponent(prefix),\r\n        new CuiDropComponenet(prefix),\r\n        new CuiOffsetComponent(prefix),\r\n        new CuiSwitchComponent(prefix),\r\n        new CuiSwitcherComponent(prefix),\r\n        new CuiFloatComponent(prefix),\r\n        new CuiSliderComponent(prefix),\r\n        new CuiBanerComponent(prefix),\r\n        new CuiCoverComponent(prefix),\r\n        new CuiSortableComponent(prefix),\r\n    ];\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _bus, _boundClick;\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nexport class CuiWindowClickPlugin {\r\n    constructor() {\r\n        this.name = 'click-plugin';\r\n        _bus.set(this, void 0);\r\n        _boundClick.set(this, void 0);\r\n        this.description = \"CuiWindowClickPlugin\";\r\n        __classPrivateFieldSet(this, _bus, undefined);\r\n        __classPrivateFieldSet(this, _boundClick, this.onWindowClick.bind(this));\r\n    }\r\n    init(utils) {\r\n        __classPrivateFieldSet(this, _bus, utils.bus);\r\n        window.addEventListener('click', __classPrivateFieldGet(this, _boundClick));\r\n    }\r\n    destroy() {\r\n        window.removeEventListener('click', __classPrivateFieldGet(this, _boundClick));\r\n    }\r\n    onWindowClick(ev) {\r\n        if (__classPrivateFieldGet(this, _bus))\r\n            __classPrivateFieldGet(this, _bus).emit(EVENTS.WINDOW_CLICK, null, ev);\r\n    }\r\n}\r\n_bus = new WeakMap(), _boundClick = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _callback, _keys, _inProgress, _singleEmit, _isAttached, _onKeyDownBound, _onKeyUpBound;\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiKeyPressListener {\r\n    constructor(singleEmit, keys) {\r\n        _callback.set(this, void 0);\r\n        _keys.set(this, void 0);\r\n        _inProgress.set(this, void 0);\r\n        _singleEmit.set(this, void 0);\r\n        _isAttached.set(this, void 0);\r\n        _onKeyDownBound.set(this, void 0);\r\n        _onKeyUpBound.set(this, void 0);\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n        __classPrivateFieldSet(this, _singleEmit, true);\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n        __classPrivateFieldSet(this, _callback, undefined);\r\n        __classPrivateFieldSet(this, _keys, keys !== null && keys !== void 0 ? keys : []);\r\n        __classPrivateFieldSet(this, _onKeyDownBound, this.onKeyDown.bind(this));\r\n        __classPrivateFieldSet(this, _onKeyUpBound, this.onKeyUp.bind(this));\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    isInProgress() {\r\n        return __classPrivateFieldGet(this, _inProgress);\r\n    }\r\n    attach() {\r\n        document.addEventListener('keydown', __classPrivateFieldGet(this, _onKeyDownBound));\r\n        if (__classPrivateFieldGet(this, _singleEmit)) {\r\n            document.addEventListener('keyup', __classPrivateFieldGet(this, _onKeyUpBound));\r\n        }\r\n        __classPrivateFieldSet(this, _isAttached, true);\r\n    }\r\n    detach() {\r\n        document.removeEventListener('keydown', __classPrivateFieldGet(this, _onKeyDownBound));\r\n        if (__classPrivateFieldGet(this, _singleEmit)) {\r\n            document.addEventListener('keyup', __classPrivateFieldGet(this, _onKeyUpBound));\r\n        }\r\n        __classPrivateFieldSet(this, _isAttached, false);\r\n    }\r\n    isAttached() {\r\n        return __classPrivateFieldGet(this, _isAttached);\r\n    }\r\n    onKeyDown(ev) {\r\n        if (__classPrivateFieldGet(this, _inProgress)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _inProgress, true);\r\n        try {\r\n            if ((!is(__classPrivateFieldGet(this, _keys)) || __classPrivateFieldGet(this, _keys).includes(ev.code)) && __classPrivateFieldGet(this, _callback)) {\r\n                __classPrivateFieldGet(this, _callback).call(this, ev);\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n        }\r\n        finally {\r\n            if (!__classPrivateFieldGet(this, _singleEmit))\r\n                __classPrivateFieldSet(this, _inProgress, false);\r\n        }\r\n    }\r\n    onKeyUp(ev) {\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n    }\r\n}\r\n_callback = new WeakMap(), _keys = new WeakMap(), _inProgress = new WeakMap(), _singleEmit = new WeakMap(), _isAttached = new WeakMap(), _onKeyDownBound = new WeakMap(), _onKeyUpBound = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _listener, _bus;\r\nimport { CuiKeyPressListener } from \"cui-light-core/dist/esm/listeners/keys\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nexport class CuiKeysObserver {\r\n    constructor(bus) {\r\n        _listener.set(this, void 0);\r\n        _bus.set(this, void 0);\r\n        __classPrivateFieldSet(this, _bus, bus);\r\n        __classPrivateFieldSet(this, _listener, new CuiKeyPressListener(true));\r\n        __classPrivateFieldGet(this, _listener).setCallback(this.onKeyDown.bind(this));\r\n    }\r\n    connect() {\r\n        __classPrivateFieldGet(this, _listener).attach();\r\n    }\r\n    disconnect() {\r\n        __classPrivateFieldGet(this, _listener).detach();\r\n    }\r\n    onKeyDown(ev) {\r\n        __classPrivateFieldGet(this, _bus).emit(EVENTS.KEYDOWN, null, {\r\n            timestamp: Date.now(),\r\n            event: ev\r\n        });\r\n    }\r\n}\r\n_listener = new WeakMap(), _bus = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _keysObserver;\r\nimport { CuiKeysObserver } from \"./observer\";\r\nexport class CuiKeysObserverPlugin {\r\n    constructor(keySetup) {\r\n        this.name = 'keys-observer';\r\n        _keysObserver.set(this, void 0);\r\n        this.description = \"CuiKeysObserverPlugin\";\r\n        this.setup = keySetup;\r\n        __classPrivateFieldSet(this, _keysObserver, undefined);\r\n    }\r\n    init(utils) {\r\n        __classPrivateFieldSet(this, _keysObserver, new CuiKeysObserver(utils.bus));\r\n        __classPrivateFieldGet(this, _keysObserver).connect();\r\n    }\r\n    destroy() {\r\n        if (__classPrivateFieldGet(this, _keysObserver))\r\n            __classPrivateFieldGet(this, _keysObserver).disconnect();\r\n    }\r\n}\r\n_keysObserver = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _mediaQuery, _callback, _isInitialized, _inProgress, _onEventBound;\r\nexport class CuiMediaQueryListener {\r\n    constructor(mediaQuery) {\r\n        _mediaQuery.set(this, void 0);\r\n        _callback.set(this, void 0);\r\n        _isInitialized.set(this, void 0);\r\n        _inProgress.set(this, void 0);\r\n        _onEventBound.set(this, void 0);\r\n        __classPrivateFieldSet(this, _mediaQuery, mediaQuery);\r\n        __classPrivateFieldSet(this, _isInitialized, false);\r\n        __classPrivateFieldSet(this, _callback, undefined);\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n        __classPrivateFieldSet(this, _onEventBound, this.event.bind(this));\r\n    }\r\n    setCallback(callback) {\r\n        __classPrivateFieldSet(this, _callback, callback);\r\n    }\r\n    isInProgress() {\r\n        return __classPrivateFieldGet(this, _inProgress);\r\n    }\r\n    attach() {\r\n        if (!window.matchMedia || __classPrivateFieldGet(this, _isInitialized) || !__classPrivateFieldGet(this, _mediaQuery)) {\r\n            return;\r\n        }\r\n        window.matchMedia(__classPrivateFieldGet(this, _mediaQuery))\r\n            .addEventListener('change', __classPrivateFieldGet(this, _onEventBound));\r\n        __classPrivateFieldSet(this, _isInitialized, true);\r\n    }\r\n    detach() {\r\n        if (__classPrivateFieldGet(this, _isInitialized)) {\r\n            window.matchMedia(__classPrivateFieldGet(this, _mediaQuery)).removeEventListener('change', __classPrivateFieldGet(this, _onEventBound));\r\n            __classPrivateFieldSet(this, _isInitialized, false);\r\n        }\r\n    }\r\n    isAttached() {\r\n        return __classPrivateFieldGet(this, _isInitialized);\r\n    }\r\n    event(ev) {\r\n        if (__classPrivateFieldGet(this, _inProgress) || !__classPrivateFieldGet(this, _callback)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _inProgress, true);\r\n        try {\r\n            __classPrivateFieldGet(this, _callback).call(this, ev);\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n        }\r\n        finally {\r\n            __classPrivateFieldSet(this, _inProgress, false);\r\n        }\r\n    }\r\n}\r\n_mediaQuery = new WeakMap(), _callback = new WeakMap(), _isInitialized = new WeakMap(), _inProgress = new WeakMap(), _onEventBound = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _listener, _utils;\r\nimport { getSystemLightMode } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiMediaQueryListener } from \"cui-light-core/dist/esm/listeners/media\";\r\nexport class CuiAutoLightModePlugin {\r\n    constructor(autoLightInit) {\r\n        this.description = 'Dark vs Light mode auto switcher';\r\n        this.name = 'auto-light';\r\n        _listener.set(this, void 0);\r\n        _utils.set(this, void 0);\r\n        this.description = \"CuiAutoLightModePlugin\";\r\n        this.setup = autoLightInit;\r\n        __classPrivateFieldSet(this, _utils, undefined);\r\n        __classPrivateFieldSet(this, _listener, undefined);\r\n    }\r\n    init(utils) {\r\n        __classPrivateFieldSet(this, _utils, utils);\r\n        if (this.setup.autoLight && getSystemLightMode() === 'dark') {\r\n            __classPrivateFieldGet(this, _utils).setLightMode('dark');\r\n        }\r\n        __classPrivateFieldSet(this, _listener, new CuiMediaQueryListener('(prefers-color-scheme: dark)'));\r\n        __classPrivateFieldGet(this, _listener).setCallback(this.onChange.bind(this));\r\n        __classPrivateFieldGet(this, _listener).attach();\r\n    }\r\n    destroy() {\r\n        if (__classPrivateFieldGet(this, _listener))\r\n            __classPrivateFieldGet(this, _listener).detach();\r\n    }\r\n    onChange(ev) {\r\n        var _a;\r\n        if (!__classPrivateFieldGet(this, _utils)) {\r\n            return;\r\n        }\r\n        let autoLightSetup = __classPrivateFieldGet(this, _utils).setup.plugins[this.description];\r\n        let autoLight = (_a = autoLightSetup === null || autoLightSetup === void 0 ? void 0 : autoLightSetup.autoLight) !== null && _a !== void 0 ? _a : false;\r\n        if (autoLight) {\r\n            if (ev.matches) {\r\n                __classPrivateFieldGet(this, _utils).setLightMode('dark');\r\n            }\r\n            else {\r\n                __classPrivateFieldGet(this, _utils).setLightMode('light');\r\n            }\r\n        }\r\n    }\r\n}\r\n_listener = new WeakMap(), _utils = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _listener, _utils;\r\nimport { getSystemPrintMode } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiMediaQueryListener } from \"cui-light-core/dist/esm/listeners/media\";\r\nexport class CuiAutoPrintModePlugin {\r\n    constructor(autoPrintInit) {\r\n        this.description = 'Auto print mode';\r\n        this.name = 'auto-print';\r\n        _listener.set(this, void 0);\r\n        _utils.set(this, void 0);\r\n        this.description = \"CuiAutoPrintModePlugin\";\r\n        this.setup = autoPrintInit;\r\n        __classPrivateFieldSet(this, _listener, undefined);\r\n        __classPrivateFieldSet(this, _utils, undefined);\r\n    }\r\n    init(utils) {\r\n        __classPrivateFieldSet(this, _utils, utils);\r\n        if (this.setup.autoPrint && getSystemPrintMode()) {\r\n            __classPrivateFieldGet(this, _utils).setPrintMode(true);\r\n        }\r\n        __classPrivateFieldSet(this, _listener, new CuiMediaQueryListener('print'));\r\n        __classPrivateFieldGet(this, _listener).setCallback(this.onChange.bind(this));\r\n        __classPrivateFieldGet(this, _listener).attach();\r\n    }\r\n    destroy() {\r\n        if (__classPrivateFieldGet(this, _listener))\r\n            __classPrivateFieldGet(this, _listener).detach();\r\n    }\r\n    onChange(ev) {\r\n        var _a, _b;\r\n        if (!__classPrivateFieldGet(this, _utils)) {\r\n            return;\r\n        }\r\n        this.setup = __classPrivateFieldGet(this, _utils).setup.plugins[this.description];\r\n        let autoPrint = (_b = (_a = this.setup) === null || _a === void 0 ? void 0 : _a.autoPrint) !== null && _b !== void 0 ? _b : false;\r\n        if (autoPrint) {\r\n            if (ev.matches) {\r\n                __classPrivateFieldGet(this, _utils).setPrintMode(true);\r\n            }\r\n            else {\r\n                __classPrivateFieldGet(this, _utils).setPrintMode(false);\r\n            }\r\n        }\r\n    }\r\n}\r\n_listener = new WeakMap(), _utils = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _red, _green, _blue, _alpha, _colorStr, _colorStr_1;\r\nimport { getRangeValue, is, isInRange, } from \"../utils/functions\";\r\nimport { CuiColorError } from \"./errors\";\r\nexport class CuiColor {\r\n    constructor(red, green, blue, alpha) {\r\n        _red.set(this, void 0);\r\n        _green.set(this, void 0);\r\n        _blue.set(this, void 0);\r\n        _alpha.set(this, void 0);\r\n        __classPrivateFieldSet(this, _red, 0);\r\n        __classPrivateFieldSet(this, _blue, 0);\r\n        __classPrivateFieldSet(this, _green, 0);\r\n        __classPrivateFieldSet(this, _alpha, 0);\r\n        this.set(red, green, blue, alpha);\r\n    }\r\n    static create(colorStr) {\r\n        if (!is(colorStr)) {\r\n            throw new CuiColorError(`Given color value is not in a valid format`);\r\n        }\r\n        let parser;\r\n        if (colorStr.startsWith(\"#\")) {\r\n            parser = new HexColorParser(colorStr);\r\n        }\r\n        else if (colorStr.startsWith(\"rgb\")) {\r\n            parser = new RgbColorParser(colorStr);\r\n        }\r\n        else {\r\n            throw new CuiColorError(\"Unknown color string format\");\r\n        }\r\n        let res = parser.parse();\r\n        if (!res) {\r\n            throw new CuiColorError(\"Color was not parsed\");\r\n        }\r\n        return res;\r\n    }\r\n    set(red, green, blue, alpha) {\r\n        __classPrivateFieldSet(this, _alpha, getRangeValue(alpha !== null && alpha !== void 0 ? alpha : 1, 0, 1));\r\n        __classPrivateFieldSet(this, _blue, getRangeValue(blue, 0, 255));\r\n        __classPrivateFieldSet(this, _red, getRangeValue(red, 0, 255));\r\n        __classPrivateFieldSet(this, _green, getRangeValue(green, 0, 255));\r\n    }\r\n    setRed(red) {\r\n        __classPrivateFieldSet(this, _red, getRangeValue(red, 0, 255));\r\n    }\r\n    setGreen(green) {\r\n        __classPrivateFieldSet(this, _green, getRangeValue(green, 0, 255));\r\n    }\r\n    setBlue(blue) {\r\n        __classPrivateFieldSet(this, _blue, getRangeValue(blue, 0, 255));\r\n    }\r\n    opacity(val) {\r\n        __classPrivateFieldSet(this, _alpha, getRangeValue(val, 0, 1));\r\n        return this;\r\n    }\r\n    lighten(amount) {\r\n        this.shade(amount);\r\n        return this;\r\n    }\r\n    darken(amount) {\r\n        this.shade(-amount);\r\n        return this;\r\n    }\r\n    invert() {\r\n        __classPrivateFieldSet(this, _blue, 255 - __classPrivateFieldGet(this, _blue));\r\n        __classPrivateFieldSet(this, _red, 255 - __classPrivateFieldGet(this, _red));\r\n        __classPrivateFieldSet(this, _green, 255 - __classPrivateFieldGet(this, _green));\r\n        return this;\r\n    }\r\n    getColorValue(type) {\r\n        const t = type ? type.toLowerCase() : '#';\r\n        switch (type) {\r\n            case 'red':\r\n                return __classPrivateFieldGet(this, _red);\r\n            case 'green':\r\n                return __classPrivateFieldGet(this, _green);\r\n            case 'blue':\r\n                return __classPrivateFieldGet(this, _blue);\r\n            case 'alpha':\r\n                return __classPrivateFieldGet(this, _alpha);\r\n        }\r\n        return -1;\r\n    }\r\n    toCssString() {\r\n        return `rgba(${__classPrivateFieldGet(this, _red)}, ${__classPrivateFieldGet(this, _green)}, ${__classPrivateFieldGet(this, _blue)}, ${__classPrivateFieldGet(this, _alpha)})`;\r\n    }\r\n    shade(percent, self = true) {\r\n        __classPrivateFieldSet(this, _red, this.shadeSingle(__classPrivateFieldGet(this, _red), percent, self));\r\n        __classPrivateFieldSet(this, _green, this.shadeSingle(__classPrivateFieldGet(this, _green), percent, self));\r\n        __classPrivateFieldSet(this, _blue, this.shadeSingle(__classPrivateFieldGet(this, _blue), percent, self));\r\n    }\r\n    shadeSingle(val, percent, self = true) {\r\n        let rel = self ? val : 255;\r\n        let prop = (rel * percent) / 100;\r\n        let newVal = val + Math.round(prop);\r\n        return getRangeValue(newVal, 0, 255);\r\n    }\r\n    clone() {\r\n        return new CuiColor(__classPrivateFieldGet(this, _red), __classPrivateFieldGet(this, _green), __classPrivateFieldGet(this, _blue), __classPrivateFieldGet(this, _alpha));\r\n    }\r\n}\r\n_red = new WeakMap(), _green = new WeakMap(), _blue = new WeakMap(), _alpha = new WeakMap();\r\nexport class HexColorParser {\r\n    constructor(colorStr) {\r\n        _colorStr.set(this, void 0);\r\n        __classPrivateFieldSet(this, _colorStr, colorStr);\r\n    }\r\n    trim() {\r\n        __classPrivateFieldSet(this, _colorStr, __classPrivateFieldGet(this, _colorStr) ? __classPrivateFieldGet(this, _colorStr).trim() : \"\");\r\n        return;\r\n    }\r\n    isValid() {\r\n        return is(__classPrivateFieldGet(this, _colorStr)) && __classPrivateFieldGet(this, _colorStr).startsWith(\"#\");\r\n    }\r\n    parse() {\r\n        let red = 0;\r\n        let blue = 0;\r\n        let green = 0;\r\n        let alpha = 1;\r\n        let length = __classPrivateFieldGet(this, _colorStr).length;\r\n        if (__classPrivateFieldGet(this, _colorStr).length === 4) {\r\n            red = parseInt(__classPrivateFieldGet(this, _colorStr)[1] + __classPrivateFieldGet(this, _colorStr)[1], 16);\r\n            green = parseInt(__classPrivateFieldGet(this, _colorStr)[2] + __classPrivateFieldGet(this, _colorStr)[2], 16);\r\n            blue = parseInt(__classPrivateFieldGet(this, _colorStr)[3] + __classPrivateFieldGet(this, _colorStr)[3], 16);\r\n        }\r\n        else {\r\n            red = parseInt(__classPrivateFieldGet(this, _colorStr)[1] + __classPrivateFieldGet(this, _colorStr)[2], 16);\r\n            green = parseInt(__classPrivateFieldGet(this, _colorStr)[3] + __classPrivateFieldGet(this, _colorStr)[4], 16);\r\n            blue = parseInt(__classPrivateFieldGet(this, _colorStr)[5] + __classPrivateFieldGet(this, _colorStr)[6], 16);\r\n            if (length > 7) {\r\n                let alphaHex = parseInt(__classPrivateFieldGet(this, _colorStr)[7] + __classPrivateFieldGet(this, _colorStr)[8], 16);\r\n                alpha = parseFloat((alphaHex / 255).toFixed(2));\r\n            }\r\n        }\r\n        return new CuiColor(red, green, blue, alpha);\r\n    }\r\n}\r\n_colorStr = new WeakMap();\r\nexport class RgbColorParser {\r\n    constructor(colorStr) {\r\n        _colorStr_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _colorStr_1, colorStr);\r\n    }\r\n    trim() {\r\n        __classPrivateFieldSet(this, _colorStr_1, is(__classPrivateFieldGet(this, _colorStr_1)) ? __classPrivateFieldGet(this, _colorStr_1).trim() : \"\");\r\n    }\r\n    isValid() {\r\n        return is(__classPrivateFieldGet(this, _colorStr_1)) && __classPrivateFieldGet(this, _colorStr_1).startsWith(\"rgb\");\r\n    }\r\n    parse() {\r\n        let len = __classPrivateFieldGet(this, _colorStr_1).length;\r\n        let str = __classPrivateFieldGet(this, _colorStr_1).startsWith(\"rgba\") ? __classPrivateFieldGet(this, _colorStr_1).substring(5, len - 1) : __classPrivateFieldGet(this, _colorStr_1).substring(4, len - 1);\r\n        let split = str.split(\",\");\r\n        if (!isInRange(split.length, 3, 4)) {\r\n            return undefined;\r\n        }\r\n        let red = parseInt(split[0]);\r\n        let green = parseInt(split[1]);\r\n        let blue = parseInt(split[2]);\r\n        let alpha = split.length === 4 ? parseFloat(split[3]) : 1;\r\n        return new CuiColor(red, green, blue, alpha);\r\n    }\r\n}\r\n_colorStr_1 = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _set, _setter, _setter_1, _set_1;\r\nimport { CSS_VARIABLES } from \"cui-light-core/dist/esm/utils/statics\";\r\nconst baseColorSets = {\r\n    \"light\": {\r\n        background: CSS_VARIABLES.colorLightBackground,\r\n        base: CSS_VARIABLES.colorLightBase,\r\n        active: CSS_VARIABLES.colorLightActive,\r\n        muted: CSS_VARIABLES.colorLightMuted,\r\n    },\r\n    \"dark\": {\r\n        background: CSS_VARIABLES.colorDarkBackground,\r\n        base: CSS_VARIABLES.colorDarkBase,\r\n        active: CSS_VARIABLES.colorDarkActive,\r\n        muted: CSS_VARIABLES.colorDarkMuted,\r\n    }\r\n};\r\nconst themeColors = {\r\n    'accent': {\r\n        base: CSS_VARIABLES.colorAccent,\r\n        muted: CSS_VARIABLES.colorAccentMuted,\r\n        active: CSS_VARIABLES.colorAccentActive,\r\n        shade: CSS_VARIABLES.colorAccentShade,\r\n        shadeDark: CSS_VARIABLES.colorAccentShadeDark\r\n    },\r\n    'secondary': {\r\n        base: CSS_VARIABLES.colorSecondary,\r\n        muted: CSS_VARIABLES.colorSecondaryMuted,\r\n        active: CSS_VARIABLES.colorSecondaryActive,\r\n        shade: CSS_VARIABLES.colorSecondaryShade,\r\n        shadeDark: CSS_VARIABLES.colorSecondaryShadeDark\r\n    },\r\n    'error': {\r\n        base: CSS_VARIABLES.colorError,\r\n        muted: CSS_VARIABLES.colorErrorMuted,\r\n        active: CSS_VARIABLES.colorErrorActive,\r\n        shade: CSS_VARIABLES.colorErrorShade,\r\n        shadeDark: CSS_VARIABLES.colorErrorShadeDark\r\n    },\r\n    'warning': {\r\n        base: CSS_VARIABLES.colorWarning,\r\n        muted: CSS_VARIABLES.colorWarningMuted,\r\n        active: CSS_VARIABLES.colorWarningActive,\r\n        shade: CSS_VARIABLES.colorWarningShade,\r\n        shadeDark: CSS_VARIABLES.colorWarningShadeDark\r\n    },\r\n    'success': {\r\n        base: CSS_VARIABLES.colorSuccess,\r\n        muted: CSS_VARIABLES.colorSuccessMuted,\r\n        active: CSS_VARIABLES.colorSuccessActive,\r\n        shade: CSS_VARIABLES.colorSuccessShade,\r\n        shadeDark: CSS_VARIABLES.colorSuccessShadeDark\r\n    }\r\n};\r\nexport class CuiBaseColorsSetter {\r\n    constructor(colorSet, setter) {\r\n        _set.set(this, void 0);\r\n        _setter.set(this, void 0);\r\n        __classPrivateFieldSet(this, _set, baseColorSets[colorSet]);\r\n        __classPrivateFieldSet(this, _setter, setter);\r\n    }\r\n    setBackgroundColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set).background, color);\r\n    }\r\n    setBaseColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set).base, color);\r\n    }\r\n    setActiveColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set).active, color);\r\n    }\r\n    setMutedColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set).muted, color);\r\n    }\r\n    setBaseColors(colors) {\r\n        if (!__classPrivateFieldGet(this, _set)) {\r\n            return;\r\n        }\r\n        let set = {};\r\n        set[__classPrivateFieldGet(this, _set).background] = colors.background ? colors.background.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set).active] = colors.active ? colors.active.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set).muted] = colors.muted ? colors.muted.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set).base] = colors.base ? colors.base.toCssString() : \"\";\r\n        __classPrivateFieldGet(this, _setter).setProperties(set);\r\n    }\r\n    setColor(color, value) {\r\n        __classPrivateFieldGet(this, _setter).setProperty(color, value.toCssString());\r\n    }\r\n}\r\n_set = new WeakMap(), _setter = new WeakMap();\r\nexport class CuiThemeColorsSetter {\r\n    constructor(set, setter) {\r\n        _setter_1.set(this, void 0);\r\n        _set_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _setter_1, setter);\r\n        __classPrivateFieldSet(this, _set_1, themeColors[set]);\r\n    }\r\n    setBaseColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set_1).base, color);\r\n    }\r\n    setMutedColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set_1).muted, color);\r\n    }\r\n    setActiveColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set_1).active, color);\r\n    }\r\n    setShadeColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set_1).shade, color);\r\n    }\r\n    setShadeDarkColor(color) {\r\n        this.setColor(__classPrivateFieldGet(this, _set_1).shadeDark, color);\r\n    }\r\n    setColors(colors) {\r\n        if (!__classPrivateFieldGet(this, _set_1)) {\r\n            return;\r\n        }\r\n        let set = {};\r\n        set[__classPrivateFieldGet(this, _set_1).shade] = colors.shade ? colors.shade.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set_1).shadeDark] = colors.shadeDark ? colors.shadeDark.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set_1).active] = colors.active ? colors.active.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set_1).muted] = colors.muted ? colors.muted.toCssString() : \"\";\r\n        set[__classPrivateFieldGet(this, _set_1).base] = colors.base ? colors.base.toCssString() : \"\";\r\n        __classPrivateFieldGet(this, _setter_1).setProperties(set);\r\n    }\r\n    setAutoColors(base) {\r\n        let set = {};\r\n        set[__classPrivateFieldGet(this, _set_1).base] = base.toCssString();\r\n        set[__classPrivateFieldGet(this, _set_1).shade] = base.lighten(30).toCssString();\r\n        set[__classPrivateFieldGet(this, _set_1).shadeDark] = base.darken(30).toCssString();\r\n        set[__classPrivateFieldGet(this, _set_1).active] = base.darken(10).toCssString();\r\n        set[__classPrivateFieldGet(this, _set_1).muted] = base.lighten(10).toCssString();\r\n        __classPrivateFieldGet(this, _setter_1).setProperties(set);\r\n    }\r\n    setColor(color, value) {\r\n        __classPrivateFieldGet(this, _setter_1).setProperty(color, value.toCssString());\r\n    }\r\n}\r\n_setter_1 = new WeakMap(), _set_1 = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _utils;\r\nimport { are, is } from \"cui-light-core/dist/esm/utils/functions\";\r\nexport class PropertySetter {\r\n    constructor(utils) {\r\n        _utils.set(this, void 0);\r\n        __classPrivateFieldSet(this, _utils, utils);\r\n    }\r\n    setProperty(property, value) {\r\n        if (!are(property, value)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _utils).interactions.mutate(() => {\r\n            __classPrivateFieldGet(this, _utils).setProperty(property, value);\r\n        }, null);\r\n    }\r\n    setProperties(set) {\r\n        if (!is(set)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _utils).interactions.mutate(() => {\r\n            for (let property in set) {\r\n                if (is(set[property]))\r\n                    __classPrivateFieldGet(this, _utils).setProperty(property, set[property]);\r\n            }\r\n        }, null);\r\n    }\r\n}\r\n_utils = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _setter;\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CSS_VARIABLES } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { CuiBaseColorsSetter, CuiThemeColorsSetter } from \"./colors\";\r\nimport { PropertySetter } from \"./setter\";\r\nexport class CuiPropertiesHandler {\r\n    constructor(utils) {\r\n        _setter.set(this, void 0);\r\n        __classPrivateFieldSet(this, _setter, new PropertySetter(utils));\r\n    }\r\n    /**\r\n     * Sets main font size\r\n     * @param {number} value numeric value\r\n     * @param {string} unit optional - size unit, px if not provided\r\n     */\r\n    setBaseFontSize(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.fontSize, value, unit);\r\n    }\r\n    /**\r\n     * Sets base animation time\r\n     * @param {number} value - time value\r\n     * @param {string} unit  - optional - ms is passed when no provided\r\n     */\r\n    setAnimationTime(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.animationTime, value, unit !== null && unit !== void 0 ? unit : 'ms');\r\n    }\r\n    /**\r\n    * Sets long animation time\r\n    * @param {number} value - time value\r\n    * @param {string} unit  - optional - ms is passed when no provided\r\n    */\r\n    setAnimationTimeLong(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.setAnimationTimeLong, value, unit !== null && unit !== void 0 ? unit : 'ms');\r\n    }\r\n    /**\r\n    * Sets short animation time\r\n    * @param {number} value - time value\r\n    * @param {string} unit  - optional - ms is passed when no provided\r\n    */\r\n    setAnimationTimeShort(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.setAnimationTimeShort, value, unit !== null && unit !== void 0 ? unit : 'ms');\r\n    }\r\n    /**\r\n    * Sets main line size\r\n    * @param {number} value numeric value\r\n    * @param {string} unit optional - size unit, px if not provided\r\n    */\r\n    setBaseLineHeight(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.lineHeight, value, unit);\r\n    }\r\n    /**\r\n     * Sets base margin value\r\n     * @param {number} value - margin value\r\n     * @param {string} unit - optional - margin unit (px default)\r\n     */\r\n    setBaseMargin(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.margin, value, unit);\r\n    }\r\n    /**\r\n    * Sets base padding value\r\n    * @param {number} value - padding value\r\n    * @param {string} unit - optional - padding unit (px default)\r\n    */\r\n    setBasePadding(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.padding, value, unit);\r\n    }\r\n    /**\r\n    * Sets base border radius\r\n    * @param {number} value - border value\r\n    * @param {string} unit - optional - border unit (px default)\r\n    */\r\n    setBaseBorderRadius(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.borderRadius, value, unit);\r\n    }\r\n    /**\r\n   * Sets component space\r\n   * @param {number} value - space value\r\n   * @param {string} unit - optional - space unit (px default)\r\n   */\r\n    setComponentSpace(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.componentSpace, value, unit);\r\n    }\r\n    /**\r\n     * Sets new accordion chevron icon\r\n     * @param value A SVG formatted to be replaced default value\r\n     */\r\n    setAccordionIcon(value) {\r\n        if (!is(value)) {\r\n            return;\r\n        }\r\n        this.setCSSVariable(CSS_VARIABLES.accordionIcon, value);\r\n    }\r\n    /**\r\n    * Sets a scrollbar width\r\n    * @param value A SVG formatted to be replaced default value\r\n    */\r\n    setScrollbarWidth(value, unit) {\r\n        this.setBaseUnitValue(CSS_VARIABLES.scrollbarWidth, value, unit);\r\n    }\r\n    /**\r\n     * Sets app viewport light background color\r\n     * @param color color to be set\r\n     */\r\n    setAppBackgroundColor(color) {\r\n        if (!is(color)) {\r\n            return;\r\n        }\r\n        this.setCSSVariable(CSS_VARIABLES.colorLightAppBackground, color.toCssString());\r\n    }\r\n    /**\r\n    * Sets app viewport dark background color\r\n    * @param color color to be set\r\n    */\r\n    setDarkAppBackgroundColor(color) {\r\n        if (!is(color)) {\r\n            return;\r\n        }\r\n        this.setCSSVariable(CSS_VARIABLES.colorDarkAppBackground, color.toCssString());\r\n    }\r\n    getBaseColorsSetter() {\r\n        return new CuiBaseColorsSetter(\"light\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    getDarkBaseColorsSetter() {\r\n        return new CuiBaseColorsSetter(\"dark\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    getAccentThemeColorsSetter() {\r\n        return new CuiThemeColorsSetter(\"accent\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    getSecondaryThemeColorsSetter() {\r\n        return new CuiThemeColorsSetter(\"secondary\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    getErrorThemeColorsSetter() {\r\n        return new CuiThemeColorsSetter(\"error\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    getWarningThemeColorsSetter() {\r\n        return new CuiThemeColorsSetter(\"warning\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    getSuccessThemeColorsSetter() {\r\n        return new CuiThemeColorsSetter(\"success\", __classPrivateFieldGet(this, _setter));\r\n    }\r\n    /**\r\n     * Sets property in interactive way\r\n     * @param {string} name property name - value of {prefix} is replaced by current prefix\r\n     * @param {string} value - property value\r\n     */\r\n    setCSSVariable(name, value) {\r\n        __classPrivateFieldGet(this, _setter).setProperty(name, value);\r\n    }\r\n    /**\r\n     * Sets unit type CSS variable property\r\n     * @param name Variable name\r\n     * @param value numeric value\r\n     * @param unit unit - optional - px is default value\r\n     */\r\n    setBaseUnitValue(name, value, unit) {\r\n        if (!is(value)) {\r\n            return;\r\n        }\r\n        let strVal = `${value}${unit !== null && unit !== void 0 ? unit : \"px\"}`;\r\n        this.setCSSVariable(name, strVal);\r\n    }\r\n}\r\n_setter = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _log;\r\nimport { CuiColor } from \"cui-light-core/dist/esm/models/colors\";\r\nimport { CuiLoggerFactory } from \"cui-light-core/dist/esm/factories/logger\";\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiPropertiesHandler } from \"./handler\";\r\nexport class CuiCSSVariablesPlugin {\r\n    constructor(keySetup) {\r\n        this.name = 'css-variables-plugin';\r\n        _log.set(this, void 0);\r\n        this.description = \"CuiCSSVariablesPlugin\";\r\n        this.setup = keySetup;\r\n        __classPrivateFieldSet(this, _log, CuiLoggerFactory.get(\"CuiCSSVariablesPlugin\"));\r\n        this.handler = undefined;\r\n    }\r\n    init(utils) {\r\n        this.handler = new CuiPropertiesHandler(utils);\r\n        utils.bus.on(\"csschange\", this.onCssChange.bind(this));\r\n    }\r\n    destroy() {\r\n    }\r\n    onCssChange(event) {\r\n        if (!this.handler) {\r\n            return;\r\n        }\r\n        let setter = null;\r\n        let accentSetter = null;\r\n        switch (event.method) {\r\n            case \"baseFontSize\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setBaseFontSize(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"baseLineHeight\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setBaseLineHeight(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"animationTime\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setAnimationTime(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"animationTimeLong\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setAnimationTimeLong(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"animationTimeShort\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setAnimationTimeShort(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"margin\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setBaseMargin(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"padding\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setBasePadding(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"borderRadius\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setBaseBorderRadius(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"componentSpace\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setComponentSpace(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"scrollbarWidth\":\r\n                if (!this.isArgNumber(event.arg))\r\n                    return;\r\n                this.handler.setScrollbarWidth(event.arg.value, event.arg.unit);\r\n                break;\r\n            case \"accordionIcon\":\r\n                if (!is(event.arg))\r\n                    return;\r\n                this.handler.setAccordionIcon(event.arg);\r\n                break;\r\n            case \"appLightBackground\":\r\n                if (!is(event.arg))\r\n                    return;\r\n                this.handler.setAppBackgroundColor(CuiColor.create(event.arg));\r\n                break;\r\n            case \"appDarkBackground\":\r\n                if (!is(event.arg))\r\n                    return;\r\n                this.handler.setDarkAppBackgroundColor(CuiColor.create(event.arg));\r\n                break;\r\n            case \"appDarkBackground\":\r\n                if (!is(event.arg))\r\n                    return;\r\n                this.handler.setDarkAppBackgroundColor(CuiColor.create(event.arg));\r\n                break;\r\n            case \"mainColorBackground\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                setter = this.getBaseColorSetter(event.arg.palette);\r\n                if (setter)\r\n                    setter.setBackgroundColor(CuiColor.create(event.arg.color));\r\n                break;\r\n            case \"mainColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                setter = this.getBaseColorSetter(event.arg.palette);\r\n                if (setter)\r\n                    setter.setBaseColor(CuiColor.create(event.arg.color));\r\n                break;\r\n            case \"mainColorMuted\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                setter = this.getBaseColorSetter(event.arg.palette);\r\n                if (setter)\r\n                    setter.setMutedColor(CuiColor.create(event.arg.color));\r\n                break;\r\n            case \"mainColorActive\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                setter = this.getBaseColorSetter(event.arg.palette);\r\n                if (setter)\r\n                    setter.setActiveColor(CuiColor.create(event.arg.color));\r\n                break;\r\n            case \"themeAutoColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setAutoColors(CuiColor.create(event.arg.color));\r\n            case \"themeBaseColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setAutoColors(CuiColor.create(event.arg.color));\r\n            case \"themeMutedColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setMutedColor(CuiColor.create(event.arg.color));\r\n            case \"themeActiveColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setActiveColor(CuiColor.create(event.arg.color));\r\n            case \"themeShadeColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setShadeColor(CuiColor.create(event.arg.color));\r\n            case \"themeShadeDarkColor\":\r\n                if (!this.isArgColor(event.arg))\r\n                    return;\r\n                accentSetter = this.getAccentColorSetter(event.arg.palette);\r\n                if (accentSetter)\r\n                    accentSetter.setShadeDarkColor(CuiColor.create(event.arg.color));\r\n            default:\r\n                __classPrivateFieldGet(this, _log).warning(\"Unknown event method\", \"onCssChange\");\r\n        }\r\n    }\r\n    isArgNumber(arg) {\r\n        return is(arg) && is(arg.value);\r\n    }\r\n    isArgColor(arg) {\r\n        return is(arg) && is(arg.palette) && is(arg.color);\r\n    }\r\n    getBaseColorSetter(pallete) {\r\n        if (!this.handler) {\r\n            return undefined;\r\n        }\r\n        let prerp = pallete.trim().toLowerCase();\r\n        switch (prerp) {\r\n            case \"light\":\r\n                return this.handler.getBaseColorsSetter();\r\n            case \"dark\":\r\n                return this.handler.getDarkBaseColorsSetter();\r\n        }\r\n    }\r\n    getAccentColorSetter(pallete) {\r\n        if (!this.handler) {\r\n            return undefined;\r\n        }\r\n        let prerp = pallete.trim().toLowerCase();\r\n        switch (prerp) {\r\n            case \"accent\":\r\n                return this.handler.getAccentThemeColorsSetter();\r\n            case \"secondary\":\r\n                return this.handler.getSecondaryThemeColorsSetter();\r\n            case \"error\":\r\n                return this.handler.getErrorThemeColorsSetter();\r\n            case \"warning\":\r\n                return this.handler.getWarningThemeColorsSetter();\r\n            case \"success\":\r\n                return this.handler.getSuccessThemeColorsSetter();\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n}\r\n_log = new WeakMap();\r\n","import { CuiWindowClickPlugin } from \"./click/click\";\r\nimport { CuiKeysObserverPlugin } from \"./keys/keys\";\r\nimport { CuiAutoLightModePlugin } from \"./light/light\";\r\nimport { CuiAutoPrintModePlugin } from \"./print/print\";\r\nimport { CuiCSSVariablesPlugin } from \"./properties/properties\";\r\nexport function GetPlugins(init) {\r\n    let light = init ? init.autoLight : true;\r\n    let print = init ? init.autoPrint : true;\r\n    return [\r\n        new CuiAutoLightModePlugin({ autoLight: light }),\r\n        new CuiAutoPrintModePlugin({ autoPrint: print }),\r\n        new CuiKeysObserverPlugin({}),\r\n        new CuiWindowClickPlugin(),\r\n        new CuiCSSVariablesPlugin({})\r\n    ];\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _limit;\r\nexport class FastDom {\r\n    constructor() {\r\n        this.isScheduled = false;\r\n        _limit.set(this, void 0);\r\n        this.raf = window.requestAnimationFrame.bind(window);\r\n        this.writes = [];\r\n        this.reads = [];\r\n        __classPrivateFieldSet(this, _limit, 5);\r\n    }\r\n    mutate(callback, ctx, ...args) {\r\n        this.reads.push(this.createTask(callback, ctx, ...args));\r\n        this.schedule();\r\n    }\r\n    fetch(callback, ctx, ...args) {\r\n        this.writes.push(this.createTask(callback, ctx, ...args));\r\n        this.schedule();\r\n    }\r\n    createTask(callback, ctx, ...args) {\r\n        return ctx || args ? callback.bind(ctx, ...args) : callback;\r\n    }\r\n    run(tasks) {\r\n        let task = null;\r\n        while (task = tasks.shift()) {\r\n            task();\r\n        }\r\n    }\r\n    schedule(recursion) {\r\n        if (!this.isScheduled) {\r\n            this.isScheduled = true;\r\n            if (recursion && recursion >= __classPrivateFieldGet(this, _limit)) {\r\n                throw new Error(\"Fast Dom limit reached\");\r\n            }\r\n            else {\r\n                this.raf(this.flush.bind(this, recursion));\r\n            }\r\n        }\r\n    }\r\n    flush(recursion) {\r\n        let rec = recursion !== null && recursion !== void 0 ? recursion : 0;\r\n        let error = null;\r\n        let writes = this.writes;\r\n        let reads = this.reads;\r\n        try {\r\n            this.run(reads);\r\n            this.run(writes);\r\n        }\r\n        catch (e) {\r\n            error = e;\r\n            console.error(e);\r\n        }\r\n        this.isScheduled = false;\r\n        if (error) {\r\n            this.schedule(rec + 1);\r\n        }\r\n        if (this.writes.length || this.reads.length) {\r\n            this.schedule(rec + 1);\r\n        }\r\n    }\r\n}\r\n_limit = new WeakMap();\r\nexport class SyncInteractions {\r\n    constructor() {\r\n        this.isRunning = false;\r\n        this.tasks = [];\r\n        this.raf = window.requestAnimationFrame.bind(window);\r\n    }\r\n    mutate(callback, ctx, ...args) {\r\n        this.tasks.push(this.createTask(callback, ctx, ...args));\r\n        this.schedule();\r\n    }\r\n    fetch(callback, ctx, ...args) {\r\n        this.tasks.push(this.createTask(callback, ctx, ...args));\r\n        this.schedule();\r\n    }\r\n    schedule() {\r\n        if (!this.isRunning) {\r\n            this.isRunning = true;\r\n            this.raf(this.flush.bind(this));\r\n        }\r\n    }\r\n    flush() {\r\n        let task = null;\r\n        while (task = this.tasks.shift()) {\r\n            try {\r\n                task();\r\n            }\r\n            catch (e) {\r\n            }\r\n        }\r\n        this.isRunning = false;\r\n    }\r\n    createTask(callback, ctx, ...args) {\r\n        return ctx || args ? callback.bind(ctx, ...args) : callback;\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _keys, _values;\r\nimport { ItemNotFoundError, ArgumentError } from \"../models/errors\";\r\nimport { is } from \"./functions\";\r\nexport class CuiDictionary {\r\n    constructor(init) {\r\n        _keys.set(this, void 0);\r\n        _values.set(this, void 0);\r\n        __classPrivateFieldSet(this, _keys, []);\r\n        __classPrivateFieldSet(this, _values, []);\r\n        if (init) {\r\n            init.forEach(x => {\r\n                if (!is(x.key)) {\r\n                    __classPrivateFieldSet(this, _keys, []);\r\n                    __classPrivateFieldSet(this, _values, []);\r\n                    throw new ArgumentError(\"Key is empty\");\r\n                }\r\n                this.add(x.key, x.value);\r\n            });\r\n        }\r\n    }\r\n    add(key, value) {\r\n        this.throwOnEmptyKey(key);\r\n        if (this.containsKey(key))\r\n            throw new Error(\"Key already exists\");\r\n        __classPrivateFieldGet(this, _keys).push(key);\r\n        __classPrivateFieldGet(this, _values).push(value);\r\n    }\r\n    remove(key) {\r\n        if (!is(key)) {\r\n            return;\r\n        }\r\n        let index = __classPrivateFieldGet(this, _keys).indexOf(key);\r\n        if (index >= 0) {\r\n            __classPrivateFieldGet(this, _keys).splice(index, 1);\r\n            __classPrivateFieldGet(this, _values).splice(index, 1);\r\n        }\r\n    }\r\n    get(key) {\r\n        this.throwOnEmptyKey(key);\r\n        let index = this.indexOf(key);\r\n        if (index < 0) {\r\n            return undefined;\r\n        }\r\n        return __classPrivateFieldGet(this, _values)[index];\r\n    }\r\n    containsKey(key) {\r\n        return is(key) && this.indexOf(key) >= 0;\r\n    }\r\n    keys() {\r\n        return __classPrivateFieldGet(this, _keys);\r\n    }\r\n    values() {\r\n        return __classPrivateFieldGet(this, _values);\r\n    }\r\n    indexOf(key) {\r\n        return is(key) ? __classPrivateFieldGet(this, _keys).indexOf(key) : -1;\r\n    }\r\n    update(key, value) {\r\n        this.throwOnEmptyKey(key);\r\n        let index = this.indexOf(key);\r\n        if (index < 0) {\r\n            throw new ItemNotFoundError(`Item with key [${key}] not found`);\r\n        }\r\n        __classPrivateFieldGet(this, _values)[index] = value;\r\n    }\r\n    clear() {\r\n        __classPrivateFieldSet(this, _values, []);\r\n        __classPrivateFieldSet(this, _keys, []);\r\n    }\r\n    throwOnEmptyKey(key) {\r\n        if (!is(key)) {\r\n            throw new ArgumentError(\"Key is empty\");\r\n        }\r\n    }\r\n}\r\n_keys = new WeakMap(), _values = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _cache, _maxSize;\r\nimport { CuiDictionary } from \"../utils/dictionary\";\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiCacheManager {\r\n    constructor(maxSize) {\r\n        _cache.set(this, void 0);\r\n        _maxSize.set(this, void 0);\r\n        __classPrivateFieldSet(this, _cache, new CuiDictionary());\r\n        __classPrivateFieldSet(this, _maxSize, maxSize !== null && maxSize !== void 0 ? maxSize : 500);\r\n    }\r\n    put(key, element) {\r\n        if (!is(key))\r\n            return;\r\n        if (this.has(key)) {\r\n            __classPrivateFieldGet(this, _cache).update(key, element);\r\n            return;\r\n        }\r\n        this.clean();\r\n        __classPrivateFieldGet(this, _cache).add(key, element);\r\n    }\r\n    get(key) {\r\n        if (!this.has(key))\r\n            return undefined;\r\n        let item = __classPrivateFieldGet(this, _cache).get(key);\r\n        if (item && item.refresh()) {\r\n            return item;\r\n        }\r\n        __classPrivateFieldGet(this, _cache).remove(key);\r\n        return undefined;\r\n    }\r\n    has(key) {\r\n        return is(key) ? __classPrivateFieldGet(this, _cache).containsKey(key) : false;\r\n    }\r\n    remove(key) {\r\n        if (!is(key))\r\n            return false;\r\n        if (this.has(key)) {\r\n            __classPrivateFieldGet(this, _cache).remove(key);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    clear() {\r\n        __classPrivateFieldGet(this, _cache).clear();\r\n    }\r\n    clean() {\r\n        if (__classPrivateFieldGet(this, _cache).keys().length >= __classPrivateFieldGet(this, _maxSize)) {\r\n            __classPrivateFieldGet(this, _cache).remove(__classPrivateFieldGet(this, _cache).keys()[0]);\r\n        }\r\n    }\r\n}\r\n_cache = new WeakMap(), _maxSize = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _log, _executor, _executor_1;\r\nimport { is } from \"../utils/functions\";\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\nclass EmitHandlerBase {\r\n    constructor() {\r\n        this.queue = [];\r\n        this.isBusy = false;\r\n    }\r\n    idMatches(emitId, handleId) {\r\n        return !is(emitId) || (is(emitId) && emitId == handleId);\r\n    }\r\n}\r\nexport class SimpleEventEmitHandler extends EmitHandlerBase {\r\n    constructor(executor) {\r\n        super();\r\n        _log.set(this, void 0);\r\n        _executor.set(this, void 0);\r\n        __classPrivateFieldSet(this, _executor, executor);\r\n        __classPrivateFieldSet(this, _log, CuiLoggerFactory.get(\"SimpleEventEmitHandler\"));\r\n    }\r\n    handle(events, cuid, args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(events)) {\r\n                __classPrivateFieldGet(this, _log).warning(\"No events provided\");\r\n                return;\r\n            }\r\n            this.queue.push({\r\n                events: events,\r\n                cuid: cuid,\r\n                args: args\r\n            });\r\n            if (!this.isBusy) {\r\n                if (!this.isBusy) {\r\n                    this.isBusy = true;\r\n                    this.perform();\r\n                    if (this.queue.length > 0) {\r\n                        yield this.perform();\r\n                    }\r\n                    this.isBusy = false;\r\n                }\r\n            }\r\n            return;\r\n        });\r\n    }\r\n    perform() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let task = this.queue.shift();\r\n            if (!task) {\r\n                return;\r\n            }\r\n            for (let id in task.events) {\r\n                let event = task.events[id];\r\n                try {\r\n                    if (this.idMatches(task.cuid, event.$cuid))\r\n                        yield __classPrivateFieldGet(this, _executor).execute(event.callback, task.args);\r\n                }\r\n                catch (e) {\r\n                    __classPrivateFieldGet(this, _log).error(e);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n_log = new WeakMap(), _executor = new WeakMap();\r\nexport class TaskedEventEmitHandler extends EmitHandlerBase {\r\n    constructor(executor) {\r\n        super();\r\n        _executor_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _executor_1, executor);\r\n    }\r\n    handle(events, cuid, args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(events)) {\r\n                return;\r\n            }\r\n            this.queue.push({\r\n                events: events,\r\n                cuid: cuid,\r\n                args: args\r\n            });\r\n            if (!this.isBusy) {\r\n                this.isBusy = true;\r\n                this.perform();\r\n                if (this.queue.length > 0) {\r\n                    this.perform();\r\n                }\r\n                this.isBusy = false;\r\n            }\r\n            return;\r\n        });\r\n    }\r\n    perform() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let task = this.queue.shift();\r\n            let promises = [];\r\n            if (!task) {\r\n                return Promise.all(promises);\r\n            }\r\n            for (let id in task.events) {\r\n                let event = task.events[id];\r\n                if (this.idMatches(task.cuid, event.$cuid))\r\n                    promises.push(__classPrivateFieldGet(this, _executor_1).execute(event.callback, task.args));\r\n            }\r\n            return Promise.all(promises);\r\n        });\r\n    }\r\n}\r\n_executor_1 = new WeakMap();\r\nexport class CuiEventEmitHandlerFactory {\r\n    static get(name, executor) {\r\n        switch (name) {\r\n            case \"tasked\":\r\n                return new TaskedEventEmitHandler(executor);\r\n            default:\r\n                return new SimpleEventEmitHandler(executor);\r\n        }\r\n    }\r\n}\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nexport class CuiCallbackExecutor {\r\n    execute(callback, args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            args = args !== null && args !== void 0 ? args : [];\r\n            callback(...args);\r\n            return;\r\n        });\r\n    }\r\n}\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _events, _log, _eventHandler, _name, _events_1, _log_1, _buses, _last, _isOn, _statistics;\r\nimport { is, are, generateRandomString, enumerateObject } from \"../utils/functions\";\r\nimport { ArgumentError } from \"../models/errors\";\r\nimport { CuiLoggerFactory } from \"../factories/logger\";\r\nimport { CuiEventEmitHandlerFactory, TaskedEventEmitHandler } from \"./handlers\";\r\nimport { CuiCallbackExecutor } from \"./executors\";\r\nexport class CuiEventBus {\r\n    constructor(emitHandler, name) {\r\n        _events.set(this, void 0);\r\n        _log.set(this, void 0);\r\n        _eventHandler.set(this, void 0);\r\n        _name.set(this, void 0);\r\n        __classPrivateFieldSet(this, _events, {});\r\n        __classPrivateFieldSet(this, _eventHandler, emitHandler);\r\n        __classPrivateFieldSet(this, _name, name !== null && name !== void 0 ? name : \"CuiEventBus\");\r\n        __classPrivateFieldSet(this, _log, CuiLoggerFactory.get(__classPrivateFieldGet(this, _name)));\r\n    }\r\n    /**\r\n     * Attaches event to event bus\r\n     *\r\n     * @param {string} name - Event name\r\n     * @param {any} callback - callback function\r\n     * @param {CuiContext} ctx - callback context with id\r\n     * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n     */\r\n    on(name, callback, cui) {\r\n        if (!are(name, callback)) {\r\n            throw new ArgumentError(\"Missing argument\");\r\n        }\r\n        // When context is not provided (e.g. anonymous function) then generate random\r\n        let id = __classPrivateFieldGet(this, _name) + \"-\" + generateRandomString();\r\n        if (!__classPrivateFieldGet(this, _events)[name]) {\r\n            __classPrivateFieldGet(this, _events)[name] = {};\r\n        }\r\n        if (this.isAttached(__classPrivateFieldGet(this, _events)[name], id, cui)) {\r\n            return null;\r\n        }\r\n        __classPrivateFieldGet(this, _log).debug(`Attaching new event: [${name}] for: [${id}]`);\r\n        __classPrivateFieldGet(this, _events)[name][id] = { callback: callback, $cuid: this.getCuid(cui) };\r\n        return id;\r\n    }\r\n    /**\r\n    * Detaches specific event from event bus\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {CuiContext} ctx - callback context with id\r\n    * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n    */\r\n    detach(name, id) {\r\n        if (!are(name, id)) {\r\n            throw new ArgumentError(\"Missing argument\");\r\n        }\r\n        let ev = __classPrivateFieldGet(this, _events)[name];\r\n        __classPrivateFieldGet(this, _log).debug(`Detaching item: [${id}] from [${name}]`);\r\n        if (this.isAttached(ev, id)) {\r\n            delete ev[id];\r\n        }\r\n    }\r\n    /**\r\n    * Detaches all callbacks from event\r\n    *\r\n    * @param {string} name - Event name\r\n    */\r\n    detachAll(name) {\r\n        if (is(name) && __classPrivateFieldGet(this, _events)[name]) {\r\n            delete __classPrivateFieldGet(this, _events)[name];\r\n        }\r\n        else {\r\n            __classPrivateFieldGet(this, _log).error(`Event name is missing or incorrect`, \"detachAll\");\r\n        }\r\n    }\r\n    /**\r\n    * Emits event call to event bus\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {string} cuid - id of component which emits the event\r\n    * @param {any[]} args  - event arguments\r\n    */\r\n    emit(event, cuid, ...args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(event)) {\r\n                throw new ArgumentError(\"Event name is incorrect\");\r\n            }\r\n            let callbacks = __classPrivateFieldGet(this, _events)[event];\r\n            if (is(callbacks)) {\r\n                __classPrivateFieldGet(this, _log).debug(`Emit: [${event}]`);\r\n                yield __classPrivateFieldGet(this, _eventHandler).handle(__classPrivateFieldGet(this, _events)[event], cuid, args);\r\n            }\r\n            return true;\r\n        });\r\n    }\r\n    /**\r\n    * Checks whether given context is already attached to specific event\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {CuiContext} ctx - callback context with id\r\n    * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n    */\r\n    isSubscribing(name, id, cui) {\r\n        let ev = __classPrivateFieldGet(this, _events)[name];\r\n        return this.isAttached(ev, id, cui);\r\n    }\r\n    /**\r\n     * Detaches callbacks by component cuid - this is used to clean up attachments on component deletion\r\n     * @param {string} event - event name\r\n     * @param {string} cuid - cuid of the component\r\n     */\r\n    detachByCuid(event, cuid) {\r\n        if (!are(event, cuid)) {\r\n            return;\r\n        }\r\n        let ev = __classPrivateFieldGet(this, _events)[event];\r\n        if (!is(ev)) {\r\n            return;\r\n        }\r\n        enumerateObject(Object.assign({}, ev), (evId, evValue) => {\r\n            if (evValue.$cuid === cuid) {\r\n                delete ev[evId];\r\n            }\r\n        });\r\n    }\r\n    isAttached(ev, id, cui) {\r\n        if (is(cui)) {\r\n            // @ts-ignore\r\n            return is(ev) && is(id) && is(ev[id]) && ev[id].$cuid == cui.$cuid;\r\n        }\r\n        return is(ev) && is(id) && is(ev[id]);\r\n    }\r\n    getCuid(cui) {\r\n        // @ts-ignore\r\n        return is(cui) ? cui.$cuid : null;\r\n    }\r\n}\r\n_events = new WeakMap(), _log = new WeakMap(), _eventHandler = new WeakMap(), _name = new WeakMap();\r\nexport class CuiEventExtBus {\r\n    constructor(setup) {\r\n        _events_1.set(this, void 0);\r\n        _log_1.set(this, void 0);\r\n        _buses.set(this, void 0);\r\n        _last.set(this, void 0);\r\n        __classPrivateFieldSet(this, _log_1, CuiLoggerFactory.get(\"CuiEventBus\"));\r\n        __classPrivateFieldSet(this, _buses, []);\r\n        __classPrivateFieldSet(this, _events_1, {});\r\n        __classPrivateFieldSet(this, _last, 0);\r\n        if (is(setup)) {\r\n            __classPrivateFieldGet(this, _log_1).debug(\"Initiating buses\");\r\n            let sorted = setup.length === 1 ? setup : setup.sort((first, second) => {\r\n                return first.priority - second.priority;\r\n            });\r\n            sorted.forEach((item, index) => {\r\n                __classPrivateFieldGet(this, _buses).push(this.initBusInstance(item.name, item.handler));\r\n                __classPrivateFieldSet(this, _events_1, Object.assign(Object.assign({}, __classPrivateFieldGet(this, _events_1)), this.mapEvents(item.eventsDef, index)));\r\n                __classPrivateFieldGet(this, _log_1).debug(`Bus ${item.name} has been initialized with number: ${index}`);\r\n            });\r\n            __classPrivateFieldGet(this, _buses).push(this.initBusInstance(\"DefaultEventBus\", 'tasked'));\r\n            __classPrivateFieldSet(this, _last, __classPrivateFieldGet(this, _buses).length - 1);\r\n            __classPrivateFieldGet(this, _log_1).debug(`Bus initialization finished`);\r\n        }\r\n    }\r\n    /**\r\n     * Attaches event to event bus\r\n     *\r\n     * @param {string} name - Event name\r\n     * @param {any} callback - callback function\r\n     * @param {CuiContext} ctx - callback context with id\r\n     * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n     */\r\n    on(name, callback, cui) {\r\n        if (!are(name, callback)) {\r\n            throw new ArgumentError(\"Missing argument\");\r\n        }\r\n        return this.get(name).on(name, callback, cui);\r\n    }\r\n    /**\r\n    * Detaches specific event from event bus\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {CuiContext} ctx - callback context with id\r\n    * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n    */\r\n    detach(name, id, cui) {\r\n        if (!are(name, id)) {\r\n            throw new ArgumentError(\"Missing argument\");\r\n        }\r\n        this.get(name).detach(name, id, cui);\r\n    }\r\n    /**\r\n    * Detaches all callbacks from event\r\n    *\r\n    * @param {string} name - Event name\r\n    */\r\n    detachAll(name) {\r\n        this.get(name).detachAll(name);\r\n    }\r\n    /**\r\n    * Emits event call to event bus\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {string} cuid - id of component which emits the event\r\n    * @param {any[]} args  - event arguments\r\n    */\r\n    emit(event, cuid, ...args) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(event)) {\r\n                throw new ArgumentError(\"Event name is incorrect\");\r\n            }\r\n            return this.get(event).emit(event, cuid, ...args);\r\n        });\r\n    }\r\n    /**\r\n    * Checks whether given context is already attached to specific event\r\n    *\r\n    * @param {string} name - Event name\r\n    * @param {CuiContext} ctx - callback context with id\r\n    * @param {CuiElement} cui - optional - cui element which event shall be attached to\r\n    */\r\n    isSubscribing(name, id, cui) {\r\n        return this.get(name).isSubscribing(name, id, cui);\r\n    }\r\n    /**\r\n    * Detaches callbacks by component cuid - this is used to clean up attachments on component deletion\r\n    * @param {string} event - event name\r\n    * @param {string} cuid - cuid of the component\r\n    */\r\n    detachByCuid(event, cuid) {\r\n        if (!are(event, cuid)) {\r\n            return;\r\n        }\r\n        this.get(event).detachByCuid(event, cuid);\r\n    }\r\n    /**\r\n     * Creates and initializes event bus instance\r\n     * @param busName Event bus name for logger\r\n     * @param handlerName handler name to create proper handler instance\r\n     */\r\n    initBusInstance(busName, handlerName) {\r\n        if (!are(busName, handlerName)) {\r\n            throw new ArgumentError(\"Bus name or handler name is incorrect\");\r\n        }\r\n        let executor = new CuiCallbackExecutor();\r\n        let handler = CuiEventEmitHandlerFactory.get(handlerName, executor);\r\n        return new CuiEventBus(handler, busName);\r\n    }\r\n    /**\r\n     * Creates mapping object from events array\r\n     * @param events events array\r\n     * @param index queue number\r\n     */\r\n    mapEvents(events, index) {\r\n        return events.reduce((result, current) => {\r\n            if (!result[current]) {\r\n                return Object.assign(Object.assign({}, result), { [current]: index });\r\n            }\r\n            return result;\r\n        }, {});\r\n    }\r\n    /**\r\n     * Retrives porper event bus based on event name\r\n     * @param event\r\n     */\r\n    get(event) {\r\n        let idx = __classPrivateFieldGet(this, _events_1)[event];\r\n        return __classPrivateFieldGet(this, _buses)[idx !== null && idx !== void 0 ? idx : __classPrivateFieldGet(this, _last)];\r\n    }\r\n}\r\n_events_1 = new WeakMap(), _log_1 = new WeakMap(), _buses = new WeakMap(), _last = new WeakMap();\r\nexport class CuiEventBusFactory {\r\n    static get(setup) {\r\n        //@ts-ignore - setup is underfined check is perfromed\r\n        return is(setup) ? new CuiEventExtBus(setup) : new CuiEventBus(new TaskedEventEmitHandler(new CuiCallbackExecutor));\r\n    }\r\n}\r\nexport class CuiBusExtStatisticsHandler {\r\n    constructor(gather, queueCount) {\r\n        _isOn.set(this, void 0);\r\n        _statistics.set(this, void 0);\r\n        __classPrivateFieldSet(this, _isOn, gather);\r\n        __classPrivateFieldSet(this, _statistics, {\r\n            queueCount: queueCount,\r\n            events: {}\r\n        });\r\n    }\r\n    addEvent(event, queueNumber, emitCount) {\r\n        __classPrivateFieldGet(this, _statistics).events[event] = {\r\n            name: event,\r\n            queueNumber: queueNumber,\r\n            emits: emitCount !== null && emitCount !== void 0 ? emitCount : 0\r\n        };\r\n    }\r\n    addQueue() {\r\n        __classPrivateFieldGet(this, _statistics).queueCount += 1;\r\n    }\r\n    addEmit(event, queueNumber) {\r\n        if (!__classPrivateFieldGet(this, _isOn)) {\r\n            return;\r\n        }\r\n        if (__classPrivateFieldGet(this, _statistics).events[event]) {\r\n            __classPrivateFieldGet(this, _statistics).events[event].emits += 1;\r\n        }\r\n        else {\r\n            this.addEvent(event, queueNumber !== null && queueNumber !== void 0 ? queueNumber : -1, 1);\r\n        }\r\n    }\r\n    getStatistics() {\r\n        return __classPrivateFieldGet(this, _statistics);\r\n    }\r\n}\r\n_isOn = new WeakMap(), _statistics = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar _interactions;\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiDocumentStyleAppender {\r\n    constructor(interactions) {\r\n        _interactions.set(this, void 0);\r\n        __classPrivateFieldSet(this, _interactions, interactions);\r\n    }\r\n    append(style) {\r\n        if (is(style)) {\r\n            const head = document.head || document.getElementsByTagName('head')[0];\r\n            const node = document.createElement('style');\r\n            const text = document.createTextNode(style);\r\n            node.type = 'text/css';\r\n            node.appendChild(text);\r\n            head.appendChild(node);\r\n        }\r\n        return true;\r\n    }\r\n}\r\n_interactions = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _root, _interactions, _LIGHTEN_FACTOR, _DARKEN_FACTOR;\r\nimport { is, getRangeValue, are } from \"../utils/functions\";\r\nimport { CSS_APP_BACKGROUND_COLORS, CSS_COMPONENT_BACKGROUND_COLORS, CSS_COMPONENT_BORDER_COLORS, CSS_THEMES } from \"../utils/statics\";\r\nexport class CuiInstanceColorHandler {\r\n    constructor(interactions) {\r\n        _root.set(this, void 0);\r\n        _interactions.set(this, void 0);\r\n        _LIGHTEN_FACTOR.set(this, 15);\r\n        _DARKEN_FACTOR.set(this, 15);\r\n        __classPrivateFieldSet(this, _root, document.documentElement);\r\n        __classPrivateFieldSet(this, _interactions, interactions);\r\n    }\r\n    setAppBackground(light, dark) {\r\n        this.setPropertyIn(CSS_APP_BACKGROUND_COLORS.light, light.toCssString());\r\n        this.setPropertyIn(CSS_APP_BACKGROUND_COLORS.dark, dark.toCssString());\r\n    }\r\n    setComponentBackground(light, dark) {\r\n        this.setPropertyIn(CSS_COMPONENT_BACKGROUND_COLORS.light, light.toCssString());\r\n        this.setPropertyIn(CSS_COMPONENT_BACKGROUND_COLORS.dark, dark.toCssString());\r\n    }\r\n    setBordersColors(light, dark) {\r\n        this.setPropertyIn(CSS_COMPONENT_BORDER_COLORS.light, light.toCssString());\r\n        this.setPropertyIn(CSS_COMPONENT_BORDER_COLORS.dark, dark.toCssString());\r\n    }\r\n    setColor(type, set) {\r\n        var _a, _b;\r\n        const colors = CSS_THEMES[type];\r\n        const baseColor = set.base;\r\n        if (!is(colors) || !is(baseColor)) {\r\n            return;\r\n        }\r\n        const mutedColor = (_a = set.muted) !== null && _a !== void 0 ? _a : baseColor.clone().lighten(__classPrivateFieldGet(this, _LIGHTEN_FACTOR));\r\n        const activeColor = (_b = set.active) !== null && _b !== void 0 ? _b : baseColor.clone().darken(__classPrivateFieldGet(this, _DARKEN_FACTOR));\r\n        __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n            this.setProperty(colors.base, baseColor.toCssString());\r\n            this.setProperty(colors.active, activeColor.toCssString());\r\n            this.setProperty(colors.muted, mutedColor.toCssString());\r\n        }, this);\r\n    }\r\n    setLightenFactor(factor) {\r\n        __classPrivateFieldSet(this, _LIGHTEN_FACTOR, getRangeValue(factor, 0, 100));\r\n    }\r\n    setDarkenFactor(factor) {\r\n        __classPrivateFieldSet(this, _DARKEN_FACTOR, getRangeValue(factor, 0, 100));\r\n    }\r\n    setProperty(propertyName, value) {\r\n        __classPrivateFieldGet(this, _root).style.setProperty(propertyName, value);\r\n    }\r\n    setPropertyIn(propertyName, value) {\r\n        if (!are(value, propertyName)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _interactions).mutate(this.setProperty, this, propertyName, value);\r\n    }\r\n}\r\n_root = new WeakMap(), _interactions = new WeakMap(), _LIGHTEN_FACTOR = new WeakMap(), _DARKEN_FACTOR = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _items, _promises, _prevYValue, _inProgress, _previousSize, _threshold, _bus;\r\nimport { calcWindowSize } from \"../utils/functions\";\r\nimport { EVENTS } from \"../utils/statics\";\r\nexport class CuiResizeObserver {\r\n    constructor(bus, threshold) {\r\n        _items.set(this, void 0);\r\n        _promises.set(this, void 0);\r\n        _prevYValue.set(this, void 0);\r\n        _inProgress.set(this, void 0);\r\n        _previousSize.set(this, void 0);\r\n        _threshold.set(this, void 0);\r\n        _bus.set(this, void 0);\r\n        __classPrivateFieldSet(this, _items, []);\r\n        __classPrivateFieldSet(this, _promises, []);\r\n        __classPrivateFieldSet(this, _prevYValue, window.innerWidth);\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n        __classPrivateFieldSet(this, _previousSize, calcWindowSize(window.innerWidth));\r\n        __classPrivateFieldSet(this, _threshold, threshold !== null && threshold !== void 0 ? threshold : 0);\r\n        __classPrivateFieldSet(this, _bus, bus);\r\n    }\r\n    observe(target) {\r\n        let idx = __classPrivateFieldGet(this, _items).findIndex(x => x === target);\r\n        if (idx < 0) {\r\n            __classPrivateFieldGet(this, _items).push(target);\r\n        }\r\n    }\r\n    unobserve(target) {\r\n        let idx = __classPrivateFieldGet(this, _items).findIndex(x => x === target);\r\n        if (idx >= 0) {\r\n            __classPrivateFieldGet(this, _items).splice(idx, 1);\r\n        }\r\n    }\r\n    connect() {\r\n        window.addEventListener('resize', this.listener.bind(this));\r\n    }\r\n    disconnect() {\r\n        window.removeEventListener('resize', this.listener.bind(this));\r\n    }\r\n    listener(ev) {\r\n        if (__classPrivateFieldGet(this, _inProgress)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _inProgress, true);\r\n        const diff = window.innerWidth - __classPrivateFieldGet(this, _prevYValue);\r\n        if (Math.abs(diff) >= __classPrivateFieldGet(this, _threshold)) {\r\n            const currentSize = calcWindowSize(window.innerWidth);\r\n            if (currentSize !== __classPrivateFieldGet(this, _previousSize)) {\r\n                const resizeData = {\r\n                    current: currentSize,\r\n                    previous: __classPrivateFieldGet(this, _previousSize),\r\n                    width: window.innerWidth,\r\n                    height: window.innerHeight,\r\n                    timestamp: Date.now()\r\n                };\r\n                __classPrivateFieldGet(this, _bus).emit(EVENTS.RESIZE, \"\", resizeData);\r\n                if (__classPrivateFieldGet(this, _items).length > 0) {\r\n                    __classPrivateFieldSet(this, _promises, []);\r\n                    __classPrivateFieldGet(this, _items).forEach(x => {\r\n                        __classPrivateFieldGet(this, _promises).push(x.resize(resizeData));\r\n                    });\r\n                    Promise.all(__classPrivateFieldGet(this, _promises));\r\n                    __classPrivateFieldSet(this, _promises, []);\r\n                }\r\n                __classPrivateFieldSet(this, _previousSize, currentSize);\r\n            }\r\n        }\r\n        __classPrivateFieldSet(this, _inProgress, false);\r\n    }\r\n}\r\n_items = new WeakMap(), _promises = new WeakMap(), _prevYValue = new WeakMap(), _inProgress = new WeakMap(), _previousSize = new WeakMap(), _threshold = new WeakMap(), _bus = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _tool;\r\nimport { is } from \"../utils/functions\";\r\nexport class CuiDevelopmentToolManager {\r\n    constructor(tool) {\r\n        _tool.set(this, void 0);\r\n        __classPrivateFieldSet(this, _tool, tool);\r\n    }\r\n    pushState(cuid, component, type, message, functionName) {\r\n        if (!is(__classPrivateFieldGet(this, _tool))) {\r\n            return;\r\n        }\r\n        // @ts-ignore - tool already checked\r\n        __classPrivateFieldGet(this, _tool).pushState(cuid, component, type, message, functionName);\r\n    }\r\n    registerElement(element, cuid, component) {\r\n        if (!is(__classPrivateFieldGet(this, _tool))) {\r\n            return;\r\n        }\r\n        // @ts-ignore - tool already checked\r\n        __classPrivateFieldGet(this, _tool).registerElement(element, cuid, component);\r\n    }\r\n    unregisterElement(cuid, component) {\r\n        if (!is(__classPrivateFieldGet(this, _tool))) {\r\n            return;\r\n        }\r\n        // @ts-ignore - tool already checked\r\n        __classPrivateFieldGet(this, _tool).unregisterElement(cuid, component);\r\n    }\r\n    setProperty(cuid, component, name, t) {\r\n        if (!is(__classPrivateFieldGet(this, _tool))) {\r\n            return;\r\n        }\r\n        // @ts-ignore - tool already checked\r\n        __classPrivateFieldGet(this, _tool).setProperty(cuid, component, name, t);\r\n    }\r\n}\r\n_tool = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _resizeObserver;\r\nimport { CuiSetup } from \"./setup\";\r\nimport { CuiInteractionsFactory } from \"../factories/interactions\";\r\nimport { CuiCacheManager } from \"../managers/cache\";\r\nimport { CuiEventBusFactory } from \"../bus/bus\";\r\nimport { are, getName, replacePrefix } from \"../utils/functions\";\r\nimport { CLASSES } from \"../utils/statics\";\r\nimport { CuiDocumentStyleAppender } from \"../styles/appender\";\r\nimport { CuiInstanceColorHandler } from \"../handlers/colors\";\r\nimport { CuiResizeObserver } from \"../observers/resize\";\r\nimport { CSSVariableError } from \"./errors\";\r\nimport { CuiDevelopmentToolManager } from \"../managers/development\";\r\nexport class CuiUtils {\r\n    constructor(initialSetup) {\r\n        _resizeObserver.set(this, void 0);\r\n        this.setup = new CuiSetup().fromInit(initialSetup);\r\n        this.interactions = CuiInteractionsFactory.get(initialSetup.interaction);\r\n        this.cache = new CuiCacheManager(this.setup.cacheSize);\r\n        this.bus = CuiEventBusFactory.get(initialSetup.busSetup);\r\n        this.colors = new CuiInstanceColorHandler(this.interactions);\r\n        this.development = new CuiDevelopmentToolManager(initialSetup.development);\r\n        this.styleAppender = new CuiDocumentStyleAppender(this.interactions);\r\n        __classPrivateFieldSet(this, _resizeObserver, new CuiResizeObserver(this.bus, this.setup.resizeThreshold));\r\n        __classPrivateFieldGet(this, _resizeObserver).connect();\r\n    }\r\n    setLightMode(mode) {\r\n        const name = getName(this.setup.prefix, CLASSES.dark);\r\n        const classes = document.body.classList;\r\n        if (mode === 'dark' && !classes.contains(name)) {\r\n            this.interactions.mutate(() => {\r\n                classes.add(name);\r\n            }, this);\r\n        }\r\n        else if (mode === 'light' && classes.contains(name)) {\r\n            this.interactions.mutate(() => {\r\n                classes.remove(name);\r\n            }, this);\r\n        }\r\n    }\r\n    getLightMode() {\r\n        const name = getName(this.setup.prefix, CLASSES.dark);\r\n        return document.body.classList.contains(name) ? 'dark' : 'light';\r\n    }\r\n    setPrintMode(flag) {\r\n        const name = getName(this.setup.prefix, CLASSES.print);\r\n        const classes = document.body.classList;\r\n        if (flag && !classes.contains(name)) {\r\n            classes.add(name);\r\n        }\r\n        else if (!flag && classes.contains(name)) {\r\n            classes.remove(name);\r\n        }\r\n    }\r\n    isPrintMode() {\r\n        const name = getName(this.setup.prefix, CLASSES.print);\r\n        return document.body.classList.contains(name);\r\n    }\r\n    setProperty(name, value) {\r\n        if (!are(name, value)) {\r\n            throw new CSSVariableError(\"Property or value was not provided\");\r\n        }\r\n        let prop = replacePrefix(name, this.setup.prefix);\r\n        document.documentElement.style.setProperty(prop, value);\r\n    }\r\n}\r\n_resizeObserver = new WeakMap();\r\n","import { FastDom, SyncInteractions } from \"../utils/interactions\";\r\nexport class CuiInteractionsFactory {\r\n    /**\r\n     * Gets new instance of component focused logger\r\n     * @param type - Interactions type\r\n     */\r\n    static get(type) {\r\n        const interactionType = type;\r\n        switch (interactionType) {\r\n            case 'async':\r\n                return new FastDom();\r\n            default:\r\n                return new SyncInteractions();\r\n        }\r\n    }\r\n}\r\n"],"sourceRoot":""}